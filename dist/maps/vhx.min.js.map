{"version":3,"sources":["vhx.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","window","location","href","match","HOST","PROTOCOL","API_VERSION","version","TIMEOUT","TOKEN_HOST","current_host","_VHX_DEFAULTS","../package.json","2","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","Paginate","resource","args","this","_this","response","body","options","page","method","last","Math","ceil","total","count","map","callback","goToPage","num","merge","_embedded","object","concat","value","parseInt","3","_typeof","Symbol","iterator","obj","constructor","request","paginate","Resource","api","path","methods","isToken","_api","init","forEach","item","getMethod","type","getType","params","http_method","client_method","b","c","isCallbackFunction","id","parseHref","scope","makeRequest","isObject","val","indexOf","host","substr","split","cb","protocol","post","set","$","attr","then","data","token","console","log","Date","getTime","url","timeout","auth","headers","Authorization","qs","getParams","undefined","getToken","ajaxRequest","withCredentials","query","end","err","errorHandler","status","statusCode","successHandler","get","error","JSON","parse","error_types","400","401","404","408","500","apply","./paginate","superagent","4","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","Browse","_Resource","getPrototypeOf","../resource","5","Collection","6","Customer","7","Product","8","Video","9","_interopRequireDefault","__esModule","default","_defaults","_defaults2","_collections","_collections2","_videos","_videos2","_customers","_customers2","_products","_products2","_browse","_browse2","resources","collections","videos","products","customer","browse","vhx","setApi","setToken","prepareResources","btoa","token_host","name","toLowerCase","substring","./defaults","./resources/browse","./resources/collections","./resources/customers","./resources/products","./resources/videos","10","Emitter","mixin","on","addEventListener","event","fn","_callbacks","push","once","off","arguments","removeListener","removeAllListeners","removeEventListener","callbacks","splice","emit","slice","len","listeners","hasListeners","11","noop","serialize","pairs","pushEncodedKeyValuePair","join","Array","isArray","v","subkey","encodeURIComponent","parseString","str","pair","pos","decodeURIComponent","parseHeader","index","line","field","lines","fields","pop","trim","isJSON","mime","test","shift","reduce","parts","Response","req","xhr","text","responseType","responseText","statusText","_setStatusProperties","header","getAllResponseHeaders","getResponseHeader","_setHeaderProperties","_parseBody","Request","_query","_header","res","original","rawResponse","new_err","del","root","warn","requestBase","bind","getXHR","XMLHttpRequest","ActiveXObject","replace","serializeObject","types","html","json","xml","urlencoded","form","form-data","application/x-www-form-urlencoded","application/json","stringify","ct","statusType","info","ok","clientError","serverError","toError","accepted","noContent","badRequest","unauthorized","notAcceptable","notFound","forbidden","msg","_responseType","accept","user","pass","username","password","attach","file","filename","_getFormData","append","_formData","FormData","_callback","clearTimeout","crossDomainError","crossDomain","_timeoutError","_timeout","_appendQueryString","_data","onreadystatechange","readyState","timedout","_aborted","handleProgress","percent","loaded","direction","onprogress","upload","_timer","setTimeout","abort","open","_withCredentials","_isHost","contentType","_serializer","setRequestHeader","send","head","patch","put","./is-object","./request","./request-base","emitter","12","13","_parser","ms","resolve","reject","_fullfilledPromise","Promise","innerResolve","innerReject","use","getHeader","unset","redirects","_maxRedirects","toJSON","toString","14","RequestConstructor","15","description","main","author","homepage","contributors","license","repository","bugs:","devDependencies","babel-cli","babel-preset-es2015","babelify","browserify","gulp","gulp-babel","gulp-browserify","gulp-livereload","gulp-sourcemaps","gulp-uglify","vinyl-buffer","vinyl-source-stream"],"mappings":"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","file":"vhx.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nif (window.location.href.match(/crystal/)) {\n  var _VHX_DEFAULTS2 = {\n    HOST: 'api.crystal.dev',\n    PROTOCOL: 'http://',\n    API_VERSION: require('../package.json').version,\n    TIMEOUT: '30000',\n    TOKEN_HOST: 'crystal.dev'\n  };\n}\n\nif (window.location.href.match(/vhx/)) {\n  var _VHX_DEFAULTS3 = {\n    HOST: 'api.vhx.tv',\n    PROTOCOL: 'https://',\n    API_VERSION: require('../package.json').version,\n    TIMEOUT: '30000',\n    TOKEN_HOST: 'vhx.tv'\n  };\n}\n\nif (window.location.href.match(/vhxqa1|vhxqa2|vhxqa3|vhxqa4/)) {\n  var current_host = window.location.href.match(/vhxqa1|vhxqa2|vhxqa3|vhxqa4/)[0];\n\n  var _VHX_DEFAULTS4 = {\n    HOST: current_host,\n    PROTOCOL: 'https://',\n    API_VERSION: require('../package.json').version,\n    TIMEOUT: '30000',\n    TOKEN_HOST: current_host + '.com'\n  };\n}\n\nmodule.exports = _VHX_DEFAULTS;\n\n},{\"../package.json\":15}],2:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Paginate = function () {\n  function Paginate(resource, args) {\n    _classCallCheck(this, Paginate);\n\n    var _this = this;\n\n    _this.resource = resource;\n    _this.response = args.body;\n    _this.options = args.options;\n    _this.page = _this.options.page ? _this.options.page : 1;\n    _this.method = args.method;\n    _this.last = Math.ceil(args.body.total / (args.body.count * _this.page));\n\n    ['nextPage', 'previousPage', 'firstPage', 'lastPage'].map(function (key) {\n      _this.response[key] = function (callback) {\n        _this[key](_this, callback);\n      };\n    });\n\n    _this.response.goToPage = function (num, callback) {\n      _this.goToPage(_this, num, callback);\n    };\n\n    _this.response.merge = function (_this) {\n      _this._embedded[_this.object] = this._embedded[_this.object].concat(_this._embedded[_this.object]);\n      _this.count = this.count + _this.count;\n\n      return _this;\n    };\n  }\n\n  _createClass(Paginate, [{\n    key: 'get',\n    value: function get() {\n      var _this = this;\n\n      return _this.response;\n    }\n  }, {\n    key: 'nextPage',\n    value: function nextPage(_this, callback) {\n      _this.options.page = _this.page + 1;\n\n      if (_this.options.page > _this.last) {\n        throw 'No more pages to request';\n      }\n\n      _this.resource[_this.method](_this.options, callback);\n    }\n  }, {\n    key: 'previousPage',\n    value: function previousPage(_this, callback) {\n      if (_this.page === 1) {\n        throw 'No previous pages to request';\n      }\n\n      _this.options.page = _this.page - 1;\n      _this.resource[_this.method](_this.options, callback);\n    }\n  }, {\n    key: 'firstPage',\n    value: function firstPage(_this, callback) {\n      _this.options.page = 1;\n      _this.resource[_this.method](_this.options, callback);\n    }\n  }, {\n    key: 'lastPage',\n    value: function lastPage(_this, callback) {\n      _this.options.page = _this.last;\n      _this.resource[_this.method](_this.options, callback);\n    }\n  }, {\n    key: 'goToPage',\n    value: function goToPage(_this, num, callback) {\n      num = parseInt(num, 10);\n\n      if (num > 0 && num <= _this.last) {\n        _this.options.page = num;\n        return _this.resource[_this.method](_this.options, callback);\n      }\n\n      throw 'You must pass a valid page number';\n    }\n  }]);\n\n  return Paginate;\n}();\n\nmodule.exports = Paginate;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar request = require('superagent');\nvar paginate = require('./paginate');\n\nvar Resource = function () {\n  function Resource(api, path, methods, isToken) {\n    _classCallCheck(this, Resource);\n\n    var _this = this;\n    _this._api = api;\n    _this.methods = methods;\n    _this.path = path;\n\n    _this.init();\n  }\n\n  _createClass(Resource, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      _this.methods.forEach(function (item) {\n        var method = _this.getMethod(item),\n            type = _this.getType(_this.path),\n            params = {\n          http_method: 'get', // superagent reads 'get' not 'GET'\n          client_method: method\n        };\n\n        if (method.match(/retrieve|items|files/i)) {\n          _this[method] = function (a, b, c) {\n            if (a[type]) {\n              if (_this.isCallbackFunction(b)) {\n                params.callback = b;\n              }\n              params.id = _this.parseHref(a[type]);\n              delete a[type];\n              params.options = a;\n            } else {\n              params.id = _this.parseHref(a);\n              if (_this.isCallbackFunction(b)) {\n                params.callback = b;\n              } else {\n                params.options = b;\n                params.callback = c;\n              }\n            }\n\n            params.scope = item.scope ? item.scope : null;\n            _this.makeRequest(params);\n          };\n        } else {\n          _this[method] = function (options, callback) {\n            params.options = options;\n            params.callback = callback;\n\n            _this.makeRequest(params);\n          };\n        }\n      });\n    }\n  }, {\n    key: 'getType',\n    value: function getType(resource) {\n      if (resource === 'collections') {\n        return 'collection';\n      }\n      if (resource === 'customers') {\n        return 'customer';\n      }\n      if (resource === 'videos') {\n        return 'video';\n      }\n\n      return 'id';\n    }\n  }, {\n    key: 'getMethod',\n    value: function getMethod(params) {\n      var _this = this;\n\n      if (_this.isObject(params) && params.method) {\n        return params.method;\n      } else {\n        return params;\n      }\n    }\n  }, {\n    key: 'parseHref',\n    value: function parseHref(href) {\n      var _this = this,\n          val = void 0;\n\n      if (parseInt(href, 10)) {\n        return href;\n      } else if (href.indexOf(_this._api.host) >= 0) {\n        if (href.substr(-1) === '/') {\n          href.substr(0, href.length - 1);\n        }\n        val = href.split('/');\n        return val[val.length - 1];\n      }\n    }\n  }, {\n    key: 'getToken',\n    value: function getToken(cb) {\n      var _this = this;\n      var path = '' + _this._api.protocol + window.location.host + '/tokens';\n\n      request.post(path).set('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content')).then(function (data) {\n        _this._api.token = data.body.token;\n        if (cb) cb();\n      }, function (data) {\n        console.log(data);\n      });\n    }\n  }, {\n    key: 'timeStamp',\n    value: function timeStamp() {\n      return new Date().getTime();\n    }\n  }, {\n    key: 'getParams',\n    value: function getParams(client_method, id, options, scope) {\n      var _this = this,\n          params = {};\n\n      if (id.match(/me|watching/)) {\n        params.url = '' + _this._api.protocol + _this._api.host + '/me/watching';\n      } else {\n        params.url = '' + _this._api.protocol + _this._api.host + '/' + _this.path;\n      }\n\n      params.timeout = _this._api.timeout;\n\n      if (_this._api.auth) {\n        params.headers = {\n          'Authorization': _this._api.auth\n        };\n      }\n\n      params.qs = options || null;\n\n      if (!client_method.match(/^list$|^all$/) && !id.match(/me|watching/)) {\n        params.url += '/' + id;\n      }\n\n      if (client_method.match(/items/i) && !id.match(/me|watching/)) {\n        params.url += '/items';\n      }\n\n      if (client_method.match(/files/i)) {\n        params.url += '/files';\n      }\n\n      if (scope) {\n        params.url += '/' + scope;\n      }\n\n      return params;\n    }\n  }, {\n    key: 'makeRequest',\n    value: function makeRequest(args) {\n      var _this = this;\n      var params = _this.getParams(args.client_method, args.id || null, args.options, args.scope);\n\n      if (_this.isCallbackFunction(args.options)) {\n        args.callback = args.options;\n      }\n\n      if (_this._api.token !== undefined) {\n        _this.getToken(function () {\n          params.headers = {\n            'Authorization': 'Bearer ' + _this._api.token\n          };\n\n          _this.ajaxRequest(args, params);\n        });\n      } else {\n        _this.ajaxRequest(args, params);\n      }\n    }\n  }, {\n    key: 'ajaxRequest',\n    value: function ajaxRequest(args, params) {\n      var _this = this;\n\n      request[args.http_method](params.url).withCredentials().set(params.headers || {}).set('Content-Type', 'application/json').query(params.qs).end(function (err, response) {\n        if (err && err.code === 'ETIMEDOUT') {\n          _this.errorHandler({\n            status: 408,\n            body: '{\"message\": \"The request timed out.\",\"documentation_url\": \"http://dev.vhx.tv/docs/api\"}',\n            callback: args.callback || ''\n          });\n        }\n\n        if (!err && response.statusCode >= 200 && response.statusCode < 300) {\n          _this.successHandler({\n            body: response.body || null,\n            callback: args.callback,\n            options: args.options,\n            object: _this.path,\n            method: args.client_method\n          });\n        } else {\n          _this.errorHandler({\n            status: 408,\n            body: '{\"message\": \"The request timed out.\",\"documentation_url\": \"http://dev.vhx.tv/docs/api\"}',\n            callback: args.callback || ''\n          });\n        }\n      });\n    }\n  }, {\n    key: 'successHandler',\n    value: function successHandler(args) {\n      var response = args.body;\n\n      if (args.body.count && args.body.count < args.body.total) {\n        response = new paginate(this, args).get();\n      }\n\n      response.object = args.object;\n\n      if (args.callback) {\n        args.callback(false, response);\n      }\n    }\n  }, {\n    key: 'errorHandler',\n    value: function errorHandler(args) {\n      var error = JSON.parse(args.body),\n          error_types = {\n        400: 'VHXInvalidRequestError',\n        401: 'VHXAuthenticationError',\n        404: 'VHXResourceNotFound',\n        408: 'VHXConnectionError',\n        500: 'VHXAPIError'\n      };\n\n      error.status = args.status;\n      error.type = error_types[error.status];\n\n      if (args.callback) {\n        args.callback(error, null);\n      }\n    }\n  }, {\n    key: 'isCallbackFunction',\n    value: function isCallbackFunction(obj) {\n      return !!(obj && obj.constructor && obj.call && obj.apply);\n    }\n  }, {\n    key: 'isObject',\n    value: function isObject(obj) {\n      var type = typeof obj === 'undefined' ? 'undefined' : _typeof(obj);\n      return type === 'function' || type === 'object' && !!obj;\n    }\n  }]);\n\n  return Resource;\n}();\n\n;\n\nmodule.exports = Resource;\n\n},{\"./paginate\":2,\"superagent\":11}],4:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Browse = function (_Resource) {\n  _inherits(Browse, _Resource);\n\n  function Browse(api) {\n    _classCallCheck(this, Browse);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Browse).call(this, api, 'browse', ['all', 'list']));\n  }\n\n  return Browse;\n}(Resource);\n\n;\n\nmodule.exports = Browse;\n\n},{\"../resource\":3}],5:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Collection = function (_Resource) {\n  _inherits(Collection, _Resource);\n\n  function Collection(api) {\n    _classCallCheck(this, Collection);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Collection).call(this, api, 'collections', ['all', 'list', 'items']));\n  }\n\n  return Collection;\n}(Resource);\n\n;\n\nmodule.exports = Collection;\n\n},{\"../resource\":3}],6:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Customer = function (_Resource) {\n  _inherits(Customer, _Resource);\n\n  function Customer(api) {\n    _classCallCheck(this, Customer);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Customer).call(this, api, 'customers', ['retrieve', 'all']));\n  }\n\n  return Customer;\n}(Resource);\n\n;\n\nmodule.exports = Customer;\n\n},{\"../resource\":3}],7:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Product = function (_Resource) {\n  _inherits(Product, _Resource);\n\n  function Product(api) {\n    _classCallCheck(this, Product);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Product).call(this, api, 'products', ['retrieve', 'all']));\n  }\n\n  return Product;\n}(Resource);\n\n;\n\nmodule.exports = Product;\n\n},{\"../resource\":3}],8:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Video = function (_Resource) {\n  _inherits(Video, _Resource);\n\n  function Video(api) {\n    _classCallCheck(this, Video);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Video).call(this, api, 'videos', ['all', 'retrieve', 'files']));\n  }\n\n  return Video;\n}(Resource);\n\n;\n\nmodule.exports = Video;\n\n},{\"../resource\":3}],9:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nvar _collections = require('./resources/collections');\n\nvar _collections2 = _interopRequireDefault(_collections);\n\nvar _videos = require('./resources/videos');\n\nvar _videos2 = _interopRequireDefault(_videos);\n\nvar _customers = require('./resources/customers');\n\nvar _customers2 = _interopRequireDefault(_customers);\n\nvar _products = require('./resources/products');\n\nvar _products2 = _interopRequireDefault(_products);\n\nvar _browse = require('./resources/browse');\n\nvar _browse2 = _interopRequireDefault(_browse);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar resources = {\n  collections: _collections2.default,\n  videos: _videos2.default,\n  products: _products2.default,\n  customer: _customers2.default,\n  browse: _browse2.default\n};\n\nvar vhx = function () {\n  function vhx(key) {\n    _classCallCheck(this, vhx);\n\n    var _this = this;\n\n    if (!(_this instanceof vhx)) {\n      return new vhx(key);\n    }\n\n    _this.api = key ? _this.setApi(key) : _this.setToken();\n    _this.prepareResources();\n  }\n\n  _createClass(vhx, [{\n    key: 'setApi',\n    value: function setApi(key) {\n      return {\n        auth: 'Basic ' + btoa(key),\n        host: _defaults2.default.HOST,\n        protocol: _defaults2.default.PROTOCOL,\n        timeout: _defaults2.default.TIMEOUT\n      };\n    }\n  }, {\n    key: 'setToken',\n    value: function setToken() {\n      return {\n        token: null,\n        host: _defaults2.default.HOST,\n        protocol: _defaults2.default.PROTOCOL,\n        timeout: _defaults2.default.TIMEOUT,\n        token_host: _defaults2.default.TOKEN_HOST\n      };\n    }\n  }, {\n    key: 'prepareResources',\n    value: function prepareResources() {\n      var _this = this;\n\n      for (var name in resources) {\n        _this[name[0].toLowerCase() + name.substring(1)] = new resources[name](_this.api);\n      }\n    }\n  }]);\n\n  return vhx;\n}();\n\nwindow.vhx = vhx;\n\n},{\"./defaults\":1,\"./resources/browse\":4,\"./resources/collections\":5,\"./resources/customers\":6,\"./resources/products\":7,\"./resources/videos\":8}],10:[function(require,module,exports){\n\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n\n},{}],11:[function(require,module,exports){\n/**\n * Root reference for iframes.\n */\n\nvar root;\nif (typeof window !== 'undefined') { // Browser window\n  root = window;\n} else if (typeof self !== 'undefined') { // Web Worker\n  root = self;\n} else { // Other environments\n  console.warn(\"Using browser-only version of superagent in non-browser environment\");\n  root = this;\n}\n\nvar Emitter = require('emitter');\nvar requestBase = require('./request-base');\nvar isObject = require('./is-object');\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Expose `request`.\n */\n\nvar request = module.exports = require('./request').bind(null, Request);\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  throw Error(\"Browser-only verison of superagent could not find XHR\");\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    if (null != obj[key]) {\n      pushEncodedKeyValuePair(pairs, key, obj[key]);\n    }\n  }\n  return pairs.join('&');\n}\n\n/**\n * Helps 'serialize' with serializing arrays.\n * Mutates the pairs array.\n *\n * @param {Array} pairs\n * @param {String} key\n * @param {Mixed} val\n */\n\nfunction pushEncodedKeyValuePair(pairs, key, val) {\n  if (Array.isArray(val)) {\n    return val.forEach(function(v) {\n      pushEncodedKeyValuePair(pairs, key, v);\n    });\n  } else if (isObject(val)) {\n    for(var subkey in val) {\n      pushEncodedKeyValuePair(pairs, key + '[' + subkey + ']', val[subkey]);\n    }\n    return;\n  }\n  pairs.push(encodeURIComponent(key)\n    + '=' + encodeURIComponent(val));\n}\n\n/**\n * Expose serialization method.\n */\n\n request.serializeObject = serialize;\n\n /**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var pair;\n  var pos;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    pos = pair.indexOf('=');\n    if (pos == -1) {\n      obj[decodeURIComponent(pair)] = '';\n    } else {\n      obj[decodeURIComponent(pair.slice(0, pos))] =\n        decodeURIComponent(pair.slice(pos + 1));\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'application/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\n request.serialize = {\n   'application/x-www-form-urlencoded': serialize,\n   'application/json': JSON.stringify\n };\n\n /**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  lines.pop(); // trailing CRLF\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Check if `mime` is json or has +json structured syntax suffix.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api private\n */\n\nfunction isJSON(mime) {\n  return /[\\/+]json\\b/.test(mime);\n}\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction type(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction params(str){\n  return str.split(/ *; */).reduce(function(obj, str){\n    var parts = str.split(/ *= */),\n        key = parts.shift(),\n        val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req, options) {\n  options = options || {};\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  this._setStatusProperties(this.xhr.status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this._setHeaderProperties(this.header);\n  this.body = this.req.method != 'HEAD'\n    ? this._parseBody(this.text ? this.text : this.xhr.response)\n    : null;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponse.prototype.get = function(field){\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponse.prototype._setHeaderProperties = function(header){\n  // content-type\n  var ct = this.header['content-type'] || '';\n  this.type = type(ct);\n\n  // params\n  var obj = params(ct);\n  for (var key in obj) this[key] = obj[key];\n};\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype._parseBody = function(str){\n  var parse = request.parse[this.type];\n  if (!parse && isJSON(this.type)) {\n    parse = request.parse['application/json'];\n  }\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponse.prototype._setStatusProperties = function(status){\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n\n  var type = status / 100 | 0;\n\n  // status / class\n  this.status = this.statusCode = status;\n  this.statusType = type;\n\n  // basics\n  this.info = 1 == type;\n  this.ok = 2 == type;\n  this.clientError = 4 == type;\n  this.serverError = 5 == type;\n  this.error = (4 == type || 5 == type)\n    ? this.toError()\n    : false;\n\n  // sugar\n  this.accepted = 202 == status;\n  this.noContent = 204 == status;\n  this.badRequest = 400 == status;\n  this.unauthorized = 401 == status;\n  this.notAcceptable = 406 == status;\n  this.notFound = 404 == status;\n  this.forbidden = 403 == status;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {}; // preserves header name case\n  this._header = {}; // coerces header names to lowercase\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      // issue #675: return the raw response if the response parsing fails\n      err.rawResponse = self.xhr && self.xhr.responseText ? self.xhr.responseText : null;\n      // issue #876: return the http status code if the response parsing fails\n      err.statusCode = self.xhr && self.xhr.status ? self.xhr.status : null;\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    var new_err;\n    try {\n      if (res.status < 200 || res.status >= 300) {\n        new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n        new_err.original = err;\n        new_err.response = res;\n        new_err.status = res.status;\n      }\n    } catch(e) {\n      new_err = e; // #985 touching res may cause INVALID_STATE_ERR on old Android\n    }\n\n    // #1000 don't catch errors from the callback to avoid double calling it\n    if (new_err) {\n      self.callback(new_err, res);\n    } else {\n      self.callback(null, res);\n    }\n  });\n}\n\n/**\n * Mixin `Emitter` and `requestBase`.\n */\n\nEmitter(Request.prototype);\nfor (var key in requestBase) {\n  Request.prototype[key] = requestBase[key];\n}\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set responseType to `val`. Presently valid responseTypes are 'blob' and\n * 'arraybuffer'.\n *\n * Examples:\n *\n *      req.get('/')\n *        .responseType('blob')\n *        .end(callback);\n *\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.responseType = function(val){\n  this._responseType = val;\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} pass\n * @param {Object} options with 'type' property 'auto' or 'basic' (default 'basic')\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass, options){\n  if (!options) {\n    options = {\n      type: 'basic'\n    }\n  }\n\n  switch (options.type) {\n    case 'basic':\n      var str = btoa(user + ':' + pass);\n      this.set('Authorization', 'Basic ' + str);\n    break;\n\n    case 'auto':\n      this.username = user;\n      this.password = pass;\n    break;\n  }\n  return this;\n};\n\n/**\n* Add query-string `val`.\n*\n* Examples:\n*\n*   request.get('/shoes')\n*     .query('size=10')\n*     .query({ color: 'blue' })\n*\n* @param {Object|String} val\n* @return {Request} for chaining\n* @api public\n*/\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `filename`.\n *\n * ``` js\n * request.post('/upload')\n *   .attach('content', new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String} filename\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, filename){\n  this._getFormData().append(field, file, filename || file.name);\n  return this;\n};\n\nRequest.prototype._getFormData = function(){\n  if (!this._formData) {\n    this._formData = new root.FormData();\n  }\n  return this._formData;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  var fn = this._callback;\n  this.clearTimeout();\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');\n  err.crossDomain = true;\n\n  err.status = this.status;\n  err.method = this.method;\n  err.url = this.url;\n\n  this.callback(err);\n};\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequest.prototype._timeoutError = function(){\n  var timeout = this._timeout;\n  var err = new Error('timeout of ' + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  this.callback(err);\n};\n\n/**\n * Compose querystring to append to req.url\n *\n * @api private\n */\n\nRequest.prototype._appendQueryString = function(){\n  var query = this._query.join('&');\n  if (query) {\n    this.url += ~this.url.indexOf('?')\n      ? '&' + query\n      : '?' + query;\n  }\n};\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  var self = this;\n  var xhr = this.xhr = request.getXHR();\n  var timeout = this._timeout;\n  var data = this._formData || this._data;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // state change\n  xhr.onreadystatechange = function(){\n    if (4 != xhr.readyState) return;\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (0 == status) {\n      if (self.timedout) return self._timeoutError();\n      if (self._aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(e){\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    e.direction = 'download';\n    self.emit('progress', e);\n  };\n  if (this.hasListeners('progress')) {\n    xhr.onprogress = handleProgress;\n  }\n  try {\n    if (xhr.upload && this.hasListeners('progress')) {\n      xhr.upload.onprogress = handleProgress;\n    }\n  } catch(e) {\n    // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n    // Reported here:\n    // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n  }\n\n  // timeout\n  if (timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self.timedout = true;\n      self.abort();\n    }, timeout);\n  }\n\n  // querystring\n  this._appendQueryString();\n\n  // initiate request\n  if (this.username && this.password) {\n    xhr.open(this.method, this.url, true, this.username, this.password);\n  } else {\n    xhr.open(this.method, this.url, true);\n  }\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if ('GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !this._isHost(data)) {\n    // serialize stuff\n    var contentType = this._header['content-type'];\n    var serialize = this._serializer || request.serialize[contentType ? contentType.split(';')[0] : ''];\n    if (!serialize && isJSON(contentType)) serialize = request.serialize['application/json'];\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n    xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  if (this._responseType) {\n    xhr.responseType = this._responseType;\n  }\n\n  // send stuff\n  this.emit('request', this);\n\n  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)\n  // We need null here if data is undefined\n  xhr.send(typeof data !== 'undefined' ? data : null);\n  return this;\n};\n\n\n/**\n * Expose `Request`.\n */\n\nrequest.Request = Request;\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn){\n  var req = request('GET', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn){\n  var req = request('HEAD', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * OPTIONS query to `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.options = function(url, data, fn){\n  var req = request('OPTIONS', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nfunction del(url, fn){\n  var req = request('DELETE', url);\n  if (fn) req.end(fn);\n  return req;\n};\n\nrequest['del'] = del;\nrequest['delete'] = del;\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn){\n  var req = request('PATCH', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn){\n  var req = request('POST', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn){\n  var req = request('PUT', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n},{\"./is-object\":12,\"./request\":14,\"./request-base\":13,\"emitter\":10}],12:[function(require,module,exports){\n/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return null !== obj && 'object' === typeof obj;\n}\n\nmodule.exports = isObject;\n\n},{}],13:[function(require,module,exports){\n/**\n * Module of mixed-in functions shared between node and client code\n */\nvar isObject = require('./is-object');\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nexports.clearTimeout = function _clearTimeout(){\n  this._timeout = 0;\n  clearTimeout(this._timer);\n  return this;\n};\n\n/**\n * Override default response body parser\n *\n * This function will be called to convert incoming data into request.body\n *\n * @param {Function}\n * @api public\n */\n\nexports.parse = function parse(fn){\n  this._parser = fn;\n  return this;\n};\n\n/**\n * Override default request body serializer\n *\n * This function will be called to convert data set via .send or .attach into payload to send\n *\n * @param {Function}\n * @api public\n */\n\nexports.serialize = function serialize(fn){\n  this._serializer = fn;\n  return this;\n};\n\n/**\n * Set timeout to `ms`.\n *\n * @param {Number} ms\n * @return {Request} for chaining\n * @api public\n */\n\nexports.timeout = function timeout(ms){\n  this._timeout = ms;\n  return this;\n};\n\n/**\n * Promise support\n *\n * @param {Function} resolve\n * @param {Function} reject\n * @return {Request}\n */\n\nexports.then = function then(resolve, reject) {\n  if (!this._fullfilledPromise) {\n    var self = this;\n    this._fullfilledPromise = new Promise(function(innerResolve, innerReject){\n      self.end(function(err, res){\n        if (err) innerReject(err); else innerResolve(res);\n      });\n    });\n  }\n  return this._fullfilledPromise.then(resolve, reject);\n}\n\n/**\n * Allow for extension\n */\n\nexports.use = function use(fn) {\n  fn(this);\n  return this;\n}\n\n\n/**\n * Get request header `field`.\n * Case-insensitive.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nexports.get = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Get case-insensitive header `field` value.\n * This is a deprecated internal API. Use `.get(field)` instead.\n *\n * (getHeader is no longer used internally by the superagent code base)\n *\n * @param {String} field\n * @return {String}\n * @api private\n * @deprecated\n */\n\nexports.getHeader = exports.get;\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n * Case-insensitive.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nexports.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n * Case-insensitive.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n */\nexports.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Write the field `name` and `val` for \"multipart/form-data\"\n * request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n * ```\n *\n * @param {String} name\n * @param {String|Blob|File|Buffer|fs.ReadStream} val\n * @return {Request} for chaining\n * @api public\n */\nexports.field = function(name, val) {\n  this._getFormData().append(name, val);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\nexports.abort = function(){\n  if (this._aborted) {\n    return this;\n  }\n  this._aborted = true;\n  this.xhr && this.xhr.abort(); // browser\n  this.req && this.req.abort(); // node\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nexports.withCredentials = function(){\n  // This is browser-only functionality. Node side is no-op.\n  this._withCredentials = true;\n  return this;\n};\n\n/**\n * Set the max redirects to `n`. Does noting in browser XHR implementation.\n *\n * @param {Number} n\n * @return {Request} for chaining\n * @api public\n */\n\nexports.redirects = function(n){\n  this._maxRedirects = n;\n  return this;\n};\n\n/**\n * Convert to a plain javascript object (not JSON string) of scalar properties.\n * Note as this method is designed to return a useful non-this value,\n * it cannot be chained.\n *\n * @return {Object} describing method, url, and data of this request\n * @api public\n */\n\nexports.toJSON = function(){\n  return {\n    method: this.method,\n    url: this.url,\n    data: this._data,\n    headers: this._header\n  };\n};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * TODO: future proof, move to compoent land\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nexports._isHost = function _isHost(obj) {\n  var str = {}.toString.call(obj);\n\n  switch (str) {\n    case '[object File]':\n    case '[object Blob]':\n    case '[object FormData]':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Send `data` as the request body, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"}')\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n *      request.post('/user')\n *        .send('name=tobi')\n *        .send('species=ferret')\n *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nexports.send = function(data){\n  var obj = isObject(data);\n  var type = this._header['content-type'];\n\n  // merge\n  if (obj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    // default to x-www-form-urlencoded\n    if (!type) this.type('form');\n    type = this._header['content-type'];\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!obj || this._isHost(data)) return this;\n\n  // default to json\n  if (!type) this.type('json');\n  return this;\n};\n\n},{\"./is-object\":12}],14:[function(require,module,exports){\n// The node and browser modules expose versions of this with the\n// appropriate constructor function bound as first argument\n/**\n * Issue a request:\n *\n * Examples:\n *\n *    request('GET', '/users').end(callback)\n *    request('/users').end(callback)\n *    request('/users', callback)\n *\n * @param {String} method\n * @param {String|Function} url or callback\n * @return {Request}\n * @api public\n */\n\nfunction request(RequestConstructor, method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new RequestConstructor('GET', method).end(url);\n  }\n\n  // url first\n  if (2 == arguments.length) {\n    return new RequestConstructor('GET', method);\n  }\n\n  return new RequestConstructor(method, url);\n}\n\nmodule.exports = request;\n\n},{}],15:[function(require,module,exports){\nmodule.exports={\n  \"name\": \"vhxjs\",\n  \"version\": \"1.0.0-beta.2\",\n  \"description\": \"VHX Javascript API Client\",\n  \"main\": \"vhx.js\",\n  \"author\": \"VHX\",\n  \"homepage\": \"https://github.com/vhx/vhx-node\",\n  \"contributors\": [\"David Gonzalez <david@vhx.tv> \", \"Scott Robertson <scott@vhx.tv>\"],\n  \"license\": \"MIT\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git://github.com/vhx/vhx-js.git\"\n  },\n  \"bugs:\": \"https://github.com/vhx/vhx-js/issues\",\n  \"devDependencies\": {\n    \"babel-cli\": \"^6.11.4\",\n    \"babel-preset-es2015\": \"^6.9.0\",\n    \"babelify\": \"^7.3.0\",\n    \"browserify\": \"^13.1.0\",\n    \"gulp\": \"^3.9.1\",\n    \"gulp-babel\": \"^6.1.2\",\n    \"gulp-browserify\": \"^0.5.1\",\n    \"gulp-livereload\": \"^3.8.1\",\n    \"gulp-sourcemaps\": \"^1.6.0\",\n    \"gulp-uglify\": \"^1.5.4\",\n    \"superagent\": \"^2.1.0\",\n    \"vinyl-buffer\": \"^1.0.0\",\n    \"vinyl-source-stream\": \"^1.1.0\"\n  }\n}\n\n},{}]},{},[9])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvZGVmYXVsdHMuanMiLCJsaWIvcGFnaW5hdGUuanMiLCJsaWIvcmVzb3VyY2UuanMiLCJsaWIvcmVzb3VyY2VzL2Jyb3dzZS5qcyIsImxpYi9yZXNvdXJjZXMvY29sbGVjdGlvbnMuanMiLCJsaWIvcmVzb3VyY2VzL2N1c3RvbWVycy5qcyIsImxpYi9yZXNvdXJjZXMvcHJvZHVjdHMuanMiLCJsaWIvcmVzb3VyY2VzL3ZpZGVvcy5qcyIsImxpYi92aHguanMiLCJub2RlX21vZHVsZXMvY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc3VwZXJhZ2VudC9saWIvY2xpZW50LmpzIiwibm9kZV9tb2R1bGVzL3N1cGVyYWdlbnQvbGliL2lzLW9iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9zdXBlcmFnZW50L2xpYi9yZXF1ZXN0LWJhc2UuanMiLCJub2RlX21vZHVsZXMvc3VwZXJhZ2VudC9saWIvcmVxdWVzdC5qcyIsInBhY2thZ2UuanNvbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBSSxPQUFPLFFBQVAsQ0FBZ0IsSUFBaEIsQ0FBcUIsS0FBckIsQ0FBMkIsU0FBM0IsQ0FBSixFQUEyQztBQUN6QyxNQUFNLGlCQUFnQjtBQUNwQixVQUFNLGlCQURjO0FBRXBCLGNBQVUsU0FGVTtBQUdwQixpQkFBYSxRQUFRLGlCQUFSLEVBQTJCLE9BSHBCO0FBSXBCLGFBQVMsT0FKVztBQUtwQixnQkFBWTtBQUxRLEdBQXRCO0FBT0Q7O0FBRUQsSUFBSSxPQUFPLFFBQVAsQ0FBZ0IsSUFBaEIsQ0FBcUIsS0FBckIsQ0FBMkIsS0FBM0IsQ0FBSixFQUF1QztBQUNyQyxNQUFNLGlCQUFnQjtBQUNwQixVQUFNLFlBRGM7QUFFcEIsY0FBVSxVQUZVO0FBR3BCLGlCQUFhLFFBQVEsaUJBQVIsRUFBMkIsT0FIcEI7QUFJcEIsYUFBUyxPQUpXO0FBS3BCLGdCQUFZO0FBTFEsR0FBdEI7QUFPRDs7QUFFRCxJQUFJLE9BQU8sUUFBUCxDQUFnQixJQUFoQixDQUFxQixLQUFyQixDQUEyQiw2QkFBM0IsQ0FBSixFQUErRDtBQUM3RCxNQUFJLGVBQWUsT0FBTyxRQUFQLENBQWdCLElBQWhCLENBQXFCLEtBQXJCLENBQTJCLDZCQUEzQixFQUEwRCxDQUExRCxDQUFuQjs7QUFFQSxNQUFNLGlCQUFnQjtBQUNwQixVQUFNLFlBRGM7QUFFcEIsY0FBVSxVQUZVO0FBR3BCLGlCQUFhLFFBQVEsaUJBQVIsRUFBMkIsT0FIcEI7QUFJcEIsYUFBUyxPQUpXO0FBS3BCLGdCQUFlLFlBQWY7QUFMb0IsR0FBdEI7QUFPRDs7QUFHRCxPQUFPLE9BQVAsR0FBaUIsYUFBakI7OztBQ2pDQTs7Ozs7O0lBRU0sUTtBQUNKLG9CQUFZLFFBQVosRUFBc0IsSUFBdEIsRUFBNEI7QUFBQTs7QUFDMUIsUUFBSSxRQUFRLElBQVo7O0FBRUEsVUFBTSxRQUFOLEdBQWlCLFFBQWpCO0FBQ0EsVUFBTSxRQUFOLEdBQWlCLEtBQUssSUFBdEI7QUFDQSxVQUFNLE9BQU4sR0FBaUIsS0FBSyxPQUF0QjtBQUNBLFVBQU0sSUFBTixHQUFpQixNQUFNLE9BQU4sQ0FBYyxJQUFkLEdBQXFCLE1BQU0sT0FBTixDQUFjLElBQW5DLEdBQTBDLENBQTNEO0FBQ0EsVUFBTSxNQUFOLEdBQWlCLEtBQUssTUFBdEI7QUFDQSxVQUFNLElBQU4sR0FBaUIsS0FBSyxJQUFMLENBQVUsS0FBSyxJQUFMLENBQVUsS0FBVixJQUFtQixLQUFLLElBQUwsQ0FBVSxLQUFWLEdBQWtCLE1BQU0sSUFBM0MsQ0FBVixDQUFqQjs7QUFFQSxLQUFDLFVBQUQsRUFBWSxjQUFaLEVBQTJCLFdBQTNCLEVBQXVDLFVBQXZDLEVBQW1ELEdBQW5ELENBQXVELFVBQVMsR0FBVCxFQUFjO0FBQ25FLFlBQU0sUUFBTixDQUFlLEdBQWYsSUFBc0IsVUFBUyxRQUFULEVBQW1CO0FBQ3ZDLGNBQU0sR0FBTixFQUFXLEtBQVgsRUFBa0IsUUFBbEI7QUFDRCxPQUZEO0FBR0QsS0FKRDs7QUFNQSxVQUFNLFFBQU4sQ0FBZSxRQUFmLEdBQTBCLFVBQVMsR0FBVCxFQUFjLFFBQWQsRUFBd0I7QUFDaEQsWUFBTSxRQUFOLENBQWUsS0FBZixFQUFzQixHQUF0QixFQUEyQixRQUEzQjtBQUNELEtBRkQ7O0FBSUEsVUFBTSxRQUFOLENBQWUsS0FBZixHQUF1QixVQUFTLEtBQVQsRUFBZ0I7QUFDckMsWUFBTSxTQUFOLENBQWdCLE1BQU0sTUFBdEIsSUFBZ0MsS0FBSyxTQUFMLENBQWUsTUFBTSxNQUFyQixFQUE2QixNQUE3QixDQUFvQyxNQUFNLFNBQU4sQ0FBZ0IsTUFBTSxNQUF0QixDQUFwQyxDQUFoQztBQUNBLFlBQU0sS0FBTixHQUFjLEtBQUssS0FBTCxHQUFhLE1BQU0sS0FBakM7O0FBRUEsYUFBTyxLQUFQO0FBQ0QsS0FMRDtBQU1EOzs7OzBCQUVLO0FBQ0osVUFBSSxRQUFRLElBQVo7O0FBRUEsYUFBTyxNQUFNLFFBQWI7QUFDRDs7OzZCQUVRLEssRUFBTyxRLEVBQVU7QUFDeEIsWUFBTSxPQUFOLENBQWMsSUFBZCxHQUFxQixNQUFNLElBQU4sR0FBYSxDQUFsQzs7QUFFQSxVQUFJLE1BQU0sT0FBTixDQUFjLElBQWQsR0FBcUIsTUFBTSxJQUEvQixFQUFxQztBQUNuQyxjQUFNLDBCQUFOO0FBQ0Q7O0FBRUQsWUFBTSxRQUFOLENBQWUsTUFBTSxNQUFyQixFQUE2QixNQUFNLE9BQW5DLEVBQTRDLFFBQTVDO0FBQ0Q7OztpQ0FFWSxLLEVBQU8sUSxFQUFVO0FBQzVCLFVBQUksTUFBTSxJQUFOLEtBQWUsQ0FBbkIsRUFBc0I7QUFDcEIsY0FBTSw4QkFBTjtBQUNEOztBQUVELFlBQU0sT0FBTixDQUFjLElBQWQsR0FBcUIsTUFBTSxJQUFOLEdBQWEsQ0FBbEM7QUFDQSxZQUFNLFFBQU4sQ0FBZSxNQUFNLE1BQXJCLEVBQTZCLE1BQU0sT0FBbkMsRUFBNEMsUUFBNUM7QUFDRDs7OzhCQUVTLEssRUFBTyxRLEVBQVU7QUFDekIsWUFBTSxPQUFOLENBQWMsSUFBZCxHQUFxQixDQUFyQjtBQUNBLFlBQU0sUUFBTixDQUFlLE1BQU0sTUFBckIsRUFBNkIsTUFBTSxPQUFuQyxFQUE0QyxRQUE1QztBQUNEOzs7NkJBRVEsSyxFQUFPLFEsRUFBVTtBQUN4QixZQUFNLE9BQU4sQ0FBYyxJQUFkLEdBQXFCLE1BQU0sSUFBM0I7QUFDQSxZQUFNLFFBQU4sQ0FBZSxNQUFNLE1BQXJCLEVBQTZCLE1BQU0sT0FBbkMsRUFBNEMsUUFBNUM7QUFDRDs7OzZCQUVRLEssRUFBTyxHLEVBQUssUSxFQUFVO0FBQzdCLFlBQU0sU0FBUyxHQUFULEVBQWMsRUFBZCxDQUFOOztBQUVBLFVBQUksTUFBTSxDQUFOLElBQVcsT0FBTyxNQUFNLElBQTVCLEVBQWtDO0FBQ2hDLGNBQU0sT0FBTixDQUFjLElBQWQsR0FBcUIsR0FBckI7QUFDQSxlQUFPLE1BQU0sUUFBTixDQUFlLE1BQU0sTUFBckIsRUFBNkIsTUFBTSxPQUFuQyxFQUE0QyxRQUE1QyxDQUFQO0FBQ0Q7O0FBRUQsWUFBTSxtQ0FBTjtBQUNEOzs7Ozs7QUFHSCxPQUFPLE9BQVAsR0FBaUIsUUFBakI7OztBQzlFQTs7Ozs7Ozs7QUFFQSxJQUFNLFVBQVUsUUFBUSxZQUFSLENBQWhCO0FBQ0EsSUFBTSxXQUFXLFFBQVEsWUFBUixDQUFqQjs7SUFFTSxRO0FBQ0osb0JBQVksR0FBWixFQUFpQixJQUFqQixFQUF1QixPQUF2QixFQUFnQyxPQUFoQyxFQUF5QztBQUFBOztBQUN2QyxRQUFJLFFBQVksSUFBaEI7QUFDQSxVQUFNLElBQU4sR0FBZ0IsR0FBaEI7QUFDQSxVQUFNLE9BQU4sR0FBZ0IsT0FBaEI7QUFDQSxVQUFNLElBQU4sR0FBZ0IsSUFBaEI7O0FBRUEsVUFBTSxJQUFOO0FBQ0Q7Ozs7MkJBRU07QUFDTCxVQUFJLFFBQVEsSUFBWjs7QUFFQSxZQUFNLE9BQU4sQ0FBYyxPQUFkLENBQXNCLFVBQVMsSUFBVCxFQUFlO0FBQ25DLFlBQUksU0FBUyxNQUFNLFNBQU4sQ0FBZ0IsSUFBaEIsQ0FBYjtBQUFBLFlBQ0ksT0FBTyxNQUFNLE9BQU4sQ0FBYyxNQUFNLElBQXBCLENBRFg7QUFBQSxZQUVJLFNBQVM7QUFDUCx1QkFBYSxLQUROLEVBQ2E7QUFDcEIseUJBQWU7QUFGUixTQUZiOztBQU9BLFlBQUksT0FBTyxLQUFQLENBQWEsdUJBQWIsQ0FBSixFQUEyQztBQUN6QyxnQkFBTSxNQUFOLElBQWdCLFVBQVMsQ0FBVCxFQUFZLENBQVosRUFBZSxDQUFmLEVBQWtCO0FBQ2hDLGdCQUFJLEVBQUUsSUFBRixDQUFKLEVBQWE7QUFDWixrQkFBSSxNQUFNLGtCQUFOLENBQXlCLENBQXpCLENBQUosRUFBaUM7QUFDL0IsdUJBQU8sUUFBUCxHQUFrQixDQUFsQjtBQUNEO0FBQ0EscUJBQU8sRUFBUCxHQUFZLE1BQU0sU0FBTixDQUFnQixFQUFFLElBQUYsQ0FBaEIsQ0FBWjtBQUNBLHFCQUFPLEVBQUUsSUFBRixDQUFQO0FBQ0EscUJBQU8sT0FBUCxHQUFpQixDQUFqQjtBQUNELGFBUEQsTUFRSztBQUNILHFCQUFPLEVBQVAsR0FBWSxNQUFNLFNBQU4sQ0FBZ0IsQ0FBaEIsQ0FBWjtBQUNBLGtCQUFJLE1BQU0sa0JBQU4sQ0FBeUIsQ0FBekIsQ0FBSixFQUFpQztBQUMvQix1QkFBTyxRQUFQLEdBQWtCLENBQWxCO0FBQ0QsZUFGRCxNQUVPO0FBQ0wsdUJBQU8sT0FBUCxHQUFpQixDQUFqQjtBQUNBLHVCQUFPLFFBQVAsR0FBa0IsQ0FBbEI7QUFDRDtBQUNGOztBQUVELG1CQUFPLEtBQVAsR0FBZSxLQUFLLEtBQUwsR0FBYSxLQUFLLEtBQWxCLEdBQTBCLElBQXpDO0FBQ0Esa0JBQU0sV0FBTixDQUFrQixNQUFsQjtBQUNELFdBckJEO0FBc0JELFNBdkJELE1Bd0JLO0FBQ0gsZ0JBQU0sTUFBTixJQUFnQixVQUFTLE9BQVQsRUFBa0IsUUFBbEIsRUFBNEI7QUFDMUMsbUJBQU8sT0FBUCxHQUFpQixPQUFqQjtBQUNBLG1CQUFPLFFBQVAsR0FBa0IsUUFBbEI7O0FBRUEsa0JBQU0sV0FBTixDQUFrQixNQUFsQjtBQUNELFdBTEQ7QUFNRDtBQUNGLE9BeENEO0FBeUNEOzs7NEJBRU8sUSxFQUFVO0FBQ2hCLFVBQUksYUFBYSxhQUFqQixFQUFnQztBQUM5QixlQUFPLFlBQVA7QUFDRDtBQUNELFVBQUksYUFBYSxXQUFqQixFQUE4QjtBQUM1QixlQUFPLFVBQVA7QUFDRDtBQUNELFVBQUksYUFBYSxRQUFqQixFQUEyQjtBQUN6QixlQUFPLE9BQVA7QUFDRDs7QUFFRCxhQUFPLElBQVA7QUFDRDs7OzhCQUVTLE0sRUFBUTtBQUNoQixVQUFJLFFBQVEsSUFBWjs7QUFFQSxVQUFJLE1BQU0sUUFBTixDQUFlLE1BQWYsS0FBMEIsT0FBTyxNQUFyQyxFQUE2QztBQUMzQyxlQUFPLE9BQU8sTUFBZDtBQUNELE9BRkQsTUFFTztBQUNMLGVBQU8sTUFBUDtBQUNEO0FBQ0Y7Ozs4QkFFUyxJLEVBQU07QUFDZCxVQUFJLFFBQVEsSUFBWjtBQUFBLFVBQ0ksWUFESjs7QUFHQSxVQUFJLFNBQVMsSUFBVCxFQUFlLEVBQWYsQ0FBSixFQUF3QjtBQUN0QixlQUFPLElBQVA7QUFDRCxPQUZELE1BR0ssSUFBSSxLQUFLLE9BQUwsQ0FBYSxNQUFNLElBQU4sQ0FBVyxJQUF4QixLQUFpQyxDQUFyQyxFQUF3QztBQUMzQyxZQUFJLEtBQUssTUFBTCxDQUFZLENBQUMsQ0FBYixNQUFvQixHQUF4QixFQUE2QjtBQUMzQixlQUFLLE1BQUwsQ0FBWSxDQUFaLEVBQWUsS0FBSyxNQUFMLEdBQVksQ0FBM0I7QUFDRDtBQUNELGNBQU0sS0FBSyxLQUFMLENBQVcsR0FBWCxDQUFOO0FBQ0EsZUFBTyxJQUFJLElBQUksTUFBSixHQUFXLENBQWYsQ0FBUDtBQUNEO0FBQ0Y7Ozs2QkFFUSxFLEVBQUk7QUFDWCxVQUFJLFFBQVEsSUFBWjtBQUNBLFVBQUksWUFBVyxNQUFNLElBQU4sQ0FBVyxRQUF0QixHQUFpQyxPQUFPLFFBQVAsQ0FBZ0IsSUFBakQsWUFBSjs7QUFFQSxjQUFRLElBQVIsQ0FBYSxJQUFiLEVBQ0csR0FESCxDQUNPLGNBRFAsRUFDdUIsRUFBRSx5QkFBRixFQUE2QixJQUE3QixDQUFrQyxTQUFsQyxDQUR2QixFQUVHLElBRkgsQ0FFUSxVQUFTLElBQVQsRUFBZTtBQUNuQixjQUFNLElBQU4sQ0FBVyxLQUFYLEdBQW1CLEtBQUssSUFBTCxDQUFVLEtBQTdCO0FBQ0EsWUFBSSxFQUFKLEVBQVE7QUFDVCxPQUxILEVBS0ssVUFBUyxJQUFULEVBQWU7QUFDaEIsZ0JBQVEsR0FBUixDQUFZLElBQVo7QUFDRCxPQVBIO0FBUUQ7OztnQ0FFVztBQUNWLGFBQU8sSUFBSSxJQUFKLEdBQVcsT0FBWCxFQUFQO0FBQ0Q7Ozs4QkFFUyxhLEVBQWUsRSxFQUFJLE8sRUFBUyxLLEVBQU87QUFDM0MsVUFBSSxRQUFRLElBQVo7QUFBQSxVQUNJLFNBQVMsRUFEYjs7QUFHQSxVQUFJLEdBQUcsS0FBSCxDQUFTLGFBQVQsQ0FBSixFQUE2QjtBQUMzQixlQUFPLEdBQVAsUUFBZ0IsTUFBTSxJQUFOLENBQVcsUUFBM0IsR0FBc0MsTUFBTSxJQUFOLENBQVcsSUFBakQ7QUFDRCxPQUZELE1BRU87QUFDTCxlQUFPLEdBQVAsUUFBZ0IsTUFBTSxJQUFOLENBQVcsUUFBM0IsR0FBc0MsTUFBTSxJQUFOLENBQVcsSUFBakQsU0FBeUQsTUFBTSxJQUEvRDtBQUNEOztBQUVELGFBQU8sT0FBUCxHQUFpQixNQUFNLElBQU4sQ0FBVyxPQUE1Qjs7QUFFQSxVQUFJLE1BQU0sSUFBTixDQUFXLElBQWYsRUFBcUI7QUFDbkIsZUFBTyxPQUFQLEdBQWlCO0FBQ2YsMkJBQWlCLE1BQU0sSUFBTixDQUFXO0FBRGIsU0FBakI7QUFHRDs7QUFFRCxhQUFPLEVBQVAsR0FBWSxXQUFXLElBQXZCOztBQUVBLFVBQUksQ0FBQyxjQUFjLEtBQWQsQ0FBb0IsY0FBcEIsQ0FBRCxJQUF3QyxDQUFDLEdBQUcsS0FBSCxDQUFTLGFBQVQsQ0FBN0MsRUFBc0U7QUFDcEUsZUFBTyxHQUFQLElBQWMsTUFBTSxFQUFwQjtBQUNEOztBQUVELFVBQUksY0FBYyxLQUFkLENBQW9CLFFBQXBCLEtBQWlDLENBQUMsR0FBRyxLQUFILENBQVMsYUFBVCxDQUF0QyxFQUErRDtBQUM3RCxlQUFPLEdBQVAsSUFBYyxRQUFkO0FBQ0Q7O0FBRUQsVUFBSSxjQUFjLEtBQWQsQ0FBb0IsUUFBcEIsQ0FBSixFQUFtQztBQUNqQyxlQUFPLEdBQVAsSUFBYyxRQUFkO0FBQ0Q7O0FBRUQsVUFBSSxLQUFKLEVBQVc7QUFDVCxlQUFPLEdBQVAsSUFBYyxNQUFNLEtBQXBCO0FBQ0Q7O0FBRUQsYUFBTyxNQUFQO0FBQ0Q7OztnQ0FFVyxJLEVBQU07QUFDaEIsVUFBSSxRQUFRLElBQVo7QUFDQSxVQUFJLFNBQVMsTUFBTSxTQUFOLENBQWdCLEtBQUssYUFBckIsRUFBb0MsS0FBSyxFQUFMLElBQVcsSUFBL0MsRUFBcUQsS0FBSyxPQUExRCxFQUFtRSxLQUFLLEtBQXhFLENBQWI7O0FBRUEsVUFBSSxNQUFNLGtCQUFOLENBQXlCLEtBQUssT0FBOUIsQ0FBSixFQUE0QztBQUMxQyxhQUFLLFFBQUwsR0FBZ0IsS0FBSyxPQUFyQjtBQUNEOztBQUVELFVBQUksTUFBTSxJQUFOLENBQVcsS0FBWCxLQUFxQixTQUF6QixFQUFvQztBQUNsQyxjQUFNLFFBQU4sQ0FBZSxZQUFLO0FBQ2xCLGlCQUFPLE9BQVAsR0FBaUI7QUFDZiw2QkFBaUIsWUFBWSxNQUFNLElBQU4sQ0FBVztBQUR6QixXQUFqQjs7QUFJQSxnQkFBTSxXQUFOLENBQWtCLElBQWxCLEVBQXdCLE1BQXhCO0FBQ0QsU0FORDtBQU9ELE9BUkQsTUFRTztBQUNMLGNBQU0sV0FBTixDQUFrQixJQUFsQixFQUF3QixNQUF4QjtBQUNEO0FBQ0Y7OztnQ0FFVyxJLEVBQU0sTSxFQUFRO0FBQ3hCLFVBQUksUUFBUSxJQUFaOztBQUVBLGNBQVEsS0FBSyxXQUFiLEVBQTBCLE9BQU8sR0FBakMsRUFDRyxlQURILEdBRUcsR0FGSCxDQUVPLE9BQU8sT0FBUCxJQUFrQixFQUZ6QixFQUdHLEdBSEgsQ0FHTyxjQUhQLEVBR3VCLGtCQUh2QixFQUlHLEtBSkgsQ0FJUyxPQUFPLEVBSmhCLEVBS0csR0FMSCxDQUtPLFVBQVMsR0FBVCxFQUFjLFFBQWQsRUFBd0I7QUFDM0IsWUFBSSxPQUFPLElBQUksSUFBSixLQUFhLFdBQXhCLEVBQXFDO0FBQ25DLGdCQUFNLFlBQU4sQ0FBbUI7QUFDakIsb0JBQVEsR0FEUztBQUVqQixrQkFBTSx5RkFGVztBQUdqQixzQkFBVyxLQUFLLFFBQUwsSUFBaUI7QUFIWCxXQUFuQjtBQUtEOztBQUVELFlBQUksQ0FBQyxHQUFELElBQVEsU0FBUyxVQUFULElBQXVCLEdBQS9CLElBQXNDLFNBQVMsVUFBVCxHQUFzQixHQUFoRSxFQUFxRTtBQUNuRSxnQkFBTSxjQUFOLENBQXFCO0FBQ25CLGtCQUFNLFNBQVMsSUFBVCxJQUFpQixJQURKO0FBRW5CLHNCQUFVLEtBQUssUUFGSTtBQUduQixxQkFBUyxLQUFLLE9BSEs7QUFJbkIsb0JBQVEsTUFBTSxJQUpLO0FBS25CLG9CQUFRLEtBQUs7QUFMTSxXQUFyQjtBQU9ELFNBUkQsTUFRTztBQUNMLGdCQUFNLFlBQU4sQ0FBbUI7QUFDakIsb0JBQVEsR0FEUztBQUVqQixrQkFBTSx5RkFGVztBQUdqQixzQkFBVyxLQUFLLFFBQUwsSUFBaUI7QUFIWCxXQUFuQjtBQUtEO0FBQ0YsT0E3Qkg7QUE4QkQ7OzttQ0FFYyxJLEVBQU07QUFDbkIsVUFBSSxXQUFXLEtBQUssSUFBcEI7O0FBRUEsVUFBSSxLQUFLLElBQUwsQ0FBVSxLQUFWLElBQW1CLEtBQUssSUFBTCxDQUFVLEtBQVYsR0FBa0IsS0FBSyxJQUFMLENBQVUsS0FBbkQsRUFBMEQ7QUFDeEQsbUJBQVcsSUFBSSxRQUFKLENBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixHQUF6QixFQUFYO0FBQ0Q7O0FBRUQsZUFBUyxNQUFULEdBQWtCLEtBQUssTUFBdkI7O0FBRUEsVUFBSSxLQUFLLFFBQVQsRUFBbUI7QUFDakIsYUFBSyxRQUFMLENBQWMsS0FBZCxFQUFxQixRQUFyQjtBQUNEO0FBQ0Y7OztpQ0FFWSxJLEVBQU07QUFDakIsVUFBSSxRQUFRLEtBQUssS0FBTCxDQUFXLEtBQUssSUFBaEIsQ0FBWjtBQUFBLFVBQ0ksY0FBYztBQUNaLGFBQUssd0JBRE87QUFFWixhQUFLLHdCQUZPO0FBR1osYUFBSyxxQkFITztBQUlaLGFBQUssb0JBSk87QUFLWixhQUFLO0FBTE8sT0FEbEI7O0FBU0EsWUFBTSxNQUFOLEdBQWUsS0FBSyxNQUFwQjtBQUNBLFlBQU0sSUFBTixHQUFhLFlBQVksTUFBTSxNQUFsQixDQUFiOztBQUVBLFVBQUksS0FBSyxRQUFULEVBQW1CO0FBQ2pCLGFBQUssUUFBTCxDQUFjLEtBQWQsRUFBcUIsSUFBckI7QUFDRDtBQUNGOzs7dUNBRWtCLEcsRUFBSztBQUN0QixhQUFPLENBQUMsRUFBRSxPQUFPLElBQUksV0FBWCxJQUEwQixJQUFJLElBQTlCLElBQXNDLElBQUksS0FBNUMsQ0FBUjtBQUNEOzs7NkJBRVEsRyxFQUFLO0FBQ1osVUFBSSxjQUFjLEdBQWQseUNBQWMsR0FBZCxDQUFKO0FBQ0EsYUFBTyxTQUFTLFVBQVQsSUFBdUIsU0FBUyxRQUFULElBQXFCLENBQUMsQ0FBQyxHQUFyRDtBQUNEOzs7Ozs7QUFDRjs7QUFFRCxPQUFPLE9BQVAsR0FBaUIsUUFBakI7OztBQ2hRQTs7Ozs7Ozs7QUFFQSxJQUFJLFdBQVcsUUFBUSxhQUFSLENBQWY7O0lBRU0sTTs7O0FBQ0osa0JBQVksR0FBWixFQUFpQjtBQUFBOztBQUFBLHFGQUNULEdBRFMsRUFDSixRQURJLEVBQ00sQ0FBQyxLQUFELEVBQVEsTUFBUixDQUROO0FBRWhCOzs7RUFIa0IsUTs7QUFJcEI7O0FBRUQsT0FBTyxPQUFQLEdBQWlCLE1BQWpCOzs7QUNWQTs7Ozs7Ozs7QUFFQSxJQUFJLFdBQVcsUUFBUSxhQUFSLENBQWY7O0lBRU0sVTs7O0FBQ0osc0JBQVksR0FBWixFQUFpQjtBQUFBOztBQUFBLHlGQUNULEdBRFMsRUFDSixhQURJLEVBQ1csQ0FBQyxLQUFELEVBQVEsTUFBUixFQUFnQixPQUFoQixDQURYO0FBRWhCOzs7RUFIc0IsUTs7QUFJeEI7O0FBRUQsT0FBTyxPQUFQLEdBQWlCLFVBQWpCOzs7QUNWQTs7Ozs7Ozs7QUFFQSxJQUFJLFdBQVcsUUFBUSxhQUFSLENBQWY7O0lBRU0sUTs7O0FBQ0osb0JBQVksR0FBWixFQUFpQjtBQUFBOztBQUFBLHVGQUNULEdBRFMsRUFDSixXQURJLEVBQ1MsQ0FBQyxVQUFELEVBQWEsS0FBYixDQURUO0FBRWhCOzs7RUFIb0IsUTs7QUFJdEI7O0FBRUQsT0FBTyxPQUFQLEdBQWlCLFFBQWpCOzs7QUNWQTs7Ozs7Ozs7QUFFQSxJQUFJLFdBQVcsUUFBUSxhQUFSLENBQWY7O0lBRU0sTzs7O0FBQ0osbUJBQVksR0FBWixFQUFpQjtBQUFBOztBQUFBLHNGQUNULEdBRFMsRUFDSixVQURJLEVBQ1EsQ0FBQyxVQUFELEVBQWEsS0FBYixDQURSO0FBRWhCOzs7RUFIbUIsUTs7QUFJckI7O0FBRUQsT0FBTyxPQUFQLEdBQWlCLE9BQWpCOzs7QUNWQTs7Ozs7Ozs7QUFFQSxJQUFJLFdBQVcsUUFBUSxhQUFSLENBQWY7O0lBRU0sSzs7O0FBQ0osaUJBQVksR0FBWixFQUFpQjtBQUFBOztBQUFBLG9GQUNULEdBRFMsRUFDSixRQURJLEVBQ00sQ0FBQyxLQUFELEVBQVEsVUFBUixFQUFvQixPQUFwQixDQUROO0FBRWhCOzs7RUFIaUIsUTs7QUFJbkI7O0FBRUQsT0FBTyxPQUFQLEdBQWlCLEtBQWpCOzs7Ozs7O0FDVkE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7OztBQUVBLElBQUksWUFBWTtBQUNkLG9DQURjO0FBRWQsMEJBRmM7QUFHZCw4QkFIYztBQUlkLCtCQUpjO0FBS2Q7QUFMYyxDQUFoQjs7SUFRTSxHO0FBQ0osZUFBWSxHQUFaLEVBQWlCO0FBQUE7O0FBQ2YsUUFBSSxRQUFXLElBQWY7O0FBRUEsUUFBSSxFQUFFLGlCQUFpQixHQUFuQixDQUFKLEVBQTZCO0FBQzNCLGFBQU8sSUFBSSxHQUFKLENBQVEsR0FBUixDQUFQO0FBQ0Q7O0FBRUQsVUFBTSxHQUFOLEdBQVksTUFBTSxNQUFNLE1BQU4sQ0FBYSxHQUFiLENBQU4sR0FBMEIsTUFBTSxRQUFOLEVBQXRDO0FBQ0EsVUFBTSxnQkFBTjtBQUNEOzs7OzJCQUVNLEcsRUFBSztBQUNWLGFBQU87QUFDTCxjQUFNLFdBQVcsS0FBSyxHQUFMLENBRFo7QUFFTCxjQUFNLG1CQUFTLElBRlY7QUFHTCxrQkFBVSxtQkFBUyxRQUhkO0FBSUwsaUJBQVMsbUJBQVM7QUFKYixPQUFQO0FBTUQ7OzsrQkFFVTtBQUNULGFBQU87QUFDTCxlQUFPLElBREY7QUFFTCxjQUFNLG1CQUFTLElBRlY7QUFHTCxrQkFBVSxtQkFBUyxRQUhkO0FBSUwsaUJBQVMsbUJBQVMsT0FKYjtBQUtMLG9CQUFZLG1CQUFTO0FBTGhCLE9BQVA7QUFPRDs7O3VDQUVrQjtBQUNqQixVQUFJLFFBQVEsSUFBWjs7QUFFQSxXQUFLLElBQUksSUFBVCxJQUFpQixTQUFqQixFQUE0QjtBQUMxQixjQUFNLEtBQUssQ0FBTCxFQUFRLFdBQVIsS0FBd0IsS0FBSyxTQUFMLENBQWUsQ0FBZixDQUE5QixJQUFtRCxJQUFJLFVBQVUsSUFBVixDQUFKLENBQW9CLE1BQU0sR0FBMUIsQ0FBbkQ7QUFDRDtBQUNGOzs7Ozs7QUFHSCxPQUFPLEdBQVAsR0FBYSxHQUFiOzs7QUN2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzk4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLm1hdGNoKC9jcnlzdGFsLykpIHtcbiAgY29uc3QgX1ZIWF9ERUZBVUxUUyA9IHtcbiAgICBIT1NUOiAnYXBpLmNyeXN0YWwuZGV2JyxcbiAgICBQUk9UT0NPTDogJ2h0dHA6Ly8nLFxuICAgIEFQSV9WRVJTSU9OOiByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uLFxuICAgIFRJTUVPVVQ6ICczMDAwMCcsXG4gICAgVE9LRU5fSE9TVDogJ2NyeXN0YWwuZGV2J1xuICB9O1xufVxuXG5pZiAod2luZG93LmxvY2F0aW9uLmhyZWYubWF0Y2goL3ZoeC8pKSB7XG4gIGNvbnN0IF9WSFhfREVGQVVMVFMgPSB7XG4gICAgSE9TVDogJ2FwaS52aHgudHYnLFxuICAgIFBST1RPQ09MOiAnaHR0cHM6Ly8nLFxuICAgIEFQSV9WRVJTSU9OOiByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uLFxuICAgIFRJTUVPVVQ6ICczMDAwMCcsXG4gICAgVE9LRU5fSE9TVDogJ3ZoeC50didcbiAgfTtcbn1cblxuaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLm1hdGNoKC92aHhxYTF8dmh4cWEyfHZoeHFhM3x2aHhxYTQvKSkge1xuICBsZXQgY3VycmVudF9ob3N0ID0gd2luZG93LmxvY2F0aW9uLmhyZWYubWF0Y2goL3ZoeHFhMXx2aHhxYTJ8dmh4cWEzfHZoeHFhNC8pWzBdO1xuXG4gIGNvbnN0IF9WSFhfREVGQVVMVFMgPSB7XG4gICAgSE9TVDogY3VycmVudF9ob3N0LFxuICAgIFBST1RPQ09MOiAnaHR0cHM6Ly8nLFxuICAgIEFQSV9WRVJTSU9OOiByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uLFxuICAgIFRJTUVPVVQ6ICczMDAwMCcsXG4gICAgVE9LRU5fSE9TVDogYCR7Y3VycmVudF9ob3N0fS5jb21gXG4gIH07XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBfVkhYX0RFRkFVTFRTO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jbGFzcyBQYWdpbmF0ZSB7XG4gIGNvbnN0cnVjdG9yKHJlc291cmNlLCBhcmdzKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLnJlc291cmNlID0gcmVzb3VyY2U7XG4gICAgX3RoaXMucmVzcG9uc2UgPSBhcmdzLmJvZHk7XG4gICAgX3RoaXMub3B0aW9ucyAgPSBhcmdzLm9wdGlvbnM7XG4gICAgX3RoaXMucGFnZSAgICAgPSBfdGhpcy5vcHRpb25zLnBhZ2UgPyBfdGhpcy5vcHRpb25zLnBhZ2UgOiAxO1xuICAgIF90aGlzLm1ldGhvZCAgID0gYXJncy5tZXRob2Q7XG4gICAgX3RoaXMubGFzdCAgICAgPSBNYXRoLmNlaWwoYXJncy5ib2R5LnRvdGFsIC8gKGFyZ3MuYm9keS5jb3VudCAqIF90aGlzLnBhZ2UpKTtcblxuICAgIFsnbmV4dFBhZ2UnLCdwcmV2aW91c1BhZ2UnLCdmaXJzdFBhZ2UnLCdsYXN0UGFnZSddLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIF90aGlzLnJlc3BvbnNlW2tleV0gPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBfdGhpc1trZXldKF90aGlzLCBjYWxsYmFjayk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgX3RoaXMucmVzcG9uc2UuZ29Ub1BhZ2UgPSBmdW5jdGlvbihudW0sIGNhbGxiYWNrKSB7XG4gICAgICBfdGhpcy5nb1RvUGFnZShfdGhpcywgbnVtLCBjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIF90aGlzLnJlc3BvbnNlLm1lcmdlID0gZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIF90aGlzLl9lbWJlZGRlZFtfdGhpcy5vYmplY3RdID0gdGhpcy5fZW1iZWRkZWRbX3RoaXMub2JqZWN0XS5jb25jYXQoX3RoaXMuX2VtYmVkZGVkW190aGlzLm9iamVjdF0pO1xuICAgICAgX3RoaXMuY291bnQgPSB0aGlzLmNvdW50ICsgX3RoaXMuY291bnQ7XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9O1xuICB9XG5cbiAgZ2V0KCkge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICByZXR1cm4gX3RoaXMucmVzcG9uc2U7XG4gIH1cblxuICBuZXh0UGFnZShfdGhpcywgY2FsbGJhY2spIHtcbiAgICBfdGhpcy5vcHRpb25zLnBhZ2UgPSBfdGhpcy5wYWdlICsgMTtcblxuICAgIGlmIChfdGhpcy5vcHRpb25zLnBhZ2UgPiBfdGhpcy5sYXN0KSB7XG4gICAgICB0aHJvdyAnTm8gbW9yZSBwYWdlcyB0byByZXF1ZXN0JztcbiAgICB9XG5cbiAgICBfdGhpcy5yZXNvdXJjZVtfdGhpcy5tZXRob2RdKF90aGlzLm9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIHByZXZpb3VzUGFnZShfdGhpcywgY2FsbGJhY2spIHtcbiAgICBpZiAoX3RoaXMucGFnZSA9PT0gMSkge1xuICAgICAgdGhyb3cgJ05vIHByZXZpb3VzIHBhZ2VzIHRvIHJlcXVlc3QnO1xuICAgIH1cblxuICAgIF90aGlzLm9wdGlvbnMucGFnZSA9IF90aGlzLnBhZ2UgLSAxO1xuICAgIF90aGlzLnJlc291cmNlW190aGlzLm1ldGhvZF0oX3RoaXMub3B0aW9ucywgY2FsbGJhY2spO1xuICB9XG5cbiAgZmlyc3RQYWdlKF90aGlzLCBjYWxsYmFjaykge1xuICAgIF90aGlzLm9wdGlvbnMucGFnZSA9IDE7XG4gICAgX3RoaXMucmVzb3VyY2VbX3RoaXMubWV0aG9kXShfdGhpcy5vcHRpb25zLCBjYWxsYmFjayk7XG4gIH1cblxuICBsYXN0UGFnZShfdGhpcywgY2FsbGJhY2spIHtcbiAgICBfdGhpcy5vcHRpb25zLnBhZ2UgPSBfdGhpcy5sYXN0O1xuICAgIF90aGlzLnJlc291cmNlW190aGlzLm1ldGhvZF0oX3RoaXMub3B0aW9ucywgY2FsbGJhY2spO1xuICB9XG5cbiAgZ29Ub1BhZ2UoX3RoaXMsIG51bSwgY2FsbGJhY2spIHtcbiAgICBudW0gPSBwYXJzZUludChudW0sIDEwKTtcblxuICAgIGlmIChudW0gPiAwICYmIG51bSA8PSBfdGhpcy5sYXN0KSB7XG4gICAgICBfdGhpcy5vcHRpb25zLnBhZ2UgPSBudW07XG4gICAgICByZXR1cm4gX3RoaXMucmVzb3VyY2VbX3RoaXMubWV0aG9kXShfdGhpcy5vcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgdGhyb3cgJ1lvdSBtdXN0IHBhc3MgYSB2YWxpZCBwYWdlIG51bWJlcic7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQYWdpbmF0ZTsiLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcmFnZW50Jyk7XG5jb25zdCBwYWdpbmF0ZSA9IHJlcXVpcmUoJy4vcGFnaW5hdGUnKTtcblxuY2xhc3MgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGksIHBhdGgsIG1ldGhvZHMsIGlzVG9rZW4pIHtcbiAgICBsZXQgX3RoaXMgICAgID0gdGhpcztcbiAgICBfdGhpcy5fYXBpICAgID0gYXBpO1xuICAgIF90aGlzLm1ldGhvZHMgPSBtZXRob2RzO1xuICAgIF90aGlzLnBhdGggICAgPSBwYXRoO1xuXG4gICAgX3RoaXMuaW5pdCgpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMubWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIGxldCBtZXRob2QgPSBfdGhpcy5nZXRNZXRob2QoaXRlbSksXG4gICAgICAgICAgdHlwZSA9IF90aGlzLmdldFR5cGUoX3RoaXMucGF0aCksXG4gICAgICAgICAgcGFyYW1zID0ge1xuICAgICAgICAgICAgaHR0cF9tZXRob2Q6ICdnZXQnLCAvLyBzdXBlcmFnZW50IHJlYWRzICdnZXQnIG5vdCAnR0VUJ1xuICAgICAgICAgICAgY2xpZW50X21ldGhvZDogbWV0aG9kXG4gICAgICAgICAgfTtcblxuICAgICAgaWYgKG1ldGhvZC5tYXRjaCgvcmV0cmlldmV8aXRlbXN8ZmlsZXMvaSkpIHtcbiAgICAgICAgX3RoaXNbbWV0aG9kXSA9IGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgICAgICBpZiAoYVt0eXBlXSkge1xuICAgICAgICAgICBpZiAoX3RoaXMuaXNDYWxsYmFja0Z1bmN0aW9uKGIpKSB7XG4gICAgICAgICAgICAgcGFyYW1zLmNhbGxiYWNrID0gYjtcbiAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyYW1zLmlkID0gX3RoaXMucGFyc2VIcmVmKGFbdHlwZV0pO1xuICAgICAgICAgICAgZGVsZXRlIGFbdHlwZV07XG4gICAgICAgICAgICBwYXJhbXMub3B0aW9ucyA9IGE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyYW1zLmlkID0gX3RoaXMucGFyc2VIcmVmKGEpO1xuICAgICAgICAgICAgaWYgKF90aGlzLmlzQ2FsbGJhY2tGdW5jdGlvbihiKSkge1xuICAgICAgICAgICAgICBwYXJhbXMuY2FsbGJhY2sgPSBiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcGFyYW1zLm9wdGlvbnMgPSBiO1xuICAgICAgICAgICAgICBwYXJhbXMuY2FsbGJhY2sgPSBjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHBhcmFtcy5zY29wZSA9IGl0ZW0uc2NvcGUgPyBpdGVtLnNjb3BlIDogbnVsbDtcbiAgICAgICAgICBfdGhpcy5tYWtlUmVxdWVzdChwYXJhbXMpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIF90aGlzW21ldGhvZF0gPSBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgICAgIHBhcmFtcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgICBwYXJhbXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcblxuICAgICAgICAgIF90aGlzLm1ha2VSZXF1ZXN0KHBhcmFtcyk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRUeXBlKHJlc291cmNlKSB7XG4gICAgaWYgKHJlc291cmNlID09PSAnY29sbGVjdGlvbnMnKSB7XG4gICAgICByZXR1cm4gJ2NvbGxlY3Rpb24nO1xuICAgIH1cbiAgICBpZiAocmVzb3VyY2UgPT09ICdjdXN0b21lcnMnKSB7XG4gICAgICByZXR1cm4gJ2N1c3RvbWVyJztcbiAgICB9XG4gICAgaWYgKHJlc291cmNlID09PSAndmlkZW9zJykge1xuICAgICAgcmV0dXJuICd2aWRlbyc7XG4gICAgfVxuXG4gICAgcmV0dXJuICdpZCc7XG4gIH1cblxuICBnZXRNZXRob2QocGFyYW1zKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIGlmIChfdGhpcy5pc09iamVjdChwYXJhbXMpICYmIHBhcmFtcy5tZXRob2QpIHtcbiAgICAgIHJldHVybiBwYXJhbXMubWV0aG9kO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbiAgfVxuXG4gIHBhcnNlSHJlZihocmVmKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcyxcbiAgICAgICAgdmFsO1xuXG4gICAgaWYgKHBhcnNlSW50KGhyZWYsIDEwKSkge1xuICAgICAgcmV0dXJuIGhyZWY7XG4gICAgfVxuICAgIGVsc2UgaWYgKGhyZWYuaW5kZXhPZihfdGhpcy5fYXBpLmhvc3QpID49IDApIHtcbiAgICAgIGlmIChocmVmLnN1YnN0cigtMSkgPT09ICcvJykge1xuICAgICAgICBocmVmLnN1YnN0cigwLCBocmVmLmxlbmd0aC0xKTtcbiAgICAgIH1cbiAgICAgIHZhbCA9IGhyZWYuc3BsaXQoJy8nKTtcbiAgICAgIHJldHVybiB2YWxbdmFsLmxlbmd0aC0xXTtcbiAgICB9XG4gIH1cblxuICBnZXRUb2tlbihjYikge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgbGV0IHBhdGggID0gYCR7X3RoaXMuX2FwaS5wcm90b2NvbH0ke3dpbmRvdy5sb2NhdGlvbi5ob3N0fS90b2tlbnNgXG5cbiAgICByZXF1ZXN0LnBvc3QocGF0aClcbiAgICAgIC5zZXQoJ1gtQ1NSRi1Ub2tlbicsICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JykpXG4gICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIF90aGlzLl9hcGkudG9rZW4gPSBkYXRhLmJvZHkudG9rZW47XG4gICAgICAgIGlmIChjYikgY2IoKTtcbiAgICAgIH0sIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHRpbWVTdGFtcCgpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIH1cblxuICBnZXRQYXJhbXMoY2xpZW50X21ldGhvZCwgaWQsIG9wdGlvbnMsIHNjb3BlKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcyxcbiAgICAgICAgcGFyYW1zID0ge307XG5cbiAgICBpZiAoaWQubWF0Y2goL21lfHdhdGNoaW5nLykpIHtcbiAgICAgIHBhcmFtcy51cmwgPSBgJHtfdGhpcy5fYXBpLnByb3RvY29sfSR7X3RoaXMuX2FwaS5ob3N0fS9tZS93YXRjaGluZ2A7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcmFtcy51cmwgPSBgJHtfdGhpcy5fYXBpLnByb3RvY29sfSR7X3RoaXMuX2FwaS5ob3N0fS8ke190aGlzLnBhdGh9YDtcbiAgICB9XG5cbiAgICBwYXJhbXMudGltZW91dCA9IF90aGlzLl9hcGkudGltZW91dDtcblxuICAgIGlmIChfdGhpcy5fYXBpLmF1dGgpIHtcbiAgICAgIHBhcmFtcy5oZWFkZXJzID0ge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IF90aGlzLl9hcGkuYXV0aFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBwYXJhbXMucXMgPSBvcHRpb25zIHx8IG51bGw7XG5cbiAgICBpZiAoIWNsaWVudF9tZXRob2QubWF0Y2goL15saXN0JHxeYWxsJC8pICYmICFpZC5tYXRjaCgvbWV8d2F0Y2hpbmcvKSkge1xuICAgICAgcGFyYW1zLnVybCArPSAnLycgKyBpZDtcbiAgICB9XG5cbiAgICBpZiAoY2xpZW50X21ldGhvZC5tYXRjaCgvaXRlbXMvaSkgJiYgIWlkLm1hdGNoKC9tZXx3YXRjaGluZy8pKSB7XG4gICAgICBwYXJhbXMudXJsICs9ICcvaXRlbXMnO1xuICAgIH1cblxuICAgIGlmIChjbGllbnRfbWV0aG9kLm1hdGNoKC9maWxlcy9pKSkge1xuICAgICAgcGFyYW1zLnVybCArPSAnL2ZpbGVzJztcbiAgICB9XG5cbiAgICBpZiAoc2NvcGUpIHtcbiAgICAgIHBhcmFtcy51cmwgKz0gJy8nICsgc2NvcGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIG1ha2VSZXF1ZXN0KGFyZ3MpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuICAgIGxldCBwYXJhbXMgPSBfdGhpcy5nZXRQYXJhbXMoYXJncy5jbGllbnRfbWV0aG9kLCBhcmdzLmlkIHx8IG51bGwsIGFyZ3Mub3B0aW9ucywgYXJncy5zY29wZSk7XG5cbiAgICBpZiAoX3RoaXMuaXNDYWxsYmFja0Z1bmN0aW9uKGFyZ3Mub3B0aW9ucykpIHtcbiAgICAgIGFyZ3MuY2FsbGJhY2sgPSBhcmdzLm9wdGlvbnM7XG4gICAgfVxuXG4gICAgaWYgKF90aGlzLl9hcGkudG9rZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgX3RoaXMuZ2V0VG9rZW4oKCk9PiB7XG4gICAgICAgIHBhcmFtcy5oZWFkZXJzID0ge1xuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgX3RoaXMuX2FwaS50b2tlblxuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMuYWpheFJlcXVlc3QoYXJncywgcGFyYW1zKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBfdGhpcy5hamF4UmVxdWVzdChhcmdzLCBwYXJhbXMpO1xuICAgIH1cbiAgfVxuXG4gIGFqYXhSZXF1ZXN0KGFyZ3MsIHBhcmFtcykge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICByZXF1ZXN0W2FyZ3MuaHR0cF9tZXRob2RdKHBhcmFtcy51cmwpXG4gICAgICAud2l0aENyZWRlbnRpYWxzKClcbiAgICAgIC5zZXQocGFyYW1zLmhlYWRlcnMgfHwge30pXG4gICAgICAuc2V0KCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpXG4gICAgICAucXVlcnkocGFyYW1zLnFzKVxuICAgICAgLmVuZChmdW5jdGlvbihlcnIsIHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChlcnIgJiYgZXJyLmNvZGUgPT09ICdFVElNRURPVVQnKSB7XG4gICAgICAgICAgX3RoaXMuZXJyb3JIYW5kbGVyKHtcbiAgICAgICAgICAgIHN0YXR1czogNDA4LFxuICAgICAgICAgICAgYm9keTogJ3tcIm1lc3NhZ2VcIjogXCJUaGUgcmVxdWVzdCB0aW1lZCBvdXQuXCIsXCJkb2N1bWVudGF0aW9uX3VybFwiOiBcImh0dHA6Ly9kZXYudmh4LnR2L2RvY3MvYXBpXCJ9JyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoYXJncy5jYWxsYmFjayB8fCAnJylcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZXJyICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPCAzMDApIHtcbiAgICAgICAgICBfdGhpcy5zdWNjZXNzSGFuZGxlcih7XG4gICAgICAgICAgICBib2R5OiByZXNwb25zZS5ib2R5IHx8IG51bGwsXG4gICAgICAgICAgICBjYWxsYmFjazogYXJncy5jYWxsYmFjayxcbiAgICAgICAgICAgIG9wdGlvbnM6IGFyZ3Mub3B0aW9ucyxcbiAgICAgICAgICAgIG9iamVjdDogX3RoaXMucGF0aCxcbiAgICAgICAgICAgIG1ldGhvZDogYXJncy5jbGllbnRfbWV0aG9kXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3RoaXMuZXJyb3JIYW5kbGVyKHtcbiAgICAgICAgICAgIHN0YXR1czogNDA4LFxuICAgICAgICAgICAgYm9keTogJ3tcIm1lc3NhZ2VcIjogXCJUaGUgcmVxdWVzdCB0aW1lZCBvdXQuXCIsXCJkb2N1bWVudGF0aW9uX3VybFwiOiBcImh0dHA6Ly9kZXYudmh4LnR2L2RvY3MvYXBpXCJ9JyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoYXJncy5jYWxsYmFjayB8fCAnJylcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBzdWNjZXNzSGFuZGxlcihhcmdzKSB7XG4gICAgbGV0IHJlc3BvbnNlID0gYXJncy5ib2R5O1xuXG4gICAgaWYgKGFyZ3MuYm9keS5jb3VudCAmJiBhcmdzLmJvZHkuY291bnQgPCBhcmdzLmJvZHkudG90YWwpIHtcbiAgICAgIHJlc3BvbnNlID0gbmV3IHBhZ2luYXRlKHRoaXMsIGFyZ3MpLmdldCgpO1xuICAgIH1cblxuICAgIHJlc3BvbnNlLm9iamVjdCA9IGFyZ3Mub2JqZWN0O1xuXG4gICAgaWYgKGFyZ3MuY2FsbGJhY2spIHtcbiAgICAgIGFyZ3MuY2FsbGJhY2soZmFsc2UsIHJlc3BvbnNlKTtcbiAgICB9XG4gIH1cblxuICBlcnJvckhhbmRsZXIoYXJncykge1xuICAgIGxldCBlcnJvciA9IEpTT04ucGFyc2UoYXJncy5ib2R5KSxcbiAgICAgICAgZXJyb3JfdHlwZXMgPSB7XG4gICAgICAgICAgNDAwOiAnVkhYSW52YWxpZFJlcXVlc3RFcnJvcicsXG4gICAgICAgICAgNDAxOiAnVkhYQXV0aGVudGljYXRpb25FcnJvcicsXG4gICAgICAgICAgNDA0OiAnVkhYUmVzb3VyY2VOb3RGb3VuZCcsXG4gICAgICAgICAgNDA4OiAnVkhYQ29ubmVjdGlvbkVycm9yJyxcbiAgICAgICAgICA1MDA6ICdWSFhBUElFcnJvcidcbiAgICAgICAgfTtcblxuICAgIGVycm9yLnN0YXR1cyA9IGFyZ3Muc3RhdHVzO1xuICAgIGVycm9yLnR5cGUgPSBlcnJvcl90eXBlc1tlcnJvci5zdGF0dXNdO1xuXG4gICAgaWYgKGFyZ3MuY2FsbGJhY2spIHtcbiAgICAgIGFyZ3MuY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIGlzQ2FsbGJhY2tGdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5jb25zdHJ1Y3RvciAmJiBvYmouY2FsbCAmJiBvYmouYXBwbHkpO1xuICB9XG5cbiAgaXNPYmplY3Qob2JqKSB7XG4gICAgbGV0IHR5cGUgPSB0eXBlb2Ygb2JqO1xuICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhb2JqO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlc291cmNlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVzb3VyY2UgPSByZXF1aXJlKCcuLi9yZXNvdXJjZScpO1xuXG5jbGFzcyBCcm93c2UgZXh0ZW5kcyBSZXNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKGFwaSkge1xuICAgIHN1cGVyKGFwaSwgJ2Jyb3dzZScsIFsnYWxsJywgJ2xpc3QnXSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQnJvd3NlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVzb3VyY2UgPSByZXF1aXJlKCcuLi9yZXNvdXJjZScpO1xuXG5jbGFzcyBDb2xsZWN0aW9uIGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICdjb2xsZWN0aW9ucycsIFsnYWxsJywgJ2xpc3QnLCAnaXRlbXMnXSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ29sbGVjdGlvbjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFJlc291cmNlID0gcmVxdWlyZSgnLi4vcmVzb3VyY2UnKTtcblxuY2xhc3MgQ3VzdG9tZXIgZXh0ZW5kcyBSZXNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKGFwaSkge1xuICAgIHN1cGVyKGFwaSwgJ2N1c3RvbWVycycsIFsncmV0cmlldmUnLCAnYWxsJ10pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEN1c3RvbWVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVzb3VyY2UgPSByZXF1aXJlKCcuLi9yZXNvdXJjZScpO1xuXG5jbGFzcyBQcm9kdWN0IGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICdwcm9kdWN0cycsIFsncmV0cmlldmUnLCAnYWxsJ10pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByb2R1Y3Q7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBSZXNvdXJjZSA9IHJlcXVpcmUoJy4uL3Jlc291cmNlJyk7XG5cbmNsYXNzIFZpZGVvIGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICd2aWRlb3MnLCBbJ2FsbCcsICdyZXRyaWV2ZScsICdmaWxlcyddKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBWaWRlbztcbiIsImltcG9ydCBkZWZhdWx0cyBmcm9tICcuL2RlZmF1bHRzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vcmVzb3VyY2VzL2NvbGxlY3Rpb25zJztcbmltcG9ydCBWaWRlbyBmcm9tICcuL3Jlc291cmNlcy92aWRlb3MnO1xuaW1wb3J0IEN1c3RvbWVyIGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbWVycyc7XG5pbXBvcnQgUHJvZHVjdCBmcm9tICcuL3Jlc291cmNlcy9wcm9kdWN0cyc7XG5pbXBvcnQgQnJvd3NlIGZyb20gJy4vcmVzb3VyY2VzL2Jyb3dzZSc7XG5cbmxldCByZXNvdXJjZXMgPSB7XG4gIGNvbGxlY3Rpb25zIDogQ29sbGVjdGlvbixcbiAgdmlkZW9zICAgICAgOiBWaWRlbyxcbiAgcHJvZHVjdHMgICAgOiBQcm9kdWN0LFxuICBjdXN0b21lciAgICA6IEN1c3RvbWVyLFxuICBicm93c2UgICAgICA6IEJyb3dzZVxufTtcblxuY2xhc3Mgdmh4IHtcbiAgY29uc3RydWN0b3Ioa2V5KSB7XG4gICAgbGV0IF90aGlzICAgID0gdGhpcztcblxuICAgIGlmICghKF90aGlzIGluc3RhbmNlb2Ygdmh4KSkge1xuICAgICAgcmV0dXJuIG5ldyB2aHgoa2V5KTtcbiAgICB9XG5cbiAgICBfdGhpcy5hcGkgPSBrZXkgPyBfdGhpcy5zZXRBcGkoa2V5KSA6IF90aGlzLnNldFRva2VuKCk7XG4gICAgX3RoaXMucHJlcGFyZVJlc291cmNlcygpO1xuICB9XG5cbiAgc2V0QXBpKGtleSkge1xuICAgIHJldHVybiB7XG4gICAgICBhdXRoOiAnQmFzaWMgJyArIGJ0b2Eoa2V5KSxcbiAgICAgIGhvc3Q6IGRlZmF1bHRzLkhPU1QsXG4gICAgICBwcm90b2NvbDogZGVmYXVsdHMuUFJPVE9DT0wsXG4gICAgICB0aW1lb3V0OiBkZWZhdWx0cy5USU1FT1VUXG4gICAgfTtcbiAgfVxuXG4gIHNldFRva2VuKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0b2tlbjogbnVsbCxcbiAgICAgIGhvc3Q6IGRlZmF1bHRzLkhPU1QsXG4gICAgICBwcm90b2NvbDogZGVmYXVsdHMuUFJPVE9DT0wsXG4gICAgICB0aW1lb3V0OiBkZWZhdWx0cy5USU1FT1VULFxuICAgICAgdG9rZW5faG9zdDogZGVmYXVsdHMuVE9LRU5fSE9TVFxuICAgIH07XG4gIH1cblxuICBwcmVwYXJlUmVzb3VyY2VzKCkge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICBmb3IgKGxldCBuYW1lIGluIHJlc291cmNlcykge1xuICAgICAgX3RoaXNbbmFtZVswXS50b0xvd2VyQ2FzZSgpICsgbmFtZS5zdWJzdHJpbmcoMSldID0gbmV3IHJlc291cmNlc1tuYW1lXShfdGhpcy5hcGkpO1xuICAgIH1cbiAgfVxufVxuXG53aW5kb3cudmh4ID0gdmh4O1xuIiwiXHJcbi8qKlxyXG4gKiBFeHBvc2UgYEVtaXR0ZXJgLlxyXG4gKi9cclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xyXG4gIG1vZHVsZS5leHBvcnRzID0gRW1pdHRlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgYSBuZXcgYEVtaXR0ZXJgLlxyXG4gKlxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIEVtaXR0ZXIob2JqKSB7XHJcbiAgaWYgKG9iaikgcmV0dXJuIG1peGluKG9iaik7XHJcbn07XHJcblxyXG4vKipcclxuICogTWl4aW4gdGhlIGVtaXR0ZXIgcHJvcGVydGllcy5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IG9ialxyXG4gKiBAcmV0dXJuIHtPYmplY3R9XHJcbiAqIEBhcGkgcHJpdmF0ZVxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIG1peGluKG9iaikge1xyXG4gIGZvciAodmFyIGtleSBpbiBFbWl0dGVyLnByb3RvdHlwZSkge1xyXG4gICAgb2JqW2tleV0gPSBFbWl0dGVyLnByb3RvdHlwZVtrZXldO1xyXG4gIH1cclxuICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG4vKipcclxuICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXHJcbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUub24gPVxyXG5FbWl0dGVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQsIGZuKXtcclxuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XHJcbiAgKHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gPSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdIHx8IFtdKVxyXG4gICAgLnB1c2goZm4pO1xyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxyXG4gKiB0aW1lIHRoZW4gYXV0b21hdGljYWxseSByZW1vdmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICogQHJldHVybiB7RW1pdHRlcn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24oZXZlbnQsIGZuKXtcclxuICBmdW5jdGlvbiBvbigpIHtcclxuICAgIHRoaXMub2ZmKGV2ZW50LCBvbik7XHJcbiAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gIH1cclxuXHJcbiAgb24uZm4gPSBmbjtcclxuICB0aGlzLm9uKGV2ZW50LCBvbik7XHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcclxuICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLm9mZiA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cclxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cclxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG5cclxuICAvLyBhbGxcclxuICBpZiAoMCA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLy8gc3BlY2lmaWMgZXZlbnRcclxuICB2YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcclxuICBpZiAoIWNhbGxiYWNrcykgcmV0dXJuIHRoaXM7XHJcblxyXG4gIC8vIHJlbW92ZSBhbGwgaGFuZGxlcnNcclxuICBpZiAoMSA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLy8gcmVtb3ZlIHNwZWNpZmljIGhhbmRsZXJcclxuICB2YXIgY2I7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcclxuICAgIGNiID0gY2FsbGJhY2tzW2ldO1xyXG4gICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcclxuICAgICAgY2FsbGJhY2tzLnNwbGljZShpLCAxKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEVtaXQgYGV2ZW50YCB3aXRoIHRoZSBnaXZlbiBhcmdzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtNaXhlZH0gLi4uXHJcbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XHJcbiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSlcclxuICAgICwgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcclxuXHJcbiAgaWYgKGNhbGxiYWNrcykge1xyXG4gICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICBjYWxsYmFja3NbaV0uYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gYXJyYXkgb2YgY2FsbGJhY2tzIGZvciBgZXZlbnRgLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHJldHVybiB7QXJyYXl9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24oZXZlbnQpe1xyXG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcclxuICByZXR1cm4gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB0aGlzIGVtaXR0ZXIgaGFzIGBldmVudGAgaGFuZGxlcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmhhc0xpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICByZXR1cm4gISEgdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aDtcclxufTtcclxuIiwiLyoqXG4gKiBSb290IHJlZmVyZW5jZSBmb3IgaWZyYW1lcy5cbiAqL1xuXG52YXIgcm9vdDtcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgeyAvLyBCcm93c2VyIHdpbmRvd1xuICByb290ID0gd2luZG93O1xufSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHsgLy8gV2ViIFdvcmtlclxuICByb290ID0gc2VsZjtcbn0gZWxzZSB7IC8vIE90aGVyIGVudmlyb25tZW50c1xuICBjb25zb2xlLndhcm4oXCJVc2luZyBicm93c2VyLW9ubHkgdmVyc2lvbiBvZiBzdXBlcmFnZW50IGluIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuICByb290ID0gdGhpcztcbn1cblxudmFyIEVtaXR0ZXIgPSByZXF1aXJlKCdlbWl0dGVyJyk7XG52YXIgcmVxdWVzdEJhc2UgPSByZXF1aXJlKCcuL3JlcXVlc3QtYmFzZScpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pcy1vYmplY3QnKTtcblxuLyoqXG4gKiBOb29wLlxuICovXG5cbmZ1bmN0aW9uIG5vb3AoKXt9O1xuXG4vKipcbiAqIEV4cG9zZSBgcmVxdWVzdGAuXG4gKi9cblxudmFyIHJlcXVlc3QgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpLmJpbmQobnVsbCwgUmVxdWVzdCk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIFhIUi5cbiAqL1xuXG5yZXF1ZXN0LmdldFhIUiA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHJvb3QuWE1MSHR0cFJlcXVlc3RcbiAgICAgICYmICghcm9vdC5sb2NhdGlvbiB8fCAnZmlsZTonICE9IHJvb3QubG9jYXRpb24ucHJvdG9jb2xcbiAgICAgICAgICB8fCAhcm9vdC5BY3RpdmVYT2JqZWN0KSkge1xuICAgIHJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3Q7XG4gIH0gZWxzZSB7XG4gICAgdHJ5IHsgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MSFRUUCcpOyB9IGNhdGNoKGUpIHt9XG4gICAgdHJ5IHsgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNc3htbDIuWE1MSFRUUC42LjAnKTsgfSBjYXRjaChlKSB7fVxuICAgIHRyeSB7IHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTXN4bWwyLlhNTEhUVFAuMy4wJyk7IH0gY2F0Y2goZSkge31cbiAgICB0cnkgeyByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoJ01zeG1sMi5YTUxIVFRQJyk7IH0gY2F0Y2goZSkge31cbiAgfVxuICB0aHJvdyBFcnJvcihcIkJyb3dzZXItb25seSB2ZXJpc29uIG9mIHN1cGVyYWdlbnQgY291bGQgbm90IGZpbmQgWEhSXCIpO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UsIGFkZGVkIHRvIHN1cHBvcnQgSUUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbnZhciB0cmltID0gJycudHJpbVxuICA/IGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMudHJpbSgpOyB9XG4gIDogZnVuY3Rpb24ocykgeyByZXR1cm4gcy5yZXBsYWNlKC8oXlxccyp8XFxzKiQpL2csICcnKTsgfTtcblxuLyoqXG4gKiBTZXJpYWxpemUgdGhlIGdpdmVuIGBvYmpgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZShvYmopIHtcbiAgaWYgKCFpc09iamVjdChvYmopKSByZXR1cm4gb2JqO1xuICB2YXIgcGFpcnMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChudWxsICE9IG9ialtrZXldKSB7XG4gICAgICBwdXNoRW5jb2RlZEtleVZhbHVlUGFpcihwYWlycywga2V5LCBvYmpba2V5XSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBwYWlycy5qb2luKCcmJyk7XG59XG5cbi8qKlxuICogSGVscHMgJ3NlcmlhbGl6ZScgd2l0aCBzZXJpYWxpemluZyBhcnJheXMuXG4gKiBNdXRhdGVzIHRoZSBwYWlycyBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBwYWlyc1xuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHtNaXhlZH0gdmFsXG4gKi9cblxuZnVuY3Rpb24gcHVzaEVuY29kZWRLZXlWYWx1ZVBhaXIocGFpcnMsIGtleSwgdmFsKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICByZXR1cm4gdmFsLmZvckVhY2goZnVuY3Rpb24odikge1xuICAgICAgcHVzaEVuY29kZWRLZXlWYWx1ZVBhaXIocGFpcnMsIGtleSwgdik7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsKSkge1xuICAgIGZvcih2YXIgc3Via2V5IGluIHZhbCkge1xuICAgICAgcHVzaEVuY29kZWRLZXlWYWx1ZVBhaXIocGFpcnMsIGtleSArICdbJyArIHN1YmtleSArICddJywgdmFsW3N1YmtleV0pO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgcGFpcnMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KVxuICAgICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkpO1xufVxuXG4vKipcbiAqIEV4cG9zZSBzZXJpYWxpemF0aW9uIG1ldGhvZC5cbiAqL1xuXG4gcmVxdWVzdC5zZXJpYWxpemVPYmplY3QgPSBzZXJpYWxpemU7XG5cbiAvKipcbiAgKiBQYXJzZSB0aGUgZ2l2ZW4geC13d3ctZm9ybS11cmxlbmNvZGVkIGBzdHJgLlxuICAqXG4gICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICAqIEByZXR1cm4ge09iamVjdH1cbiAgKiBAYXBpIHByaXZhdGVcbiAgKi9cblxuZnVuY3Rpb24gcGFyc2VTdHJpbmcoc3RyKSB7XG4gIHZhciBvYmogPSB7fTtcbiAgdmFyIHBhaXJzID0gc3RyLnNwbGl0KCcmJyk7XG4gIHZhciBwYWlyO1xuICB2YXIgcG9zO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwYWlycy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIHBhaXIgPSBwYWlyc1tpXTtcbiAgICBwb3MgPSBwYWlyLmluZGV4T2YoJz0nKTtcbiAgICBpZiAocG9zID09IC0xKSB7XG4gICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KHBhaXIpXSA9ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KHBhaXIuc2xpY2UoMCwgcG9zKSldID1cbiAgICAgICAgZGVjb2RlVVJJQ29tcG9uZW50KHBhaXIuc2xpY2UocG9zICsgMSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogRXhwb3NlIHBhcnNlci5cbiAqL1xuXG5yZXF1ZXN0LnBhcnNlU3RyaW5nID0gcGFyc2VTdHJpbmc7XG5cbi8qKlxuICogRGVmYXVsdCBNSU1FIHR5cGUgbWFwLlxuICpcbiAqICAgICBzdXBlcmFnZW50LnR5cGVzLnhtbCA9ICdhcHBsaWNhdGlvbi94bWwnO1xuICpcbiAqL1xuXG5yZXF1ZXN0LnR5cGVzID0ge1xuICBodG1sOiAndGV4dC9odG1sJyxcbiAganNvbjogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICB4bWw6ICdhcHBsaWNhdGlvbi94bWwnLFxuICB1cmxlbmNvZGVkOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgJ2Zvcm0nOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgJ2Zvcm0tZGF0YSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG59O1xuXG4vKipcbiAqIERlZmF1bHQgc2VyaWFsaXphdGlvbiBtYXAuXG4gKlxuICogICAgIHN1cGVyYWdlbnQuc2VyaWFsaXplWydhcHBsaWNhdGlvbi94bWwnXSA9IGZ1bmN0aW9uKG9iail7XG4gKiAgICAgICByZXR1cm4gJ2dlbmVyYXRlZCB4bWwgaGVyZSc7XG4gKiAgICAgfTtcbiAqXG4gKi9cblxuIHJlcXVlc3Quc2VyaWFsaXplID0ge1xuICAgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc6IHNlcmlhbGl6ZSxcbiAgICdhcHBsaWNhdGlvbi9qc29uJzogSlNPTi5zdHJpbmdpZnlcbiB9O1xuXG4gLyoqXG4gICogRGVmYXVsdCBwYXJzZXJzLlxuICAqXG4gICogICAgIHN1cGVyYWdlbnQucGFyc2VbJ2FwcGxpY2F0aW9uL3htbCddID0gZnVuY3Rpb24oc3RyKXtcbiAgKiAgICAgICByZXR1cm4geyBvYmplY3QgcGFyc2VkIGZyb20gc3RyIH07XG4gICogICAgIH07XG4gICpcbiAgKi9cblxucmVxdWVzdC5wYXJzZSA9IHtcbiAgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc6IHBhcnNlU3RyaW5nLFxuICAnYXBwbGljYXRpb24vanNvbic6IEpTT04ucGFyc2Vcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGhlYWRlciBgc3RyYCBpbnRvXG4gKiBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgbWFwcGVkIGZpZWxkcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZUhlYWRlcihzdHIpIHtcbiAgdmFyIGxpbmVzID0gc3RyLnNwbGl0KC9cXHI/XFxuLyk7XG4gIHZhciBmaWVsZHMgPSB7fTtcbiAgdmFyIGluZGV4O1xuICB2YXIgbGluZTtcbiAgdmFyIGZpZWxkO1xuICB2YXIgdmFsO1xuXG4gIGxpbmVzLnBvcCgpOyAvLyB0cmFpbGluZyBDUkxGXG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxpbmVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgbGluZSA9IGxpbmVzW2ldO1xuICAgIGluZGV4ID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAgZmllbGQgPSBsaW5lLnNsaWNlKDAsIGluZGV4KS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IHRyaW0obGluZS5zbGljZShpbmRleCArIDEpKTtcbiAgICBmaWVsZHNbZmllbGRdID0gdmFsO1xuICB9XG5cbiAgcmV0dXJuIGZpZWxkcztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBgbWltZWAgaXMganNvbiBvciBoYXMgK2pzb24gc3RydWN0dXJlZCBzeW50YXggc3VmZml4LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtaW1lXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gaXNKU09OKG1pbWUpIHtcbiAgcmV0dXJuIC9bXFwvK11qc29uXFxiLy50ZXN0KG1pbWUpO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgbWltZSB0eXBlIGZvciB0aGUgZ2l2ZW4gYHN0cmAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gdHlwZShzdHIpe1xuICByZXR1cm4gc3RyLnNwbGl0KC8gKjsgKi8pLnNoaWZ0KCk7XG59O1xuXG4vKipcbiAqIFJldHVybiBoZWFkZXIgZmllbGQgcGFyYW1ldGVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJhbXMoc3RyKXtcbiAgcmV0dXJuIHN0ci5zcGxpdCgvICo7ICovKS5yZWR1Y2UoZnVuY3Rpb24ob2JqLCBzdHIpe1xuICAgIHZhciBwYXJ0cyA9IHN0ci5zcGxpdCgvICo9ICovKSxcbiAgICAgICAga2V5ID0gcGFydHMuc2hpZnQoKSxcbiAgICAgICAgdmFsID0gcGFydHMuc2hpZnQoKTtcblxuICAgIGlmIChrZXkgJiYgdmFsKSBvYmpba2V5XSA9IHZhbDtcbiAgICByZXR1cm4gb2JqO1xuICB9LCB7fSk7XG59O1xuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgYFJlc3BvbnNlYCB3aXRoIHRoZSBnaXZlbiBgeGhyYC5cbiAqXG4gKiAgLSBzZXQgZmxhZ3MgKC5vaywgLmVycm9yLCBldGMpXG4gKiAgLSBwYXJzZSBoZWFkZXJcbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgQWxpYXNpbmcgYHN1cGVyYWdlbnRgIGFzIGByZXF1ZXN0YCBpcyBuaWNlOlxuICpcbiAqICAgICAgcmVxdWVzdCA9IHN1cGVyYWdlbnQ7XG4gKlxuICogIFdlIGNhbiB1c2UgdGhlIHByb21pc2UtbGlrZSBBUEksIG9yIHBhc3MgY2FsbGJhY2tzOlxuICpcbiAqICAgICAgcmVxdWVzdC5nZXQoJy8nKS5lbmQoZnVuY3Rpb24ocmVzKXt9KTtcbiAqICAgICAgcmVxdWVzdC5nZXQoJy8nLCBmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqICBTZW5kaW5nIGRhdGEgY2FuIGJlIGNoYWluZWQ6XG4gKlxuICogICAgICByZXF1ZXN0XG4gKiAgICAgICAgLnBvc3QoJy91c2VyJylcbiAqICAgICAgICAuc2VuZCh7IG5hbWU6ICd0aicgfSlcbiAqICAgICAgICAuZW5kKGZ1bmN0aW9uKHJlcyl7fSk7XG4gKlxuICogIE9yIHBhc3NlZCB0byBgLnNlbmQoKWA6XG4gKlxuICogICAgICByZXF1ZXN0XG4gKiAgICAgICAgLnBvc3QoJy91c2VyJylcbiAqICAgICAgICAuc2VuZCh7IG5hbWU6ICd0aicgfSwgZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiAgT3IgcGFzc2VkIHRvIGAucG9zdCgpYDpcbiAqXG4gKiAgICAgIHJlcXVlc3RcbiAqICAgICAgICAucG9zdCgnL3VzZXInLCB7IG5hbWU6ICd0aicgfSlcbiAqICAgICAgICAuZW5kKGZ1bmN0aW9uKHJlcyl7fSk7XG4gKlxuICogT3IgZnVydGhlciByZWR1Y2VkIHRvIGEgc2luZ2xlIGNhbGwgZm9yIHNpbXBsZSBjYXNlczpcbiAqXG4gKiAgICAgIHJlcXVlc3RcbiAqICAgICAgICAucG9zdCgnL3VzZXInLCB7IG5hbWU6ICd0aicgfSwgZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiBAcGFyYW0ge1hNTEhUVFBSZXF1ZXN0fSB4aHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBSZXNwb25zZShyZXEsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHRoaXMucmVxID0gcmVxO1xuICB0aGlzLnhociA9IHRoaXMucmVxLnhocjtcbiAgLy8gcmVzcG9uc2VUZXh0IGlzIGFjY2Vzc2libGUgb25seSBpZiByZXNwb25zZVR5cGUgaXMgJycgb3IgJ3RleHQnIGFuZCBvbiBvbGRlciBicm93c2Vyc1xuICB0aGlzLnRleHQgPSAoKHRoaXMucmVxLm1ldGhvZCAhPSdIRUFEJyAmJiAodGhpcy54aHIucmVzcG9uc2VUeXBlID09PSAnJyB8fCB0aGlzLnhoci5yZXNwb25zZVR5cGUgPT09ICd0ZXh0JykpIHx8IHR5cGVvZiB0aGlzLnhoci5yZXNwb25zZVR5cGUgPT09ICd1bmRlZmluZWQnKVxuICAgICA/IHRoaXMueGhyLnJlc3BvbnNlVGV4dFxuICAgICA6IG51bGw7XG4gIHRoaXMuc3RhdHVzVGV4dCA9IHRoaXMucmVxLnhoci5zdGF0dXNUZXh0O1xuICB0aGlzLl9zZXRTdGF0dXNQcm9wZXJ0aWVzKHRoaXMueGhyLnN0YXR1cyk7XG4gIHRoaXMuaGVhZGVyID0gdGhpcy5oZWFkZXJzID0gcGFyc2VIZWFkZXIodGhpcy54aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuICAvLyBnZXRBbGxSZXNwb25zZUhlYWRlcnMgc29tZXRpbWVzIGZhbHNlbHkgcmV0dXJucyBcIlwiIGZvciBDT1JTIHJlcXVlc3RzLCBidXRcbiAgLy8gZ2V0UmVzcG9uc2VIZWFkZXIgc3RpbGwgd29ya3MuIHNvIHdlIGdldCBjb250ZW50LXR5cGUgZXZlbiBpZiBnZXR0aW5nXG4gIC8vIG90aGVyIGhlYWRlcnMgZmFpbHMuXG4gIHRoaXMuaGVhZGVyWydjb250ZW50LXR5cGUnXSA9IHRoaXMueGhyLmdldFJlc3BvbnNlSGVhZGVyKCdjb250ZW50LXR5cGUnKTtcbiAgdGhpcy5fc2V0SGVhZGVyUHJvcGVydGllcyh0aGlzLmhlYWRlcik7XG4gIHRoaXMuYm9keSA9IHRoaXMucmVxLm1ldGhvZCAhPSAnSEVBRCdcbiAgICA/IHRoaXMuX3BhcnNlQm9keSh0aGlzLnRleHQgPyB0aGlzLnRleHQgOiB0aGlzLnhoci5yZXNwb25zZSlcbiAgICA6IG51bGw7XG59XG5cbi8qKlxuICogR2V0IGNhc2UtaW5zZW5zaXRpdmUgYGZpZWxkYCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGZpZWxkKXtcbiAgcmV0dXJuIHRoaXMuaGVhZGVyW2ZpZWxkLnRvTG93ZXJDYXNlKCldO1xufTtcblxuLyoqXG4gKiBTZXQgaGVhZGVyIHJlbGF0ZWQgcHJvcGVydGllczpcbiAqXG4gKiAgIC0gYC50eXBlYCB0aGUgY29udGVudCB0eXBlIHdpdGhvdXQgcGFyYW1zXG4gKlxuICogQSByZXNwb25zZSBvZiBcIkNvbnRlbnQtVHlwZTogdGV4dC9wbGFpbjsgY2hhcnNldD11dGYtOFwiXG4gKiB3aWxsIHByb3ZpZGUgeW91IHdpdGggYSBgLnR5cGVgIG9mIFwidGV4dC9wbGFpblwiLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS5fc2V0SGVhZGVyUHJvcGVydGllcyA9IGZ1bmN0aW9uKGhlYWRlcil7XG4gIC8vIGNvbnRlbnQtdHlwZVxuICB2YXIgY3QgPSB0aGlzLmhlYWRlclsnY29udGVudC10eXBlJ10gfHwgJyc7XG4gIHRoaXMudHlwZSA9IHR5cGUoY3QpO1xuXG4gIC8vIHBhcmFtc1xuICB2YXIgb2JqID0gcGFyYW1zKGN0KTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikgdGhpc1trZXldID0gb2JqW2tleV07XG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBib2R5IGBzdHJgLlxuICpcbiAqIFVzZWQgZm9yIGF1dG8tcGFyc2luZyBvZiBib2RpZXMuIFBhcnNlcnNcbiAqIGFyZSBkZWZpbmVkIG9uIHRoZSBgc3VwZXJhZ2VudC5wYXJzZWAgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge01peGVkfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLl9wYXJzZUJvZHkgPSBmdW5jdGlvbihzdHIpe1xuICB2YXIgcGFyc2UgPSByZXF1ZXN0LnBhcnNlW3RoaXMudHlwZV07XG4gIGlmICghcGFyc2UgJiYgaXNKU09OKHRoaXMudHlwZSkpIHtcbiAgICBwYXJzZSA9IHJlcXVlc3QucGFyc2VbJ2FwcGxpY2F0aW9uL2pzb24nXTtcbiAgfVxuICByZXR1cm4gcGFyc2UgJiYgc3RyICYmIChzdHIubGVuZ3RoIHx8IHN0ciBpbnN0YW5jZW9mIE9iamVjdClcbiAgICA/IHBhcnNlKHN0cilcbiAgICA6IG51bGw7XG59O1xuXG4vKipcbiAqIFNldCBmbGFncyBzdWNoIGFzIGAub2tgIGJhc2VkIG9uIGBzdGF0dXNgLlxuICpcbiAqIEZvciBleGFtcGxlIGEgMnh4IHJlc3BvbnNlIHdpbGwgZ2l2ZSB5b3UgYSBgLm9rYCBvZiBfX3RydWVfX1xuICogd2hlcmVhcyA1eHggd2lsbCBiZSBfX2ZhbHNlX18gYW5kIGAuZXJyb3JgIHdpbGwgYmUgX190cnVlX18uIFRoZVxuICogYC5jbGllbnRFcnJvcmAgYW5kIGAuc2VydmVyRXJyb3JgIGFyZSBhbHNvIGF2YWlsYWJsZSB0byBiZSBtb3JlXG4gKiBzcGVjaWZpYywgYW5kIGAuc3RhdHVzVHlwZWAgaXMgdGhlIGNsYXNzIG9mIGVycm9yIHJhbmdpbmcgZnJvbSAxLi41XG4gKiBzb21ldGltZXMgdXNlZnVsIGZvciBtYXBwaW5nIHJlc3BvbmQgY29sb3JzIGV0Yy5cbiAqXG4gKiBcInN1Z2FyXCIgcHJvcGVydGllcyBhcmUgYWxzbyBkZWZpbmVkIGZvciBjb21tb24gY2FzZXMuIEN1cnJlbnRseSBwcm92aWRpbmc6XG4gKlxuICogICAtIC5ub0NvbnRlbnRcbiAqICAgLSAuYmFkUmVxdWVzdFxuICogICAtIC51bmF1dGhvcml6ZWRcbiAqICAgLSAubm90QWNjZXB0YWJsZVxuICogICAtIC5ub3RGb3VuZFxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS5fc2V0U3RhdHVzUHJvcGVydGllcyA9IGZ1bmN0aW9uKHN0YXR1cyl7XG4gIC8vIGhhbmRsZSBJRTkgYnVnOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwMDQ2OTcyL21zaWUtcmV0dXJucy1zdGF0dXMtY29kZS1vZi0xMjIzLWZvci1hamF4LXJlcXVlc3RcbiAgaWYgKHN0YXR1cyA9PT0gMTIyMykge1xuICAgIHN0YXR1cyA9IDIwNDtcbiAgfVxuXG4gIHZhciB0eXBlID0gc3RhdHVzIC8gMTAwIHwgMDtcblxuICAvLyBzdGF0dXMgLyBjbGFzc1xuICB0aGlzLnN0YXR1cyA9IHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1cztcbiAgdGhpcy5zdGF0dXNUeXBlID0gdHlwZTtcblxuICAvLyBiYXNpY3NcbiAgdGhpcy5pbmZvID0gMSA9PSB0eXBlO1xuICB0aGlzLm9rID0gMiA9PSB0eXBlO1xuICB0aGlzLmNsaWVudEVycm9yID0gNCA9PSB0eXBlO1xuICB0aGlzLnNlcnZlckVycm9yID0gNSA9PSB0eXBlO1xuICB0aGlzLmVycm9yID0gKDQgPT0gdHlwZSB8fCA1ID09IHR5cGUpXG4gICAgPyB0aGlzLnRvRXJyb3IoKVxuICAgIDogZmFsc2U7XG5cbiAgLy8gc3VnYXJcbiAgdGhpcy5hY2NlcHRlZCA9IDIwMiA9PSBzdGF0dXM7XG4gIHRoaXMubm9Db250ZW50ID0gMjA0ID09IHN0YXR1cztcbiAgdGhpcy5iYWRSZXF1ZXN0ID0gNDAwID09IHN0YXR1cztcbiAgdGhpcy51bmF1dGhvcml6ZWQgPSA0MDEgPT0gc3RhdHVzO1xuICB0aGlzLm5vdEFjY2VwdGFibGUgPSA0MDYgPT0gc3RhdHVzO1xuICB0aGlzLm5vdEZvdW5kID0gNDA0ID09IHN0YXR1cztcbiAgdGhpcy5mb3JiaWRkZW4gPSA0MDMgPT0gc3RhdHVzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gYW4gYEVycm9yYCByZXByZXNlbnRhdGl2ZSBvZiB0aGlzIHJlc3BvbnNlLlxuICpcbiAqIEByZXR1cm4ge0Vycm9yfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXNwb25zZS5wcm90b3R5cGUudG9FcnJvciA9IGZ1bmN0aW9uKCl7XG4gIHZhciByZXEgPSB0aGlzLnJlcTtcbiAgdmFyIG1ldGhvZCA9IHJlcS5tZXRob2Q7XG4gIHZhciB1cmwgPSByZXEudXJsO1xuXG4gIHZhciBtc2cgPSAnY2Fubm90ICcgKyBtZXRob2QgKyAnICcgKyB1cmwgKyAnICgnICsgdGhpcy5zdGF0dXMgKyAnKSc7XG4gIHZhciBlcnIgPSBuZXcgRXJyb3IobXNnKTtcbiAgZXJyLnN0YXR1cyA9IHRoaXMuc3RhdHVzO1xuICBlcnIubWV0aG9kID0gbWV0aG9kO1xuICBlcnIudXJsID0gdXJsO1xuXG4gIHJldHVybiBlcnI7XG59O1xuXG4vKipcbiAqIEV4cG9zZSBgUmVzcG9uc2VgLlxuICovXG5cbnJlcXVlc3QuUmVzcG9uc2UgPSBSZXNwb25zZTtcblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBSZXF1ZXN0YCB3aXRoIHRoZSBnaXZlbiBgbWV0aG9kYCBhbmQgYHVybGAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZFxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBSZXF1ZXN0KG1ldGhvZCwgdXJsKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5fcXVlcnkgPSB0aGlzLl9xdWVyeSB8fCBbXTtcbiAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XG4gIHRoaXMudXJsID0gdXJsO1xuICB0aGlzLmhlYWRlciA9IHt9OyAvLyBwcmVzZXJ2ZXMgaGVhZGVyIG5hbWUgY2FzZVxuICB0aGlzLl9oZWFkZXIgPSB7fTsgLy8gY29lcmNlcyBoZWFkZXIgbmFtZXMgdG8gbG93ZXJjYXNlXG4gIHRoaXMub24oJ2VuZCcsIGZ1bmN0aW9uKCl7XG4gICAgdmFyIGVyciA9IG51bGw7XG4gICAgdmFyIHJlcyA9IG51bGw7XG5cbiAgICB0cnkge1xuICAgICAgcmVzID0gbmV3IFJlc3BvbnNlKHNlbGYpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgZXJyID0gbmV3IEVycm9yKCdQYXJzZXIgaXMgdW5hYmxlIHRvIHBhcnNlIHRoZSByZXNwb25zZScpO1xuICAgICAgZXJyLnBhcnNlID0gdHJ1ZTtcbiAgICAgIGVyci5vcmlnaW5hbCA9IGU7XG4gICAgICAvLyBpc3N1ZSAjNjc1OiByZXR1cm4gdGhlIHJhdyByZXNwb25zZSBpZiB0aGUgcmVzcG9uc2UgcGFyc2luZyBmYWlsc1xuICAgICAgZXJyLnJhd1Jlc3BvbnNlID0gc2VsZi54aHIgJiYgc2VsZi54aHIucmVzcG9uc2VUZXh0ID8gc2VsZi54aHIucmVzcG9uc2VUZXh0IDogbnVsbDtcbiAgICAgIC8vIGlzc3VlICM4NzY6IHJldHVybiB0aGUgaHR0cCBzdGF0dXMgY29kZSBpZiB0aGUgcmVzcG9uc2UgcGFyc2luZyBmYWlsc1xuICAgICAgZXJyLnN0YXR1c0NvZGUgPSBzZWxmLnhociAmJiBzZWxmLnhoci5zdGF0dXMgPyBzZWxmLnhoci5zdGF0dXMgOiBudWxsO1xuICAgICAgcmV0dXJuIHNlbGYuY2FsbGJhY2soZXJyKTtcbiAgICB9XG5cbiAgICBzZWxmLmVtaXQoJ3Jlc3BvbnNlJywgcmVzKTtcblxuICAgIHZhciBuZXdfZXJyO1xuICAgIHRyeSB7XG4gICAgICBpZiAocmVzLnN0YXR1cyA8IDIwMCB8fCByZXMuc3RhdHVzID49IDMwMCkge1xuICAgICAgICBuZXdfZXJyID0gbmV3IEVycm9yKHJlcy5zdGF0dXNUZXh0IHx8ICdVbnN1Y2Nlc3NmdWwgSFRUUCByZXNwb25zZScpO1xuICAgICAgICBuZXdfZXJyLm9yaWdpbmFsID0gZXJyO1xuICAgICAgICBuZXdfZXJyLnJlc3BvbnNlID0gcmVzO1xuICAgICAgICBuZXdfZXJyLnN0YXR1cyA9IHJlcy5zdGF0dXM7XG4gICAgICB9XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBuZXdfZXJyID0gZTsgLy8gIzk4NSB0b3VjaGluZyByZXMgbWF5IGNhdXNlIElOVkFMSURfU1RBVEVfRVJSIG9uIG9sZCBBbmRyb2lkXG4gICAgfVxuXG4gICAgLy8gIzEwMDAgZG9uJ3QgY2F0Y2ggZXJyb3JzIGZyb20gdGhlIGNhbGxiYWNrIHRvIGF2b2lkIGRvdWJsZSBjYWxsaW5nIGl0XG4gICAgaWYgKG5ld19lcnIpIHtcbiAgICAgIHNlbGYuY2FsbGJhY2sobmV3X2VyciwgcmVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5jYWxsYmFjayhudWxsLCByZXMpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogTWl4aW4gYEVtaXR0ZXJgIGFuZCBgcmVxdWVzdEJhc2VgLlxuICovXG5cbkVtaXR0ZXIoUmVxdWVzdC5wcm90b3R5cGUpO1xuZm9yICh2YXIga2V5IGluIHJlcXVlc3RCYXNlKSB7XG4gIFJlcXVlc3QucHJvdG90eXBlW2tleV0gPSByZXF1ZXN0QmFzZVtrZXldO1xufVxuXG4vKipcbiAqIFNldCBDb250ZW50LVR5cGUgdG8gYHR5cGVgLCBtYXBwaW5nIHZhbHVlcyBmcm9tIGByZXF1ZXN0LnR5cGVzYC5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgIHN1cGVyYWdlbnQudHlwZXMueG1sID0gJ2FwcGxpY2F0aW9uL3htbCc7XG4gKlxuICogICAgICByZXF1ZXN0LnBvc3QoJy8nKVxuICogICAgICAgIC50eXBlKCd4bWwnKVxuICogICAgICAgIC5zZW5kKHhtbHN0cmluZylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiAgICAgIHJlcXVlc3QucG9zdCgnLycpXG4gKiAgICAgICAgLnR5cGUoJ2FwcGxpY2F0aW9uL3htbCcpXG4gKiAgICAgICAgLnNlbmQoeG1sc3RyaW5nKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUudHlwZSA9IGZ1bmN0aW9uKHR5cGUpe1xuICB0aGlzLnNldCgnQ29udGVudC1UeXBlJywgcmVxdWVzdC50eXBlc1t0eXBlXSB8fCB0eXBlKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCByZXNwb25zZVR5cGUgdG8gYHZhbGAuIFByZXNlbnRseSB2YWxpZCByZXNwb25zZVR5cGVzIGFyZSAnYmxvYicgYW5kXG4gKiAnYXJyYXlidWZmZXInLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgcmVxLmdldCgnLycpXG4gKiAgICAgICAgLnJlc3BvbnNlVHlwZSgnYmxvYicpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHZhbFxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLnJlc3BvbnNlVHlwZSA9IGZ1bmN0aW9uKHZhbCl7XG4gIHRoaXMuX3Jlc3BvbnNlVHlwZSA9IHZhbDtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCBBY2NlcHQgdG8gYHR5cGVgLCBtYXBwaW5nIHZhbHVlcyBmcm9tIGByZXF1ZXN0LnR5cGVzYC5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgIHN1cGVyYWdlbnQudHlwZXMuanNvbiA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAqXG4gKiAgICAgIHJlcXVlc3QuZ2V0KCcvYWdlbnQnKVxuICogICAgICAgIC5hY2NlcHQoJ2pzb24nKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqICAgICAgcmVxdWVzdC5nZXQoJy9hZ2VudCcpXG4gKiAgICAgICAgLmFjY2VwdCgnYXBwbGljYXRpb24vanNvbicpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFjY2VwdFxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmFjY2VwdCA9IGZ1bmN0aW9uKHR5cGUpe1xuICB0aGlzLnNldCgnQWNjZXB0JywgcmVxdWVzdC50eXBlc1t0eXBlXSB8fCB0eXBlKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCBBdXRob3JpemF0aW9uIGZpZWxkIHZhbHVlIHdpdGggYHVzZXJgIGFuZCBgcGFzc2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVzZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXNzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB3aXRoICd0eXBlJyBwcm9wZXJ0eSAnYXV0bycgb3IgJ2Jhc2ljJyAoZGVmYXVsdCAnYmFzaWMnKVxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmF1dGggPSBmdW5jdGlvbih1c2VyLCBwYXNzLCBvcHRpb25zKXtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHtcbiAgICAgIHR5cGU6ICdiYXNpYydcbiAgICB9XG4gIH1cblxuICBzd2l0Y2ggKG9wdGlvbnMudHlwZSkge1xuICAgIGNhc2UgJ2Jhc2ljJzpcbiAgICAgIHZhciBzdHIgPSBidG9hKHVzZXIgKyAnOicgKyBwYXNzKTtcbiAgICAgIHRoaXMuc2V0KCdBdXRob3JpemF0aW9uJywgJ0Jhc2ljICcgKyBzdHIpO1xuICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnYXV0byc6XG4gICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcjtcbiAgICAgIHRoaXMucGFzc3dvcmQgPSBwYXNzO1xuICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4qIEFkZCBxdWVyeS1zdHJpbmcgYHZhbGAuXG4qXG4qIEV4YW1wbGVzOlxuKlxuKiAgIHJlcXVlc3QuZ2V0KCcvc2hvZXMnKVxuKiAgICAgLnF1ZXJ5KCdzaXplPTEwJylcbiogICAgIC5xdWVyeSh7IGNvbG9yOiAnYmx1ZScgfSlcbipcbiogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSB2YWxcbiogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4qIEBhcGkgcHVibGljXG4qL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uKHZhbCl7XG4gIGlmICgnc3RyaW5nJyAhPSB0eXBlb2YgdmFsKSB2YWwgPSBzZXJpYWxpemUodmFsKTtcbiAgaWYgKHZhbCkgdGhpcy5fcXVlcnkucHVzaCh2YWwpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUXVldWUgdGhlIGdpdmVuIGBmaWxlYCBhcyBhbiBhdHRhY2htZW50IHRvIHRoZSBzcGVjaWZpZWQgYGZpZWxkYCxcbiAqIHdpdGggb3B0aW9uYWwgYGZpbGVuYW1lYC5cbiAqXG4gKiBgYGAganNcbiAqIHJlcXVlc3QucG9zdCgnL3VwbG9hZCcpXG4gKiAgIC5hdHRhY2goJ2NvbnRlbnQnLCBuZXcgQmxvYihbJzxhIGlkPVwiYVwiPjxiIGlkPVwiYlwiPmhleSE8L2I+PC9hPiddLCB7IHR5cGU6IFwidGV4dC9odG1sXCJ9KSlcbiAqICAgLmVuZChjYWxsYmFjayk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqIEBwYXJhbSB7QmxvYnxGaWxlfSBmaWxlXG4gKiBAcGFyYW0ge1N0cmluZ30gZmlsZW5hbWVcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5hdHRhY2ggPSBmdW5jdGlvbihmaWVsZCwgZmlsZSwgZmlsZW5hbWUpe1xuICB0aGlzLl9nZXRGb3JtRGF0YSgpLmFwcGVuZChmaWVsZCwgZmlsZSwgZmlsZW5hbWUgfHwgZmlsZS5uYW1lKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5fZ2V0Rm9ybURhdGEgPSBmdW5jdGlvbigpe1xuICBpZiAoIXRoaXMuX2Zvcm1EYXRhKSB7XG4gICAgdGhpcy5fZm9ybURhdGEgPSBuZXcgcm9vdC5Gb3JtRGF0YSgpO1xuICB9XG4gIHJldHVybiB0aGlzLl9mb3JtRGF0YTtcbn07XG5cbi8qKlxuICogSW52b2tlIHRoZSBjYWxsYmFjayB3aXRoIGBlcnJgIGFuZCBgcmVzYFxuICogYW5kIGhhbmRsZSBhcml0eSBjaGVjay5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJcbiAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuY2FsbGJhY2sgPSBmdW5jdGlvbihlcnIsIHJlcyl7XG4gIHZhciBmbiA9IHRoaXMuX2NhbGxiYWNrO1xuICB0aGlzLmNsZWFyVGltZW91dCgpO1xuICBmbihlcnIsIHJlcyk7XG59O1xuXG4vKipcbiAqIEludm9rZSBjYWxsYmFjayB3aXRoIHgtZG9tYWluIGVycm9yLlxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmNyb3NzRG9tYWluRXJyb3IgPSBmdW5jdGlvbigpe1xuICB2YXIgZXJyID0gbmV3IEVycm9yKCdSZXF1ZXN0IGhhcyBiZWVuIHRlcm1pbmF0ZWRcXG5Qb3NzaWJsZSBjYXVzZXM6IHRoZSBuZXR3b3JrIGlzIG9mZmxpbmUsIE9yaWdpbiBpcyBub3QgYWxsb3dlZCBieSBBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4sIHRoZSBwYWdlIGlzIGJlaW5nIHVubG9hZGVkLCBldGMuJyk7XG4gIGVyci5jcm9zc0RvbWFpbiA9IHRydWU7XG5cbiAgZXJyLnN0YXR1cyA9IHRoaXMuc3RhdHVzO1xuICBlcnIubWV0aG9kID0gdGhpcy5tZXRob2Q7XG4gIGVyci51cmwgPSB0aGlzLnVybDtcblxuICB0aGlzLmNhbGxiYWNrKGVycik7XG59O1xuXG4vKipcbiAqIEludm9rZSBjYWxsYmFjayB3aXRoIHRpbWVvdXQgZXJyb3IuXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuX3RpbWVvdXRFcnJvciA9IGZ1bmN0aW9uKCl7XG4gIHZhciB0aW1lb3V0ID0gdGhpcy5fdGltZW91dDtcbiAgdmFyIGVyciA9IG5ldyBFcnJvcigndGltZW91dCBvZiAnICsgdGltZW91dCArICdtcyBleGNlZWRlZCcpO1xuICBlcnIudGltZW91dCA9IHRpbWVvdXQ7XG4gIHRoaXMuY2FsbGJhY2soZXJyKTtcbn07XG5cbi8qKlxuICogQ29tcG9zZSBxdWVyeXN0cmluZyB0byBhcHBlbmQgdG8gcmVxLnVybFxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlcXVlc3QucHJvdG90eXBlLl9hcHBlbmRRdWVyeVN0cmluZyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBxdWVyeSA9IHRoaXMuX3F1ZXJ5LmpvaW4oJyYnKTtcbiAgaWYgKHF1ZXJ5KSB7XG4gICAgdGhpcy51cmwgKz0gfnRoaXMudXJsLmluZGV4T2YoJz8nKVxuICAgICAgPyAnJicgKyBxdWVyeVxuICAgICAgOiAnPycgKyBxdWVyeTtcbiAgfVxufTtcblxuLyoqXG4gKiBJbml0aWF0ZSByZXF1ZXN0LCBpbnZva2luZyBjYWxsYmFjayBgZm4ocmVzKWBcbiAqIHdpdGggYW4gaW5zdGFuY2VvZiBgUmVzcG9uc2VgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oZm4pe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciB4aHIgPSB0aGlzLnhociA9IHJlcXVlc3QuZ2V0WEhSKCk7XG4gIHZhciB0aW1lb3V0ID0gdGhpcy5fdGltZW91dDtcbiAgdmFyIGRhdGEgPSB0aGlzLl9mb3JtRGF0YSB8fCB0aGlzLl9kYXRhO1xuXG4gIC8vIHN0b3JlIGNhbGxiYWNrXG4gIHRoaXMuX2NhbGxiYWNrID0gZm4gfHwgbm9vcDtcblxuICAvLyBzdGF0ZSBjaGFuZ2VcbiAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7XG4gICAgaWYgKDQgIT0geGhyLnJlYWR5U3RhdGUpIHJldHVybjtcblxuICAgIC8vIEluIElFOSwgcmVhZHMgdG8gYW55IHByb3BlcnR5IChlLmcuIHN0YXR1cykgb2ZmIG9mIGFuIGFib3J0ZWQgWEhSIHdpbGxcbiAgICAvLyByZXN1bHQgaW4gdGhlIGVycm9yIFwiQ291bGQgbm90IGNvbXBsZXRlIHRoZSBvcGVyYXRpb24gZHVlIHRvIGVycm9yIGMwMGMwMjNmXCJcbiAgICB2YXIgc3RhdHVzO1xuICAgIHRyeSB7IHN0YXR1cyA9IHhoci5zdGF0dXMgfSBjYXRjaChlKSB7IHN0YXR1cyA9IDA7IH1cblxuICAgIGlmICgwID09IHN0YXR1cykge1xuICAgICAgaWYgKHNlbGYudGltZWRvdXQpIHJldHVybiBzZWxmLl90aW1lb3V0RXJyb3IoKTtcbiAgICAgIGlmIChzZWxmLl9hYm9ydGVkKSByZXR1cm47XG4gICAgICByZXR1cm4gc2VsZi5jcm9zc0RvbWFpbkVycm9yKCk7XG4gICAgfVxuICAgIHNlbGYuZW1pdCgnZW5kJyk7XG4gIH07XG5cbiAgLy8gcHJvZ3Jlc3NcbiAgdmFyIGhhbmRsZVByb2dyZXNzID0gZnVuY3Rpb24oZSl7XG4gICAgaWYgKGUudG90YWwgPiAwKSB7XG4gICAgICBlLnBlcmNlbnQgPSBlLmxvYWRlZCAvIGUudG90YWwgKiAxMDA7XG4gICAgfVxuICAgIGUuZGlyZWN0aW9uID0gJ2Rvd25sb2FkJztcbiAgICBzZWxmLmVtaXQoJ3Byb2dyZXNzJywgZSk7XG4gIH07XG4gIGlmICh0aGlzLmhhc0xpc3RlbmVycygncHJvZ3Jlc3MnKSkge1xuICAgIHhoci5vbnByb2dyZXNzID0gaGFuZGxlUHJvZ3Jlc3M7XG4gIH1cbiAgdHJ5IHtcbiAgICBpZiAoeGhyLnVwbG9hZCAmJiB0aGlzLmhhc0xpc3RlbmVycygncHJvZ3Jlc3MnKSkge1xuICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gaGFuZGxlUHJvZ3Jlc3M7XG4gICAgfVxuICB9IGNhdGNoKGUpIHtcbiAgICAvLyBBY2Nlc3NpbmcgeGhyLnVwbG9hZCBmYWlscyBpbiBJRSBmcm9tIGEgd2ViIHdvcmtlciwgc28ganVzdCBwcmV0ZW5kIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgLy8gUmVwb3J0ZWQgaGVyZTpcbiAgICAvLyBodHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzgzNzI0NS94bWxodHRwcmVxdWVzdC11cGxvYWQtdGhyb3dzLWludmFsaWQtYXJndW1lbnQtd2hlbi11c2VkLWZyb20td2ViLXdvcmtlci1jb250ZXh0XG4gIH1cblxuICAvLyB0aW1lb3V0XG4gIGlmICh0aW1lb3V0ICYmICF0aGlzLl90aW1lcikge1xuICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgc2VsZi50aW1lZG91dCA9IHRydWU7XG4gICAgICBzZWxmLmFib3J0KCk7XG4gICAgfSwgdGltZW91dCk7XG4gIH1cblxuICAvLyBxdWVyeXN0cmluZ1xuICB0aGlzLl9hcHBlbmRRdWVyeVN0cmluZygpO1xuXG4gIC8vIGluaXRpYXRlIHJlcXVlc3RcbiAgaWYgKHRoaXMudXNlcm5hbWUgJiYgdGhpcy5wYXNzd29yZCkge1xuICAgIHhoci5vcGVuKHRoaXMubWV0aG9kLCB0aGlzLnVybCwgdHJ1ZSwgdGhpcy51c2VybmFtZSwgdGhpcy5wYXNzd29yZCk7XG4gIH0gZWxzZSB7XG4gICAgeGhyLm9wZW4odGhpcy5tZXRob2QsIHRoaXMudXJsLCB0cnVlKTtcbiAgfVxuXG4gIC8vIENPUlNcbiAgaWYgKHRoaXMuX3dpdGhDcmVkZW50aWFscykgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG5cbiAgLy8gYm9keVxuICBpZiAoJ0dFVCcgIT0gdGhpcy5tZXRob2QgJiYgJ0hFQUQnICE9IHRoaXMubWV0aG9kICYmICdzdHJpbmcnICE9IHR5cGVvZiBkYXRhICYmICF0aGlzLl9pc0hvc3QoZGF0YSkpIHtcbiAgICAvLyBzZXJpYWxpemUgc3R1ZmZcbiAgICB2YXIgY29udGVudFR5cGUgPSB0aGlzLl9oZWFkZXJbJ2NvbnRlbnQtdHlwZSddO1xuICAgIHZhciBzZXJpYWxpemUgPSB0aGlzLl9zZXJpYWxpemVyIHx8IHJlcXVlc3Quc2VyaWFsaXplW2NvbnRlbnRUeXBlID8gY29udGVudFR5cGUuc3BsaXQoJzsnKVswXSA6ICcnXTtcbiAgICBpZiAoIXNlcmlhbGl6ZSAmJiBpc0pTT04oY29udGVudFR5cGUpKSBzZXJpYWxpemUgPSByZXF1ZXN0LnNlcmlhbGl6ZVsnYXBwbGljYXRpb24vanNvbiddO1xuICAgIGlmIChzZXJpYWxpemUpIGRhdGEgPSBzZXJpYWxpemUoZGF0YSk7XG4gIH1cblxuICAvLyBzZXQgaGVhZGVyIGZpZWxkc1xuICBmb3IgKHZhciBmaWVsZCBpbiB0aGlzLmhlYWRlcikge1xuICAgIGlmIChudWxsID09IHRoaXMuaGVhZGVyW2ZpZWxkXSkgY29udGludWU7XG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoZmllbGQsIHRoaXMuaGVhZGVyW2ZpZWxkXSk7XG4gIH1cblxuICBpZiAodGhpcy5fcmVzcG9uc2VUeXBlKSB7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9IHRoaXMuX3Jlc3BvbnNlVHlwZTtcbiAgfVxuXG4gIC8vIHNlbmQgc3R1ZmZcbiAgdGhpcy5lbWl0KCdyZXF1ZXN0JywgdGhpcyk7XG5cbiAgLy8gSUUxMSB4aHIuc2VuZCh1bmRlZmluZWQpIHNlbmRzICd1bmRlZmluZWQnIHN0cmluZyBhcyBQT1NUIHBheWxvYWQgKGluc3RlYWQgb2Ygbm90aGluZylcbiAgLy8gV2UgbmVlZCBudWxsIGhlcmUgaWYgZGF0YSBpcyB1bmRlZmluZWRcbiAgeGhyLnNlbmQodHlwZW9mIGRhdGEgIT09ICd1bmRlZmluZWQnID8gZGF0YSA6IG51bGwpO1xuICByZXR1cm4gdGhpcztcbn07XG5cblxuLyoqXG4gKiBFeHBvc2UgYFJlcXVlc3RgLlxuICovXG5cbnJlcXVlc3QuUmVxdWVzdCA9IFJlcXVlc3Q7XG5cbi8qKlxuICogR0VUIGB1cmxgIHdpdGggb3B0aW9uYWwgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR8RnVuY3Rpb259IFtkYXRhXSBvciBmblxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5nZXQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ0dFVCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnF1ZXJ5KGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxuLyoqXG4gKiBIRUFEIGB1cmxgIHdpdGggb3B0aW9uYWwgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR8RnVuY3Rpb259IFtkYXRhXSBvciBmblxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5oZWFkID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdIRUFEJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogT1BUSU9OUyBxdWVyeSB0byBgdXJsYCB3aXRoIG9wdGlvbmFsIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfEZ1bmN0aW9ufSBbZGF0YV0gb3IgZm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3Qub3B0aW9ucyA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnT1BUSU9OUycsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnNlbmQoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG4vKipcbiAqIERFTEVURSBgdXJsYCB3aXRoIG9wdGlvbmFsIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBkZWwodXJsLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdERUxFVEUnLCB1cmwpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxucmVxdWVzdFsnZGVsJ10gPSBkZWw7XG5yZXF1ZXN0WydkZWxldGUnXSA9IGRlbDtcblxuLyoqXG4gKiBQQVRDSCBgdXJsYCB3aXRoIG9wdGlvbmFsIGBkYXRhYCBhbmQgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR9IFtkYXRhXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5wYXRjaCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnUEFUQ0gnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5zZW5kKGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxuLyoqXG4gKiBQT1NUIGB1cmxgIHdpdGggb3B0aW9uYWwgYGRhdGFgIGFuZCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZH0gW2RhdGFdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LnBvc3QgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ1BPU1QnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5zZW5kKGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxuLyoqXG4gKiBQVVQgYHVybGAgd2l0aCBvcHRpb25hbCBgZGF0YWAgYW5kIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfEZ1bmN0aW9ufSBbZGF0YV0gb3IgZm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QucHV0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdQVVQnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5zZW5kKGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcbiIsIi8qKlxuICogQ2hlY2sgaWYgYG9iamAgaXMgYW4gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBpc09iamVjdChvYmopIHtcbiAgcmV0dXJuIG51bGwgIT09IG9iaiAmJiAnb2JqZWN0JyA9PT0gdHlwZW9mIG9iajtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdDtcbiIsIi8qKlxuICogTW9kdWxlIG9mIG1peGVkLWluIGZ1bmN0aW9ucyBzaGFyZWQgYmV0d2VlbiBub2RlIGFuZCBjbGllbnQgY29kZVxuICovXG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzLW9iamVjdCcpO1xuXG4vKipcbiAqIENsZWFyIHByZXZpb3VzIHRpbWVvdXQuXG4gKlxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24gX2NsZWFyVGltZW91dCgpe1xuICB0aGlzLl90aW1lb3V0ID0gMDtcbiAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIE92ZXJyaWRlIGRlZmF1bHQgcmVzcG9uc2UgYm9keSBwYXJzZXJcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHRvIGNvbnZlcnQgaW5jb21pbmcgZGF0YSBpbnRvIHJlcXVlc3QuYm9keVxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiBwYXJzZShmbil7XG4gIHRoaXMuX3BhcnNlciA9IGZuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogT3ZlcnJpZGUgZGVmYXVsdCByZXF1ZXN0IGJvZHkgc2VyaWFsaXplclxuICpcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgdG8gY29udmVydCBkYXRhIHNldCB2aWEgLnNlbmQgb3IgLmF0dGFjaCBpbnRvIHBheWxvYWQgdG8gc2VuZFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuc2VyaWFsaXplID0gZnVuY3Rpb24gc2VyaWFsaXplKGZuKXtcbiAgdGhpcy5fc2VyaWFsaXplciA9IGZuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IHRpbWVvdXQgdG8gYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnRpbWVvdXQgPSBmdW5jdGlvbiB0aW1lb3V0KG1zKXtcbiAgdGhpcy5fdGltZW91dCA9IG1zO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUHJvbWlzZSBzdXBwb3J0XG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0XG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICovXG5cbmV4cG9ydHMudGhlbiA9IGZ1bmN0aW9uIHRoZW4ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gIGlmICghdGhpcy5fZnVsbGZpbGxlZFByb21pc2UpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5fZnVsbGZpbGxlZFByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihpbm5lclJlc29sdmUsIGlubmVyUmVqZWN0KXtcbiAgICAgIHNlbGYuZW5kKGZ1bmN0aW9uKGVyciwgcmVzKXtcbiAgICAgICAgaWYgKGVycikgaW5uZXJSZWplY3QoZXJyKTsgZWxzZSBpbm5lclJlc29sdmUocmVzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB0aGlzLl9mdWxsZmlsbGVkUHJvbWlzZS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG59XG5cbi8qKlxuICogQWxsb3cgZm9yIGV4dGVuc2lvblxuICovXG5cbmV4cG9ydHMudXNlID0gZnVuY3Rpb24gdXNlKGZuKSB7XG4gIGZuKHRoaXMpO1xuICByZXR1cm4gdGhpcztcbn1cblxuXG4vKipcbiAqIEdldCByZXF1ZXN0IGhlYWRlciBgZmllbGRgLlxuICogQ2FzZS1pbnNlbnNpdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5nZXQgPSBmdW5jdGlvbihmaWVsZCl7XG4gIHJldHVybiB0aGlzLl9oZWFkZXJbZmllbGQudG9Mb3dlckNhc2UoKV07XG59O1xuXG4vKipcbiAqIEdldCBjYXNlLWluc2Vuc2l0aXZlIGhlYWRlciBgZmllbGRgIHZhbHVlLlxuICogVGhpcyBpcyBhIGRlcHJlY2F0ZWQgaW50ZXJuYWwgQVBJLiBVc2UgYC5nZXQoZmllbGQpYCBpbnN0ZWFkLlxuICpcbiAqIChnZXRIZWFkZXIgaXMgbm8gbG9uZ2VyIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgc3VwZXJhZ2VudCBjb2RlIGJhc2UpXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqIEBkZXByZWNhdGVkXG4gKi9cblxuZXhwb3J0cy5nZXRIZWFkZXIgPSBleHBvcnRzLmdldDtcblxuLyoqXG4gKiBTZXQgaGVhZGVyIGBmaWVsZGAgdG8gYHZhbGAsIG9yIG11bHRpcGxlIGZpZWxkcyB3aXRoIG9uZSBvYmplY3QuXG4gKiBDYXNlLWluc2Vuc2l0aXZlLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgcmVxLmdldCgnLycpXG4gKiAgICAgICAgLnNldCgnQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKVxuICogICAgICAgIC5zZXQoJ1gtQVBJLUtleScsICdmb29iYXInKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqICAgICAgcmVxLmdldCgnLycpXG4gKiAgICAgICAgLnNldCh7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLCAnWC1BUEktS2V5JzogJ2Zvb2JhcicgfSlcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGZpZWxkXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5zZXQgPSBmdW5jdGlvbihmaWVsZCwgdmFsKXtcbiAgaWYgKGlzT2JqZWN0KGZpZWxkKSkge1xuICAgIGZvciAodmFyIGtleSBpbiBmaWVsZCkge1xuICAgICAgdGhpcy5zZXQoa2V5LCBmaWVsZFtrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdGhpcy5faGVhZGVyW2ZpZWxkLnRvTG93ZXJDYXNlKCldID0gdmFsO1xuICB0aGlzLmhlYWRlcltmaWVsZF0gPSB2YWw7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgaGVhZGVyIGBmaWVsZGAuXG4gKiBDYXNlLWluc2Vuc2l0aXZlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgICByZXEuZ2V0KCcvJylcbiAqICAgICAgICAudW5zZXQoJ1VzZXItQWdlbnQnKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICovXG5leHBvcnRzLnVuc2V0ID0gZnVuY3Rpb24oZmllbGQpe1xuICBkZWxldGUgdGhpcy5faGVhZGVyW2ZpZWxkLnRvTG93ZXJDYXNlKCldO1xuICBkZWxldGUgdGhpcy5oZWFkZXJbZmllbGRdO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogV3JpdGUgdGhlIGZpZWxkIGBuYW1lYCBhbmQgYHZhbGAgZm9yIFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiXG4gKiByZXF1ZXN0IGJvZGllcy5cbiAqXG4gKiBgYGAganNcbiAqIHJlcXVlc3QucG9zdCgnL3VwbG9hZCcpXG4gKiAgIC5maWVsZCgnZm9vJywgJ2JhcicpXG4gKiAgIC5lbmQoY2FsbGJhY2spO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfEJsb2J8RmlsZXxCdWZmZXJ8ZnMuUmVhZFN0cmVhbX0gdmFsXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cbmV4cG9ydHMuZmllbGQgPSBmdW5jdGlvbihuYW1lLCB2YWwpIHtcbiAgdGhpcy5fZ2V0Rm9ybURhdGEoKS5hcHBlbmQobmFtZSwgdmFsKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEFib3J0IHRoZSByZXF1ZXN0LCBhbmQgY2xlYXIgcG90ZW50aWFsIHRpbWVvdXQuXG4gKlxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cbmV4cG9ydHMuYWJvcnQgPSBmdW5jdGlvbigpe1xuICBpZiAodGhpcy5fYWJvcnRlZCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHRoaXMuX2Fib3J0ZWQgPSB0cnVlO1xuICB0aGlzLnhociAmJiB0aGlzLnhoci5hYm9ydCgpOyAvLyBicm93c2VyXG4gIHRoaXMucmVxICYmIHRoaXMucmVxLmFib3J0KCk7IC8vIG5vZGVcbiAgdGhpcy5jbGVhclRpbWVvdXQoKTtcbiAgdGhpcy5lbWl0KCdhYm9ydCcpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRW5hYmxlIHRyYW5zbWlzc2lvbiBvZiBjb29raWVzIHdpdGggeC1kb21haW4gcmVxdWVzdHMuXG4gKlxuICogTm90ZSB0aGF0IGZvciB0aGlzIHRvIHdvcmsgdGhlIG9yaWdpbiBtdXN0IG5vdCBiZVxuICogdXNpbmcgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIiB3aXRoIGEgd2lsZGNhcmQsXG4gKiBhbmQgYWxzbyBtdXN0IHNldCBcIkFjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzXCJcbiAqIHRvIFwidHJ1ZVwiLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy53aXRoQ3JlZGVudGlhbHMgPSBmdW5jdGlvbigpe1xuICAvLyBUaGlzIGlzIGJyb3dzZXItb25seSBmdW5jdGlvbmFsaXR5LiBOb2RlIHNpZGUgaXMgbm8tb3AuXG4gIHRoaXMuX3dpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIG1heCByZWRpcmVjdHMgdG8gYG5gLiBEb2VzIG5vdGluZyBpbiBicm93c2VyIFhIUiBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMucmVkaXJlY3RzID0gZnVuY3Rpb24obil7XG4gIHRoaXMuX21heFJlZGlyZWN0cyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0IHRvIGEgcGxhaW4gamF2YXNjcmlwdCBvYmplY3QgKG5vdCBKU09OIHN0cmluZykgb2Ygc2NhbGFyIHByb3BlcnRpZXMuXG4gKiBOb3RlIGFzIHRoaXMgbWV0aG9kIGlzIGRlc2lnbmVkIHRvIHJldHVybiBhIHVzZWZ1bCBub24tdGhpcyB2YWx1ZSxcbiAqIGl0IGNhbm5vdCBiZSBjaGFpbmVkLlxuICpcbiAqIEByZXR1cm4ge09iamVjdH0gZGVzY3JpYmluZyBtZXRob2QsIHVybCwgYW5kIGRhdGEgb2YgdGhpcyByZXF1ZXN0XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMudG9KU09OID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICBtZXRob2Q6IHRoaXMubWV0aG9kLFxuICAgIHVybDogdGhpcy51cmwsXG4gICAgZGF0YTogdGhpcy5fZGF0YSxcbiAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJcbiAgfTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYG9iamAgaXMgYSBob3N0IG9iamVjdCxcbiAqIHdlIGRvbid0IHdhbnQgdG8gc2VyaWFsaXplIHRoZXNlIDopXG4gKlxuICogVE9ETzogZnV0dXJlIHByb29mLCBtb3ZlIHRvIGNvbXBvZW50IGxhbmRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZXhwb3J0cy5faXNIb3N0ID0gZnVuY3Rpb24gX2lzSG9zdChvYmopIHtcbiAgdmFyIHN0ciA9IHt9LnRvU3RyaW5nLmNhbGwob2JqKTtcblxuICBzd2l0Y2ggKHN0cikge1xuICAgIGNhc2UgJ1tvYmplY3QgRmlsZV0nOlxuICAgIGNhc2UgJ1tvYmplY3QgQmxvYl0nOlxuICAgIGNhc2UgJ1tvYmplY3QgRm9ybURhdGFdJzpcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBTZW5kIGBkYXRhYCBhcyB0aGUgcmVxdWVzdCBib2R5LCBkZWZhdWx0aW5nIHRoZSBgLnR5cGUoKWAgdG8gXCJqc29uXCIgd2hlblxuICogYW4gb2JqZWN0IGlzIGdpdmVuLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgIC8vIG1hbnVhbCBqc29uXG4gKiAgICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAqICAgICAgICAgLnR5cGUoJ2pzb24nKVxuICogICAgICAgICAuc2VuZCgne1wibmFtZVwiOlwidGpcIn0nKVxuICogICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqICAgICAgIC8vIGF1dG8ganNvblxuICogICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqICAgICAgIC8vIG1hbnVhbCB4LXd3dy1mb3JtLXVybGVuY29kZWRcbiAqICAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgICAudHlwZSgnZm9ybScpXG4gKiAgICAgICAgIC5zZW5kKCduYW1lPXRqJylcbiAqICAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiAgICAgICAvLyBhdXRvIHgtd3d3LWZvcm0tdXJsZW5jb2RlZFxuICogICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgIC50eXBlKCdmb3JtJylcbiAqICAgICAgICAgLnNlbmQoeyBuYW1lOiAndGonIH0pXG4gKiAgICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogICAgICAgLy8gZGVmYXVsdHMgdG8geC13d3ctZm9ybS11cmxlbmNvZGVkXG4gKiAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgIC5zZW5kKCduYW1lPXRvYmknKVxuICogICAgICAgIC5zZW5kKCdzcGVjaWVzPWZlcnJldCcpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGRhdGFcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnNlbmQgPSBmdW5jdGlvbihkYXRhKXtcbiAgdmFyIG9iaiA9IGlzT2JqZWN0KGRhdGEpO1xuICB2YXIgdHlwZSA9IHRoaXMuX2hlYWRlclsnY29udGVudC10eXBlJ107XG5cbiAgLy8gbWVyZ2VcbiAgaWYgKG9iaiAmJiBpc09iamVjdCh0aGlzLl9kYXRhKSkge1xuICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICB0aGlzLl9kYXRhW2tleV0gPSBkYXRhW2tleV07XG4gICAgfVxuICB9IGVsc2UgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBkYXRhKSB7XG4gICAgLy8gZGVmYXVsdCB0byB4LXd3dy1mb3JtLXVybGVuY29kZWRcbiAgICBpZiAoIXR5cGUpIHRoaXMudHlwZSgnZm9ybScpO1xuICAgIHR5cGUgPSB0aGlzLl9oZWFkZXJbJ2NvbnRlbnQtdHlwZSddO1xuICAgIGlmICgnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyA9PSB0eXBlKSB7XG4gICAgICB0aGlzLl9kYXRhID0gdGhpcy5fZGF0YVxuICAgICAgICA/IHRoaXMuX2RhdGEgKyAnJicgKyBkYXRhXG4gICAgICAgIDogZGF0YTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGF0YSA9ICh0aGlzLl9kYXRhIHx8ICcnKSArIGRhdGE7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICB9XG5cbiAgaWYgKCFvYmogfHwgdGhpcy5faXNIb3N0KGRhdGEpKSByZXR1cm4gdGhpcztcblxuICAvLyBkZWZhdWx0IHRvIGpzb25cbiAgaWYgKCF0eXBlKSB0aGlzLnR5cGUoJ2pzb24nKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuIiwiLy8gVGhlIG5vZGUgYW5kIGJyb3dzZXIgbW9kdWxlcyBleHBvc2UgdmVyc2lvbnMgb2YgdGhpcyB3aXRoIHRoZVxuLy8gYXBwcm9wcmlhdGUgY29uc3RydWN0b3IgZnVuY3Rpb24gYm91bmQgYXMgZmlyc3QgYXJndW1lbnRcbi8qKlxuICogSXNzdWUgYSByZXF1ZXN0OlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgIHJlcXVlc3QoJ0dFVCcsICcvdXNlcnMnKS5lbmQoY2FsbGJhY2spXG4gKiAgICByZXF1ZXN0KCcvdXNlcnMnKS5lbmQoY2FsbGJhY2spXG4gKiAgICByZXF1ZXN0KCcvdXNlcnMnLCBjYWxsYmFjaylcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdXJsIG9yIGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiByZXF1ZXN0KFJlcXVlc3RDb25zdHJ1Y3RvciwgbWV0aG9kLCB1cmwpIHtcbiAgLy8gY2FsbGJhY2tcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIHVybCkge1xuICAgIHJldHVybiBuZXcgUmVxdWVzdENvbnN0cnVjdG9yKCdHRVQnLCBtZXRob2QpLmVuZCh1cmwpO1xuICB9XG5cbiAgLy8gdXJsIGZpcnN0XG4gIGlmICgyID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3RDb25zdHJ1Y3RvcignR0VUJywgbWV0aG9kKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgUmVxdWVzdENvbnN0cnVjdG9yKG1ldGhvZCwgdXJsKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1ZXN0O1xuIiwibW9kdWxlLmV4cG9ydHM9e1xuICBcIm5hbWVcIjogXCJ2aHhqc1wiLFxuICBcInZlcnNpb25cIjogXCIxLjAuMC1iZXRhLjJcIixcbiAgXCJkZXNjcmlwdGlvblwiOiBcIlZIWCBKYXZhc2NyaXB0IEFQSSBDbGllbnRcIixcbiAgXCJtYWluXCI6IFwidmh4LmpzXCIsXG4gIFwiYXV0aG9yXCI6IFwiVkhYXCIsXG4gIFwiaG9tZXBhZ2VcIjogXCJodHRwczovL2dpdGh1Yi5jb20vdmh4L3ZoeC1ub2RlXCIsXG4gIFwiY29udHJpYnV0b3JzXCI6IFtcIkRhdmlkIEdvbnphbGV6IDxkYXZpZEB2aHgudHY+IFwiLCBcIlNjb3R0IFJvYmVydHNvbiA8c2NvdHRAdmh4LnR2PlwiXSxcbiAgXCJsaWNlbnNlXCI6IFwiTUlUXCIsXG4gIFwicmVwb3NpdG9yeVwiOiB7XG4gICAgXCJ0eXBlXCI6IFwiZ2l0XCIsXG4gICAgXCJ1cmxcIjogXCJnaXQ6Ly9naXRodWIuY29tL3ZoeC92aHgtanMuZ2l0XCJcbiAgfSxcbiAgXCJidWdzOlwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS92aHgvdmh4LWpzL2lzc3Vlc1wiLFxuICBcImRldkRlcGVuZGVuY2llc1wiOiB7XG4gICAgXCJiYWJlbC1jbGlcIjogXCJeNi4xMS40XCIsXG4gICAgXCJiYWJlbC1wcmVzZXQtZXMyMDE1XCI6IFwiXjYuOS4wXCIsXG4gICAgXCJiYWJlbGlmeVwiOiBcIl43LjMuMFwiLFxuICAgIFwiYnJvd3NlcmlmeVwiOiBcIl4xMy4xLjBcIixcbiAgICBcImd1bHBcIjogXCJeMy45LjFcIixcbiAgICBcImd1bHAtYmFiZWxcIjogXCJeNi4xLjJcIixcbiAgICBcImd1bHAtYnJvd3NlcmlmeVwiOiBcIl4wLjUuMVwiLFxuICAgIFwiZ3VscC1saXZlcmVsb2FkXCI6IFwiXjMuOC4xXCIsXG4gICAgXCJndWxwLXNvdXJjZW1hcHNcIjogXCJeMS42LjBcIixcbiAgICBcImd1bHAtdWdsaWZ5XCI6IFwiXjEuNS40XCIsXG4gICAgXCJzdXBlcmFnZW50XCI6IFwiXjIuMS4wXCIsXG4gICAgXCJ2aW55bC1idWZmZXJcIjogXCJeMS4wLjBcIixcbiAgICBcInZpbnlsLXNvdXJjZS1zdHJlYW1cIjogXCJeMS4xLjBcIlxuICB9XG59XG4iXX0=\n"],"sourceRoot":"/source/"}