{"version":3,"sources":["vhx.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_VHX_DEFAULTS","HOST","PROTOCOL","API_VERSION","version","TIMEOUT","../package.json","2","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","obj","constructor","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","request","Resource","api","path","methods","this","_this","_api","init","value","forEach","item","method","getMethod","type","getType","params","http_method","client_method","match","b","c","isCallbackFunction","callback","id","parseHref","options","scope","makeRequest","resource","isObject","href","val","parseInt","indexOf","host","substr","split","url","protocol","timeout","headers","Authorization","auth","qs","args","getParams","withCredentials","set","send","end","err","response","errorHandler","status","body","statusCode","successHandler","error","JSON","parse","error_types","400","401","404","408","500","apply","./defaults","superagent","3","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","Collection","_Resource","getPrototypeOf","../resource","4","Customer","5","Product","6","Video","7","_interopRequireDefault","__esModule","default","_defaults","_defaults2","_resource","_collections","_collections2","_videos","_videos2","_customers","_customers2","_products","_products2","resources","collections","videos","products","customer","vhx","isToken","setToken","setApi","prepareResources","btoa","token","name","toLowerCase","substring","window","./resource","./resources/collections","./resources/customers","./resources/products","./resources/videos","8","Emitter","mixin","on","addEventListener","event","fn","_callbacks","push","once","off","arguments","removeListener","removeAllListeners","removeEventListener","callbacks","cb","splice","emit","slice","len","listeners","hasListeners","9","noop","serialize","pairs","pushEncodedKeyValuePair","join","Array","isArray","v","subkey","encodeURIComponent","parseString","str","pair","pos","decodeURIComponent","parseHeader","index","line","field","lines","fields","pop","trim","isJSON","mime","test","shift","reduce","parts","Response","req","xhr","text","responseType","responseText","statusText","_setStatusProperties","header","getAllResponseHeaders","getResponseHeader","_setHeaderProperties","_parseBody","Request","_query","_header","res","original","rawResponse","new_err","del","root","console","warn","requestBase","bind","getXHR","XMLHttpRequest","location","ActiveXObject","replace","serializeObject","types","html","json","xml","urlencoded","form","form-data","application/x-www-form-urlencoded","application/json","stringify","get","ct","statusType","info","ok","clientError","serverError","toError","accepted","noContent","badRequest","unauthorized","notAcceptable","notFound","forbidden","msg","_responseType","accept","user","pass","username","password","query","attach","file","filename","_getFormData","append","_formData","FormData","_callback","clearTimeout","crossDomainError","crossDomain","_timeoutError","_timeout","_appendQueryString","data","_data","onreadystatechange","readyState","timedout","_aborted","handleProgress","total","percent","loaded","direction","onprogress","upload","_timer","setTimeout","abort","open","_withCredentials","_isHost","contentType","_serializer","setRequestHeader","head","patch","post","put","./is-object","./request","./request-base","emitter","10","11","_parser","ms","then","resolve","reject","_fullfilledPromise","Promise","innerResolve","innerReject","use","getHeader","unset","redirects","_maxRedirects","toJSON","toString","12","RequestConstructor","13","description","main","scripts","author","license","devDependencies","babel-cli","babel-preset-es2015","babelify","browserify","gulp","gulp-babel","gulp-browserify","gulp-livereload","gulp-sourcemaps","gulp-uglify","vinyl-buffer","vinyl-source-stream"],"mappings":"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","file":"vhx.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _VHX_DEFAULTS = {\n  HOST: 'api.crystal.dev',\n  PROTOCOL: 'http://',\n  API_VERSION: require('../package.json').version,\n  TIMEOUT: '30000'\n};\n\nmodule.exports = _VHX_DEFAULTS;\n\n},{\"../package.json\":13}],2:[function(require,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar request = require('superagent');\nvar defaults = require('./defaults');\n\nvar Resource = function () {\n  function Resource(api, path, methods) {\n    _classCallCheck(this, Resource);\n\n    var _this = this;\n    _this._api = api;\n    _this.methods = methods;\n    _this.path = path;\n\n    _this.init();\n  }\n\n  _createClass(Resource, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      _this.methods.forEach(function (item) {\n        var method = _this.getMethod(item),\n            type = _this.getType(_this.path),\n            params = {\n          http_method: 'get', // superagent reads 'get' not 'GET'\n          client_method: method\n        };\n\n        if (method.match(/retrieve|items|files/i)) {\n          _this[method] = function (a, b, c) {\n            if (a[type]) {\n              if (_this.isCallbackFunction(b)) {\n                params.callback = b;\n              }\n              params.id = _this.parseHref(a[type]);\n              delete a[type];\n              params.options = a;\n            } else {\n              params.id = _this.parseHref(a);\n              if (_this.isCallbackFunction(b)) {\n                params.callback = b;\n              } else {\n                params.options = b;\n                params.callback = c;\n              }\n            }\n\n            params.scope = item.scope ? item.scope : null;\n            _this.makeRequest(params);\n          };\n        } else {\n          _this[method] = function (options, callback) {\n            params.options = options;\n            params.callback = callback;\n\n            _this.makeRequest(params);\n          };\n        }\n      });\n    }\n  }, {\n    key: 'getType',\n    value: function getType(resource) {\n      if (resource === 'collections') {\n        return 'collection';\n      }\n      if (resource === 'customers') {\n        return 'customer';\n      }\n      if (resource === 'videos') {\n        return 'video';\n      }\n\n      return 'id';\n    }\n  }, {\n    key: 'getMethod',\n    value: function getMethod(params) {\n      var _this = this;\n\n      if (_this.isObject(params) && params.method) {\n        return params.method;\n      } else {\n        return params;\n      }\n    }\n  }, {\n    key: 'parseHref',\n    value: function parseHref(href) {\n      var _this = this,\n          val = void 0;\n\n      if (parseInt(href, 10)) {\n        return href;\n      } else if (href.indexOf(_this._api.host) >= 0) {\n        if (href.substr(-1) === '/') {\n          href.substr(0, href.length - 1);\n        }\n        val = href.split('/');\n        return val[val.length - 1];\n      }\n    }\n  }, {\n    key: 'getParams',\n    value: function getParams(client_method, id, options, scope) {\n      var _this = this,\n          params = {};\n\n      params.url = _this._api.protocol + _this._api.host + '/' + _this.path;\n      params.timeout = _this._api.timeout;\n      params.headers = {\n        'Authorization': _this._api.auth\n      };\n\n      params.qs = options || null;\n\n      if (!client_method.match(/^list$|^all$/)) {\n        params.url += '/' + id;\n      }\n\n      if (client_method.match(/items/i)) {\n        params.url += '/items';\n      }\n\n      if (client_method.match(/files/i)) {\n        params.url += '/files';\n      }\n\n      if (scope) {\n        params.url += '/' + scope;\n      }\n\n      return params;\n    }\n  }, {\n    key: 'makeRequest',\n    value: function makeRequest(args) {\n      var _this = this,\n          params = _this.getParams(args.client_method, args.id || null, args.options, args.scope);\n\n      if (_this.isCallbackFunction(args.options)) {\n        args.callback = args.options;\n      }\n\n      request[args.http_method](params.url).withCredentials().set(params.headers).send(params.qs).end(function (err, response) {\n        if (err && err.code === 'ETIMEDOUT') {\n          _this.errorHandler({\n            status: 408,\n            body: '{\"message\": \"The request timed out.\",\"documentation_url\": \"http://dev.vhx.tv/docs/api\"}',\n            callback: args.callback\n          });\n        }\n\n        if (!err && response.statusCode >= 200 && response.statusCode < 300) {\n          _this.successHandler({\n            body: response.body || null,\n            callback: args.callback\n          });\n        } else {\n          _this.errorHandler({\n            status: 408,\n            body: '{\"message\": \"The request timed out.\",\"documentation_url\": \"http://dev.vhx.tv/docs/api\"}',\n            callback: args.callback\n          });\n        }\n      });\n    }\n  }, {\n    key: 'successHandler',\n    value: function successHandler(args) {\n      args.callback(false, args.body);\n    }\n  }, {\n    key: 'errorHandler',\n    value: function errorHandler(args) {\n      var error = JSON.parse(args.body),\n          error_types = {\n        400: 'VHXInvalidRequestError',\n        401: 'VHXAuthenticationError',\n        404: 'VHXResourceNotFound',\n        408: 'VHXConnectionError',\n        500: 'VHXAPIError'\n      };\n\n      error.status = args.status;\n      error.type = error_types[error.status];\n      args.callback(error, null);\n    }\n  }, {\n    key: 'isCallbackFunction',\n    value: function isCallbackFunction(obj) {\n      return !!(obj && obj.constructor && obj.call && obj.apply);\n    }\n  }, {\n    key: 'isObject',\n    value: function isObject(obj) {\n      var type = typeof obj === 'undefined' ? 'undefined' : _typeof(obj);\n      return type === 'function' || type === 'object' && !!obj;\n    }\n  }]);\n\n  return Resource;\n}();\n\n;\n\nmodule.exports = Resource;\n\n},{\"./defaults\":1,\"superagent\":9}],3:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Collection = function (_Resource) {\n  _inherits(Collection, _Resource);\n\n  function Collection(api) {\n    _classCallCheck(this, Collection);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Collection).call(this, api, 'collections', ['all', 'list', 'items']));\n  }\n\n  return Collection;\n}(Resource);\n\n;\n\nmodule.exports = Collection;\n\n},{\"../resource\":2}],4:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Customer = function (_Resource) {\n  _inherits(Customer, _Resource);\n\n  function Customer(api) {\n    _classCallCheck(this, Customer);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Customer).call(this, api, 'customers', ['retrieve', 'all']));\n  }\n\n  return Customer;\n}(Resource);\n\n;\n\nmodule.exports = Customer;\n\n},{\"../resource\":2}],5:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Product = function (_Resource) {\n  _inherits(Product, _Resource);\n\n  function Product(api) {\n    _classCallCheck(this, Product);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Product).call(this, api, 'products', ['retrieve', 'all']));\n  }\n\n  return Product;\n}(Resource);\n\n;\n\nmodule.exports = Product;\n\n},{\"../resource\":2}],6:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Video = function (_Resource) {\n  _inherits(Video, _Resource);\n\n  function Video(api) {\n    _classCallCheck(this, Video);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Video).call(this, api, 'videos', ['all', 'retrieve', 'files']));\n  }\n\n  return Video;\n}(Resource);\n\n;\n\nmodule.exports = Video;\n\n},{\"../resource\":2}],7:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nvar _resource = require('./resource');\n\nvar _resource2 = _interopRequireDefault(_resource);\n\nvar _collections = require('./resources/collections');\n\nvar _collections2 = _interopRequireDefault(_collections);\n\nvar _videos = require('./resources/videos');\n\nvar _videos2 = _interopRequireDefault(_videos);\n\nvar _customers = require('./resources/customers');\n\nvar _customers2 = _interopRequireDefault(_customers);\n\nvar _products = require('./resources/products');\n\nvar _products2 = _interopRequireDefault(_products);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar resources = {\n  collections: _collections2.default,\n  videos: _videos2.default,\n  products: _products2.default,\n  customer: _customers2.default\n};\n\nvar vhx = function () {\n  function vhx(key, isToken) {\n    _classCallCheck(this, vhx);\n\n    var _this = this;\n\n    if (!(_this instanceof vhx)) {\n      return new vhx(key);\n    }\n\n    _this.api = isToken ? _this.setToken(key) : _this.setApi(key);\n    _this.prepareResources();\n  }\n\n  _createClass(vhx, [{\n    key: 'setApi',\n    value: function setApi(key) {\n      return {\n        auth: 'Basic ' + btoa(key),\n        host: _defaults2.default.HOST,\n        protocol: _defaults2.default.PROTOCOL,\n        timeout: _defaults2.default.TIMEOUT\n      };\n    }\n  }, {\n    key: 'setToken',\n    value: function setToken(key) {\n      return {\n        token: null\n      };\n    }\n  }, {\n    key: 'prepareResources',\n    value: function prepareResources() {\n      var _this = this;\n\n      for (var name in resources) {\n        _this[name[0].toLowerCase() + name.substring(1)] = new resources[name](_this.api);\n      }\n    }\n  }]);\n\n  return vhx;\n}();\n\nwindow.vhx = vhx;\n\n},{\"./defaults\":1,\"./resource\":2,\"./resources/collections\":3,\"./resources/customers\":4,\"./resources/products\":5,\"./resources/videos\":6}],8:[function(require,module,exports){\n\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n\n},{}],9:[function(require,module,exports){\n/**\n * Root reference for iframes.\n */\n\nvar root;\nif (typeof window !== 'undefined') { // Browser window\n  root = window;\n} else if (typeof self !== 'undefined') { // Web Worker\n  root = self;\n} else { // Other environments\n  console.warn(\"Using browser-only version of superagent in non-browser environment\");\n  root = this;\n}\n\nvar Emitter = require('emitter');\nvar requestBase = require('./request-base');\nvar isObject = require('./is-object');\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Expose `request`.\n */\n\nvar request = module.exports = require('./request').bind(null, Request);\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  throw Error(\"Browser-only verison of superagent could not find XHR\");\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    if (null != obj[key]) {\n      pushEncodedKeyValuePair(pairs, key, obj[key]);\n    }\n  }\n  return pairs.join('&');\n}\n\n/**\n * Helps 'serialize' with serializing arrays.\n * Mutates the pairs array.\n *\n * @param {Array} pairs\n * @param {String} key\n * @param {Mixed} val\n */\n\nfunction pushEncodedKeyValuePair(pairs, key, val) {\n  if (Array.isArray(val)) {\n    return val.forEach(function(v) {\n      pushEncodedKeyValuePair(pairs, key, v);\n    });\n  } else if (isObject(val)) {\n    for(var subkey in val) {\n      pushEncodedKeyValuePair(pairs, key + '[' + subkey + ']', val[subkey]);\n    }\n    return;\n  }\n  pairs.push(encodeURIComponent(key)\n    + '=' + encodeURIComponent(val));\n}\n\n/**\n * Expose serialization method.\n */\n\n request.serializeObject = serialize;\n\n /**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var pair;\n  var pos;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    pos = pair.indexOf('=');\n    if (pos == -1) {\n      obj[decodeURIComponent(pair)] = '';\n    } else {\n      obj[decodeURIComponent(pair.slice(0, pos))] =\n        decodeURIComponent(pair.slice(pos + 1));\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'application/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\n request.serialize = {\n   'application/x-www-form-urlencoded': serialize,\n   'application/json': JSON.stringify\n };\n\n /**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  lines.pop(); // trailing CRLF\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Check if `mime` is json or has +json structured syntax suffix.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api private\n */\n\nfunction isJSON(mime) {\n  return /[\\/+]json\\b/.test(mime);\n}\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction type(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction params(str){\n  return str.split(/ *; */).reduce(function(obj, str){\n    var parts = str.split(/ *= */),\n        key = parts.shift(),\n        val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req, options) {\n  options = options || {};\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  this._setStatusProperties(this.xhr.status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this._setHeaderProperties(this.header);\n  this.body = this.req.method != 'HEAD'\n    ? this._parseBody(this.text ? this.text : this.xhr.response)\n    : null;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponse.prototype.get = function(field){\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponse.prototype._setHeaderProperties = function(header){\n  // content-type\n  var ct = this.header['content-type'] || '';\n  this.type = type(ct);\n\n  // params\n  var obj = params(ct);\n  for (var key in obj) this[key] = obj[key];\n};\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype._parseBody = function(str){\n  var parse = request.parse[this.type];\n  if (!parse && isJSON(this.type)) {\n    parse = request.parse['application/json'];\n  }\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponse.prototype._setStatusProperties = function(status){\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n\n  var type = status / 100 | 0;\n\n  // status / class\n  this.status = this.statusCode = status;\n  this.statusType = type;\n\n  // basics\n  this.info = 1 == type;\n  this.ok = 2 == type;\n  this.clientError = 4 == type;\n  this.serverError = 5 == type;\n  this.error = (4 == type || 5 == type)\n    ? this.toError()\n    : false;\n\n  // sugar\n  this.accepted = 202 == status;\n  this.noContent = 204 == status;\n  this.badRequest = 400 == status;\n  this.unauthorized = 401 == status;\n  this.notAcceptable = 406 == status;\n  this.notFound = 404 == status;\n  this.forbidden = 403 == status;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {}; // preserves header name case\n  this._header = {}; // coerces header names to lowercase\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      // issue #675: return the raw response if the response parsing fails\n      err.rawResponse = self.xhr && self.xhr.responseText ? self.xhr.responseText : null;\n      // issue #876: return the http status code if the response parsing fails\n      err.statusCode = self.xhr && self.xhr.status ? self.xhr.status : null;\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    var new_err;\n    try {\n      if (res.status < 200 || res.status >= 300) {\n        new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n        new_err.original = err;\n        new_err.response = res;\n        new_err.status = res.status;\n      }\n    } catch(e) {\n      new_err = e; // #985 touching res may cause INVALID_STATE_ERR on old Android\n    }\n\n    // #1000 don't catch errors from the callback to avoid double calling it\n    if (new_err) {\n      self.callback(new_err, res);\n    } else {\n      self.callback(null, res);\n    }\n  });\n}\n\n/**\n * Mixin `Emitter` and `requestBase`.\n */\n\nEmitter(Request.prototype);\nfor (var key in requestBase) {\n  Request.prototype[key] = requestBase[key];\n}\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set responseType to `val`. Presently valid responseTypes are 'blob' and\n * 'arraybuffer'.\n *\n * Examples:\n *\n *      req.get('/')\n *        .responseType('blob')\n *        .end(callback);\n *\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.responseType = function(val){\n  this._responseType = val;\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} pass\n * @param {Object} options with 'type' property 'auto' or 'basic' (default 'basic')\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass, options){\n  if (!options) {\n    options = {\n      type: 'basic'\n    }\n  }\n\n  switch (options.type) {\n    case 'basic':\n      var str = btoa(user + ':' + pass);\n      this.set('Authorization', 'Basic ' + str);\n    break;\n\n    case 'auto':\n      this.username = user;\n      this.password = pass;\n    break;\n  }\n  return this;\n};\n\n/**\n* Add query-string `val`.\n*\n* Examples:\n*\n*   request.get('/shoes')\n*     .query('size=10')\n*     .query({ color: 'blue' })\n*\n* @param {Object|String} val\n* @return {Request} for chaining\n* @api public\n*/\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `filename`.\n *\n * ``` js\n * request.post('/upload')\n *   .attach('content', new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String} filename\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, filename){\n  this._getFormData().append(field, file, filename || file.name);\n  return this;\n};\n\nRequest.prototype._getFormData = function(){\n  if (!this._formData) {\n    this._formData = new root.FormData();\n  }\n  return this._formData;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  var fn = this._callback;\n  this.clearTimeout();\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');\n  err.crossDomain = true;\n\n  err.status = this.status;\n  err.method = this.method;\n  err.url = this.url;\n\n  this.callback(err);\n};\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequest.prototype._timeoutError = function(){\n  var timeout = this._timeout;\n  var err = new Error('timeout of ' + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  this.callback(err);\n};\n\n/**\n * Compose querystring to append to req.url\n *\n * @api private\n */\n\nRequest.prototype._appendQueryString = function(){\n  var query = this._query.join('&');\n  if (query) {\n    this.url += ~this.url.indexOf('?')\n      ? '&' + query\n      : '?' + query;\n  }\n};\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  var self = this;\n  var xhr = this.xhr = request.getXHR();\n  var timeout = this._timeout;\n  var data = this._formData || this._data;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // state change\n  xhr.onreadystatechange = function(){\n    if (4 != xhr.readyState) return;\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (0 == status) {\n      if (self.timedout) return self._timeoutError();\n      if (self._aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(e){\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    e.direction = 'download';\n    self.emit('progress', e);\n  };\n  if (this.hasListeners('progress')) {\n    xhr.onprogress = handleProgress;\n  }\n  try {\n    if (xhr.upload && this.hasListeners('progress')) {\n      xhr.upload.onprogress = handleProgress;\n    }\n  } catch(e) {\n    // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n    // Reported here:\n    // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n  }\n\n  // timeout\n  if (timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self.timedout = true;\n      self.abort();\n    }, timeout);\n  }\n\n  // querystring\n  this._appendQueryString();\n\n  // initiate request\n  if (this.username && this.password) {\n    xhr.open(this.method, this.url, true, this.username, this.password);\n  } else {\n    xhr.open(this.method, this.url, true);\n  }\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if ('GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !this._isHost(data)) {\n    // serialize stuff\n    var contentType = this._header['content-type'];\n    var serialize = this._serializer || request.serialize[contentType ? contentType.split(';')[0] : ''];\n    if (!serialize && isJSON(contentType)) serialize = request.serialize['application/json'];\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n    xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  if (this._responseType) {\n    xhr.responseType = this._responseType;\n  }\n\n  // send stuff\n  this.emit('request', this);\n\n  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)\n  // We need null here if data is undefined\n  xhr.send(typeof data !== 'undefined' ? data : null);\n  return this;\n};\n\n\n/**\n * Expose `Request`.\n */\n\nrequest.Request = Request;\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn){\n  var req = request('GET', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn){\n  var req = request('HEAD', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * OPTIONS query to `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.options = function(url, data, fn){\n  var req = request('OPTIONS', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nfunction del(url, fn){\n  var req = request('DELETE', url);\n  if (fn) req.end(fn);\n  return req;\n};\n\nrequest['del'] = del;\nrequest['delete'] = del;\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn){\n  var req = request('PATCH', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn){\n  var req = request('POST', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn){\n  var req = request('PUT', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n},{\"./is-object\":10,\"./request\":12,\"./request-base\":11,\"emitter\":8}],10:[function(require,module,exports){\n/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return null !== obj && 'object' === typeof obj;\n}\n\nmodule.exports = isObject;\n\n},{}],11:[function(require,module,exports){\n/**\n * Module of mixed-in functions shared between node and client code\n */\nvar isObject = require('./is-object');\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nexports.clearTimeout = function _clearTimeout(){\n  this._timeout = 0;\n  clearTimeout(this._timer);\n  return this;\n};\n\n/**\n * Override default response body parser\n *\n * This function will be called to convert incoming data into request.body\n *\n * @param {Function}\n * @api public\n */\n\nexports.parse = function parse(fn){\n  this._parser = fn;\n  return this;\n};\n\n/**\n * Override default request body serializer\n *\n * This function will be called to convert data set via .send or .attach into payload to send\n *\n * @param {Function}\n * @api public\n */\n\nexports.serialize = function serialize(fn){\n  this._serializer = fn;\n  return this;\n};\n\n/**\n * Set timeout to `ms`.\n *\n * @param {Number} ms\n * @return {Request} for chaining\n * @api public\n */\n\nexports.timeout = function timeout(ms){\n  this._timeout = ms;\n  return this;\n};\n\n/**\n * Promise support\n *\n * @param {Function} resolve\n * @param {Function} reject\n * @return {Request}\n */\n\nexports.then = function then(resolve, reject) {\n  if (!this._fullfilledPromise) {\n    var self = this;\n    this._fullfilledPromise = new Promise(function(innerResolve, innerReject){\n      self.end(function(err, res){\n        if (err) innerReject(err); else innerResolve(res);\n      });\n    });\n  }\n  return this._fullfilledPromise.then(resolve, reject);\n}\n\n/**\n * Allow for extension\n */\n\nexports.use = function use(fn) {\n  fn(this);\n  return this;\n}\n\n\n/**\n * Get request header `field`.\n * Case-insensitive.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nexports.get = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Get case-insensitive header `field` value.\n * This is a deprecated internal API. Use `.get(field)` instead.\n *\n * (getHeader is no longer used internally by the superagent code base)\n *\n * @param {String} field\n * @return {String}\n * @api private\n * @deprecated\n */\n\nexports.getHeader = exports.get;\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n * Case-insensitive.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nexports.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n * Case-insensitive.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n */\nexports.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Write the field `name` and `val` for \"multipart/form-data\"\n * request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n * ```\n *\n * @param {String} name\n * @param {String|Blob|File|Buffer|fs.ReadStream} val\n * @return {Request} for chaining\n * @api public\n */\nexports.field = function(name, val) {\n  this._getFormData().append(name, val);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\nexports.abort = function(){\n  if (this._aborted) {\n    return this;\n  }\n  this._aborted = true;\n  this.xhr && this.xhr.abort(); // browser\n  this.req && this.req.abort(); // node\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nexports.withCredentials = function(){\n  // This is browser-only functionality. Node side is no-op.\n  this._withCredentials = true;\n  return this;\n};\n\n/**\n * Set the max redirects to `n`. Does noting in browser XHR implementation.\n *\n * @param {Number} n\n * @return {Request} for chaining\n * @api public\n */\n\nexports.redirects = function(n){\n  this._maxRedirects = n;\n  return this;\n};\n\n/**\n * Convert to a plain javascript object (not JSON string) of scalar properties.\n * Note as this method is designed to return a useful non-this value,\n * it cannot be chained.\n *\n * @return {Object} describing method, url, and data of this request\n * @api public\n */\n\nexports.toJSON = function(){\n  return {\n    method: this.method,\n    url: this.url,\n    data: this._data,\n    headers: this._header\n  };\n};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * TODO: future proof, move to compoent land\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nexports._isHost = function _isHost(obj) {\n  var str = {}.toString.call(obj);\n\n  switch (str) {\n    case '[object File]':\n    case '[object Blob]':\n    case '[object FormData]':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Send `data` as the request body, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"}')\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n *      request.post('/user')\n *        .send('name=tobi')\n *        .send('species=ferret')\n *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nexports.send = function(data){\n  var obj = isObject(data);\n  var type = this._header['content-type'];\n\n  // merge\n  if (obj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    // default to x-www-form-urlencoded\n    if (!type) this.type('form');\n    type = this._header['content-type'];\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!obj || this._isHost(data)) return this;\n\n  // default to json\n  if (!type) this.type('json');\n  return this;\n};\n\n},{\"./is-object\":10}],12:[function(require,module,exports){\n// The node and browser modules expose versions of this with the\n// appropriate constructor function bound as first argument\n/**\n * Issue a request:\n *\n * Examples:\n *\n *    request('GET', '/users').end(callback)\n *    request('/users').end(callback)\n *    request('/users', callback)\n *\n * @param {String} method\n * @param {String|Function} url or callback\n * @return {Request}\n * @api public\n */\n\nfunction request(RequestConstructor, method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new RequestConstructor('GET', method).end(url);\n  }\n\n  // url first\n  if (2 == arguments.length) {\n    return new RequestConstructor('GET', method);\n  }\n\n  return new RequestConstructor(method, url);\n}\n\nmodule.exports = request;\n\n},{}],13:[function(require,module,exports){\nmodule.exports={\n  \"name\": \"vhx-js\",\n  \"version\": \"0.0.1\",\n  \"description\": \"VHX client side API library\",\n  \"main\": \"vhx.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"David Gonzalez\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"babel-cli\": \"^6.11.4\",\n    \"babel-preset-es2015\": \"^6.9.0\",\n    \"babelify\": \"^7.3.0\",\n    \"browserify\": \"^13.1.0\",\n    \"gulp\": \"^3.9.1\",\n    \"gulp-babel\": \"^6.1.2\",\n    \"gulp-browserify\": \"^0.5.1\",\n    \"gulp-livereload\": \"^3.8.1\",\n    \"gulp-sourcemaps\": \"^1.6.0\",\n    \"gulp-uglify\": \"^1.5.4\",\n    \"superagent\": \"^2.1.0\",\n    \"vinyl-buffer\": \"^1.0.0\",\n    \"vinyl-source-stream\": \"^1.1.0\"\n  }\n}\n\n},{}]},{},[7])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvZGVmYXVsdHMuanMiLCJsaWIvcmVzb3VyY2UuanMiLCJsaWIvcmVzb3VyY2VzL2NvbGxlY3Rpb25zLmpzIiwibGliL3Jlc291cmNlcy9jdXN0b21lcnMuanMiLCJsaWIvcmVzb3VyY2VzL3Byb2R1Y3RzLmpzIiwibGliL3Jlc291cmNlcy92aWRlb3MuanMiLCJsaWIvdmh4LmpzIiwibm9kZV9tb2R1bGVzL2NvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3N1cGVyYWdlbnQvbGliL2NsaWVudC5qcyIsIm5vZGVfbW9kdWxlcy9zdXBlcmFnZW50L2xpYi9pcy1vYmplY3QuanMiLCJub2RlX21vZHVsZXMvc3VwZXJhZ2VudC9saWIvcmVxdWVzdC1iYXNlLmpzIiwibm9kZV9tb2R1bGVzL3N1cGVyYWdlbnQvbGliL3JlcXVlc3QuanMiLCJwYWNrYWdlLmpzb24iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQU0sZ0JBQWdCO0FBQ3BCLFFBQU0saUJBRGM7QUFFcEIsWUFBVSxTQUZVO0FBR3BCLGVBQWEsUUFBUSxpQkFBUixFQUEyQixPQUhwQjtBQUlwQixXQUFTO0FBSlcsQ0FBdEI7O0FBT0EsT0FBTyxPQUFQLEdBQWlCLGFBQWpCOzs7QUNQQTs7Ozs7Ozs7QUFFQSxJQUFNLFVBQVUsUUFBUSxZQUFSLENBQWhCO0FBQ0EsSUFBTSxXQUFXLFFBQVEsWUFBUixDQUFqQjs7SUFFTSxRO0FBQ0osb0JBQVksR0FBWixFQUFpQixJQUFqQixFQUF1QixPQUF2QixFQUFnQztBQUFBOztBQUM5QixRQUFJLFFBQVksSUFBaEI7QUFDQSxVQUFNLElBQU4sR0FBZ0IsR0FBaEI7QUFDQSxVQUFNLE9BQU4sR0FBZ0IsT0FBaEI7QUFDQSxVQUFNLElBQU4sR0FBZ0IsSUFBaEI7O0FBRUEsVUFBTSxJQUFOO0FBQ0Q7Ozs7MkJBRU07QUFDTCxVQUFJLFFB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbktBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5OEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJjb25zdCBfVkhYX0RFRkFVTFRTID0ge1xuICBIT1NUOiAnYXBpLmNyeXN0YWwuZGV2JyxcbiAgUFJPVE9DT0w6ICdodHRwOi8vJyxcbiAgQVBJX1ZFUlNJT046IHJlcXVpcmUoJy4uL3BhY2thZ2UuanNvbicpLnZlcnNpb24sXG4gIFRJTUVPVVQ6ICczMDAwMCdcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfVkhYX0RFRkFVTFRTO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgnc3VwZXJhZ2VudCcpO1xuY29uc3QgZGVmYXVsdHMgPSByZXF1aXJlKCcuL2RlZmF1bHRzJyk7XG5cbmNsYXNzIFJlc291cmNlIHtcbiAgY29uc3RydWN0b3IoYXBpLCBwYXRoLCBtZXRob2RzKSB7XG4gICAgbGV0IF90aGlzICAgICA9IHRoaXM7XG4gICAgX3RoaXMuX2FwaSAgICA9IGFwaTtcbiAgICBfdGhpcy5tZXRob2RzID0gbWV0aG9kcztcbiAgICBfdGhpcy5wYXRoICAgID0gcGF0aDtcblxuICAgIF90aGlzLmluaXQoKTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLm1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICBsZXQgbWV0aG9kID0gX3RoaXMuZ2V0TWV0aG9kKGl0ZW0pLFxuICAgICAgICAgIHR5cGUgPSBfdGhpcy5nZXRUeXBlKF90aGlzLnBhdGgpLFxuICAgICAgICAgIHBhcmFtcyA9IHtcbiAgICAgICAgICAgIGh0dHBfbWV0aG9kOiAnZ2V0JywgLy8gc3VwZXJhZ2VudCByZWFkcyAnZ2V0JyBub3QgJ0dFVCdcbiAgICAgICAgICAgIGNsaWVudF9tZXRob2Q6IG1ldGhvZFxuICAgICAgICAgIH07XG5cbiAgICAgIGlmIChtZXRob2QubWF0Y2goL3JldHJpZXZlfGl0ZW1zfGZpbGVzL2kpKSB7XG4gICAgICAgIF90aGlzW21ldGhvZF0gPSBmdW5jdGlvbihhLCBiLCBjKSB7XG4gICAgICAgICAgaWYgKGFbdHlwZV0pIHtcbiAgICAgICAgICAgaWYgKF90aGlzLmlzQ2FsbGJhY2tGdW5jdGlvbihiKSkge1xuICAgICAgICAgICAgIHBhcmFtcy5jYWxsYmFjayA9IGI7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmFtcy5pZCA9IF90aGlzLnBhcnNlSHJlZihhW3R5cGVdKTtcbiAgICAgICAgICAgIGRlbGV0ZSBhW3R5cGVdO1xuICAgICAgICAgICAgcGFyYW1zLm9wdGlvbnMgPSBhO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcmFtcy5pZCA9IF90aGlzLnBhcnNlSHJlZihhKTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0NhbGxiYWNrRnVuY3Rpb24oYikpIHtcbiAgICAgICAgICAgICAgcGFyYW1zLmNhbGxiYWNrID0gYjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHBhcmFtcy5vcHRpb25zID0gYjtcbiAgICAgICAgICAgICAgcGFyYW1zLmNhbGxiYWNrID0gYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwYXJhbXMuc2NvcGUgPSBpdGVtLnNjb3BlID8gaXRlbS5zY29wZSA6IG51bGw7XG4gICAgICAgICAgX3RoaXMubWFrZVJlcXVlc3QocGFyYW1zKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBfdGhpc1ttZXRob2RdID0gZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgICAgICBwYXJhbXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgcGFyYW1zLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cbiAgICAgICAgICBfdGhpcy5tYWtlUmVxdWVzdChwYXJhbXMpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZ2V0VHlwZShyZXNvdXJjZSkge1xuICAgIGlmIChyZXNvdXJjZSA9PT0gJ2NvbGxlY3Rpb25zJykge1xuICAgICAgcmV0dXJuICdjb2xsZWN0aW9uJztcbiAgICB9XG4gICAgaWYgKHJlc291cmNlID09PSAnY3VzdG9tZXJzJykge1xuICAgICAgcmV0dXJuICdjdXN0b21lcic7XG4gICAgfVxuICAgIGlmIChyZXNvdXJjZSA9PT0gJ3ZpZGVvcycpIHtcbiAgICAgIHJldHVybiAndmlkZW8nO1xuICAgIH1cblxuICAgIHJldHVybiAnaWQnO1xuICB9XG5cbiAgZ2V0TWV0aG9kKHBhcmFtcykge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAoX3RoaXMuaXNPYmplY3QocGFyYW1zKSAmJiBwYXJhbXMubWV0aG9kKSB7XG4gICAgICByZXR1cm4gcGFyYW1zLm1ldGhvZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG4gIH1cblxuICBwYXJzZUhyZWYoaHJlZikge1xuICAgIGxldCBfdGhpcyA9IHRoaXMsXG4gICAgICAgIHZhbDtcblxuICAgIGlmIChwYXJzZUludChocmVmLCAxMCkpIHtcbiAgICAgIHJldHVybiBocmVmO1xuICAgIH1cbiAgICBlbHNlIGlmIChocmVmLmluZGV4T2YoX3RoaXMuX2FwaS5ob3N0KSA+PSAwKSB7XG4gICAgICBpZiAoaHJlZi5zdWJzdHIoLTEpID09PSAnLycpIHtcbiAgICAgICAgaHJlZi5zdWJzdHIoMCwgaHJlZi5sZW5ndGgtMSk7XG4gICAgICB9XG4gICAgICB2YWwgPSBocmVmLnNwbGl0KCcvJyk7XG4gICAgICByZXR1cm4gdmFsW3ZhbC5sZW5ndGgtMV07XG4gICAgfVxuICB9XG5cbiAgZ2V0UGFyYW1zKGNsaWVudF9tZXRob2QsIGlkLCBvcHRpb25zLCBzY29wZSkge1xuICAgIGxldCBfdGhpcyA9IHRoaXMsXG4gICAgICAgIHBhcmFtcyA9IHt9O1xuXG4gICAgcGFyYW1zLnVybCA9IF90aGlzLl9hcGkucHJvdG9jb2wgKyBfdGhpcy5fYXBpLmhvc3QgKyAnLycgKyBfdGhpcy5wYXRoO1xuICAgIHBhcmFtcy50aW1lb3V0ID0gX3RoaXMuX2FwaS50aW1lb3V0O1xuICAgIHBhcmFtcy5oZWFkZXJzID0ge1xuICAgICAgJ0F1dGhvcml6YXRpb24nOiBfdGhpcy5fYXBpLmF1dGhcbiAgICB9O1xuXG4gICAgcGFyYW1zLnFzID0gb3B0aW9ucyB8fCBudWxsO1xuXG4gICAgaWYgKCFjbGllbnRfbWV0aG9kLm1hdGNoKC9ebGlzdCR8XmFsbCQvKSkge1xuICAgICAgcGFyYW1zLnVybCArPSAnLycgKyBpZDtcbiAgICB9XG5cbiAgICBpZiAoY2xpZW50X21ldGhvZC5tYXRjaCgvaXRlbXMvaSkpIHtcbiAgICAgIHBhcmFtcy51cmwgKz0gJy9pdGVtcyc7XG4gICAgfVxuXG4gICAgaWYgKGNsaWVudF9tZXRob2QubWF0Y2goL2ZpbGVzL2kpKSB7XG4gICAgICBwYXJhbXMudXJsICs9ICcvZmlsZXMnO1xuICAgIH1cblxuICAgIGlmIChzY29wZSkge1xuICAgICAgcGFyYW1zLnVybCArPSAnLycgKyBzY29wZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgbWFrZVJlcXVlc3QoYXJncykge1xuICAgIGxldCBfdGhpcyA9IHRoaXMsXG4gICAgICAgIHBhcmFtcyA9IF90aGlzLmdldFBhcmFtcyhhcmdzLmNsaWVudF9tZXRob2QsIGFyZ3MuaWQgfHwgbnVsbCwgYXJncy5vcHRpb25zLCBhcmdzLnNjb3BlKTtcblxuICAgIGlmIChfdGhpcy5pc0NhbGxiYWNrRnVuY3Rpb24oYXJncy5vcHRpb25zKSkge1xuICAgICAgYXJncy5jYWxsYmFjayA9IGFyZ3Mub3B0aW9ucztcbiAgICB9XG5cbiAgICByZXF1ZXN0W2FyZ3MuaHR0cF9tZXRob2RdKHBhcmFtcy51cmwpXG4gICAgICAud2l0aENyZWRlbnRpYWxzKClcbiAgICAgIC5zZXQocGFyYW1zLmhlYWRlcnMpXG4gICAgICAuc2VuZChwYXJhbXMucXMpXG4gICAgICAuZW5kKGZ1bmN0aW9uKGVyciwgcmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKGVyciAmJiBlcnIuY29kZSA9PT0gJ0VUSU1FRE9VVCcpIHtcbiAgICAgICAgICBfdGhpcy5lcnJvckhhbmRsZXIoe1xuICAgICAgICAgICAgc3RhdHVzOiA0MDgsXG4gICAgICAgICAgICBib2R5OiAne1wibWVzc2FnZVwiOiBcIlRoZSByZXF1ZXN0IHRpbWVkIG91dC5cIixcImRvY3VtZW50YXRpb25fdXJsXCI6IFwiaHR0cDovL2Rldi52aHgudHYvZG9jcy9hcGlcIn0nLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFyZ3MuY2FsbGJhY2tcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZXJyICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPCAzMDApIHtcbiAgICAgICAgICBfdGhpcy5zdWNjZXNzSGFuZGxlcih7XG4gICAgICAgICAgICBib2R5OiByZXNwb25zZS5ib2R5IHx8IG51bGwsXG4gICAgICAgICAgICBjYWxsYmFjazogYXJncy5jYWxsYmFja1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzLmVycm9ySGFuZGxlcih7XG4gICAgICAgICAgICBzdGF0dXM6IDQwOCxcbiAgICAgICAgICAgIGJvZHk6ICd7XCJtZXNzYWdlXCI6IFwiVGhlIHJlcXVlc3QgdGltZWQgb3V0LlwiLFwiZG9jdW1lbnRhdGlvbl91cmxcIjogXCJodHRwOi8vZGV2LnZoeC50di9kb2NzL2FwaVwifScsXG4gICAgICAgICAgICBjYWxsYmFjazogYXJncy5jYWxsYmFja1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIHN1Y2Nlc3NIYW5kbGVyKGFyZ3MpIHtcbiAgICBhcmdzLmNhbGxiYWNrKGZhbHNlLCBhcmdzLmJvZHkpO1xuICB9XG5cbiAgZXJyb3JIYW5kbGVyKGFyZ3MpIHtcbiAgICBsZXQgZXJyb3IgPSBKU09OLnBhcnNlKGFyZ3MuYm9keSksXG4gICAgICAgIGVycm9yX3R5cGVzID0ge1xuICAgICAgICAgIDQwMDogJ1ZIWEludmFsaWRSZXF1ZXN0RXJyb3InLFxuICAgICAgICAgIDQwMTogJ1ZIWEF1dGhlbnRpY2F0aW9uRXJyb3InLFxuICAgICAgICAgIDQwNDogJ1ZIWFJlc291cmNlTm90Rm91bmQnLFxuICAgICAgICAgIDQwODogJ1ZIWENvbm5lY3Rpb25FcnJvcicsXG4gICAgICAgICAgNTAwOiAnVkhYQVBJRXJyb3InXG4gICAgICAgIH07XG5cbiAgICBlcnJvci5zdGF0dXMgPSBhcmdzLnN0YXR1cztcbiAgICBlcnJvci50eXBlID0gZXJyb3JfdHlwZXNbZXJyb3Iuc3RhdHVzXTtcbiAgICBhcmdzLmNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgfVxuXG4gIGlzQ2FsbGJhY2tGdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5jb25zdHJ1Y3RvciAmJiBvYmouY2FsbCAmJiBvYmouYXBwbHkpO1xuICB9XG5cbiAgaXNPYmplY3Qob2JqKSB7XG4gICAgbGV0IHR5cGUgPSB0eXBlb2Ygb2JqO1xuICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhb2JqO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlc291cmNlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVzb3VyY2UgPSByZXF1aXJlKCcuLi9yZXNvdXJjZScpO1xuXG5jbGFzcyBDb2xsZWN0aW9uIGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICdjb2xsZWN0aW9ucycsIFsnYWxsJywgJ2xpc3QnLCAnaXRlbXMnXSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ29sbGVjdGlvbjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFJlc291cmNlID0gcmVxdWlyZSgnLi4vcmVzb3VyY2UnKTtcblxuY2xhc3MgQ3VzdG9tZXIgZXh0ZW5kcyBSZXNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKGFwaSkge1xuICAgIHN1cGVyKGFwaSwgJ2N1c3RvbWVycycsIFsncmV0cmlldmUnLCAnYWxsJ10pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEN1c3RvbWVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVzb3VyY2UgPSByZXF1aXJlKCcuLi9yZXNvdXJjZScpO1xuXG5jbGFzcyBQcm9kdWN0IGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICdwcm9kdWN0cycsIFsncmV0cmlldmUnLCAnYWxsJ10pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByb2R1Y3Q7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBSZXNvdXJjZSA9IHJlcXVpcmUoJy4uL3Jlc291cmNlJyk7XG5cbmNsYXNzIFZpZGVvIGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICd2aWRlb3MnLCBbJ2FsbCcsICdyZXRyaWV2ZScsICdmaWxlcyddKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBWaWRlbztcbiIsImltcG9ydCBkZWZhdWx0cyBmcm9tICcuL2RlZmF1bHRzJztcbmltcG9ydCBSZXNvdXJjZSBmcm9tICcuL3Jlc291cmNlJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vcmVzb3VyY2VzL2NvbGxlY3Rpb25zJztcbmltcG9ydCBWaWRlbyBmcm9tICcuL3Jlc291cmNlcy92aWRlb3MnO1xuaW1wb3J0IEN1c3RvbWVyIGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbWVycydcbmltcG9ydCBQcm9kdWN0IGZyb20gJy4vcmVzb3VyY2VzL3Byb2R1Y3RzJ1xuXG5sZXQgcmVzb3VyY2VzID0ge1xuICBjb2xsZWN0aW9ucyA6IENvbGxlY3Rpb24sXG4gIHZpZGVvcyAgICAgIDogVmlkZW8sXG4gIHByb2R1Y3RzICAgIDogUHJvZHVjdCxcbiAgY3VzdG9tZXIgICAgOiBDdXN0b21lclxufTtcblxuY2xhc3Mgdmh4IHtcbiAgY29uc3RydWN0b3Ioa2V5LCBpc1Rva2VuKSB7XG4gICAgbGV0IF90aGlzICAgID0gdGhpcztcblxuICAgIGlmICghKF90aGlzIGluc3RhbmNlb2Ygdmh4KSkge1xuICAgICAgcmV0dXJuIG5ldyB2aHgoa2V5KTtcbiAgICB9XG5cbiAgICBfdGhpcy5hcGkgPSBpc1Rva2VuID8gX3RoaXMuc2V0VG9rZW4oa2V5KSA6IF90aGlzLnNldEFwaShrZXkpO1xuICAgIF90aGlzLnByZXBhcmVSZXNvdXJjZXMoKTtcbiAgfVxuXG4gIHNldEFwaShrZXkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXV0aDogJ0Jhc2ljICcgKyBidG9hKGtleSksXG4gICAgICBob3N0OiBkZWZhdWx0cy5IT1NULFxuICAgICAgcHJvdG9jb2w6IGRlZmF1bHRzLlBST1RPQ09MLFxuICAgICAgdGltZW91dDogZGVmYXVsdHMuVElNRU9VVFxuICAgIH1cbiAgfVxuXG4gIHNldFRva2VuKGtleSkge1xuICAgIHJldHVybiB7XG4gICAgICB0b2tlbjogbnVsbFxuICAgIH1cbiAgfVxuXG4gIHByZXBhcmVSZXNvdXJjZXMoKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIGZvciAobGV0IG5hbWUgaW4gcmVzb3VyY2VzKSB7XG4gICAgICBfdGhpc1tuYW1lWzBdLnRvTG93ZXJDYXNlKCkgKyBuYW1lLnN1YnN0cmluZygxKV0gPSBuZXcgcmVzb3VyY2VzW25hbWVdKF90aGlzLmFwaSk7XG4gICAgfVxuICB9XG59XG5cbndpbmRvdy52aHggPSB2aHg7XG4iLCJcclxuLyoqXHJcbiAqIEV4cG9zZSBgRW1pdHRlcmAuXHJcbiAqL1xyXG5cclxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgbW9kdWxlLmV4cG9ydHMgPSBFbWl0dGVyO1xyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBhIG5ldyBgRW1pdHRlcmAuXHJcbiAqXHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gRW1pdHRlcihvYmopIHtcclxuICBpZiAob2JqKSByZXR1cm4gbWl4aW4ob2JqKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBNaXhpbiB0aGUgZW1pdHRlciBwcm9wZXJ0aWVzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXHJcbiAqIEByZXR1cm4ge09iamVjdH1cclxuICogQGFwaSBwcml2YXRlXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gbWl4aW4ob2JqKSB7XHJcbiAgZm9yICh2YXIga2V5IGluIEVtaXR0ZXIucHJvdG90eXBlKSB7XHJcbiAgICBvYmpba2V5XSA9IEVtaXR0ZXIucHJvdG90eXBlW2tleV07XHJcbiAgfVxyXG4gIHJldHVybiBvYmo7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaXN0ZW4gb24gdGhlIGdpdmVuIGBldmVudGAgd2l0aCBgZm5gLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICogQHJldHVybiB7RW1pdHRlcn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5vbiA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCwgZm4pe1xyXG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcclxuICAodGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gfHwgW10pXHJcbiAgICAucHVzaChmbik7XHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXHJcbiAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbihldmVudCwgZm4pe1xyXG4gIGZ1bmN0aW9uIG9uKCkge1xyXG4gICAgdGhpcy5vZmYoZXZlbnQsIG9uKTtcclxuICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgfVxyXG5cclxuICBvbi5mbiA9IGZuO1xyXG4gIHRoaXMub24oZXZlbnQsIG9uKTtcclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciBgZXZlbnRgIG9yIGFsbFxyXG4gKiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXHJcbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUub2ZmID1cclxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPVxyXG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxyXG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQsIGZuKXtcclxuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XHJcblxyXG4gIC8vIGFsbFxyXG4gIGlmICgwID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcclxuICAgIHRoaXMuX2NhbGxiYWNrcyA9IHt9O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICAvLyBzcGVjaWZpYyBldmVudFxyXG4gIHZhciBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdO1xyXG4gIGlmICghY2FsbGJhY2tzKSByZXR1cm4gdGhpcztcclxuXHJcbiAgLy8gcmVtb3ZlIGFsbCBoYW5kbGVyc1xyXG4gIGlmICgxID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcclxuICAgIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICAvLyByZW1vdmUgc3BlY2lmaWMgaGFuZGxlclxyXG4gIHZhciBjYjtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xyXG4gICAgY2IgPSBjYWxsYmFja3NbaV07XHJcbiAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xyXG4gICAgICBjYWxsYmFja3Muc3BsaWNlKGksIDEpO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogRW1pdCBgZXZlbnRgIHdpdGggdGhlIGdpdmVuIGFyZ3MuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcGFyYW0ge01peGVkfSAuLi5cclxuICogQHJldHVybiB7RW1pdHRlcn1cclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24oZXZlbnQpe1xyXG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcclxuICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxyXG4gICAgLCBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdO1xyXG5cclxuICBpZiAoY2FsbGJhY2tzKSB7XHJcbiAgICBjYWxsYmFja3MgPSBjYWxsYmFja3Muc2xpY2UoMCk7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY2FsbGJhY2tzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XHJcbiAgICAgIGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJldHVybiBhcnJheSBvZiBjYWxsYmFja3MgZm9yIGBldmVudGAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcmV0dXJuIHtBcnJheX1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gIHJldHVybiB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdIHx8IFtdO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIHRoaXMgZW1pdHRlciBoYXMgYGV2ZW50YCBoYW5kbGVycy5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUuaGFzTGlzdGVuZXJzID0gZnVuY3Rpb24oZXZlbnQpe1xyXG4gIHJldHVybiAhISB0aGlzLmxpc3RlbmVycyhldmVudCkubGVuZ3RoO1xyXG59O1xyXG4iLCIvKipcbiAqIFJvb3QgcmVmZXJlbmNlIGZvciBpZnJhbWVzLlxuICovXG5cbnZhciByb290O1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7IC8vIEJyb3dzZXIgd2luZG93XG4gIHJvb3QgPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgeyAvLyBXZWIgV29ya2VyXG4gIHJvb3QgPSBzZWxmO1xufSBlbHNlIHsgLy8gT3RoZXIgZW52aXJvbm1lbnRzXG4gIGNvbnNvbGUud2FybihcIlVzaW5nIGJyb3dzZXItb25seSB2ZXJzaW9uIG9mIHN1cGVyYWdlbnQgaW4gbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG4gIHJvb3QgPSB0aGlzO1xufVxuXG52YXIgRW1pdHRlciA9IHJlcXVpcmUoJ2VtaXR0ZXInKTtcbnZhciByZXF1ZXN0QmFzZSA9IHJlcXVpcmUoJy4vcmVxdWVzdC1iYXNlJyk7XG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzLW9iamVjdCcpO1xuXG4vKipcbiAqIE5vb3AuXG4gKi9cblxuZnVuY3Rpb24gbm9vcCgpe307XG5cbi8qKlxuICogRXhwb3NlIGByZXF1ZXN0YC5cbiAqL1xuXG52YXIgcmVxdWVzdCA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9yZXF1ZXN0JykuYmluZChudWxsLCBSZXF1ZXN0KTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgWEhSLlxuICovXG5cbnJlcXVlc3QuZ2V0WEhSID0gZnVuY3Rpb24gKCkge1xuICBpZiAocm9vdC5YTUxIdHRwUmVxdWVzdFxuICAgICAgJiYgKCFyb290LmxvY2F0aW9uIHx8ICdmaWxlOicgIT0gcm9vdC5sb2NhdGlvbi5wcm90b2NvbFxuICAgICAgICAgIHx8ICFyb290LkFjdGl2ZVhPYmplY3QpKSB7XG4gICAgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdDtcbiAgfSBlbHNlIHtcbiAgICB0cnkgeyByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoJ01pY3Jvc29mdC5YTUxIVFRQJyk7IH0gY2F0Y2goZSkge31cbiAgICB0cnkgeyByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoJ01zeG1sMi5YTUxIVFRQLjYuMCcpOyB9IGNhdGNoKGUpIHt9XG4gICAgdHJ5IHsgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNc3htbDIuWE1MSFRUUC4zLjAnKTsgfSBjYXRjaChlKSB7fVxuICAgIHRyeSB7IHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTXN4bWwyLlhNTEhUVFAnKTsgfSBjYXRjaChlKSB7fVxuICB9XG4gIHRocm93IEVycm9yKFwiQnJvd3Nlci1vbmx5IHZlcmlzb24gb2Ygc3VwZXJhZ2VudCBjb3VsZCBub3QgZmluZCBYSFJcIik7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSwgYWRkZWQgdG8gc3VwcG9ydCBJRS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxudmFyIHRyaW0gPSAnJy50cmltXG4gID8gZnVuY3Rpb24ocykgeyByZXR1cm4gcy50cmltKCk7IH1cbiAgOiBmdW5jdGlvbihzKSB7IHJldHVybiBzLnJlcGxhY2UoLyheXFxzKnxcXHMqJCkvZywgJycpOyB9O1xuXG4vKipcbiAqIFNlcmlhbGl6ZSB0aGUgZ2l2ZW4gYG9iamAuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gc2VyaWFsaXplKG9iaikge1xuICBpZiAoIWlzT2JqZWN0KG9iaikpIHJldHVybiBvYmo7XG4gIHZhciBwYWlycyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKG51bGwgIT0gb2JqW2tleV0pIHtcbiAgICAgIHB1c2hFbmNvZGVkS2V5VmFsdWVQYWlyKHBhaXJzLCBrZXksIG9ialtrZXldKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBhaXJzLmpvaW4oJyYnKTtcbn1cblxuLyoqXG4gKiBIZWxwcyAnc2VyaWFsaXplJyB3aXRoIHNlcmlhbGl6aW5nIGFycmF5cy5cbiAqIE11dGF0ZXMgdGhlIHBhaXJzIGFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHBhaXJzXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge01peGVkfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBwdXNoRW5jb2RlZEtleVZhbHVlUGFpcihwYWlycywga2V5LCB2YWwpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgIHJldHVybiB2YWwuZm9yRWFjaChmdW5jdGlvbih2KSB7XG4gICAgICBwdXNoRW5jb2RlZEtleVZhbHVlUGFpcihwYWlycywga2V5LCB2KTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChpc09iamVjdCh2YWwpKSB7XG4gICAgZm9yKHZhciBzdWJrZXkgaW4gdmFsKSB7XG4gICAgICBwdXNoRW5jb2RlZEtleVZhbHVlUGFpcihwYWlycywga2V5ICsgJ1snICsgc3Via2V5ICsgJ10nLCB2YWxbc3Via2V5XSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBwYWlycy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpXG4gICAgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsKSk7XG59XG5cbi8qKlxuICogRXhwb3NlIHNlcmlhbGl6YXRpb24gbWV0aG9kLlxuICovXG5cbiByZXF1ZXN0LnNlcmlhbGl6ZU9iamVjdCA9IHNlcmlhbGl6ZTtcblxuIC8qKlxuICAqIFBhcnNlIHRoZSBnaXZlbiB4LXd3dy1mb3JtLXVybGVuY29kZWQgYHN0cmAuXG4gICpcbiAgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gICogQHJldHVybiB7T2JqZWN0fVxuICAqIEBhcGkgcHJpdmF0ZVxuICAqL1xuXG5mdW5jdGlvbiBwYXJzZVN0cmluZyhzdHIpIHtcbiAgdmFyIG9iaiA9IHt9O1xuICB2YXIgcGFpcnMgPSBzdHIuc3BsaXQoJyYnKTtcbiAgdmFyIHBhaXI7XG4gIHZhciBwb3M7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHBhaXJzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgcGFpciA9IHBhaXJzW2ldO1xuICAgIHBvcyA9IHBhaXIuaW5kZXhPZignPScpO1xuICAgIGlmIChwb3MgPT0gLTEpIHtcbiAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQocGFpcildID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQocGFpci5zbGljZSgwLCBwb3MpKV0gPVxuICAgICAgICBkZWNvZGVVUklDb21wb25lbnQocGFpci5zbGljZShwb3MgKyAxKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBFeHBvc2UgcGFyc2VyLlxuICovXG5cbnJlcXVlc3QucGFyc2VTdHJpbmcgPSBwYXJzZVN0cmluZztcblxuLyoqXG4gKiBEZWZhdWx0IE1JTUUgdHlwZSBtYXAuXG4gKlxuICogICAgIHN1cGVyYWdlbnQudHlwZXMueG1sID0gJ2FwcGxpY2F0aW9uL3htbCc7XG4gKlxuICovXG5cbnJlcXVlc3QudHlwZXMgPSB7XG4gIGh0bWw6ICd0ZXh0L2h0bWwnLFxuICBqc29uOiAnYXBwbGljYXRpb24vanNvbicsXG4gIHhtbDogJ2FwcGxpY2F0aW9uL3htbCcsXG4gIHVybGVuY29kZWQ6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAnZm9ybSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAnZm9ybS1kYXRhJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbn07XG5cbi8qKlxuICogRGVmYXVsdCBzZXJpYWxpemF0aW9uIG1hcC5cbiAqXG4gKiAgICAgc3VwZXJhZ2VudC5zZXJpYWxpemVbJ2FwcGxpY2F0aW9uL3htbCddID0gZnVuY3Rpb24ob2JqKXtcbiAqICAgICAgIHJldHVybiAnZ2VuZXJhdGVkIHhtbCBoZXJlJztcbiAqICAgICB9O1xuICpcbiAqL1xuXG4gcmVxdWVzdC5zZXJpYWxpemUgPSB7XG4gICAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJzogc2VyaWFsaXplLFxuICAgJ2FwcGxpY2F0aW9uL2pzb24nOiBKU09OLnN0cmluZ2lmeVxuIH07XG5cbiAvKipcbiAgKiBEZWZhdWx0IHBhcnNlcnMuXG4gICpcbiAgKiAgICAgc3VwZXJhZ2VudC5wYXJzZVsnYXBwbGljYXRpb24veG1sJ10gPSBmdW5jdGlvbihzdHIpe1xuICAqICAgICAgIHJldHVybiB7IG9iamVjdCBwYXJzZWQgZnJvbSBzdHIgfTtcbiAgKiAgICAgfTtcbiAgKlxuICAqL1xuXG5yZXF1ZXN0LnBhcnNlID0ge1xuICAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJzogcGFyc2VTdHJpbmcsXG4gICdhcHBsaWNhdGlvbi9qc29uJzogSlNPTi5wYXJzZVxufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gaGVhZGVyIGBzdHJgIGludG9cbiAqIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBtYXBwZWQgZmllbGRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlSGVhZGVyKHN0cikge1xuICB2YXIgbGluZXMgPSBzdHIuc3BsaXQoL1xccj9cXG4vKTtcbiAgdmFyIGZpZWxkcyA9IHt9O1xuICB2YXIgaW5kZXg7XG4gIHZhciBsaW5lO1xuICB2YXIgZmllbGQ7XG4gIHZhciB2YWw7XG5cbiAgbGluZXMucG9wKCk7IC8vIHRyYWlsaW5nIENSTEZcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gbGluZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBsaW5lID0gbGluZXNbaV07XG4gICAgaW5kZXggPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICBmaWVsZCA9IGxpbmUuc2xpY2UoMCwgaW5kZXgpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gdHJpbShsaW5lLnNsaWNlKGluZGV4ICsgMSkpO1xuICAgIGZpZWxkc1tmaWVsZF0gPSB2YWw7XG4gIH1cblxuICByZXR1cm4gZmllbGRzO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGBtaW1lYCBpcyBqc29uIG9yIGhhcyAranNvbiBzdHJ1Y3R1cmVkIHN5bnRheCBzdWZmaXguXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1pbWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBpc0pTT04obWltZSkge1xuICByZXR1cm4gL1tcXC8rXWpzb25cXGIvLnRlc3QobWltZSk7XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBtaW1lIHR5cGUgZm9yIHRoZSBnaXZlbiBgc3RyYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiB0eXBlKHN0cil7XG4gIHJldHVybiBzdHIuc3BsaXQoLyAqOyAqLykuc2hpZnQoKTtcbn07XG5cbi8qKlxuICogUmV0dXJuIGhlYWRlciBmaWVsZCBwYXJhbWV0ZXJzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcmFtcyhzdHIpe1xuICByZXR1cm4gc3RyLnNwbGl0KC8gKjsgKi8pLnJlZHVjZShmdW5jdGlvbihvYmosIHN0cil7XG4gICAgdmFyIHBhcnRzID0gc3RyLnNwbGl0KC8gKj0gKi8pLFxuICAgICAgICBrZXkgPSBwYXJ0cy5zaGlmdCgpLFxuICAgICAgICB2YWwgPSBwYXJ0cy5zaGlmdCgpO1xuXG4gICAgaWYgKGtleSAmJiB2YWwpIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybiBvYmo7XG4gIH0sIHt9KTtcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhIG5ldyBgUmVzcG9uc2VgIHdpdGggdGhlIGdpdmVuIGB4aHJgLlxuICpcbiAqICAtIHNldCBmbGFncyAoLm9rLCAuZXJyb3IsIGV0YylcbiAqICAtIHBhcnNlIGhlYWRlclxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICBBbGlhc2luZyBgc3VwZXJhZ2VudGAgYXMgYHJlcXVlc3RgIGlzIG5pY2U6XG4gKlxuICogICAgICByZXF1ZXN0ID0gc3VwZXJhZ2VudDtcbiAqXG4gKiAgV2UgY2FuIHVzZSB0aGUgcHJvbWlzZS1saWtlIEFQSSwgb3IgcGFzcyBjYWxsYmFja3M6XG4gKlxuICogICAgICByZXF1ZXN0LmdldCgnLycpLmVuZChmdW5jdGlvbihyZXMpe30pO1xuICogICAgICByZXF1ZXN0LmdldCgnLycsIGZ1bmN0aW9uKHJlcyl7fSk7XG4gKlxuICogIFNlbmRpbmcgZGF0YSBjYW4gYmUgY2hhaW5lZDpcbiAqXG4gKiAgICAgIHJlcXVlc3RcbiAqICAgICAgICAucG9zdCgnL3VzZXInKVxuICogICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgIC5lbmQoZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiAgT3IgcGFzc2VkIHRvIGAuc2VuZCgpYDpcbiAqXG4gKiAgICAgIHJlcXVlc3RcbiAqICAgICAgICAucG9zdCgnL3VzZXInKVxuICogICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9LCBmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqICBPciBwYXNzZWQgdG8gYC5wb3N0KClgOlxuICpcbiAqICAgICAgcmVxdWVzdFxuICogICAgICAgIC5wb3N0KCcvdXNlcicsIHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgIC5lbmQoZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiBPciBmdXJ0aGVyIHJlZHVjZWQgdG8gYSBzaW5nbGUgY2FsbCBmb3Igc2ltcGxlIGNhc2VzOlxuICpcbiAqICAgICAgcmVxdWVzdFxuICogICAgICAgIC5wb3N0KCcvdXNlcicsIHsgbmFtZTogJ3RqJyB9LCBmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqIEBwYXJhbSB7WE1MSFRUUFJlcXVlc3R9IHhoclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIFJlc3BvbnNlKHJlcSwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdGhpcy5yZXEgPSByZXE7XG4gIHRoaXMueGhyID0gdGhpcy5yZXEueGhyO1xuICAvLyByZXNwb25zZVRleHQgaXMgYWNjZXNzaWJsZSBvbmx5IGlmIHJlc3BvbnNlVHlwZSBpcyAnJyBvciAndGV4dCcgYW5kIG9uIG9sZGVyIGJyb3dzZXJzXG4gIHRoaXMudGV4dCA9ICgodGhpcy5yZXEubWV0aG9kICE9J0hFQUQnICYmICh0aGlzLnhoci5yZXNwb25zZVR5cGUgPT09ICcnIHx8IHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnKSkgfHwgdHlwZW9mIHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgID8gdGhpcy54aHIucmVzcG9uc2VUZXh0XG4gICAgIDogbnVsbDtcbiAgdGhpcy5zdGF0dXNUZXh0ID0gdGhpcy5yZXEueGhyLnN0YXR1c1RleHQ7XG4gIHRoaXMuX3NldFN0YXR1c1Byb3BlcnRpZXModGhpcy54aHIuc3RhdHVzKTtcbiAgdGhpcy5oZWFkZXIgPSB0aGlzLmhlYWRlcnMgPSBwYXJzZUhlYWRlcih0aGlzLnhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG4gIC8vIGdldEFsbFJlc3BvbnNlSGVhZGVycyBzb21ldGltZXMgZmFsc2VseSByZXR1cm5zIFwiXCIgZm9yIENPUlMgcmVxdWVzdHMsIGJ1dFxuICAvLyBnZXRSZXNwb25zZUhlYWRlciBzdGlsbCB3b3Jrcy4gc28gd2UgZ2V0IGNvbnRlbnQtdHlwZSBldmVuIGlmIGdldHRpbmdcbiAgLy8gb3RoZXIgaGVhZGVycyBmYWlscy5cbiAgdGhpcy5oZWFkZXJbJ2NvbnRlbnQtdHlwZSddID0gdGhpcy54aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ2NvbnRlbnQtdHlwZScpO1xuICB0aGlzLl9zZXRIZWFkZXJQcm9wZXJ0aWVzKHRoaXMuaGVhZGVyKTtcbiAgdGhpcy5ib2R5ID0gdGhpcy5yZXEubWV0aG9kICE9ICdIRUFEJ1xuICAgID8gdGhpcy5fcGFyc2VCb2R5KHRoaXMudGV4dCA/IHRoaXMudGV4dCA6IHRoaXMueGhyLnJlc3BvbnNlKVxuICAgIDogbnVsbDtcbn1cblxuLyoqXG4gKiBHZXQgY2FzZS1pbnNlbnNpdGl2ZSBgZmllbGRgIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXNwb25zZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oZmllbGQpe1xuICByZXR1cm4gdGhpcy5oZWFkZXJbZmllbGQudG9Mb3dlckNhc2UoKV07XG59O1xuXG4vKipcbiAqIFNldCBoZWFkZXIgcmVsYXRlZCBwcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBgLnR5cGVgIHRoZSBjb250ZW50IHR5cGUgd2l0aG91dCBwYXJhbXNcbiAqXG4gKiBBIHJlc3BvbnNlIG9mIFwiQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04XCJcbiAqIHdpbGwgcHJvdmlkZSB5b3Ugd2l0aCBhIGAudHlwZWAgb2YgXCJ0ZXh0L3BsYWluXCIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGhlYWRlclxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLl9zZXRIZWFkZXJQcm9wZXJ0aWVzID0gZnVuY3Rpb24oaGVhZGVyKXtcbiAgLy8gY29udGVudC10eXBlXG4gIHZhciBjdCA9IHRoaXMuaGVhZGVyWydjb250ZW50LXR5cGUnXSB8fCAnJztcbiAgdGhpcy50eXBlID0gdHlwZShjdCk7XG5cbiAgLy8gcGFyYW1zXG4gIHZhciBvYmogPSBwYXJhbXMoY3QpO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB0aGlzW2tleV0gPSBvYmpba2V5XTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGJvZHkgYHN0cmAuXG4gKlxuICogVXNlZCBmb3IgYXV0by1wYXJzaW5nIG9mIGJvZGllcy4gUGFyc2Vyc1xuICogYXJlIGRlZmluZWQgb24gdGhlIGBzdXBlcmFnZW50LnBhcnNlYCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7TWl4ZWR9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXNwb25zZS5wcm90b3R5cGUuX3BhcnNlQm9keSA9IGZ1bmN0aW9uKHN0cil7XG4gIHZhciBwYXJzZSA9IHJlcXVlc3QucGFyc2VbdGhpcy50eXBlXTtcbiAgaWYgKCFwYXJzZSAmJiBpc0pTT04odGhpcy50eXBlKSkge1xuICAgIHBhcnNlID0gcmVxdWVzdC5wYXJzZVsnYXBwbGljYXRpb24vanNvbiddO1xuICB9XG4gIHJldHVybiBwYXJzZSAmJiBzdHIgJiYgKHN0ci5sZW5ndGggfHwgc3RyIGluc3RhbmNlb2YgT2JqZWN0KVxuICAgID8gcGFyc2Uoc3RyKVxuICAgIDogbnVsbDtcbn07XG5cbi8qKlxuICogU2V0IGZsYWdzIHN1Y2ggYXMgYC5va2AgYmFzZWQgb24gYHN0YXR1c2AuXG4gKlxuICogRm9yIGV4YW1wbGUgYSAyeHggcmVzcG9uc2Ugd2lsbCBnaXZlIHlvdSBhIGAub2tgIG9mIF9fdHJ1ZV9fXG4gKiB3aGVyZWFzIDV4eCB3aWxsIGJlIF9fZmFsc2VfXyBhbmQgYC5lcnJvcmAgd2lsbCBiZSBfX3RydWVfXy4gVGhlXG4gKiBgLmNsaWVudEVycm9yYCBhbmQgYC5zZXJ2ZXJFcnJvcmAgYXJlIGFsc28gYXZhaWxhYmxlIHRvIGJlIG1vcmVcbiAqIHNwZWNpZmljLCBhbmQgYC5zdGF0dXNUeXBlYCBpcyB0aGUgY2xhc3Mgb2YgZXJyb3IgcmFuZ2luZyBmcm9tIDEuLjVcbiAqIHNvbWV0aW1lcyB1c2VmdWwgZm9yIG1hcHBpbmcgcmVzcG9uZCBjb2xvcnMgZXRjLlxuICpcbiAqIFwic3VnYXJcIiBwcm9wZXJ0aWVzIGFyZSBhbHNvIGRlZmluZWQgZm9yIGNvbW1vbiBjYXNlcy4gQ3VycmVudGx5IHByb3ZpZGluZzpcbiAqXG4gKiAgIC0gLm5vQ29udGVudFxuICogICAtIC5iYWRSZXF1ZXN0XG4gKiAgIC0gLnVuYXV0aG9yaXplZFxuICogICAtIC5ub3RBY2NlcHRhYmxlXG4gKiAgIC0gLm5vdEZvdW5kXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLl9zZXRTdGF0dXNQcm9wZXJ0aWVzID0gZnVuY3Rpb24oc3RhdHVzKXtcbiAgLy8gaGFuZGxlIElFOSBidWc6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTAwNDY5NzIvbXNpZS1yZXR1cm5zLXN0YXR1cy1jb2RlLW9mLTEyMjMtZm9yLWFqYXgtcmVxdWVzdFxuICBpZiAoc3RhdHVzID09PSAxMjIzKSB7XG4gICAgc3RhdHVzID0gMjA0O1xuICB9XG5cbiAgdmFyIHR5cGUgPSBzdGF0dXMgLyAxMDAgfCAwO1xuXG4gIC8vIHN0YXR1cyAvIGNsYXNzXG4gIHRoaXMuc3RhdHVzID0gdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzO1xuICB0aGlzLnN0YXR1c1R5cGUgPSB0eXBlO1xuXG4gIC8vIGJhc2ljc1xuICB0aGlzLmluZm8gPSAxID09IHR5cGU7XG4gIHRoaXMub2sgPSAyID09IHR5cGU7XG4gIHRoaXMuY2xpZW50RXJyb3IgPSA0ID09IHR5cGU7XG4gIHRoaXMuc2VydmVyRXJyb3IgPSA1ID09IHR5cGU7XG4gIHRoaXMuZXJyb3IgPSAoNCA9PSB0eXBlIHx8IDUgPT0gdHlwZSlcbiAgICA/IHRoaXMudG9FcnJvcigpXG4gICAgOiBmYWxzZTtcblxuICAvLyBzdWdhclxuICB0aGlzLmFjY2VwdGVkID0gMjAyID09IHN0YXR1cztcbiAgdGhpcy5ub0NvbnRlbnQgPSAyMDQgPT0gc3RhdHVzO1xuICB0aGlzLmJhZFJlcXVlc3QgPSA0MDAgPT0gc3RhdHVzO1xuICB0aGlzLnVuYXV0aG9yaXplZCA9IDQwMSA9PSBzdGF0dXM7XG4gIHRoaXMubm90QWNjZXB0YWJsZSA9IDQwNiA9PSBzdGF0dXM7XG4gIHRoaXMubm90Rm91bmQgPSA0MDQgPT0gc3RhdHVzO1xuICB0aGlzLmZvcmJpZGRlbiA9IDQwMyA9PSBzdGF0dXM7XG59O1xuXG4vKipcbiAqIFJldHVybiBhbiBgRXJyb3JgIHJlcHJlc2VudGF0aXZlIG9mIHRoaXMgcmVzcG9uc2UuXG4gKlxuICogQHJldHVybiB7RXJyb3J9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS50b0Vycm9yID0gZnVuY3Rpb24oKXtcbiAgdmFyIHJlcSA9IHRoaXMucmVxO1xuICB2YXIgbWV0aG9kID0gcmVxLm1ldGhvZDtcbiAgdmFyIHVybCA9IHJlcS51cmw7XG5cbiAgdmFyIG1zZyA9ICdjYW5ub3QgJyArIG1ldGhvZCArICcgJyArIHVybCArICcgKCcgKyB0aGlzLnN0YXR1cyArICcpJztcbiAgdmFyIGVyciA9IG5ldyBFcnJvcihtc2cpO1xuICBlcnIuc3RhdHVzID0gdGhpcy5zdGF0dXM7XG4gIGVyci5tZXRob2QgPSBtZXRob2Q7XG4gIGVyci51cmwgPSB1cmw7XG5cbiAgcmV0dXJuIGVycjtcbn07XG5cbi8qKlxuICogRXhwb3NlIGBSZXNwb25zZWAuXG4gKi9cblxucmVxdWVzdC5SZXNwb25zZSA9IFJlc3BvbnNlO1xuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgYFJlcXVlc3RgIHdpdGggdGhlIGdpdmVuIGBtZXRob2RgIGFuZCBgdXJsYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIFJlcXVlc3QobWV0aG9kLCB1cmwpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLl9xdWVyeSA9IHRoaXMuX3F1ZXJ5IHx8IFtdO1xuICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcbiAgdGhpcy51cmwgPSB1cmw7XG4gIHRoaXMuaGVhZGVyID0ge307IC8vIHByZXNlcnZlcyBoZWFkZXIgbmFtZSBjYXNlXG4gIHRoaXMuX2hlYWRlciA9IHt9OyAvLyBjb2VyY2VzIGhlYWRlciBuYW1lcyB0byBsb3dlcmNhc2VcbiAgdGhpcy5vbignZW5kJywgZnVuY3Rpb24oKXtcbiAgICB2YXIgZXJyID0gbnVsbDtcbiAgICB2YXIgcmVzID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICByZXMgPSBuZXcgUmVzcG9uc2Uoc2VsZik7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBlcnIgPSBuZXcgRXJyb3IoJ1BhcnNlciBpcyB1bmFibGUgdG8gcGFyc2UgdGhlIHJlc3BvbnNlJyk7XG4gICAgICBlcnIucGFyc2UgPSB0cnVlO1xuICAgICAgZXJyLm9yaWdpbmFsID0gZTtcbiAgICAgIC8vIGlzc3VlICM2NzU6IHJldHVybiB0aGUgcmF3IHJlc3BvbnNlIGlmIHRoZSByZXNwb25zZSBwYXJzaW5nIGZhaWxzXG4gICAgICBlcnIucmF3UmVzcG9uc2UgPSBzZWxmLnhociAmJiBzZWxmLnhoci5yZXNwb25zZVRleHQgPyBzZWxmLnhoci5yZXNwb25zZVRleHQgOiBudWxsO1xuICAgICAgLy8gaXNzdWUgIzg3NjogcmV0dXJuIHRoZSBodHRwIHN0YXR1cyBjb2RlIGlmIHRoZSByZXNwb25zZSBwYXJzaW5nIGZhaWxzXG4gICAgICBlcnIuc3RhdHVzQ29kZSA9IHNlbGYueGhyICYmIHNlbGYueGhyLnN0YXR1cyA/IHNlbGYueGhyLnN0YXR1cyA6IG51bGw7XG4gICAgICByZXR1cm4gc2VsZi5jYWxsYmFjayhlcnIpO1xuICAgIH1cblxuICAgIHNlbGYuZW1pdCgncmVzcG9uc2UnLCByZXMpO1xuXG4gICAgdmFyIG5ld19lcnI7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChyZXMuc3RhdHVzIDwgMjAwIHx8IHJlcy5zdGF0dXMgPj0gMzAwKSB7XG4gICAgICAgIG5ld19lcnIgPSBuZXcgRXJyb3IocmVzLnN0YXR1c1RleHQgfHwgJ1Vuc3VjY2Vzc2Z1bCBIVFRQIHJlc3BvbnNlJyk7XG4gICAgICAgIG5ld19lcnIub3JpZ2luYWwgPSBlcnI7XG4gICAgICAgIG5ld19lcnIucmVzcG9uc2UgPSByZXM7XG4gICAgICAgIG5ld19lcnIuc3RhdHVzID0gcmVzLnN0YXR1cztcbiAgICAgIH1cbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIG5ld19lcnIgPSBlOyAvLyAjOTg1IHRvdWNoaW5nIHJlcyBtYXkgY2F1c2UgSU5WQUxJRF9TVEFURV9FUlIgb24gb2xkIEFuZHJvaWRcbiAgICB9XG5cbiAgICAvLyAjMTAwMCBkb24ndCBjYXRjaCBlcnJvcnMgZnJvbSB0aGUgY2FsbGJhY2sgdG8gYXZvaWQgZG91YmxlIGNhbGxpbmcgaXRcbiAgICBpZiAobmV3X2Vycikge1xuICAgICAgc2VsZi5jYWxsYmFjayhuZXdfZXJyLCByZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLmNhbGxiYWNrKG51bGwsIHJlcyk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBNaXhpbiBgRW1pdHRlcmAgYW5kIGByZXF1ZXN0QmFzZWAuXG4gKi9cblxuRW1pdHRlcihSZXF1ZXN0LnByb3RvdHlwZSk7XG5mb3IgKHZhciBrZXkgaW4gcmVxdWVzdEJhc2UpIHtcbiAgUmVxdWVzdC5wcm90b3R5cGVba2V5XSA9IHJlcXVlc3RCYXNlW2tleV07XG59XG5cbi8qKlxuICogU2V0IENvbnRlbnQtVHlwZSB0byBgdHlwZWAsIG1hcHBpbmcgdmFsdWVzIGZyb20gYHJlcXVlc3QudHlwZXNgLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgc3VwZXJhZ2VudC50eXBlcy54bWwgPSAnYXBwbGljYXRpb24veG1sJztcbiAqXG4gKiAgICAgIHJlcXVlc3QucG9zdCgnLycpXG4gKiAgICAgICAgLnR5cGUoJ3htbCcpXG4gKiAgICAgICAgLnNlbmQoeG1sc3RyaW5nKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqICAgICAgcmVxdWVzdC5wb3N0KCcvJylcbiAqICAgICAgICAudHlwZSgnYXBwbGljYXRpb24veG1sJylcbiAqICAgICAgICAuc2VuZCh4bWxzdHJpbmcpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS50eXBlID0gZnVuY3Rpb24odHlwZSl7XG4gIHRoaXMuc2V0KCdDb250ZW50LVR5cGUnLCByZXF1ZXN0LnR5cGVzW3R5cGVdIHx8IHR5cGUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IHJlc3BvbnNlVHlwZSB0byBgdmFsYC4gUHJlc2VudGx5IHZhbGlkIHJlc3BvbnNlVHlwZXMgYXJlICdibG9iJyBhbmRcbiAqICdhcnJheWJ1ZmZlcicuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICByZXEuZ2V0KCcvJylcbiAqICAgICAgICAucmVzcG9uc2VUeXBlKCdibG9iJylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUucmVzcG9uc2VUeXBlID0gZnVuY3Rpb24odmFsKXtcbiAgdGhpcy5fcmVzcG9uc2VUeXBlID0gdmFsO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IEFjY2VwdCB0byBgdHlwZWAsIG1hcHBpbmcgdmFsdWVzIGZyb20gYHJlcXVlc3QudHlwZXNgLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgc3VwZXJhZ2VudC50eXBlcy5qc29uID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICpcbiAqICAgICAgcmVxdWVzdC5nZXQoJy9hZ2VudCcpXG4gKiAgICAgICAgLmFjY2VwdCgnanNvbicpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogICAgICByZXF1ZXN0LmdldCgnL2FnZW50JylcbiAqICAgICAgICAuYWNjZXB0KCdhcHBsaWNhdGlvbi9qc29uJylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYWNjZXB0XG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24odHlwZSl7XG4gIHRoaXMuc2V0KCdBY2NlcHQnLCByZXF1ZXN0LnR5cGVzW3R5cGVdIHx8IHR5cGUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IEF1dGhvcml6YXRpb24gZmllbGQgdmFsdWUgd2l0aCBgdXNlcmAgYW5kIGBwYXNzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXNlclxuICogQHBhcmFtIHtTdHJpbmd9IHBhc3NcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHdpdGggJ3R5cGUnIHByb3BlcnR5ICdhdXRvJyBvciAnYmFzaWMnIChkZWZhdWx0ICdiYXNpYycpXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuYXV0aCA9IGZ1bmN0aW9uKHVzZXIsIHBhc3MsIG9wdGlvbnMpe1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0ge1xuICAgICAgdHlwZTogJ2Jhc2ljJ1xuICAgIH1cbiAgfVxuXG4gIHN3aXRjaCAob3B0aW9ucy50eXBlKSB7XG4gICAgY2FzZSAnYmFzaWMnOlxuICAgICAgdmFyIHN0ciA9IGJ0b2EodXNlciArICc6JyArIHBhc3MpO1xuICAgICAgdGhpcy5zZXQoJ0F1dGhvcml6YXRpb24nLCAnQmFzaWMgJyArIHN0cik7XG4gICAgYnJlYWs7XG5cbiAgICBjYXNlICdhdXRvJzpcbiAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VyO1xuICAgICAgdGhpcy5wYXNzd29yZCA9IHBhc3M7XG4gICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiogQWRkIHF1ZXJ5LXN0cmluZyBgdmFsYC5cbipcbiogRXhhbXBsZXM6XG4qXG4qICAgcmVxdWVzdC5nZXQoJy9zaG9lcycpXG4qICAgICAucXVlcnkoJ3NpemU9MTAnKVxuKiAgICAgLnF1ZXJ5KHsgY29sb3I6ICdibHVlJyB9KVxuKlxuKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IHZhbFxuKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiogQGFwaSBwdWJsaWNcbiovXG5cblJlcXVlc3QucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24odmFsKXtcbiAgaWYgKCdzdHJpbmcnICE9IHR5cGVvZiB2YWwpIHZhbCA9IHNlcmlhbGl6ZSh2YWwpO1xuICBpZiAodmFsKSB0aGlzLl9xdWVyeS5wdXNoKHZhbCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBRdWV1ZSB0aGUgZ2l2ZW4gYGZpbGVgIGFzIGFuIGF0dGFjaG1lbnQgdG8gdGhlIHNwZWNpZmllZCBgZmllbGRgLFxuICogd2l0aCBvcHRpb25hbCBgZmlsZW5hbWVgLlxuICpcbiAqIGBgYCBqc1xuICogcmVxdWVzdC5wb3N0KCcvdXBsb2FkJylcbiAqICAgLmF0dGFjaCgnY29udGVudCcsIG5ldyBCbG9iKFsnPGEgaWQ9XCJhXCI+PGIgaWQ9XCJiXCI+aGV5ITwvYj48L2E+J10sIHsgdHlwZTogXCJ0ZXh0L2h0bWxcIn0pKVxuICogICAuZW5kKGNhbGxiYWNrKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHBhcmFtIHtCbG9ifEZpbGV9IGZpbGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlbmFtZVxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uKGZpZWxkLCBmaWxlLCBmaWxlbmFtZSl7XG4gIHRoaXMuX2dldEZvcm1EYXRhKCkuYXBwZW5kKGZpZWxkLCBmaWxlLCBmaWxlbmFtZSB8fCBmaWxlLm5hbWUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cblJlcXVlc3QucHJvdG90eXBlLl9nZXRGb3JtRGF0YSA9IGZ1bmN0aW9uKCl7XG4gIGlmICghdGhpcy5fZm9ybURhdGEpIHtcbiAgICB0aGlzLl9mb3JtRGF0YSA9IG5ldyByb290LkZvcm1EYXRhKCk7XG4gIH1cbiAgcmV0dXJuIHRoaXMuX2Zvcm1EYXRhO1xufTtcblxuLyoqXG4gKiBJbnZva2UgdGhlIGNhbGxiYWNrIHdpdGggYGVycmAgYW5kIGByZXNgXG4gKiBhbmQgaGFuZGxlIGFyaXR5IGNoZWNrLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyclxuICogQHBhcmFtIHtSZXNwb25zZX0gcmVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5jYWxsYmFjayA9IGZ1bmN0aW9uKGVyciwgcmVzKXtcbiAgdmFyIGZuID0gdGhpcy5fY2FsbGJhY2s7XG4gIHRoaXMuY2xlYXJUaW1lb3V0KCk7XG4gIGZuKGVyciwgcmVzKTtcbn07XG5cbi8qKlxuICogSW52b2tlIGNhbGxiYWNrIHdpdGggeC1kb21haW4gZXJyb3IuXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuY3Jvc3NEb21haW5FcnJvciA9IGZ1bmN0aW9uKCl7XG4gIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1JlcXVlc3QgaGFzIGJlZW4gdGVybWluYXRlZFxcblBvc3NpYmxlIGNhdXNlczogdGhlIG5ldHdvcmsgaXMgb2ZmbGluZSwgT3JpZ2luIGlzIG5vdCBhbGxvd2VkIGJ5IEFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiwgdGhlIHBhZ2UgaXMgYmVpbmcgdW5sb2FkZWQsIGV0Yy4nKTtcbiAgZXJyLmNyb3NzRG9tYWluID0gdHJ1ZTtcblxuICBlcnIuc3RhdHVzID0gdGhpcy5zdGF0dXM7XG4gIGVyci5tZXRob2QgPSB0aGlzLm1ldGhvZDtcbiAgZXJyLnVybCA9IHRoaXMudXJsO1xuXG4gIHRoaXMuY2FsbGJhY2soZXJyKTtcbn07XG5cbi8qKlxuICogSW52b2tlIGNhbGxiYWNrIHdpdGggdGltZW91dCBlcnJvci5cbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5fdGltZW91dEVycm9yID0gZnVuY3Rpb24oKXtcbiAgdmFyIHRpbWVvdXQgPSB0aGlzLl90aW1lb3V0O1xuICB2YXIgZXJyID0gbmV3IEVycm9yKCd0aW1lb3V0IG9mICcgKyB0aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJyk7XG4gIGVyci50aW1lb3V0ID0gdGltZW91dDtcbiAgdGhpcy5jYWxsYmFjayhlcnIpO1xufTtcblxuLyoqXG4gKiBDb21wb3NlIHF1ZXJ5c3RyaW5nIHRvIGFwcGVuZCB0byByZXEudXJsXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuX2FwcGVuZFF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24oKXtcbiAgdmFyIHF1ZXJ5ID0gdGhpcy5fcXVlcnkuam9pbignJicpO1xuICBpZiAocXVlcnkpIHtcbiAgICB0aGlzLnVybCArPSB+dGhpcy51cmwuaW5kZXhPZignPycpXG4gICAgICA/ICcmJyArIHF1ZXJ5XG4gICAgICA6ICc/JyArIHF1ZXJ5O1xuICB9XG59O1xuXG4vKipcbiAqIEluaXRpYXRlIHJlcXVlc3QsIGludm9raW5nIGNhbGxiYWNrIGBmbihyZXMpYFxuICogd2l0aCBhbiBpbnN0YW5jZW9mIGBSZXNwb25zZWAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihmbil7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHhociA9IHRoaXMueGhyID0gcmVxdWVzdC5nZXRYSFIoKTtcbiAgdmFyIHRpbWVvdXQgPSB0aGlzLl90aW1lb3V0O1xuICB2YXIgZGF0YSA9IHRoaXMuX2Zvcm1EYXRhIHx8IHRoaXMuX2RhdGE7XG5cbiAgLy8gc3RvcmUgY2FsbGJhY2tcbiAgdGhpcy5fY2FsbGJhY2sgPSBmbiB8fCBub29wO1xuXG4gIC8vIHN0YXRlIGNoYW5nZVxuICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKXtcbiAgICBpZiAoNCAhPSB4aHIucmVhZHlTdGF0ZSkgcmV0dXJuO1xuXG4gICAgLy8gSW4gSUU5LCByZWFkcyB0byBhbnkgcHJvcGVydHkgKGUuZy4gc3RhdHVzKSBvZmYgb2YgYW4gYWJvcnRlZCBYSFIgd2lsbFxuICAgIC8vIHJlc3VsdCBpbiB0aGUgZXJyb3IgXCJDb3VsZCBub3QgY29tcGxldGUgdGhlIG9wZXJhdGlvbiBkdWUgdG8gZXJyb3IgYzAwYzAyM2ZcIlxuICAgIHZhciBzdGF0dXM7XG4gICAgdHJ5IHsgc3RhdHVzID0geGhyLnN0YXR1cyB9IGNhdGNoKGUpIHsgc3RhdHVzID0gMDsgfVxuXG4gICAgaWYgKDAgPT0gc3RhdHVzKSB7XG4gICAgICBpZiAoc2VsZi50aW1lZG91dCkgcmV0dXJuIHNlbGYuX3RpbWVvdXRFcnJvcigpO1xuICAgICAgaWYgKHNlbGYuX2Fib3J0ZWQpIHJldHVybjtcbiAgICAgIHJldHVybiBzZWxmLmNyb3NzRG9tYWluRXJyb3IoKTtcbiAgICB9XG4gICAgc2VsZi5lbWl0KCdlbmQnKTtcbiAgfTtcblxuICAvLyBwcm9ncmVzc1xuICB2YXIgaGFuZGxlUHJvZ3Jlc3MgPSBmdW5jdGlvbihlKXtcbiAgICBpZiAoZS50b3RhbCA+IDApIHtcbiAgICAgIGUucGVyY2VudCA9IGUubG9hZGVkIC8gZS50b3RhbCAqIDEwMDtcbiAgICB9XG4gICAgZS5kaXJlY3Rpb24gPSAnZG93bmxvYWQnO1xuICAgIHNlbGYuZW1pdCgncHJvZ3Jlc3MnLCBlKTtcbiAgfTtcbiAgaWYgKHRoaXMuaGFzTGlzdGVuZXJzKCdwcm9ncmVzcycpKSB7XG4gICAgeGhyLm9ucHJvZ3Jlc3MgPSBoYW5kbGVQcm9ncmVzcztcbiAgfVxuICB0cnkge1xuICAgIGlmICh4aHIudXBsb2FkICYmIHRoaXMuaGFzTGlzdGVuZXJzKCdwcm9ncmVzcycpKSB7XG4gICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBoYW5kbGVQcm9ncmVzcztcbiAgICB9XG4gIH0gY2F0Y2goZSkge1xuICAgIC8vIEFjY2Vzc2luZyB4aHIudXBsb2FkIGZhaWxzIGluIElFIGZyb20gYSB3ZWIgd29ya2VyLCBzbyBqdXN0IHByZXRlbmQgaXQgZG9lc24ndCBleGlzdC5cbiAgICAvLyBSZXBvcnRlZCBoZXJlOlxuICAgIC8vIGh0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrL2RldGFpbHMvODM3MjQ1L3htbGh0dHByZXF1ZXN0LXVwbG9hZC10aHJvd3MtaW52YWxpZC1hcmd1bWVudC13aGVuLXVzZWQtZnJvbS13ZWItd29ya2VyLWNvbnRleHRcbiAgfVxuXG4gIC8vIHRpbWVvdXRcbiAgaWYgKHRpbWVvdXQgJiYgIXRoaXMuX3RpbWVyKSB7XG4gICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICBzZWxmLnRpbWVkb3V0ID0gdHJ1ZTtcbiAgICAgIHNlbGYuYWJvcnQoKTtcbiAgICB9LCB0aW1lb3V0KTtcbiAgfVxuXG4gIC8vIHF1ZXJ5c3RyaW5nXG4gIHRoaXMuX2FwcGVuZFF1ZXJ5U3RyaW5nKCk7XG5cbiAgLy8gaW5pdGlhdGUgcmVxdWVzdFxuICBpZiAodGhpcy51c2VybmFtZSAmJiB0aGlzLnBhc3N3b3JkKSB7XG4gICAgeGhyLm9wZW4odGhpcy5tZXRob2QsIHRoaXMudXJsLCB0cnVlLCB0aGlzLnVzZXJuYW1lLCB0aGlzLnBhc3N3b3JkKTtcbiAgfSBlbHNlIHtcbiAgICB4aHIub3Blbih0aGlzLm1ldGhvZCwgdGhpcy51cmwsIHRydWUpO1xuICB9XG5cbiAgLy8gQ09SU1xuICBpZiAodGhpcy5fd2l0aENyZWRlbnRpYWxzKSB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcblxuICAvLyBib2R5XG4gIGlmICgnR0VUJyAhPSB0aGlzLm1ldGhvZCAmJiAnSEVBRCcgIT0gdGhpcy5tZXRob2QgJiYgJ3N0cmluZycgIT0gdHlwZW9mIGRhdGEgJiYgIXRoaXMuX2lzSG9zdChkYXRhKSkge1xuICAgIC8vIHNlcmlhbGl6ZSBzdHVmZlxuICAgIHZhciBjb250ZW50VHlwZSA9IHRoaXMuX2hlYWRlclsnY29udGVudC10eXBlJ107XG4gICAgdmFyIHNlcmlhbGl6ZSA9IHRoaXMuX3NlcmlhbGl6ZXIgfHwgcmVxdWVzdC5zZXJpYWxpemVbY29udGVudFR5cGUgPyBjb250ZW50VHlwZS5zcGxpdCgnOycpWzBdIDogJyddO1xuICAgIGlmICghc2VyaWFsaXplICYmIGlzSlNPTihjb250ZW50VHlwZSkpIHNlcmlhbGl6ZSA9IHJlcXVlc3Quc2VyaWFsaXplWydhcHBsaWNhdGlvbi9qc29uJ107XG4gICAgaWYgKHNlcmlhbGl6ZSkgZGF0YSA9IHNlcmlhbGl6ZShkYXRhKTtcbiAgfVxuXG4gIC8vIHNldCBoZWFkZXIgZmllbGRzXG4gIGZvciAodmFyIGZpZWxkIGluIHRoaXMuaGVhZGVyKSB7XG4gICAgaWYgKG51bGwgPT0gdGhpcy5oZWFkZXJbZmllbGRdKSBjb250aW51ZTtcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihmaWVsZCwgdGhpcy5oZWFkZXJbZmllbGRdKTtcbiAgfVxuXG4gIGlmICh0aGlzLl9yZXNwb25zZVR5cGUpIHtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gdGhpcy5fcmVzcG9uc2VUeXBlO1xuICB9XG5cbiAgLy8gc2VuZCBzdHVmZlxuICB0aGlzLmVtaXQoJ3JlcXVlc3QnLCB0aGlzKTtcblxuICAvLyBJRTExIHhoci5zZW5kKHVuZGVmaW5lZCkgc2VuZHMgJ3VuZGVmaW5lZCcgc3RyaW5nIGFzIFBPU1QgcGF5bG9hZCAoaW5zdGVhZCBvZiBub3RoaW5nKVxuICAvLyBXZSBuZWVkIG51bGwgaGVyZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICB4aHIuc2VuZCh0eXBlb2YgZGF0YSAhPT0gJ3VuZGVmaW5lZCcgPyBkYXRhIDogbnVsbCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuXG4vKipcbiAqIEV4cG9zZSBgUmVxdWVzdGAuXG4gKi9cblxucmVxdWVzdC5SZXF1ZXN0ID0gUmVxdWVzdDtcblxuLyoqXG4gKiBHRVQgYHVybGAgd2l0aCBvcHRpb25hbCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZHxGdW5jdGlvbn0gW2RhdGFdIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LmdldCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnR0VUJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEucXVlcnkoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG4vKipcbiAqIEhFQUQgYHVybGAgd2l0aCBvcHRpb25hbCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZHxGdW5jdGlvbn0gW2RhdGFdIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LmhlYWQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ0hFQUQnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5zZW5kKGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxuLyoqXG4gKiBPUFRJT05TIHF1ZXJ5IHRvIGB1cmxgIHdpdGggb3B0aW9uYWwgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR8RnVuY3Rpb259IFtkYXRhXSBvciBmblxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5vcHRpb25zID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdPUFRJT05TJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogREVMRVRFIGB1cmxgIHdpdGggb3B0aW9uYWwgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGRlbCh1cmwsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ0RFTEVURScsIHVybCk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG5yZXF1ZXN0WydkZWwnXSA9IGRlbDtcbnJlcXVlc3RbJ2RlbGV0ZSddID0gZGVsO1xuXG4vKipcbiAqIFBBVENIIGB1cmxgIHdpdGggb3B0aW9uYWwgYGRhdGFgIGFuZCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZH0gW2RhdGFdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LnBhdGNoID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdQQVRDSCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnNlbmQoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG4vKipcbiAqIFBPU1QgYHVybGAgd2l0aCBvcHRpb25hbCBgZGF0YWAgYW5kIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfSBbZGF0YV1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QucG9zdCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnUE9TVCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnNlbmQoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG4vKipcbiAqIFBVVCBgdXJsYCB3aXRoIG9wdGlvbmFsIGBkYXRhYCBhbmQgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR8RnVuY3Rpb259IFtkYXRhXSBvciBmblxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5wdXQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ1BVVCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnNlbmQoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuIiwiLyoqXG4gKiBDaGVjayBpZiBgb2JqYCBpcyBhbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICByZXR1cm4gbnVsbCAhPT0gb2JqICYmICdvYmplY3QnID09PSB0eXBlb2Ygb2JqO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzT2JqZWN0O1xuIiwiLyoqXG4gKiBNb2R1bGUgb2YgbWl4ZWQtaW4gZnVuY3Rpb25zIHNoYXJlZCBiZXR3ZWVuIG5vZGUgYW5kIGNsaWVudCBjb2RlXG4gKi9cbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXMtb2JqZWN0Jyk7XG5cbi8qKlxuICogQ2xlYXIgcHJldmlvdXMgdGltZW91dC5cbiAqXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5jbGVhclRpbWVvdXQgPSBmdW5jdGlvbiBfY2xlYXJUaW1lb3V0KCl7XG4gIHRoaXMuX3RpbWVvdXQgPSAwO1xuICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogT3ZlcnJpZGUgZGVmYXVsdCByZXNwb25zZSBib2R5IHBhcnNlclxuICpcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgdG8gY29udmVydCBpbmNvbWluZyBkYXRhIGludG8gcmVxdWVzdC5ib2R5XG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uIHBhcnNlKGZuKXtcbiAgdGhpcy5fcGFyc2VyID0gZm47XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBPdmVycmlkZSBkZWZhdWx0IHJlcXVlc3QgYm9keSBzZXJpYWxpemVyXG4gKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB0byBjb252ZXJ0IGRhdGEgc2V0IHZpYSAuc2VuZCBvciAuYXR0YWNoIGludG8gcGF5bG9hZCB0byBzZW5kXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5zZXJpYWxpemUgPSBmdW5jdGlvbiBzZXJpYWxpemUoZm4pe1xuICB0aGlzLl9zZXJpYWxpemVyID0gZm47XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgdGltZW91dCB0byBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMudGltZW91dCA9IGZ1bmN0aW9uIHRpbWVvdXQobXMpe1xuICB0aGlzLl90aW1lb3V0ID0gbXM7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBQcm9taXNlIHN1cHBvcnRcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RcbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKi9cblxuZXhwb3J0cy50aGVuID0gZnVuY3Rpb24gdGhlbihyZXNvbHZlLCByZWplY3QpIHtcbiAgaWYgKCF0aGlzLl9mdWxsZmlsbGVkUHJvbWlzZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLl9mdWxsZmlsbGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKGlubmVyUmVzb2x2ZSwgaW5uZXJSZWplY3Qpe1xuICAgICAgc2VsZi5lbmQoZnVuY3Rpb24oZXJyLCByZXMpe1xuICAgICAgICBpZiAoZXJyKSBpbm5lclJlamVjdChlcnIpOyBlbHNlIGlubmVyUmVzb2x2ZShyZXMpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHRoaXMuX2Z1bGxmaWxsZWRQcm9taXNlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbn1cblxuLyoqXG4gKiBBbGxvdyBmb3IgZXh0ZW5zaW9uXG4gKi9cblxuZXhwb3J0cy51c2UgPSBmdW5jdGlvbiB1c2UoZm4pIHtcbiAgZm4odGhpcyk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5cbi8qKlxuICogR2V0IHJlcXVlc3QgaGVhZGVyIGBmaWVsZGAuXG4gKiBDYXNlLWluc2Vuc2l0aXZlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLmdldCA9IGZ1bmN0aW9uKGZpZWxkKXtcbiAgcmV0dXJuIHRoaXMuX2hlYWRlcltmaWVsZC50b0xvd2VyQ2FzZSgpXTtcbn07XG5cbi8qKlxuICogR2V0IGNhc2UtaW5zZW5zaXRpdmUgaGVhZGVyIGBmaWVsZGAgdmFsdWUuXG4gKiBUaGlzIGlzIGEgZGVwcmVjYXRlZCBpbnRlcm5hbCBBUEkuIFVzZSBgLmdldChmaWVsZClgIGluc3RlYWQuXG4gKlxuICogKGdldEhlYWRlciBpcyBubyBsb25nZXIgdXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBzdXBlcmFnZW50IGNvZGUgYmFzZSlcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICogQGRlcHJlY2F0ZWRcbiAqL1xuXG5leHBvcnRzLmdldEhlYWRlciA9IGV4cG9ydHMuZ2V0O1xuXG4vKipcbiAqIFNldCBoZWFkZXIgYGZpZWxkYCB0byBgdmFsYCwgb3IgbXVsdGlwbGUgZmllbGRzIHdpdGggb25lIG9iamVjdC5cbiAqIENhc2UtaW5zZW5zaXRpdmUuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICByZXEuZ2V0KCcvJylcbiAqICAgICAgICAuc2V0KCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpXG4gKiAgICAgICAgLnNldCgnWC1BUEktS2V5JywgJ2Zvb2JhcicpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogICAgICByZXEuZ2V0KCcvJylcbiAqICAgICAgICAuc2V0KHsgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsICdYLUFQSS1LZXknOiAnZm9vYmFyJyB9KVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZmllbGRcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnNldCA9IGZ1bmN0aW9uKGZpZWxkLCB2YWwpe1xuICBpZiAoaXNPYmplY3QoZmllbGQpKSB7XG4gICAgZm9yICh2YXIga2V5IGluIGZpZWxkKSB7XG4gICAgICB0aGlzLnNldChrZXksIGZpZWxkW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB0aGlzLl9oZWFkZXJbZmllbGQudG9Mb3dlckNhc2UoKV0gPSB2YWw7XG4gIHRoaXMuaGVhZGVyW2ZpZWxkXSA9IHZhbDtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBoZWFkZXIgYGZpZWxkYC5cbiAqIENhc2UtaW5zZW5zaXRpdmUuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgIHJlcS5nZXQoJy8nKVxuICogICAgICAgIC51bnNldCgnVXNlci1BZ2VudCcpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKi9cbmV4cG9ydHMudW5zZXQgPSBmdW5jdGlvbihmaWVsZCl7XG4gIGRlbGV0ZSB0aGlzLl9oZWFkZXJbZmllbGQudG9Mb3dlckNhc2UoKV07XG4gIGRlbGV0ZSB0aGlzLmhlYWRlcltmaWVsZF07XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBXcml0ZSB0aGUgZmllbGQgYG5hbWVgIGFuZCBgdmFsYCBmb3IgXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCJcbiAqIHJlcXVlc3QgYm9kaWVzLlxuICpcbiAqIGBgYCBqc1xuICogcmVxdWVzdC5wb3N0KCcvdXBsb2FkJylcbiAqICAgLmZpZWxkKCdmb28nLCAnYmFyJylcbiAqICAgLmVuZChjYWxsYmFjayk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtTdHJpbmd8QmxvYnxGaWxlfEJ1ZmZlcnxmcy5SZWFkU3RyZWFtfSB2YWxcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuZXhwb3J0cy5maWVsZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbCkge1xuICB0aGlzLl9nZXRGb3JtRGF0YSgpLmFwcGVuZChuYW1lLCB2YWwpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQWJvcnQgdGhlIHJlcXVlc3QsIGFuZCBjbGVhciBwb3RlbnRpYWwgdGltZW91dC5cbiAqXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuZXhwb3J0cy5hYm9ydCA9IGZ1bmN0aW9uKCl7XG4gIGlmICh0aGlzLl9hYm9ydGVkKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdGhpcy5fYWJvcnRlZCA9IHRydWU7XG4gIHRoaXMueGhyICYmIHRoaXMueGhyLmFib3J0KCk7IC8vIGJyb3dzZXJcbiAgdGhpcy5yZXEgJiYgdGhpcy5yZXEuYWJvcnQoKTsgLy8gbm9kZVxuICB0aGlzLmNsZWFyVGltZW91dCgpO1xuICB0aGlzLmVtaXQoJ2Fib3J0Jyk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBFbmFibGUgdHJhbnNtaXNzaW9uIG9mIGNvb2tpZXMgd2l0aCB4LWRvbWFpbiByZXF1ZXN0cy5cbiAqXG4gKiBOb3RlIHRoYXQgZm9yIHRoaXMgdG8gd29yayB0aGUgb3JpZ2luIG11c3Qgbm90IGJlXG4gKiB1c2luZyBcIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpblwiIHdpdGggYSB3aWxkY2FyZCxcbiAqIGFuZCBhbHNvIG11c3Qgc2V0IFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHNcIlxuICogdG8gXCJ0cnVlXCIuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLndpdGhDcmVkZW50aWFscyA9IGZ1bmN0aW9uKCl7XG4gIC8vIFRoaXMgaXMgYnJvd3Nlci1vbmx5IGZ1bmN0aW9uYWxpdHkuIE5vZGUgc2lkZSBpcyBuby1vcC5cbiAgdGhpcy5fd2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgbWF4IHJlZGlyZWN0cyB0byBgbmAuIERvZXMgbm90aW5nIGluIGJyb3dzZXIgWEhSIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5yZWRpcmVjdHMgPSBmdW5jdGlvbihuKXtcbiAgdGhpcy5fbWF4UmVkaXJlY3RzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIENvbnZlcnQgdG8gYSBwbGFpbiBqYXZhc2NyaXB0IG9iamVjdCAobm90IEpTT04gc3RyaW5nKSBvZiBzY2FsYXIgcHJvcGVydGllcy5cbiAqIE5vdGUgYXMgdGhpcyBtZXRob2QgaXMgZGVzaWduZWQgdG8gcmV0dXJuIGEgdXNlZnVsIG5vbi10aGlzIHZhbHVlLFxuICogaXQgY2Fubm90IGJlIGNoYWluZWQuXG4gKlxuICogQHJldHVybiB7T2JqZWN0fSBkZXNjcmliaW5nIG1ldGhvZCwgdXJsLCBhbmQgZGF0YSBvZiB0aGlzIHJlcXVlc3RcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy50b0pTT04gPSBmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgIG1ldGhvZDogdGhpcy5tZXRob2QsXG4gICAgdXJsOiB0aGlzLnVybCxcbiAgICBkYXRhOiB0aGlzLl9kYXRhLFxuICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlclxuICB9O1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBgb2JqYCBpcyBhIGhvc3Qgb2JqZWN0LFxuICogd2UgZG9uJ3Qgd2FudCB0byBzZXJpYWxpemUgdGhlc2UgOilcbiAqXG4gKiBUT0RPOiBmdXR1cmUgcHJvb2YsIG1vdmUgdG8gY29tcG9lbnQgbGFuZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5leHBvcnRzLl9pc0hvc3QgPSBmdW5jdGlvbiBfaXNIb3N0KG9iaikge1xuICB2YXIgc3RyID0ge30udG9TdHJpbmcuY2FsbChvYmopO1xuXG4gIHN3aXRjaCAoc3RyKSB7XG4gICAgY2FzZSAnW29iamVjdCBGaWxlXSc6XG4gICAgY2FzZSAnW29iamVjdCBCbG9iXSc6XG4gICAgY2FzZSAnW29iamVjdCBGb3JtRGF0YV0nOlxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIFNlbmQgYGRhdGFgIGFzIHRoZSByZXF1ZXN0IGJvZHksIGRlZmF1bHRpbmcgdGhlIGAudHlwZSgpYCB0byBcImpzb25cIiB3aGVuXG4gKiBhbiBvYmplY3QgaXMgZ2l2ZW4uXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICAgLy8gbWFudWFsIGpzb25cbiAqICAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgICAudHlwZSgnanNvbicpXG4gKiAgICAgICAgIC5zZW5kKCd7XCJuYW1lXCI6XCJ0alwifScpXG4gKiAgICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogICAgICAgLy8gYXV0byBqc29uXG4gKiAgICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAqICAgICAgICAgLnNlbmQoeyBuYW1lOiAndGonIH0pXG4gKiAgICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogICAgICAgLy8gbWFudWFsIHgtd3d3LWZvcm0tdXJsZW5jb2RlZFxuICogICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgIC50eXBlKCdmb3JtJylcbiAqICAgICAgICAgLnNlbmQoJ25hbWU9dGonKVxuICogICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqICAgICAgIC8vIGF1dG8geC13d3ctZm9ybS11cmxlbmNvZGVkXG4gKiAgICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAqICAgICAgICAgLnR5cGUoJ2Zvcm0nKVxuICogICAgICAgICAuc2VuZCh7IG5hbWU6ICd0aicgfSlcbiAqICAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiAgICAgICAvLyBkZWZhdWx0cyB0byB4LXd3dy1mb3JtLXVybGVuY29kZWRcbiAqICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgLnNlbmQoJ25hbWU9dG9iaScpXG4gKiAgICAgICAgLnNlbmQoJ3NwZWNpZXM9ZmVycmV0JylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZGF0YVxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuc2VuZCA9IGZ1bmN0aW9uKGRhdGEpe1xuICB2YXIgb2JqID0gaXNPYmplY3QoZGF0YSk7XG4gIHZhciB0eXBlID0gdGhpcy5faGVhZGVyWydjb250ZW50LXR5cGUnXTtcblxuICAvLyBtZXJnZVxuICBpZiAob2JqICYmIGlzT2JqZWN0KHRoaXMuX2RhdGEpKSB7XG4gICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgIHRoaXMuX2RhdGFba2V5XSA9IGRhdGFba2V5XTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIGRhdGEpIHtcbiAgICAvLyBkZWZhdWx0IHRvIHgtd3d3LWZvcm0tdXJsZW5jb2RlZFxuICAgIGlmICghdHlwZSkgdGhpcy50eXBlKCdmb3JtJyk7XG4gICAgdHlwZSA9IHRoaXMuX2hlYWRlclsnY29udGVudC10eXBlJ107XG4gICAgaWYgKCdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnID09IHR5cGUpIHtcbiAgICAgIHRoaXMuX2RhdGEgPSB0aGlzLl9kYXRhXG4gICAgICAgID8gdGhpcy5fZGF0YSArICcmJyArIGRhdGFcbiAgICAgICAgOiBkYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9kYXRhID0gKHRoaXMuX2RhdGEgfHwgJycpICsgZGF0YTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gIH1cblxuICBpZiAoIW9iaiB8fCB0aGlzLl9pc0hvc3QoZGF0YSkpIHJldHVybiB0aGlzO1xuXG4gIC8vIGRlZmF1bHQgdG8ganNvblxuICBpZiAoIXR5cGUpIHRoaXMudHlwZSgnanNvbicpO1xuICByZXR1cm4gdGhpcztcbn07XG4iLCIvLyBUaGUgbm9kZSBhbmQgYnJvd3NlciBtb2R1bGVzIGV4cG9zZSB2ZXJzaW9ucyBvZiB0aGlzIHdpdGggdGhlXG4vLyBhcHByb3ByaWF0ZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBib3VuZCBhcyBmaXJzdCBhcmd1bWVudFxuLyoqXG4gKiBJc3N1ZSBhIHJlcXVlc3Q6XG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgcmVxdWVzdCgnR0VUJywgJy91c2VycycpLmVuZChjYWxsYmFjaylcbiAqICAgIHJlcXVlc3QoJy91c2VycycpLmVuZChjYWxsYmFjaylcbiAqICAgIHJlcXVlc3QoJy91c2VycycsIGNhbGxiYWNrKVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB1cmwgb3IgY2FsbGJhY2tcbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIHJlcXVlc3QoUmVxdWVzdENvbnN0cnVjdG9yLCBtZXRob2QsIHVybCkge1xuICAvLyBjYWxsYmFja1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdXJsKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0Q29uc3RydWN0b3IoJ0dFVCcsIG1ldGhvZCkuZW5kKHVybCk7XG4gIH1cblxuICAvLyB1cmwgZmlyc3RcbiAgaWYgKDIgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIHJldHVybiBuZXcgUmVxdWVzdENvbnN0cnVjdG9yKCdHRVQnLCBtZXRob2QpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBSZXF1ZXN0Q29uc3RydWN0b3IobWV0aG9kLCB1cmwpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVlc3Q7XG4iLCJtb2R1bGUuZXhwb3J0cz17XG4gIFwibmFtZVwiOiBcInZoeC1qc1wiLFxuICBcInZlcnNpb25cIjogXCIwLjAuMVwiLFxuICBcImRlc2NyaXB0aW9uXCI6IFwiVkhYIGNsaWVudCBzaWRlIEFQSSBsaWJyYXJ5XCIsXG4gIFwibWFpblwiOiBcInZoeC5qc1wiLFxuICBcInNjcmlwdHNcIjoge1xuICAgIFwidGVzdFwiOiBcImVjaG8gXFxcIkVycm9yOiBubyB0ZXN0IHNwZWNpZmllZFxcXCIgJiYgZXhpdCAxXCJcbiAgfSxcbiAgXCJhdXRob3JcIjogXCJEYXZpZCBHb256YWxlelwiLFxuICBcImxpY2Vuc2VcIjogXCJJU0NcIixcbiAgXCJkZXZEZXBlbmRlbmNpZXNcIjoge1xuICAgIFwiYmFiZWwtY2xpXCI6IFwiXjYuMTEuNFwiLFxuICAgIFwiYmFiZWwtcHJlc2V0LWVzMjAxNVwiOiBcIl42LjkuMFwiLFxuICAgIFwiYmFiZWxpZnlcIjogXCJeNy4zLjBcIixcbiAgICBcImJyb3dzZXJpZnlcIjogXCJeMTMuMS4wXCIsXG4gICAgXCJndWxwXCI6IFwiXjMuOS4xXCIsXG4gICAgXCJndWxwLWJhYmVsXCI6IFwiXjYuMS4yXCIsXG4gICAgXCJndWxwLWJyb3dzZXJpZnlcIjogXCJeMC41LjFcIixcbiAgICBcImd1bHAtbGl2ZXJlbG9hZFwiOiBcIl4zLjguMVwiLFxuICAgIFwiZ3VscC1zb3VyY2VtYXBzXCI6IFwiXjEuNi4wXCIsXG4gICAgXCJndWxwLXVnbGlmeVwiOiBcIl4xLjUuNFwiLFxuICAgIFwic3VwZXJhZ2VudFwiOiBcIl4yLjEuMFwiLFxuICAgIFwidmlueWwtYnVmZmVyXCI6IFwiXjEuMC4wXCIsXG4gICAgXCJ2aW55bC1zb3VyY2Utc3RyZWFtXCI6IFwiXjEuMS4wXCJcbiAgfVxufVxuIl19\n"],"sourceRoot":"/source/"}