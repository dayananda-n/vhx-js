{"version":3,"sources":["vhx.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_VHX_DEFAULTS","HOST","PROTOCOL","API_VERSION","version","TIMEOUT","TOKEN_HOST","../package.json","2","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","Paginate","resource","args","this","_this","response","body","options","page","method","last","Math","ceil","total","count","map","callback","goToPage","num","merge","_embedded","object","concat","value","parseInt","3","_typeof","Symbol","iterator","obj","constructor","request","paginate","Resource","api","path","methods","isToken","_api","init","forEach","item","getMethod","params","http_method","client_method","match","parsed_params","isCallbackFunction","url","parseUrl","scope","makeRequest","collection","product","protocol","host","isObject","Date","token_expiration","type","timeout","qs","toString","keys","auth","headers","Authorization","getParams","read_only","undefined","token_host","token","ajaxRequest","withCredentials","set","query","end","err","errorHandler","status","statusCode","successHandler","get","error","JSON","parse","error_types","400","401","404","408","500","apply","./paginate","superagent","4","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","Browse","_Resource","getPrototypeOf","../resource","5","Collection","6","Customer","7","Product","8","Video","9","_interopRequireDefault","__esModule","default","_defaults","_defaults2","_collections","_collections2","_videos","_videos2","_customers","_customers2","_products","_products2","_browse","_browse2","_superagent","resources","collections","videos","products","customers","browse","vhx","opts","setToken","setApi","prepareResources","arguments","btoa","TOKEN_EXPIRES_IN","name","toLowerCase","substring","window","./defaults","./resources/browse","./resources/collections","./resources/customers","./resources/products","./resources/videos","10","Emitter","mixin","on","addEventListener","event","fn","_callbacks","push","once","off","removeListener","removeAllListeners","removeEventListener","callbacks","cb","splice","emit","slice","len","listeners","hasListeners","11","noop","serialize","pairs","pushEncodedKeyValuePair","join","val","Array","isArray","v","subkey","encodeURIComponent","parseString","str","pair","pos","split","indexOf","decodeURIComponent","parseHeader","index","line","field","lines","fields","pop","trim","isJSON","mime","test","shift","reduce","parts","Response","req","xhr","text","responseType","responseText","statusText","_setStatusProperties","header","getAllResponseHeaders","getResponseHeader","_setHeaderProperties","_parseBody","Request","_query","_header","res","original","rawResponse","new_err","del","root","console","warn","requestBase","bind","getXHR","XMLHttpRequest","location","ActiveXObject","replace","serializeObject","types","html","json","xml","urlencoded","form","form-data","application/x-www-form-urlencoded","application/json","stringify","ct","statusType","info","ok","clientError","serverError","toError","accepted","noContent","badRequest","unauthorized","notAcceptable","notFound","forbidden","msg","_responseType","accept","user","pass","username","password","attach","file","filename","_getFormData","append","_formData","FormData","_callback","clearTimeout","crossDomainError","crossDomain","_timeoutError","_timeout","_appendQueryString","data","_data","onreadystatechange","readyState","timedout","_aborted","handleProgress","percent","loaded","direction","onprogress","upload","_timer","setTimeout","abort","open","_withCredentials","_isHost","contentType","_serializer","setRequestHeader","send","head","patch","post","put","./is-object","./request","./request-base","emitter","12","13","_parser","ms","then","resolve","reject","_fullfilledPromise","Promise","innerResolve","innerReject","use","getHeader","unset","redirects","_maxRedirects","toJSON","14","RequestConstructor","15","description","main","author","homepage","contributors","license","repository","bugs:","devDependencies","babel-cli","babel-preset-es2015","babelify","browserify","gulp","gulp-babel","gulp-browserify","gulp-livereload","gulp-sourcemaps","gulp-uglify","vinyl-buffer","vinyl-source-stream"],"mappings":"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","file":"vhx.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _VHX_DEFAULTS = {\n  HOST: 'api.vhx.tv',\n  PROTOCOL: 'https://',\n  API_VERSION: require('../package.json').version,\n  TIMEOUT: '30000',\n  TOKEN_HOST: 'vhx.tv'\n};\n\nmodule.exports = _VHX_DEFAULTS;\n\n},{\"../package.json\":15}],2:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Paginate = function () {\n  function Paginate(resource, args) {\n    _classCallCheck(this, Paginate);\n\n    var _this = this;\n\n    _this.resource = resource;\n    _this.response = args.body;\n    _this.options = args.options;\n    _this.page = _this.options.page ? _this.options.page : 1;\n    _this.method = args.method;\n    _this.last = Math.ceil(args.body.total / (args.body.count * _this.page));\n\n    ['nextPage', 'previousPage', 'firstPage', 'lastPage'].map(function (key) {\n      _this.response[key] = function (callback) {\n        _this[key](_this, callback);\n      };\n    });\n\n    _this.response.goToPage = function (num, callback) {\n      _this.goToPage(_this, num, callback);\n    };\n\n    _this.response.merge = function (_this) {\n      _this._embedded[_this.object] = this._embedded[_this.object].concat(_this._embedded[_this.object]);\n      _this.count = this.count + _this.count;\n\n      return _this;\n    };\n  }\n\n  _createClass(Paginate, [{\n    key: 'get',\n    value: function get() {\n      var _this = this;\n\n      return _this.response;\n    }\n  }, {\n    key: 'nextPage',\n    value: function nextPage(_this, callback) {\n      _this.options.page = _this.page + 1;\n\n      if (_this.options.page > _this.last) {\n        throw 'No more pages to request';\n      }\n\n      _this.resource[_this.method](_this.options, callback);\n    }\n  }, {\n    key: 'previousPage',\n    value: function previousPage(_this, callback) {\n      if (_this.page === 1) {\n        throw 'No previous pages to request';\n      }\n\n      _this.options.page = _this.page - 1;\n      _this.resource[_this.method](_this.options, callback);\n    }\n  }, {\n    key: 'firstPage',\n    value: function firstPage(_this, callback) {\n      _this.options.page = 1;\n      _this.resource[_this.method](_this.options, callback);\n    }\n  }, {\n    key: 'lastPage',\n    value: function lastPage(_this, callback) {\n      _this.options.page = _this.last;\n      _this.resource[_this.method](_this.options, callback);\n    }\n  }, {\n    key: 'goToPage',\n    value: function goToPage(_this, num, callback) {\n      num = parseInt(num, 10);\n\n      if (num > 0 && num <= _this.last) {\n        _this.options.page = num;\n        return _this.resource[_this.method](_this.options, callback);\n      }\n\n      throw 'You must pass a valid page number';\n    }\n  }]);\n\n  return Paginate;\n}();\n\nmodule.exports = Paginate;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar request = require('superagent');\nvar paginate = require('./paginate');\n\nvar Resource = function () {\n  function Resource(api, path, methods, isToken) {\n    _classCallCheck(this, Resource);\n\n    var _this = this;\n    _this._api = api;\n    _this.methods = methods;\n    _this.path = path;\n\n    _this.init();\n  }\n\n  _createClass(Resource, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      _this.methods.forEach(function (item) {\n        var method = _this.getMethod(item);\n        var resource_type = _this.path || 'id';\n        var params = {\n          http_method: 'get', // superagent reads 'get' not 'GET'\n          client_method: method\n        };\n\n        if (method.match(/retrieve|items|files/i)) {\n          _this[method] = function (parsed_params, callback) {\n            if (_this.isCallbackFunction(callback)) {\n              params.callback = callback;\n            }\n\n            params.options = parsed_params;\n            params.url = this.parseUrl(parsed_params);\n            params.scope = item.scope ? item.scope : null;\n\n            _this.makeRequest(params);\n          };\n        } else {\n          _this[method] = function (options, callback) {\n            params.options = options;\n            params.url = this.parseUrl(options);\n            params.callback = callback;\n\n            _this.makeRequest(params);\n          };\n        }\n      });\n    }\n  }, {\n    key: 'parseUrl',\n    value: function parseUrl(params) {\n      if (params && params.collection) {\n        return params.collection;\n      }\n\n      if (params && params.product) {\n        if (!parseInt(params.product, 10)) {\n          return params.product;\n        }\n      }\n\n      if (params && this.path.match(/videos/)) {\n        return params;\n      }\n\n      if (params && this.path.match(/customers/)) {\n        return params;\n      }\n\n      return '' + this._api.protocol + this._api.host + '/' + this.path;\n    }\n  }, {\n    key: 'getMethod',\n    value: function getMethod(params) {\n      var _this = this;\n\n      if (_this.isObject(params) && params.method) {\n        return params.method;\n      } else {\n        return params;\n      }\n    }\n  }, {\n    key: 'needsToken',\n    value: function needsToken() {\n      return new Date() > this._api.token_expiration;\n    }\n  }, {\n    key: 'getParams',\n    value: function getParams(client_method, url, options, scope, type) {\n      var _this = this;\n      var params = {};\n\n      params.timeout = _this._api.timeout;\n      params.qs = options || null;\n      params.method = client_method;\n\n      if (Object.prototype.toString.call(url) === '[object Object]') {\n        params.url = url[Object.keys(url)];\n      } else {\n        params.url = url;\n      }\n\n      if (params.url.match(/videos|customers/) && !params.url.match(/watching|watchlist/)) {\n        params.qs = '';\n      }\n\n      if (client_method === 'all') {\n        params.qs = '';\n      }\n\n      if (client_method === 'all' && options && parseInt(options.product, 10)) {\n        params.qs = options;\n      }\n\n      if (_this._api.auth) {\n        params.headers = {\n          'Authorization': _this._api.auth\n        };\n      }\n\n      return params;\n    }\n  }, {\n    key: 'makeRequest',\n    value: function makeRequest(args) {\n      var params = this.getParams(args.client_method, args.url, args.options, args.scope, args.read_only);\n\n      if (this.isCallbackFunction(args.options)) {\n        args.callback = args.options;\n      }\n\n      if (_typeof(this._api.token_host) !== undefined) {\n        params.headers = {\n          'Authorization': 'Bearer ' + this._api.token\n        };\n\n        this.ajaxRequest(args, params);\n      } else {\n        this.ajaxRequest(args, params);\n      }\n    }\n  }, {\n    key: 'ajaxRequest',\n    value: function ajaxRequest(args, params) {\n      var _this = this;\n\n      request[args.http_method](params.url).withCredentials().set(params.headers || {}).set('Content-Type', 'application/json').query(params.qs).end(function (err, response) {\n        if (err && err.code === 'ETIMEDOUT') {\n          _this.errorHandler({\n            status: 408,\n            body: '{\"message\": \"The request timed out.\",\"documentation_url\": \"http://dev.vhx.tv/docs/api\"}',\n            callback: args.callback || ''\n          });\n        }\n\n        if (!err && response.statusCode >= 200 && response.statusCode < 300) {\n          _this.successHandler({\n            body: response.body || null,\n            callback: args.callback,\n            options: args.options,\n            object: _this.path,\n            method: args.client_method\n          });\n        } else {\n          _this.errorHandler({\n            status: 408,\n            body: '{\"message\": \"The request timed out.\",\"documentation_url\": \"http://dev.vhx.tv/docs/api\"}',\n            callback: args.callback || ''\n          });\n        }\n      });\n    }\n  }, {\n    key: 'successHandler',\n    value: function successHandler(args) {\n      var response = args.body;\n\n      if (args.body.count && args.body.count < args.body.total) {\n        response = new paginate(this, args).get();\n      }\n\n      response.object = args.object;\n\n      if (args.callback) {\n        args.callback(false, response);\n      }\n    }\n  }, {\n    key: 'errorHandler',\n    value: function errorHandler(args) {\n      var error = JSON.parse(args.body),\n          error_types = {\n        400: 'VHXInvalidRequestError',\n        401: 'VHXAuthenticationError',\n        404: 'VHXResourceNotFound',\n        408: 'VHXConnectionError',\n        500: 'VHXAPIError'\n      };\n\n      error.status = args.status;\n      error.type = error_types[error.status];\n\n      if (args.callback) {\n        args.callback(error, null);\n      }\n    }\n  }, {\n    key: 'isCallbackFunction',\n    value: function isCallbackFunction(obj) {\n      return !!(obj && obj.constructor && obj.call && obj.apply);\n    }\n  }, {\n    key: 'isObject',\n    value: function isObject(obj) {\n      var type = typeof obj === 'undefined' ? 'undefined' : _typeof(obj);\n      return type === 'function' || type === 'object' && !!obj;\n    }\n  }]);\n\n  return Resource;\n}();\n\n;\n\nmodule.exports = Resource;\n\n},{\"./paginate\":2,\"superagent\":11}],4:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Browse = function (_Resource) {\n  _inherits(Browse, _Resource);\n\n  function Browse(api) {\n    _classCallCheck(this, Browse);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Browse).call(this, api, 'browse', ['all', 'list']));\n  }\n\n  return Browse;\n}(Resource);\n\n;\n\nmodule.exports = Browse;\n\n},{\"../resource\":3}],5:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Collection = function (_Resource) {\n  _inherits(Collection, _Resource);\n\n  function Collection(api) {\n    _classCallCheck(this, Collection);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Collection).call(this, api, 'collections', ['all', 'list', 'items']));\n  }\n\n  return Collection;\n}(Resource);\n\n;\n\nmodule.exports = Collection;\n\n},{\"../resource\":3}],6:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Customer = function (_Resource) {\n  _inherits(Customer, _Resource);\n\n  function Customer(api) {\n    _classCallCheck(this, Customer);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Customer).call(this, api, 'customers', ['retrieve', 'all']));\n  }\n\n  return Customer;\n}(Resource);\n\n;\n\nmodule.exports = Customer;\n\n},{\"../resource\":3}],7:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Product = function (_Resource) {\n  _inherits(Product, _Resource);\n\n  function Product(api) {\n    _classCallCheck(this, Product);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Product).call(this, api, 'products', ['retrieve', 'all']));\n  }\n\n  return Product;\n}(Resource);\n\n;\n\nmodule.exports = Product;\n\n},{\"../resource\":3}],8:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Video = function (_Resource) {\n  _inherits(Video, _Resource);\n\n  function Video(api) {\n    _classCallCheck(this, Video);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Video).call(this, api, 'videos', ['all', 'retrieve', 'files']));\n  }\n\n  return Video;\n}(Resource);\n\n;\n\nmodule.exports = Video;\n\n},{\"../resource\":3}],9:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nvar _collections = require('./resources/collections');\n\nvar _collections2 = _interopRequireDefault(_collections);\n\nvar _videos = require('./resources/videos');\n\nvar _videos2 = _interopRequireDefault(_videos);\n\nvar _customers = require('./resources/customers');\n\nvar _customers2 = _interopRequireDefault(_customers);\n\nvar _products = require('./resources/products');\n\nvar _products2 = _interopRequireDefault(_products);\n\nvar _browse = require('./resources/browse');\n\nvar _browse2 = _interopRequireDefault(_browse);\n\nvar _superagent = require('superagent');\n\nvar _superagent2 = _interopRequireDefault(_superagent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar resources = {\n  collections: _collections2.default,\n  videos: _videos2.default,\n  products: _products2.default,\n  customers: _customers2.default,\n  browse: _browse2.default\n};\n\nvar vhx = function () {\n  function vhx(key, opts) {\n    _classCallCheck(this, vhx);\n\n    var _this = this;\n\n    if (!(_this instanceof vhx)) {\n      return new vhx(key);\n    }\n\n    _this.api = opts.token_host ? _this.setToken(key, opts) : _this.setApi(key, opts);\n\n    _this.prepareResources();\n  }\n\n  _createClass(vhx, [{\n    key: 'setApi',\n    value: function setApi(key) {\n      var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      return {\n        auth: 'Basic ' + btoa(key),\n        host: opts.host || _defaults2.default.HOST,\n        protocol: opts.protocol || _defaults2.default.PROTOCOL,\n        timeout: _defaults2.default.TIMEOUT,\n        token_expiration: null\n      };\n    }\n  }, {\n    key: 'setToken',\n    value: function setToken(key) {\n      var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      return {\n        token: key,\n        host: opts.host || _defaults2.default.HOST,\n        protocol: opts.protocol || _defaults2.default.PROTOCOL,\n        timeout: _defaults2.default.TIMEOUT,\n        token_host: opts.token_host || _defaults2.default.TOKEN_HOST,\n        token_expiration: TOKEN_EXPIRES_IN\n      };\n    }\n  }, {\n    key: 'prepareResources',\n    value: function prepareResources() {\n      var _this = this;\n\n      for (var name in resources) {\n        _this[name[0].toLowerCase() + name.substring(1)] = new resources[name](_this.api);\n      }\n    }\n  }]);\n\n  return vhx;\n}();\n\nmodule.exports = vhx;\nwindow.vhx = vhx;\n\n},{\"./defaults\":1,\"./resources/browse\":4,\"./resources/collections\":5,\"./resources/customers\":6,\"./resources/products\":7,\"./resources/videos\":8,\"superagent\":11}],10:[function(require,module,exports){\n\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n\n},{}],11:[function(require,module,exports){\n/**\n * Root reference for iframes.\n */\n\nvar root;\nif (typeof window !== 'undefined') { // Browser window\n  root = window;\n} else if (typeof self !== 'undefined') { // Web Worker\n  root = self;\n} else { // Other environments\n  console.warn(\"Using browser-only version of superagent in non-browser environment\");\n  root = this;\n}\n\nvar Emitter = require('emitter');\nvar requestBase = require('./request-base');\nvar isObject = require('./is-object');\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Expose `request`.\n */\n\nvar request = module.exports = require('./request').bind(null, Request);\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  throw Error(\"Browser-only verison of superagent could not find XHR\");\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    if (null != obj[key]) {\n      pushEncodedKeyValuePair(pairs, key, obj[key]);\n    }\n  }\n  return pairs.join('&');\n}\n\n/**\n * Helps 'serialize' with serializing arrays.\n * Mutates the pairs array.\n *\n * @param {Array} pairs\n * @param {String} key\n * @param {Mixed} val\n */\n\nfunction pushEncodedKeyValuePair(pairs, key, val) {\n  if (Array.isArray(val)) {\n    return val.forEach(function(v) {\n      pushEncodedKeyValuePair(pairs, key, v);\n    });\n  } else if (isObject(val)) {\n    for(var subkey in val) {\n      pushEncodedKeyValuePair(pairs, key + '[' + subkey + ']', val[subkey]);\n    }\n    return;\n  }\n  pairs.push(encodeURIComponent(key)\n    + '=' + encodeURIComponent(val));\n}\n\n/**\n * Expose serialization method.\n */\n\n request.serializeObject = serialize;\n\n /**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var pair;\n  var pos;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    pos = pair.indexOf('=');\n    if (pos == -1) {\n      obj[decodeURIComponent(pair)] = '';\n    } else {\n      obj[decodeURIComponent(pair.slice(0, pos))] =\n        decodeURIComponent(pair.slice(pos + 1));\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'application/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\n request.serialize = {\n   'application/x-www-form-urlencoded': serialize,\n   'application/json': JSON.stringify\n };\n\n /**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  lines.pop(); // trailing CRLF\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Check if `mime` is json or has +json structured syntax suffix.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api private\n */\n\nfunction isJSON(mime) {\n  return /[\\/+]json\\b/.test(mime);\n}\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction type(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction params(str){\n  return str.split(/ *; */).reduce(function(obj, str){\n    var parts = str.split(/ *= */),\n        key = parts.shift(),\n        val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req, options) {\n  options = options || {};\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  this._setStatusProperties(this.xhr.status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this._setHeaderProperties(this.header);\n  this.body = this.req.method != 'HEAD'\n    ? this._parseBody(this.text ? this.text : this.xhr.response)\n    : null;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponse.prototype.get = function(field){\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponse.prototype._setHeaderProperties = function(header){\n  // content-type\n  var ct = this.header['content-type'] || '';\n  this.type = type(ct);\n\n  // params\n  var obj = params(ct);\n  for (var key in obj) this[key] = obj[key];\n};\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype._parseBody = function(str){\n  var parse = request.parse[this.type];\n  if (!parse && isJSON(this.type)) {\n    parse = request.parse['application/json'];\n  }\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponse.prototype._setStatusProperties = function(status){\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n\n  var type = status / 100 | 0;\n\n  // status / class\n  this.status = this.statusCode = status;\n  this.statusType = type;\n\n  // basics\n  this.info = 1 == type;\n  this.ok = 2 == type;\n  this.clientError = 4 == type;\n  this.serverError = 5 == type;\n  this.error = (4 == type || 5 == type)\n    ? this.toError()\n    : false;\n\n  // sugar\n  this.accepted = 202 == status;\n  this.noContent = 204 == status;\n  this.badRequest = 400 == status;\n  this.unauthorized = 401 == status;\n  this.notAcceptable = 406 == status;\n  this.notFound = 404 == status;\n  this.forbidden = 403 == status;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {}; // preserves header name case\n  this._header = {}; // coerces header names to lowercase\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      // issue #675: return the raw response if the response parsing fails\n      err.rawResponse = self.xhr && self.xhr.responseText ? self.xhr.responseText : null;\n      // issue #876: return the http status code if the response parsing fails\n      err.statusCode = self.xhr && self.xhr.status ? self.xhr.status : null;\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    var new_err;\n    try {\n      if (res.status < 200 || res.status >= 300) {\n        new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n        new_err.original = err;\n        new_err.response = res;\n        new_err.status = res.status;\n      }\n    } catch(e) {\n      new_err = e; // #985 touching res may cause INVALID_STATE_ERR on old Android\n    }\n\n    // #1000 don't catch errors from the callback to avoid double calling it\n    if (new_err) {\n      self.callback(new_err, res);\n    } else {\n      self.callback(null, res);\n    }\n  });\n}\n\n/**\n * Mixin `Emitter` and `requestBase`.\n */\n\nEmitter(Request.prototype);\nfor (var key in requestBase) {\n  Request.prototype[key] = requestBase[key];\n}\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set responseType to `val`. Presently valid responseTypes are 'blob' and\n * 'arraybuffer'.\n *\n * Examples:\n *\n *      req.get('/')\n *        .responseType('blob')\n *        .end(callback);\n *\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.responseType = function(val){\n  this._responseType = val;\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} pass\n * @param {Object} options with 'type' property 'auto' or 'basic' (default 'basic')\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass, options){\n  if (!options) {\n    options = {\n      type: 'basic'\n    }\n  }\n\n  switch (options.type) {\n    case 'basic':\n      var str = btoa(user + ':' + pass);\n      this.set('Authorization', 'Basic ' + str);\n    break;\n\n    case 'auto':\n      this.username = user;\n      this.password = pass;\n    break;\n  }\n  return this;\n};\n\n/**\n* Add query-string `val`.\n*\n* Examples:\n*\n*   request.get('/shoes')\n*     .query('size=10')\n*     .query({ color: 'blue' })\n*\n* @param {Object|String} val\n* @return {Request} for chaining\n* @api public\n*/\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `filename`.\n *\n * ``` js\n * request.post('/upload')\n *   .attach('content', new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String} filename\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, filename){\n  this._getFormData().append(field, file, filename || file.name);\n  return this;\n};\n\nRequest.prototype._getFormData = function(){\n  if (!this._formData) {\n    this._formData = new root.FormData();\n  }\n  return this._formData;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  var fn = this._callback;\n  this.clearTimeout();\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');\n  err.crossDomain = true;\n\n  err.status = this.status;\n  err.method = this.method;\n  err.url = this.url;\n\n  this.callback(err);\n};\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequest.prototype._timeoutError = function(){\n  var timeout = this._timeout;\n  var err = new Error('timeout of ' + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  this.callback(err);\n};\n\n/**\n * Compose querystring to append to req.url\n *\n * @api private\n */\n\nRequest.prototype._appendQueryString = function(){\n  var query = this._query.join('&');\n  if (query) {\n    this.url += ~this.url.indexOf('?')\n      ? '&' + query\n      : '?' + query;\n  }\n};\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  var self = this;\n  var xhr = this.xhr = request.getXHR();\n  var timeout = this._timeout;\n  var data = this._formData || this._data;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // state change\n  xhr.onreadystatechange = function(){\n    if (4 != xhr.readyState) return;\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (0 == status) {\n      if (self.timedout) return self._timeoutError();\n      if (self._aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(e){\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    e.direction = 'download';\n    self.emit('progress', e);\n  };\n  if (this.hasListeners('progress')) {\n    xhr.onprogress = handleProgress;\n  }\n  try {\n    if (xhr.upload && this.hasListeners('progress')) {\n      xhr.upload.onprogress = handleProgress;\n    }\n  } catch(e) {\n    // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n    // Reported here:\n    // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n  }\n\n  // timeout\n  if (timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self.timedout = true;\n      self.abort();\n    }, timeout);\n  }\n\n  // querystring\n  this._appendQueryString();\n\n  // initiate request\n  if (this.username && this.password) {\n    xhr.open(this.method, this.url, true, this.username, this.password);\n  } else {\n    xhr.open(this.method, this.url, true);\n  }\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if ('GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !this._isHost(data)) {\n    // serialize stuff\n    var contentType = this._header['content-type'];\n    var serialize = this._serializer || request.serialize[contentType ? contentType.split(';')[0] : ''];\n    if (!serialize && isJSON(contentType)) serialize = request.serialize['application/json'];\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n    xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  if (this._responseType) {\n    xhr.responseType = this._responseType;\n  }\n\n  // send stuff\n  this.emit('request', this);\n\n  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)\n  // We need null here if data is undefined\n  xhr.send(typeof data !== 'undefined' ? data : null);\n  return this;\n};\n\n\n/**\n * Expose `Request`.\n */\n\nrequest.Request = Request;\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn){\n  var req = request('GET', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn){\n  var req = request('HEAD', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * OPTIONS query to `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.options = function(url, data, fn){\n  var req = request('OPTIONS', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nfunction del(url, fn){\n  var req = request('DELETE', url);\n  if (fn) req.end(fn);\n  return req;\n};\n\nrequest['del'] = del;\nrequest['delete'] = del;\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn){\n  var req = request('PATCH', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn){\n  var req = request('POST', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn){\n  var req = request('PUT', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n},{\"./is-object\":12,\"./request\":14,\"./request-base\":13,\"emitter\":10}],12:[function(require,module,exports){\n/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return null !== obj && 'object' === typeof obj;\n}\n\nmodule.exports = isObject;\n\n},{}],13:[function(require,module,exports){\n/**\n * Module of mixed-in functions shared between node and client code\n */\nvar isObject = require('./is-object');\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nexports.clearTimeout = function _clearTimeout(){\n  this._timeout = 0;\n  clearTimeout(this._timer);\n  return this;\n};\n\n/**\n * Override default response body parser\n *\n * This function will be called to convert incoming data into request.body\n *\n * @param {Function}\n * @api public\n */\n\nexports.parse = function parse(fn){\n  this._parser = fn;\n  return this;\n};\n\n/**\n * Override default request body serializer\n *\n * This function will be called to convert data set via .send or .attach into payload to send\n *\n * @param {Function}\n * @api public\n */\n\nexports.serialize = function serialize(fn){\n  this._serializer = fn;\n  return this;\n};\n\n/**\n * Set timeout to `ms`.\n *\n * @param {Number} ms\n * @return {Request} for chaining\n * @api public\n */\n\nexports.timeout = function timeout(ms){\n  this._timeout = ms;\n  return this;\n};\n\n/**\n * Promise support\n *\n * @param {Function} resolve\n * @param {Function} reject\n * @return {Request}\n */\n\nexports.then = function then(resolve, reject) {\n  if (!this._fullfilledPromise) {\n    var self = this;\n    this._fullfilledPromise = new Promise(function(innerResolve, innerReject){\n      self.end(function(err, res){\n        if (err) innerReject(err); else innerResolve(res);\n      });\n    });\n  }\n  return this._fullfilledPromise.then(resolve, reject);\n}\n\n/**\n * Allow for extension\n */\n\nexports.use = function use(fn) {\n  fn(this);\n  return this;\n}\n\n\n/**\n * Get request header `field`.\n * Case-insensitive.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nexports.get = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Get case-insensitive header `field` value.\n * This is a deprecated internal API. Use `.get(field)` instead.\n *\n * (getHeader is no longer used internally by the superagent code base)\n *\n * @param {String} field\n * @return {String}\n * @api private\n * @deprecated\n */\n\nexports.getHeader = exports.get;\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n * Case-insensitive.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nexports.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n * Case-insensitive.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n */\nexports.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Write the field `name` and `val` for \"multipart/form-data\"\n * request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n * ```\n *\n * @param {String} name\n * @param {String|Blob|File|Buffer|fs.ReadStream} val\n * @return {Request} for chaining\n * @api public\n */\nexports.field = function(name, val) {\n  this._getFormData().append(name, val);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\nexports.abort = function(){\n  if (this._aborted) {\n    return this;\n  }\n  this._aborted = true;\n  this.xhr && this.xhr.abort(); // browser\n  this.req && this.req.abort(); // node\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nexports.withCredentials = function(){\n  // This is browser-only functionality. Node side is no-op.\n  this._withCredentials = true;\n  return this;\n};\n\n/**\n * Set the max redirects to `n`. Does noting in browser XHR implementation.\n *\n * @param {Number} n\n * @return {Request} for chaining\n * @api public\n */\n\nexports.redirects = function(n){\n  this._maxRedirects = n;\n  return this;\n};\n\n/**\n * Convert to a plain javascript object (not JSON string) of scalar properties.\n * Note as this method is designed to return a useful non-this value,\n * it cannot be chained.\n *\n * @return {Object} describing method, url, and data of this request\n * @api public\n */\n\nexports.toJSON = function(){\n  return {\n    method: this.method,\n    url: this.url,\n    data: this._data,\n    headers: this._header\n  };\n};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * TODO: future proof, move to compoent land\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nexports._isHost = function _isHost(obj) {\n  var str = {}.toString.call(obj);\n\n  switch (str) {\n    case '[object File]':\n    case '[object Blob]':\n    case '[object FormData]':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Send `data` as the request body, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"}')\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n *      request.post('/user')\n *        .send('name=tobi')\n *        .send('species=ferret')\n *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nexports.send = function(data){\n  var obj = isObject(data);\n  var type = this._header['content-type'];\n\n  // merge\n  if (obj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    // default to x-www-form-urlencoded\n    if (!type) this.type('form');\n    type = this._header['content-type'];\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!obj || this._isHost(data)) return this;\n\n  // default to json\n  if (!type) this.type('json');\n  return this;\n};\n\n},{\"./is-object\":12}],14:[function(require,module,exports){\n// The node and browser modules expose versions of this with the\n// appropriate constructor function bound as first argument\n/**\n * Issue a request:\n *\n * Examples:\n *\n *    request('GET', '/users').end(callback)\n *    request('/users').end(callback)\n *    request('/users', callback)\n *\n * @param {String} method\n * @param {String|Function} url or callback\n * @return {Request}\n * @api public\n */\n\nfunction request(RequestConstructor, method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new RequestConstructor('GET', method).end(url);\n  }\n\n  // url first\n  if (2 == arguments.length) {\n    return new RequestConstructor('GET', method);\n  }\n\n  return new RequestConstructor(method, url);\n}\n\nmodule.exports = request;\n\n},{}],15:[function(require,module,exports){\nmodule.exports={\n  \"name\": \"vhxjs\",\n  \"version\": \"1.0.0-beta.2\",\n  \"description\": \"VHX Javascript API Client\",\n  \"main\": \"vhx.js\",\n  \"author\": \"VHX\",\n  \"homepage\": \"https://github.com/vhx/vhx-node\",\n  \"contributors\": [\"David Gonzalez <david@vhx.tv> \", \"Scott Robertson <scott@vhx.tv>\"],\n  \"license\": \"MIT\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git://github.com/vhx/vhx-js.git\"\n  },\n  \"bugs:\": \"https://github.com/vhx/vhx-js/issues\",\n  \"devDependencies\": {\n    \"babel-cli\": \"^6.11.4\",\n    \"babel-preset-es2015\": \"^6.9.0\",\n    \"babelify\": \"^7.3.0\",\n    \"browserify\": \"^13.1.0\",\n    \"gulp\": \"^3.9.1\",\n    \"gulp-babel\": \"^6.1.2\",\n    \"gulp-browserify\": \"^0.5.1\",\n    \"gulp-livereload\": \"^3.8.1\",\n    \"gulp-sourcemaps\": \"^1.6.0\",\n    \"gulp-uglify\": \"^1.5.4\",\n    \"superagent\": \"^2.1.0\",\n    \"vinyl-buffer\": \"^1.0.0\",\n    \"vinyl-source-stream\": \"^1.1.0\"\n  }\n}\n\n},{}]},{},[9])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvZGVmYXVsdHMuanMiLCJsaWIvcGFnaW5hdGUuanMiLCJsaWIvcmVzb3VyY2UuanMiLCJsaWIvcmVzb3VyY2VzL2Jyb3dzZS5qcyIsImxpYi9yZXNvdXJjZXMvY29sbGVjdGlvbnMuanMiLCJsaWIvcmVzb3VyY2VzL2N1c3RvbWVycy5qcyIsImxpYi9yZXNvdXJjZXMvcHJvZHVjdHMuanMiLCJsaWIvcmVzb3VyY2VzL3ZpZGVvcy5qcyIsImxpYi92aHguanMiLCJub2RlX21vZHVsZXMvY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc3VwZXJhZ2VudC9saWIvY2xpZW50LmpzIiwibm9kZV9tb2R1bGVzL3N1cGVyYWdlbnQvbGliL2lzLW9iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9zdXBlcmFnZW50L2xpYi9yZXF1ZXN0LWJhc2UuanMiLCJub2RlX21vZHVsZXMvc3VwZXJhZ2VudC9saWIvcmVxdWVzdC5qcyIsInBhY2thZ2UuanNvbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBTSxnQkFBZ0I7QUFDcEIsUUFBTSxZQURjO0FBRXBCLFlBQVUsVUFGVTtBQUdwQixlQUFhLFFBQVEsaUJBQVIsRUFBMkIsT0FIcEI7QUFJcEIsV0FBUyxPQUpXO0FBS3BCLGNBQVk7QUFMUSxDQUF0Qjs7QUFTQSxPQUFPLE9BQVAsR0FBaUIsYUFBakI7OztBQ1RBOzs7Ozs7SUFFTSxRO0FBQ0osb0JBQVksUUFBWixFQUFzQixJQUF0QixFQUE0QjtBQUFBOztBQUMxQixRQUFJLFFBQVEsSUFBWjs7QUFFQSxVQUFNLFFBQU4sR0FBaUIsUUFBakI7QUFDQSxVQUFNLFFBQU4sR0FBaUIsS0FBSyxJQUF0QjtBQUNBLFVBQU0sT0FBTixHQUFpQixLQUFLLE9BQXRCO0FBQ0EsVUFBTSxJQUFOLEdBQWlCLE1BQU0sT0FBTixDQUFjLElBQWQsR0FBcUIsTUFB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25LQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOThCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJjb25zdCBfVkhYX0RFRkFVTFRTID0ge1xuICBIT1NUOiAnYXBpLnZoeC50dicsXG4gIFBST1RPQ09MOiAnaHR0cHM6Ly8nLFxuICBBUElfVkVSU0lPTjogcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJykudmVyc2lvbixcbiAgVElNRU9VVDogJzMwMDAwJyxcbiAgVE9LRU5fSE9TVDogJ3ZoeC50didcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBfVkhYX0RFRkFVTFRTO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jbGFzcyBQYWdpbmF0ZSB7XG4gIGNvbnN0cnVjdG9yKHJlc291cmNlLCBhcmdzKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLnJlc291cmNlID0gcmVzb3VyY2U7XG4gICAgX3RoaXMucmVzcG9uc2UgPSBhcmdzLmJvZHk7XG4gICAgX3RoaXMub3B0aW9ucyAgPSBhcmdzLm9wdGlvbnM7XG4gICAgX3RoaXMucGFnZSAgICAgPSBfdGhpcy5vcHRpb25zLnBhZ2UgPyBfdGhpcy5vcHRpb25zLnBhZ2UgOiAxO1xuICAgIF90aGlzLm1ldGhvZCAgID0gYXJncy5tZXRob2Q7XG4gICAgX3RoaXMubGFzdCAgICAgPSBNYXRoLmNlaWwoYXJncy5ib2R5LnRvdGFsIC8gKGFyZ3MuYm9keS5jb3VudCAqIF90aGlzLnBhZ2UpKTtcblxuICAgIFsnbmV4dFBhZ2UnLCdwcmV2aW91c1BhZ2UnLCdmaXJzdFBhZ2UnLCdsYXN0UGFnZSddLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIF90aGlzLnJlc3BvbnNlW2tleV0gPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBfdGhpc1trZXldKF90aGlzLCBjYWxsYmFjayk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgX3RoaXMucmVzcG9uc2UuZ29Ub1BhZ2UgPSBmdW5jdGlvbihudW0sIGNhbGxiYWNrKSB7XG4gICAgICBfdGhpcy5nb1RvUGFnZShfdGhpcywgbnVtLCBjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIF90aGlzLnJlc3BvbnNlLm1lcmdlID0gZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIF90aGlzLl9lbWJlZGRlZFtfdGhpcy5vYmplY3RdID0gdGhpcy5fZW1iZWRkZWRbX3RoaXMub2JqZWN0XS5jb25jYXQoX3RoaXMuX2VtYmVkZGVkW190aGlzLm9iamVjdF0pO1xuICAgICAgX3RoaXMuY291bnQgPSB0aGlzLmNvdW50ICsgX3RoaXMuY291bnQ7XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9O1xuICB9XG5cbiAgZ2V0KCkge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICByZXR1cm4gX3RoaXMucmVzcG9uc2U7XG4gIH1cblxuICBuZXh0UGFnZShfdGhpcywgY2FsbGJhY2spIHtcbiAgICBfdGhpcy5vcHRpb25zLnBhZ2UgPSBfdGhpcy5wYWdlICsgMTtcblxuICAgIGlmIChfdGhpcy5vcHRpb25zLnBhZ2UgPiBfdGhpcy5sYXN0KSB7XG4gICAgICB0aHJvdyAnTm8gbW9yZSBwYWdlcyB0byByZXF1ZXN0JztcbiAgICB9XG5cbiAgICBfdGhpcy5yZXNvdXJjZVtfdGhpcy5tZXRob2RdKF90aGlzLm9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIHByZXZpb3VzUGFnZShfdGhpcywgY2FsbGJhY2spIHtcbiAgICBpZiAoX3RoaXMucGFnZSA9PT0gMSkge1xuICAgICAgdGhyb3cgJ05vIHByZXZpb3VzIHBhZ2VzIHRvIHJlcXVlc3QnO1xuICAgIH1cblxuICAgIF90aGlzLm9wdGlvbnMucGFnZSA9IF90aGlzLnBhZ2UgLSAxO1xuICAgIF90aGlzLnJlc291cmNlW190aGlzLm1ldGhvZF0oX3RoaXMub3B0aW9ucywgY2FsbGJhY2spO1xuICB9XG5cbiAgZmlyc3RQYWdlKF90aGlzLCBjYWxsYmFjaykge1xuICAgIF90aGlzLm9wdGlvbnMucGFnZSA9IDE7XG4gICAgX3RoaXMucmVzb3VyY2VbX3RoaXMubWV0aG9kXShfdGhpcy5vcHRpb25zLCBjYWxsYmFjayk7XG4gIH1cblxuICBsYXN0UGFnZShfdGhpcywgY2FsbGJhY2spIHtcbiAgICBfdGhpcy5vcHRpb25zLnBhZ2UgPSBfdGhpcy5sYXN0O1xuICAgIF90aGlzLnJlc291cmNlW190aGlzLm1ldGhvZF0oX3RoaXMub3B0aW9ucywgY2FsbGJhY2spO1xuICB9XG5cbiAgZ29Ub1BhZ2UoX3RoaXMsIG51bSwgY2FsbGJhY2spIHtcbiAgICBudW0gPSBwYXJzZUludChudW0sIDEwKTtcblxuICAgIGlmIChudW0gPiAwICYmIG51bSA8PSBfdGhpcy5sYXN0KSB7XG4gICAgICBfdGhpcy5vcHRpb25zLnBhZ2UgPSBudW07XG4gICAgICByZXR1cm4gX3RoaXMucmVzb3VyY2VbX3RoaXMubWV0aG9kXShfdGhpcy5vcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgdGhyb3cgJ1lvdSBtdXN0IHBhc3MgYSB2YWxpZCBwYWdlIG51bWJlcic7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQYWdpbmF0ZTsiLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcmFnZW50Jyk7XG5jb25zdCBwYWdpbmF0ZSA9IHJlcXVpcmUoJy4vcGFnaW5hdGUnKTtcblxuY2xhc3MgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGksIHBhdGgsIG1ldGhvZHMsIGlzVG9rZW4pIHtcbiAgICBsZXQgX3RoaXMgICAgICAgICA9IHRoaXM7XG4gICAgX3RoaXMuX2FwaSAgICAgICAgPSBhcGk7XG4gICAgX3RoaXMubWV0aG9kcyAgICAgPSBtZXRob2RzO1xuICAgIF90aGlzLnBhdGggICAgICAgID0gcGF0aDtcblxuICAgIF90aGlzLmluaXQoKTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLm1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICBsZXQgbWV0aG9kICAgICAgICA9IF90aGlzLmdldE1ldGhvZChpdGVtKTtcbiAgICAgIGxldCByZXNvdXJjZV90eXBlID0gX3RoaXMucGF0aCB8fCAnaWQnO1xuICAgICAgbGV0IHBhcmFtcyA9IHtcbiAgICAgICAgaHR0cF9tZXRob2Q6ICdnZXQnLCAvLyBzdXBlcmFnZW50IHJlYWRzICdnZXQnIG5vdCAnR0VUJ1xuICAgICAgICBjbGllbnRfbWV0aG9kOiBtZXRob2RcbiAgICAgIH07XG5cbiAgICAgIGlmIChtZXRob2QubWF0Y2goL3JldHJpZXZlfGl0ZW1zfGZpbGVzL2kpKSB7XG4gICAgICAgIF90aGlzW21ldGhvZF0gPSBmdW5jdGlvbihwYXJzZWRfcGFyYW1zLCBjYWxsYmFjaykge1xuICAgICAgICAgIGlmIChfdGhpcy5pc0NhbGxiYWNrRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICBwYXJhbXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwYXJhbXMub3B0aW9ucyAgID0gcGFyc2VkX3BhcmFtcztcbiAgICAgICAgICBwYXJhbXMudXJsICAgICAgID0gdGhpcy5wYXJzZVVybChwYXJzZWRfcGFyYW1zKTtcbiAgICAgICAgICBwYXJhbXMuc2NvcGUgICAgID0gaXRlbS5zY29wZSA/IGl0ZW0uc2NvcGUgOiBudWxsO1xuXG4gICAgICAgICAgX3RoaXMubWFrZVJlcXVlc3QocGFyYW1zKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBfdGhpc1ttZXRob2RdID0gZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgICAgICBwYXJhbXMub3B0aW9ucyAgID0gb3B0aW9ucztcbiAgICAgICAgICBwYXJhbXMudXJsICAgICAgID0gdGhpcy5wYXJzZVVybChvcHRpb25zKTtcbiAgICAgICAgICBwYXJhbXMuY2FsbGJhY2sgID0gY2FsbGJhY2s7XG5cbiAgICAgICAgICBfdGhpcy5tYWtlUmVxdWVzdChwYXJhbXMpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcGFyc2VVcmwocGFyYW1zKSB7XG4gICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMuY29sbGVjdGlvbikge1xuICAgICAgcmV0dXJuIHBhcmFtcy5jb2xsZWN0aW9uO1xuICAgIH1cblxuICAgIGlmIChwYXJhbXMgJiYgcGFyYW1zLnByb2R1Y3QpIHtcbiAgICAgIGlmICghcGFyc2VJbnQocGFyYW1zLnByb2R1Y3QsIDEwKSkge1xuICAgICAgICByZXR1cm4gcGFyYW1zLnByb2R1Y3Q7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcyAmJiB0aGlzLnBhdGgubWF0Y2goL3ZpZGVvcy8pKSB7XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cblxuICAgIGlmIChwYXJhbXMgJiYgdGhpcy5wYXRoLm1hdGNoKC9jdXN0b21lcnMvKSkge1xuICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG5cbiAgICByZXR1cm4gYCR7dGhpcy5fYXBpLnByb3RvY29sfSR7dGhpcy5fYXBpLmhvc3R9LyR7dGhpcy5wYXRofWA7XG4gIH1cblxuICBnZXRNZXRob2QocGFyYW1zKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIGlmIChfdGhpcy5pc09iamVjdChwYXJhbXMpICYmIHBhcmFtcy5tZXRob2QpIHtcbiAgICAgIHJldHVybiBwYXJhbXMubWV0aG9kO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbiAgfVxuXG4gIG5lZWRzVG9rZW4oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkgPiB0aGlzLl9hcGkudG9rZW5fZXhwaXJhdGlvbjtcbiAgfVxuXG4gIGdldFBhcmFtcyhjbGllbnRfbWV0aG9kLCB1cmwsIG9wdGlvbnMsIHNjb3BlLCB0eXBlKSB7XG4gICAgbGV0IF90aGlzICA9IHRoaXM7XG4gICAgbGV0IHBhcmFtcyA9IHt9O1xuXG4gICAgcGFyYW1zLnRpbWVvdXQgPSBfdGhpcy5fYXBpLnRpbWVvdXQ7XG4gICAgcGFyYW1zLnFzICAgICAgPSBvcHRpb25zIHx8IG51bGw7XG4gICAgcGFyYW1zLm1ldGhvZCAgPSBjbGllbnRfbWV0aG9kO1xuXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh1cmwpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgcGFyYW1zLnVybCA9IHVybFtPYmplY3Qua2V5cyh1cmwpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyYW1zLnVybCA9IHVybDtcbiAgICB9XG5cbiAgICBpZiAocGFyYW1zLnVybC5tYXRjaCgvdmlkZW9zfGN1c3RvbWVycy8pICYmICFwYXJhbXMudXJsLm1hdGNoKC93YXRjaGluZ3x3YXRjaGxpc3QvKSkge1xuICAgICAgcGFyYW1zLnFzID0gJyc7XG4gICAgfVxuXG4gICAgaWYgKGNsaWVudF9tZXRob2QgPT09ICdhbGwnKSB7XG4gICAgICBwYXJhbXMucXMgPSAnJztcbiAgICB9XG5cbiAgICBpZiAoY2xpZW50X21ldGhvZCA9PT0gJ2FsbCcgJiYgb3B0aW9ucyAmJiBwYXJzZUludChvcHRpb25zLnByb2R1Y3QsIDEwKSkge1xuICAgICAgcGFyYW1zLnFzID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICBpZiAoX3RoaXMuX2FwaS5hdXRoKSB7XG4gICAgICBwYXJhbXMuaGVhZGVycyA9IHtcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBfdGhpcy5fYXBpLmF1dGhcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIG1ha2VSZXF1ZXN0KGFyZ3MpIHtcbiAgICBsZXQgcGFyYW1zID0gdGhpcy5nZXRQYXJhbXMoYXJncy5jbGllbnRfbWV0aG9kLCBhcmdzLnVybCwgYXJncy5vcHRpb25zLCBhcmdzLnNjb3BlLCBhcmdzLnJlYWRfb25seSk7XG5cbiAgICBpZiAodGhpcy5pc0NhbGxiYWNrRnVuY3Rpb24oYXJncy5vcHRpb25zKSkge1xuICAgICAgYXJncy5jYWxsYmFjayA9IGFyZ3Mub3B0aW9ucztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuX2FwaS50b2tlbl9ob3N0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHBhcmFtcy5oZWFkZXJzID0ge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRoaXMuX2FwaS50b2tlblxuICAgICAgfVxuXG4gICAgICB0aGlzLmFqYXhSZXF1ZXN0KGFyZ3MsIHBhcmFtcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWpheFJlcXVlc3QoYXJncywgcGFyYW1zKTtcbiAgICB9XG4gIH1cblxuICBhamF4UmVxdWVzdChhcmdzLCBwYXJhbXMpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgcmVxdWVzdFthcmdzLmh0dHBfbWV0aG9kXShwYXJhbXMudXJsKVxuICAgICAgLndpdGhDcmVkZW50aWFscygpXG4gICAgICAuc2V0KHBhcmFtcy5oZWFkZXJzIHx8IHt9KVxuICAgICAgLnNldCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKVxuICAgICAgLnF1ZXJ5KHBhcmFtcy5xcylcbiAgICAgIC5lbmQoZnVuY3Rpb24oZXJyLCByZXNwb25zZSkge1xuICAgICAgICBpZiAoZXJyICYmIGVyci5jb2RlID09PSAnRVRJTUVET1VUJykge1xuICAgICAgICAgIF90aGlzLmVycm9ySGFuZGxlcih7XG4gICAgICAgICAgICBzdGF0dXM6IDQwOCxcbiAgICAgICAgICAgIGJvZHk6ICd7XCJtZXNzYWdlXCI6IFwiVGhlIHJlcXVlc3QgdGltZWQgb3V0LlwiLFwiZG9jdW1lbnRhdGlvbl91cmxcIjogXCJodHRwOi8vZGV2LnZoeC50di9kb2NzL2FwaVwifScsXG4gICAgICAgICAgICBjYWxsYmFjazogKGFyZ3MuY2FsbGJhY2sgfHwgJycpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWVyciAmJiByZXNwb25zZS5zdGF0dXNDb2RlID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXNDb2RlIDwgMzAwKSB7XG4gICAgICAgICAgX3RoaXMuc3VjY2Vzc0hhbmRsZXIoe1xuICAgICAgICAgICAgYm9keTogcmVzcG9uc2UuYm9keSB8fCBudWxsLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFyZ3MuY2FsbGJhY2ssXG4gICAgICAgICAgICBvcHRpb25zOiBhcmdzLm9wdGlvbnMsXG4gICAgICAgICAgICBvYmplY3Q6IF90aGlzLnBhdGgsXG4gICAgICAgICAgICBtZXRob2Q6IGFyZ3MuY2xpZW50X21ldGhvZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzLmVycm9ySGFuZGxlcih7XG4gICAgICAgICAgICBzdGF0dXM6IDQwOCxcbiAgICAgICAgICAgIGJvZHk6ICd7XCJtZXNzYWdlXCI6IFwiVGhlIHJlcXVlc3QgdGltZWQgb3V0LlwiLFwiZG9jdW1lbnRhdGlvbl91cmxcIjogXCJodHRwOi8vZGV2LnZoeC50di9kb2NzL2FwaVwifScsXG4gICAgICAgICAgICBjYWxsYmFjazogKGFyZ3MuY2FsbGJhY2sgfHwgJycpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgc3VjY2Vzc0hhbmRsZXIoYXJncykge1xuICAgIGxldCByZXNwb25zZSA9IGFyZ3MuYm9keTtcblxuICAgIGlmIChhcmdzLmJvZHkuY291bnQgJiYgYXJncy5ib2R5LmNvdW50IDwgYXJncy5ib2R5LnRvdGFsKSB7XG4gICAgICByZXNwb25zZSA9IG5ldyBwYWdpbmF0ZSh0aGlzLCBhcmdzKS5nZXQoKTtcbiAgICB9XG5cbiAgICByZXNwb25zZS5vYmplY3QgPSBhcmdzLm9iamVjdDtcblxuICAgIGlmIChhcmdzLmNhbGxiYWNrKSB7XG4gICAgICBhcmdzLmNhbGxiYWNrKGZhbHNlLCByZXNwb25zZSk7XG4gICAgfVxuICB9XG5cbiAgZXJyb3JIYW5kbGVyKGFyZ3MpIHtcbiAgICBsZXQgZXJyb3IgPSBKU09OLnBhcnNlKGFyZ3MuYm9keSksXG4gICAgICAgIGVycm9yX3R5cGVzID0ge1xuICAgICAgICAgIDQwMDogJ1ZIWEludmFsaWRSZXF1ZXN0RXJyb3InLFxuICAgICAgICAgIDQwMTogJ1ZIWEF1dGhlbnRpY2F0aW9uRXJyb3InLFxuICAgICAgICAgIDQwNDogJ1ZIWFJlc291cmNlTm90Rm91bmQnLFxuICAgICAgICAgIDQwODogJ1ZIWENvbm5lY3Rpb25FcnJvcicsXG4gICAgICAgICAgNTAwOiAnVkhYQVBJRXJyb3InXG4gICAgICAgIH07XG5cbiAgICBlcnJvci5zdGF0dXMgPSBhcmdzLnN0YXR1cztcbiAgICBlcnJvci50eXBlID0gZXJyb3JfdHlwZXNbZXJyb3Iuc3RhdHVzXTtcblxuICAgIGlmIChhcmdzLmNhbGxiYWNrKSB7XG4gICAgICBhcmdzLmNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICB9XG4gIH1cblxuICBpc0NhbGxiYWNrRnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuICEhKG9iaiAmJiBvYmouY29uc3RydWN0b3IgJiYgb2JqLmNhbGwgJiYgb2JqLmFwcGx5KTtcbiAgfVxuXG4gIGlzT2JqZWN0KG9iaikge1xuICAgIGxldCB0eXBlID0gdHlwZW9mIG9iajtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlID09PSAnb2JqZWN0JyAmJiAhIW9iajtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZXNvdXJjZTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFJlc291cmNlID0gcmVxdWlyZSgnLi4vcmVzb3VyY2UnKTtcblxuY2xhc3MgQnJvd3NlIGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICdicm93c2UnLCBbJ2FsbCcsICdsaXN0J10pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJyb3dzZTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFJlc291cmNlID0gcmVxdWlyZSgnLi4vcmVzb3VyY2UnKTtcblxuY2xhc3MgQ29sbGVjdGlvbiBleHRlbmRzIFJlc291cmNlIHtcbiAgY29uc3RydWN0b3IoYXBpKSB7XG4gICAgc3VwZXIoYXBpLCAnY29sbGVjdGlvbnMnLCBbJ2FsbCcsICdsaXN0JywgJ2l0ZW1zJ10pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbGxlY3Rpb247XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBSZXNvdXJjZSA9IHJlcXVpcmUoJy4uL3Jlc291cmNlJyk7XG5cbmNsYXNzIEN1c3RvbWVyIGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICdjdXN0b21lcnMnLCBbJ3JldHJpZXZlJywgJ2FsbCddKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDdXN0b21lcjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFJlc291cmNlID0gcmVxdWlyZSgnLi4vcmVzb3VyY2UnKTtcblxuY2xhc3MgUHJvZHVjdCBleHRlbmRzIFJlc291cmNlIHtcbiAgY29uc3RydWN0b3IoYXBpKSB7XG4gICAgc3VwZXIoYXBpLCAncHJvZHVjdHMnLCBbJ3JldHJpZXZlJywgJ2FsbCddKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcm9kdWN0O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVzb3VyY2UgPSByZXF1aXJlKCcuLi9yZXNvdXJjZScpO1xuXG5jbGFzcyBWaWRlbyBleHRlbmRzIFJlc291cmNlIHtcbiAgY29uc3RydWN0b3IoYXBpKSB7XG4gICAgc3VwZXIoYXBpLCAndmlkZW9zJywgWydhbGwnLCAncmV0cmlldmUnLCAnZmlsZXMnXSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVmlkZW87XG4iLCJpbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi9kZWZhdWx0cyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuL3Jlc291cmNlcy9jb2xsZWN0aW9ucyc7XG5pbXBvcnQgVmlkZW8gZnJvbSAnLi9yZXNvdXJjZXMvdmlkZW9zJztcbmltcG9ydCBDdXN0b21lciBmcm9tICcuL3Jlc291cmNlcy9jdXN0b21lcnMnO1xuaW1wb3J0IFByb2R1Y3QgZnJvbSAnLi9yZXNvdXJjZXMvcHJvZHVjdHMnO1xuaW1wb3J0IEJyb3dzZSBmcm9tICcuL3Jlc291cmNlcy9icm93c2UnO1xuaW1wb3J0IHJlcXVlc3QgZnJvbSAnc3VwZXJhZ2VudCc7XG5cbmxldCByZXNvdXJjZXMgPSB7XG4gIGNvbGxlY3Rpb25zIDogQ29sbGVjdGlvbixcbiAgdmlkZW9zICAgICAgOiBWaWRlbyxcbiAgcHJvZHVjdHMgICAgOiBQcm9kdWN0LFxuICBjdXN0b21lcnMgICA6IEN1c3RvbWVyLFxuICBicm93c2UgICAgICA6IEJyb3dzZVxufTtcblxuY2xhc3Mgdmh4IHtcbiAgY29uc3RydWN0b3Ioa2V5LCBvcHRzKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIGlmICghKF90aGlzIGluc3RhbmNlb2Ygdmh4KSkge1xuICAgICAgcmV0dXJuIG5ldyB2aHgoa2V5KTtcbiAgICB9XG5cbiAgICBfdGhpcy5hcGkgPSBvcHRzLnRva2VuX2hvc3QgPyBfdGhpcy5zZXRUb2tlbihrZXksIG9wdHMpIDogX3RoaXMuc2V0QXBpKGtleSwgb3B0cyk7XG5cbiAgICBfdGhpcy5wcmVwYXJlUmVzb3VyY2VzKCk7XG4gIH1cblxuICBzZXRBcGkoa2V5LCBvcHRzID0ge30pIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXV0aDogJ0Jhc2ljICcgKyBidG9hKGtleSksXG4gICAgICBob3N0OiBvcHRzLmhvc3QgfHwgZGVmYXVsdHMuSE9TVCxcbiAgICAgIHByb3RvY29sOiBvcHRzLnByb3RvY29sIHx8IGRlZmF1bHRzLlBST1RPQ09MLFxuICAgICAgdGltZW91dDogZGVmYXVsdHMuVElNRU9VVCxcbiAgICAgIHRva2VuX2V4cGlyYXRpb246IG51bGxcbiAgICB9O1xuICB9XG5cbiAgc2V0VG9rZW4oa2V5LCBvcHRzID0ge30pIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG9rZW46IGtleSxcbiAgICAgIGhvc3Q6IG9wdHMuaG9zdCB8fCBkZWZhdWx0cy5IT1NULFxuICAgICAgcHJvdG9jb2w6IG9wdHMucHJvdG9jb2wgfHwgZGVmYXVsdHMuUFJPVE9DT0wsXG4gICAgICB0aW1lb3V0OiBkZWZhdWx0cy5USU1FT1VULFxuICAgICAgdG9rZW5faG9zdDogb3B0cy50b2tlbl9ob3N0IHx8IGRlZmF1bHRzLlRPS0VOX0hPU1QsXG4gICAgICB0b2tlbl9leHBpcmF0aW9uOiBUT0tFTl9FWFBJUkVTX0lOXG4gICAgfTtcbiAgfVxuXG4gIHByZXBhcmVSZXNvdXJjZXMoKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIGZvciAobGV0IG5hbWUgaW4gcmVzb3VyY2VzKSB7XG4gICAgICBfdGhpc1tuYW1lWzBdLnRvTG93ZXJDYXNlKCkgKyBuYW1lLnN1YnN0cmluZygxKV0gPSBuZXcgcmVzb3VyY2VzW25hbWVdKF90aGlzLmFwaSk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdmh4O1xud2luZG93LnZoeCA9IHZoeDtcbiIsIlxyXG4vKipcclxuICogRXhwb3NlIGBFbWl0dGVyYC5cclxuICovXHJcblxyXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICBtb2R1bGUuZXhwb3J0cyA9IEVtaXR0ZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIGEgbmV3IGBFbWl0dGVyYC5cclxuICpcclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5mdW5jdGlvbiBFbWl0dGVyKG9iaikge1xyXG4gIGlmIChvYmopIHJldHVybiBtaXhpbihvYmopO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1peGluIHRoZSBlbWl0dGVyIHByb3BlcnRpZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcclxuICogQHJldHVybiB7T2JqZWN0fVxyXG4gKiBAYXBpIHByaXZhdGVcclxuICovXHJcblxyXG5mdW5jdGlvbiBtaXhpbihvYmopIHtcclxuICBmb3IgKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHtcclxuICAgIG9ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTtcclxuICB9XHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuLyoqXHJcbiAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLm9uID1cclxuRW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gICh0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXSlcclxuICAgIC5wdXNoKGZuKTtcclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcclxuICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXHJcbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgZnVuY3Rpb24gb24oKSB7XHJcbiAgICB0aGlzLm9mZihldmVudCwgb24pO1xyXG4gICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICB9XHJcblxyXG4gIG9uLmZuID0gZm47XHJcbiAgdGhpcy5vbihldmVudCwgb24pO1xyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXHJcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICogQHJldHVybiB7RW1pdHRlcn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5vZmYgPVxyXG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCwgZm4pe1xyXG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcclxuXHJcbiAgLy8gYWxsXHJcbiAgaWYgKDAgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgdGhpcy5fY2FsbGJhY2tzID0ge307XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8vIHNwZWNpZmljIGV2ZW50XHJcbiAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcbiAgaWYgKCFjYWxsYmFja3MpIHJldHVybiB0aGlzO1xyXG5cclxuICAvLyByZW1vdmUgYWxsIGhhbmRsZXJzXHJcbiAgaWYgKDEgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8vIHJlbW92ZSBzcGVjaWZpYyBoYW5kbGVyXHJcbiAgdmFyIGNiO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjYiA9IGNhbGxiYWNrc1tpXTtcclxuICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XHJcbiAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBFbWl0IGBldmVudGAgd2l0aCB0aGUgZ2l2ZW4gYXJncy5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7TWl4ZWR9IC4uLlxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpXHJcbiAgICAsIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcblxyXG4gIGlmIChjYWxsYmFja3MpIHtcclxuICAgIGNhbGxiYWNrcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgY2FsbGJhY2tzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogUmV0dXJuIGFycmF5IG9mIGNhbGxiYWNrcyBmb3IgYGV2ZW50YC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XHJcbiAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gfHwgW107XHJcbn07XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdGhpcyBlbWl0dGVyIGhhcyBgZXZlbnRgIGhhbmRsZXJzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHJldHVybiB7Qm9vbGVhbn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgcmV0dXJuICEhIHRoaXMubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGg7XHJcbn07XHJcbiIsIi8qKlxuICogUm9vdCByZWZlcmVuY2UgZm9yIGlmcmFtZXMuXG4gKi9cblxudmFyIHJvb3Q7XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsgLy8gQnJvd3NlciB3aW5kb3dcbiAgcm9vdCA9IHdpbmRvdztcbn0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7IC8vIFdlYiBXb3JrZXJcbiAgcm9vdCA9IHNlbGY7XG59IGVsc2UgeyAvLyBPdGhlciBlbnZpcm9ubWVudHNcbiAgY29uc29sZS53YXJuKFwiVXNpbmcgYnJvd3Nlci1vbmx5IHZlcnNpb24gb2Ygc3VwZXJhZ2VudCBpbiBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcbiAgcm9vdCA9IHRoaXM7XG59XG5cbnZhciBFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpO1xudmFyIHJlcXVlc3RCYXNlID0gcmVxdWlyZSgnLi9yZXF1ZXN0LWJhc2UnKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXMtb2JqZWN0Jyk7XG5cbi8qKlxuICogTm9vcC5cbiAqL1xuXG5mdW5jdGlvbiBub29wKCl7fTtcblxuLyoqXG4gKiBFeHBvc2UgYHJlcXVlc3RgLlxuICovXG5cbnZhciByZXF1ZXN0ID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL3JlcXVlc3QnKS5iaW5kKG51bGwsIFJlcXVlc3QpO1xuXG4vKipcbiAqIERldGVybWluZSBYSFIuXG4gKi9cblxucmVxdWVzdC5nZXRYSFIgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChyb290LlhNTEh0dHBSZXF1ZXN0XG4gICAgICAmJiAoIXJvb3QubG9jYXRpb24gfHwgJ2ZpbGU6JyAhPSByb290LmxvY2F0aW9uLnByb3RvY29sXG4gICAgICAgICAgfHwgIXJvb3QuQWN0aXZlWE9iamVjdCkpIHtcbiAgICByZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0O1xuICB9IGVsc2Uge1xuICAgIHRyeSB7IHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTWljcm9zb2Z0LlhNTEhUVFAnKTsgfSBjYXRjaChlKSB7fVxuICAgIHRyeSB7IHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTXN4bWwyLlhNTEhUVFAuNi4wJyk7IH0gY2F0Y2goZSkge31cbiAgICB0cnkgeyByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoJ01zeG1sMi5YTUxIVFRQLjMuMCcpOyB9IGNhdGNoKGUpIHt9XG4gICAgdHJ5IHsgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNc3htbDIuWE1MSFRUUCcpOyB9IGNhdGNoKGUpIHt9XG4gIH1cbiAgdGhyb3cgRXJyb3IoXCJCcm93c2VyLW9ubHkgdmVyaXNvbiBvZiBzdXBlcmFnZW50IGNvdWxkIG5vdCBmaW5kIFhIUlwiKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLCBhZGRlZCB0byBzdXBwb3J0IElFLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG52YXIgdHJpbSA9ICcnLnRyaW1cbiAgPyBmdW5jdGlvbihzKSB7IHJldHVybiBzLnRyaW0oKTsgfVxuICA6IGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMucmVwbGFjZSgvKF5cXHMqfFxccyokKS9nLCAnJyk7IH07XG5cbi8qKlxuICogU2VyaWFsaXplIHRoZSBnaXZlbiBgb2JqYC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBzZXJpYWxpemUob2JqKSB7XG4gIGlmICghaXNPYmplY3Qob2JqKSkgcmV0dXJuIG9iajtcbiAgdmFyIHBhaXJzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAobnVsbCAhPSBvYmpba2V5XSkge1xuICAgICAgcHVzaEVuY29kZWRLZXlWYWx1ZVBhaXIocGFpcnMsIGtleSwgb2JqW2tleV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcGFpcnMuam9pbignJicpO1xufVxuXG4vKipcbiAqIEhlbHBzICdzZXJpYWxpemUnIHdpdGggc2VyaWFsaXppbmcgYXJyYXlzLlxuICogTXV0YXRlcyB0aGUgcGFpcnMgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcGFpcnNcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7TWl4ZWR9IHZhbFxuICovXG5cbmZ1bmN0aW9uIHB1c2hFbmNvZGVkS2V5VmFsdWVQYWlyKHBhaXJzLCBrZXksIHZhbCkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgcmV0dXJuIHZhbC5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcbiAgICAgIHB1c2hFbmNvZGVkS2V5VmFsdWVQYWlyKHBhaXJzLCBrZXksIHYpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbCkpIHtcbiAgICBmb3IodmFyIHN1YmtleSBpbiB2YWwpIHtcbiAgICAgIHB1c2hFbmNvZGVkS2V5VmFsdWVQYWlyKHBhaXJzLCBrZXkgKyAnWycgKyBzdWJrZXkgKyAnXScsIHZhbFtzdWJrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIHBhaXJzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSlcbiAgICArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpKTtcbn1cblxuLyoqXG4gKiBFeHBvc2Ugc2VyaWFsaXphdGlvbiBtZXRob2QuXG4gKi9cblxuIHJlcXVlc3Quc2VyaWFsaXplT2JqZWN0ID0gc2VyaWFsaXplO1xuXG4gLyoqXG4gICogUGFyc2UgdGhlIGdpdmVuIHgtd3d3LWZvcm0tdXJsZW5jb2RlZCBgc3RyYC5cbiAgKlxuICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICogQGFwaSBwcml2YXRlXG4gICovXG5cbmZ1bmN0aW9uIHBhcnNlU3RyaW5nKHN0cikge1xuICB2YXIgb2JqID0ge307XG4gIHZhciBwYWlycyA9IHN0ci5zcGxpdCgnJicpO1xuICB2YXIgcGFpcjtcbiAgdmFyIHBvcztcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gcGFpcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBwYWlyID0gcGFpcnNbaV07XG4gICAgcG9zID0gcGFpci5pbmRleE9mKCc9Jyk7XG4gICAgaWYgKHBvcyA9PSAtMSkge1xuICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChwYWlyKV0gPSAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChwYWlyLnNsaWNlKDAsIHBvcykpXSA9XG4gICAgICAgIGRlY29kZVVSSUNvbXBvbmVudChwYWlyLnNsaWNlKHBvcyArIDEpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIEV4cG9zZSBwYXJzZXIuXG4gKi9cblxucmVxdWVzdC5wYXJzZVN0cmluZyA9IHBhcnNlU3RyaW5nO1xuXG4vKipcbiAqIERlZmF1bHQgTUlNRSB0eXBlIG1hcC5cbiAqXG4gKiAgICAgc3VwZXJhZ2VudC50eXBlcy54bWwgPSAnYXBwbGljYXRpb24veG1sJztcbiAqXG4gKi9cblxucmVxdWVzdC50eXBlcyA9IHtcbiAgaHRtbDogJ3RleHQvaHRtbCcsXG4gIGpzb246ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgeG1sOiAnYXBwbGljYXRpb24veG1sJyxcbiAgdXJsZW5jb2RlZDogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICdmb3JtJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICdmb3JtLWRhdGEnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xufTtcblxuLyoqXG4gKiBEZWZhdWx0IHNlcmlhbGl6YXRpb24gbWFwLlxuICpcbiAqICAgICBzdXBlcmFnZW50LnNlcmlhbGl6ZVsnYXBwbGljYXRpb24veG1sJ10gPSBmdW5jdGlvbihvYmope1xuICogICAgICAgcmV0dXJuICdnZW5lcmF0ZWQgeG1sIGhlcmUnO1xuICogICAgIH07XG4gKlxuICovXG5cbiByZXF1ZXN0LnNlcmlhbGl6ZSA9IHtcbiAgICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnOiBzZXJpYWxpemUsXG4gICAnYXBwbGljYXRpb24vanNvbic6IEpTT04uc3RyaW5naWZ5XG4gfTtcblxuIC8qKlxuICAqIERlZmF1bHQgcGFyc2Vycy5cbiAgKlxuICAqICAgICBzdXBlcmFnZW50LnBhcnNlWydhcHBsaWNhdGlvbi94bWwnXSA9IGZ1bmN0aW9uKHN0cil7XG4gICogICAgICAgcmV0dXJuIHsgb2JqZWN0IHBhcnNlZCBmcm9tIHN0ciB9O1xuICAqICAgICB9O1xuICAqXG4gICovXG5cbnJlcXVlc3QucGFyc2UgPSB7XG4gICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnOiBwYXJzZVN0cmluZyxcbiAgJ2FwcGxpY2F0aW9uL2pzb24nOiBKU09OLnBhcnNlXG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBoZWFkZXIgYHN0cmAgaW50b1xuICogYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG1hcHBlZCBmaWVsZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2VIZWFkZXIoc3RyKSB7XG4gIHZhciBsaW5lcyA9IHN0ci5zcGxpdCgvXFxyP1xcbi8pO1xuICB2YXIgZmllbGRzID0ge307XG4gIHZhciBpbmRleDtcbiAgdmFyIGxpbmU7XG4gIHZhciBmaWVsZDtcbiAgdmFyIHZhbDtcblxuICBsaW5lcy5wb3AoKTsgLy8gdHJhaWxpbmcgQ1JMRlxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsaW5lcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIGxpbmUgPSBsaW5lc1tpXTtcbiAgICBpbmRleCA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGZpZWxkID0gbGluZS5zbGljZSgwLCBpbmRleCkudG9Mb3dlckNhc2UoKTtcbiAgICB2YWwgPSB0cmltKGxpbmUuc2xpY2UoaW5kZXggKyAxKSk7XG4gICAgZmllbGRzW2ZpZWxkXSA9IHZhbDtcbiAgfVxuXG4gIHJldHVybiBmaWVsZHM7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYG1pbWVgIGlzIGpzb24gb3IgaGFzICtqc29uIHN0cnVjdHVyZWQgc3ludGF4IHN1ZmZpeC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWltZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGlzSlNPTihtaW1lKSB7XG4gIHJldHVybiAvW1xcLytdanNvblxcYi8udGVzdChtaW1lKTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIG1pbWUgdHlwZSBmb3IgdGhlIGdpdmVuIGBzdHJgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHR5cGUoc3RyKXtcbiAgcmV0dXJuIHN0ci5zcGxpdCgvICo7ICovKS5zaGlmdCgpO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gaGVhZGVyIGZpZWxkIHBhcmFtZXRlcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyYW1zKHN0cil7XG4gIHJldHVybiBzdHIuc3BsaXQoLyAqOyAqLykucmVkdWNlKGZ1bmN0aW9uKG9iaiwgc3RyKXtcbiAgICB2YXIgcGFydHMgPSBzdHIuc3BsaXQoLyAqPSAqLyksXG4gICAgICAgIGtleSA9IHBhcnRzLnNoaWZ0KCksXG4gICAgICAgIHZhbCA9IHBhcnRzLnNoaWZ0KCk7XG5cbiAgICBpZiAoa2V5ICYmIHZhbCkgb2JqW2tleV0gPSB2YWw7XG4gICAgcmV0dXJuIG9iajtcbiAgfSwge30pO1xufTtcblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBSZXNwb25zZWAgd2l0aCB0aGUgZ2l2ZW4gYHhocmAuXG4gKlxuICogIC0gc2V0IGZsYWdzICgub2ssIC5lcnJvciwgZXRjKVxuICogIC0gcGFyc2UgaGVhZGVyXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogIEFsaWFzaW5nIGBzdXBlcmFnZW50YCBhcyBgcmVxdWVzdGAgaXMgbmljZTpcbiAqXG4gKiAgICAgIHJlcXVlc3QgPSBzdXBlcmFnZW50O1xuICpcbiAqICBXZSBjYW4gdXNlIHRoZSBwcm9taXNlLWxpa2UgQVBJLCBvciBwYXNzIGNhbGxiYWNrczpcbiAqXG4gKiAgICAgIHJlcXVlc3QuZ2V0KCcvJykuZW5kKGZ1bmN0aW9uKHJlcyl7fSk7XG4gKiAgICAgIHJlcXVlc3QuZ2V0KCcvJywgZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiAgU2VuZGluZyBkYXRhIGNhbiBiZSBjaGFpbmVkOlxuICpcbiAqICAgICAgcmVxdWVzdFxuICogICAgICAgIC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgLnNlbmQoeyBuYW1lOiAndGonIH0pXG4gKiAgICAgICAgLmVuZChmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqICBPciBwYXNzZWQgdG8gYC5zZW5kKClgOlxuICpcbiAqICAgICAgcmVxdWVzdFxuICogICAgICAgIC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgLnNlbmQoeyBuYW1lOiAndGonIH0sIGZ1bmN0aW9uKHJlcyl7fSk7XG4gKlxuICogIE9yIHBhc3NlZCB0byBgLnBvc3QoKWA6XG4gKlxuICogICAgICByZXF1ZXN0XG4gKiAgICAgICAgLnBvc3QoJy91c2VyJywgeyBuYW1lOiAndGonIH0pXG4gKiAgICAgICAgLmVuZChmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqIE9yIGZ1cnRoZXIgcmVkdWNlZCB0byBhIHNpbmdsZSBjYWxsIGZvciBzaW1wbGUgY2FzZXM6XG4gKlxuICogICAgICByZXF1ZXN0XG4gKiAgICAgICAgLnBvc3QoJy91c2VyJywgeyBuYW1lOiAndGonIH0sIGZ1bmN0aW9uKHJlcyl7fSk7XG4gKlxuICogQHBhcmFtIHtYTUxIVFRQUmVxdWVzdH0geGhyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gUmVzcG9uc2UocmVxLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB0aGlzLnJlcSA9IHJlcTtcbiAgdGhpcy54aHIgPSB0aGlzLnJlcS54aHI7XG4gIC8vIHJlc3BvbnNlVGV4dCBpcyBhY2Nlc3NpYmxlIG9ubHkgaWYgcmVzcG9uc2VUeXBlIGlzICcnIG9yICd0ZXh0JyBhbmQgb24gb2xkZXIgYnJvd3NlcnNcbiAgdGhpcy50ZXh0ID0gKCh0aGlzLnJlcS5tZXRob2QgIT0nSEVBRCcgJiYgKHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9PT0gJycgfHwgdGhpcy54aHIucmVzcG9uc2VUeXBlID09PSAndGV4dCcpKSB8fCB0eXBlb2YgdGhpcy54aHIucmVzcG9uc2VUeXBlID09PSAndW5kZWZpbmVkJylcbiAgICAgPyB0aGlzLnhoci5yZXNwb25zZVRleHRcbiAgICAgOiBudWxsO1xuICB0aGlzLnN0YXR1c1RleHQgPSB0aGlzLnJlcS54aHIuc3RhdHVzVGV4dDtcbiAgdGhpcy5fc2V0U3RhdHVzUHJvcGVydGllcyh0aGlzLnhoci5zdGF0dXMpO1xuICB0aGlzLmhlYWRlciA9IHRoaXMuaGVhZGVycyA9IHBhcnNlSGVhZGVyKHRoaXMueGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTtcbiAgLy8gZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIHNvbWV0aW1lcyBmYWxzZWx5IHJldHVybnMgXCJcIiBmb3IgQ09SUyByZXF1ZXN0cywgYnV0XG4gIC8vIGdldFJlc3BvbnNlSGVhZGVyIHN0aWxsIHdvcmtzLiBzbyB3ZSBnZXQgY29udGVudC10eXBlIGV2ZW4gaWYgZ2V0dGluZ1xuICAvLyBvdGhlciBoZWFkZXJzIGZhaWxzLlxuICB0aGlzLmhlYWRlclsnY29udGVudC10eXBlJ10gPSB0aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcignY29udGVudC10eXBlJyk7XG4gIHRoaXMuX3NldEhlYWRlclByb3BlcnRpZXModGhpcy5oZWFkZXIpO1xuICB0aGlzLmJvZHkgPSB0aGlzLnJlcS5tZXRob2QgIT0gJ0hFQUQnXG4gICAgPyB0aGlzLl9wYXJzZUJvZHkodGhpcy50ZXh0ID8gdGhpcy50ZXh0IDogdGhpcy54aHIucmVzcG9uc2UpXG4gICAgOiBudWxsO1xufVxuXG4vKipcbiAqIEdldCBjYXNlLWluc2Vuc2l0aXZlIGBmaWVsZGAgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihmaWVsZCl7XG4gIHJldHVybiB0aGlzLmhlYWRlcltmaWVsZC50b0xvd2VyQ2FzZSgpXTtcbn07XG5cbi8qKlxuICogU2V0IGhlYWRlciByZWxhdGVkIHByb3BlcnRpZXM6XG4gKlxuICogICAtIGAudHlwZWAgdGhlIGNvbnRlbnQgdHlwZSB3aXRob3V0IHBhcmFtc1xuICpcbiAqIEEgcmVzcG9uc2Ugb2YgXCJDb250ZW50LVR5cGU6IHRleHQvcGxhaW47IGNoYXJzZXQ9dXRmLThcIlxuICogd2lsbCBwcm92aWRlIHlvdSB3aXRoIGEgYC50eXBlYCBvZiBcInRleHQvcGxhaW5cIi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXNwb25zZS5wcm90b3R5cGUuX3NldEhlYWRlclByb3BlcnRpZXMgPSBmdW5jdGlvbihoZWFkZXIpe1xuICAvLyBjb250ZW50LXR5cGVcbiAgdmFyIGN0ID0gdGhpcy5oZWFkZXJbJ2NvbnRlbnQtdHlwZSddIHx8ICcnO1xuICB0aGlzLnR5cGUgPSB0eXBlKGN0KTtcblxuICAvLyBwYXJhbXNcbiAgdmFyIG9iaiA9IHBhcmFtcyhjdCk7XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHRoaXNba2V5XSA9IG9ialtrZXldO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYm9keSBgc3RyYC5cbiAqXG4gKiBVc2VkIGZvciBhdXRvLXBhcnNpbmcgb2YgYm9kaWVzLiBQYXJzZXJzXG4gKiBhcmUgZGVmaW5lZCBvbiB0aGUgYHN1cGVyYWdlbnQucGFyc2VgIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtNaXhlZH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS5fcGFyc2VCb2R5ID0gZnVuY3Rpb24oc3RyKXtcbiAgdmFyIHBhcnNlID0gcmVxdWVzdC5wYXJzZVt0aGlzLnR5cGVdO1xuICBpZiAoIXBhcnNlICYmIGlzSlNPTih0aGlzLnR5cGUpKSB7XG4gICAgcGFyc2UgPSByZXF1ZXN0LnBhcnNlWydhcHBsaWNhdGlvbi9qc29uJ107XG4gIH1cbiAgcmV0dXJuIHBhcnNlICYmIHN0ciAmJiAoc3RyLmxlbmd0aCB8fCBzdHIgaW5zdGFuY2VvZiBPYmplY3QpXG4gICAgPyBwYXJzZShzdHIpXG4gICAgOiBudWxsO1xufTtcblxuLyoqXG4gKiBTZXQgZmxhZ3Mgc3VjaCBhcyBgLm9rYCBiYXNlZCBvbiBgc3RhdHVzYC5cbiAqXG4gKiBGb3IgZXhhbXBsZSBhIDJ4eCByZXNwb25zZSB3aWxsIGdpdmUgeW91IGEgYC5va2Agb2YgX190cnVlX19cbiAqIHdoZXJlYXMgNXh4IHdpbGwgYmUgX19mYWxzZV9fIGFuZCBgLmVycm9yYCB3aWxsIGJlIF9fdHJ1ZV9fLiBUaGVcbiAqIGAuY2xpZW50RXJyb3JgIGFuZCBgLnNlcnZlckVycm9yYCBhcmUgYWxzbyBhdmFpbGFibGUgdG8gYmUgbW9yZVxuICogc3BlY2lmaWMsIGFuZCBgLnN0YXR1c1R5cGVgIGlzIHRoZSBjbGFzcyBvZiBlcnJvciByYW5naW5nIGZyb20gMS4uNVxuICogc29tZXRpbWVzIHVzZWZ1bCBmb3IgbWFwcGluZyByZXNwb25kIGNvbG9ycyBldGMuXG4gKlxuICogXCJzdWdhclwiIHByb3BlcnRpZXMgYXJlIGFsc28gZGVmaW5lZCBmb3IgY29tbW9uIGNhc2VzLiBDdXJyZW50bHkgcHJvdmlkaW5nOlxuICpcbiAqICAgLSAubm9Db250ZW50XG4gKiAgIC0gLmJhZFJlcXVlc3RcbiAqICAgLSAudW5hdXRob3JpemVkXG4gKiAgIC0gLm5vdEFjY2VwdGFibGVcbiAqICAgLSAubm90Rm91bmRcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXNwb25zZS5wcm90b3R5cGUuX3NldFN0YXR1c1Byb3BlcnRpZXMgPSBmdW5jdGlvbihzdGF0dXMpe1xuICAvLyBoYW5kbGUgSUU5IGJ1ZzogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDA0Njk3Mi9tc2llLXJldHVybnMtc3RhdHVzLWNvZGUtb2YtMTIyMy1mb3ItYWpheC1yZXF1ZXN0XG4gIGlmIChzdGF0dXMgPT09IDEyMjMpIHtcbiAgICBzdGF0dXMgPSAyMDQ7XG4gIH1cblxuICB2YXIgdHlwZSA9IHN0YXR1cyAvIDEwMCB8IDA7XG5cbiAgLy8gc3RhdHVzIC8gY2xhc3NcbiAgdGhpcy5zdGF0dXMgPSB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXM7XG4gIHRoaXMuc3RhdHVzVHlwZSA9IHR5cGU7XG5cbiAgLy8gYmFzaWNzXG4gIHRoaXMuaW5mbyA9IDEgPT0gdHlwZTtcbiAgdGhpcy5vayA9IDIgPT0gdHlwZTtcbiAgdGhpcy5jbGllbnRFcnJvciA9IDQgPT0gdHlwZTtcbiAgdGhpcy5zZXJ2ZXJFcnJvciA9IDUgPT0gdHlwZTtcbiAgdGhpcy5lcnJvciA9ICg0ID09IHR5cGUgfHwgNSA9PSB0eXBlKVxuICAgID8gdGhpcy50b0Vycm9yKClcbiAgICA6IGZhbHNlO1xuXG4gIC8vIHN1Z2FyXG4gIHRoaXMuYWNjZXB0ZWQgPSAyMDIgPT0gc3RhdHVzO1xuICB0aGlzLm5vQ29udGVudCA9IDIwNCA9PSBzdGF0dXM7XG4gIHRoaXMuYmFkUmVxdWVzdCA9IDQwMCA9PSBzdGF0dXM7XG4gIHRoaXMudW5hdXRob3JpemVkID0gNDAxID09IHN0YXR1cztcbiAgdGhpcy5ub3RBY2NlcHRhYmxlID0gNDA2ID09IHN0YXR1cztcbiAgdGhpcy5ub3RGb3VuZCA9IDQwNCA9PSBzdGF0dXM7XG4gIHRoaXMuZm9yYmlkZGVuID0gNDAzID09IHN0YXR1cztcbn07XG5cbi8qKlxuICogUmV0dXJuIGFuIGBFcnJvcmAgcmVwcmVzZW50YXRpdmUgb2YgdGhpcyByZXNwb25zZS5cbiAqXG4gKiBAcmV0dXJuIHtFcnJvcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLnRvRXJyb3IgPSBmdW5jdGlvbigpe1xuICB2YXIgcmVxID0gdGhpcy5yZXE7XG4gIHZhciBtZXRob2QgPSByZXEubWV0aG9kO1xuICB2YXIgdXJsID0gcmVxLnVybDtcblxuICB2YXIgbXNnID0gJ2Nhbm5vdCAnICsgbWV0aG9kICsgJyAnICsgdXJsICsgJyAoJyArIHRoaXMuc3RhdHVzICsgJyknO1xuICB2YXIgZXJyID0gbmV3IEVycm9yKG1zZyk7XG4gIGVyci5zdGF0dXMgPSB0aGlzLnN0YXR1cztcbiAgZXJyLm1ldGhvZCA9IG1ldGhvZDtcbiAgZXJyLnVybCA9IHVybDtcblxuICByZXR1cm4gZXJyO1xufTtcblxuLyoqXG4gKiBFeHBvc2UgYFJlc3BvbnNlYC5cbiAqL1xuXG5yZXF1ZXN0LlJlc3BvbnNlID0gUmVzcG9uc2U7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhIG5ldyBgUmVxdWVzdGAgd2l0aCB0aGUgZ2l2ZW4gYG1ldGhvZGAgYW5kIGB1cmxgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gUmVxdWVzdChtZXRob2QsIHVybCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuX3F1ZXJ5ID0gdGhpcy5fcXVlcnkgfHwgW107XG4gIHRoaXMubWV0aG9kID0gbWV0aG9kO1xuICB0aGlzLnVybCA9IHVybDtcbiAgdGhpcy5oZWFkZXIgPSB7fTsgLy8gcHJlc2VydmVzIGhlYWRlciBuYW1lIGNhc2VcbiAgdGhpcy5faGVhZGVyID0ge307IC8vIGNvZXJjZXMgaGVhZGVyIG5hbWVzIHRvIGxvd2VyY2FzZVxuICB0aGlzLm9uKCdlbmQnLCBmdW5jdGlvbigpe1xuICAgIHZhciBlcnIgPSBudWxsO1xuICAgIHZhciByZXMgPSBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIHJlcyA9IG5ldyBSZXNwb25zZShzZWxmKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIGVyciA9IG5ldyBFcnJvcignUGFyc2VyIGlzIHVuYWJsZSB0byBwYXJzZSB0aGUgcmVzcG9uc2UnKTtcbiAgICAgIGVyci5wYXJzZSA9IHRydWU7XG4gICAgICBlcnIub3JpZ2luYWwgPSBlO1xuICAgICAgLy8gaXNzdWUgIzY3NTogcmV0dXJuIHRoZSByYXcgcmVzcG9uc2UgaWYgdGhlIHJlc3BvbnNlIHBhcnNpbmcgZmFpbHNcbiAgICAgIGVyci5yYXdSZXNwb25zZSA9IHNlbGYueGhyICYmIHNlbGYueGhyLnJlc3BvbnNlVGV4dCA/IHNlbGYueGhyLnJlc3BvbnNlVGV4dCA6IG51bGw7XG4gICAgICAvLyBpc3N1ZSAjODc2OiByZXR1cm4gdGhlIGh0dHAgc3RhdHVzIGNvZGUgaWYgdGhlIHJlc3BvbnNlIHBhcnNpbmcgZmFpbHNcbiAgICAgIGVyci5zdGF0dXNDb2RlID0gc2VsZi54aHIgJiYgc2VsZi54aHIuc3RhdHVzID8gc2VsZi54aHIuc3RhdHVzIDogbnVsbDtcbiAgICAgIHJldHVybiBzZWxmLmNhbGxiYWNrKGVycik7XG4gICAgfVxuXG4gICAgc2VsZi5lbWl0KCdyZXNwb25zZScsIHJlcyk7XG5cbiAgICB2YXIgbmV3X2VycjtcbiAgICB0cnkge1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPCAyMDAgfHwgcmVzLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgbmV3X2VyciA9IG5ldyBFcnJvcihyZXMuc3RhdHVzVGV4dCB8fCAnVW5zdWNjZXNzZnVsIEhUVFAgcmVzcG9uc2UnKTtcbiAgICAgICAgbmV3X2Vyci5vcmlnaW5hbCA9IGVycjtcbiAgICAgICAgbmV3X2Vyci5yZXNwb25zZSA9IHJlcztcbiAgICAgICAgbmV3X2Vyci5zdGF0dXMgPSByZXMuc3RhdHVzO1xuICAgICAgfVxuICAgIH0gY2F0Y2goZSkge1xuICAgICAgbmV3X2VyciA9IGU7IC8vICM5ODUgdG91Y2hpbmcgcmVzIG1heSBjYXVzZSBJTlZBTElEX1NUQVRFX0VSUiBvbiBvbGQgQW5kcm9pZFxuICAgIH1cblxuICAgIC8vICMxMDAwIGRvbid0IGNhdGNoIGVycm9ycyBmcm9tIHRoZSBjYWxsYmFjayB0byBhdm9pZCBkb3VibGUgY2FsbGluZyBpdFxuICAgIGlmIChuZXdfZXJyKSB7XG4gICAgICBzZWxmLmNhbGxiYWNrKG5ld19lcnIsIHJlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYuY2FsbGJhY2sobnVsbCwgcmVzKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIE1peGluIGBFbWl0dGVyYCBhbmQgYHJlcXVlc3RCYXNlYC5cbiAqL1xuXG5FbWl0dGVyKFJlcXVlc3QucHJvdG90eXBlKTtcbmZvciAodmFyIGtleSBpbiByZXF1ZXN0QmFzZSkge1xuICBSZXF1ZXN0LnByb3RvdHlwZVtrZXldID0gcmVxdWVzdEJhc2Vba2V5XTtcbn1cblxuLyoqXG4gKiBTZXQgQ29udGVudC1UeXBlIHRvIGB0eXBlYCwgbWFwcGluZyB2YWx1ZXMgZnJvbSBgcmVxdWVzdC50eXBlc2AuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICBzdXBlcmFnZW50LnR5cGVzLnhtbCA9ICdhcHBsaWNhdGlvbi94bWwnO1xuICpcbiAqICAgICAgcmVxdWVzdC5wb3N0KCcvJylcbiAqICAgICAgICAudHlwZSgneG1sJylcbiAqICAgICAgICAuc2VuZCh4bWxzdHJpbmcpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogICAgICByZXF1ZXN0LnBvc3QoJy8nKVxuICogICAgICAgIC50eXBlKCdhcHBsaWNhdGlvbi94bWwnKVxuICogICAgICAgIC5zZW5kKHhtbHN0cmluZylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLnR5cGUgPSBmdW5jdGlvbih0eXBlKXtcbiAgdGhpcy5zZXQoJ0NvbnRlbnQtVHlwZScsIHJlcXVlc3QudHlwZXNbdHlwZV0gfHwgdHlwZSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgcmVzcG9uc2VUeXBlIHRvIGB2YWxgLiBQcmVzZW50bHkgdmFsaWQgcmVzcG9uc2VUeXBlcyBhcmUgJ2Jsb2InIGFuZFxuICogJ2FycmF5YnVmZmVyJy5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgIHJlcS5nZXQoJy8nKVxuICogICAgICAgIC5yZXNwb25zZVR5cGUoJ2Jsb2InKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5yZXNwb25zZVR5cGUgPSBmdW5jdGlvbih2YWwpe1xuICB0aGlzLl9yZXNwb25zZVR5cGUgPSB2YWw7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgQWNjZXB0IHRvIGB0eXBlYCwgbWFwcGluZyB2YWx1ZXMgZnJvbSBgcmVxdWVzdC50eXBlc2AuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICBzdXBlcmFnZW50LnR5cGVzLmpzb24gPSAnYXBwbGljYXRpb24vanNvbic7XG4gKlxuICogICAgICByZXF1ZXN0LmdldCgnL2FnZW50JylcbiAqICAgICAgICAuYWNjZXB0KCdqc29uJylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiAgICAgIHJlcXVlc3QuZ2V0KCcvYWdlbnQnKVxuICogICAgICAgIC5hY2NlcHQoJ2FwcGxpY2F0aW9uL2pzb24nKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhY2NlcHRcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5hY2NlcHQgPSBmdW5jdGlvbih0eXBlKXtcbiAgdGhpcy5zZXQoJ0FjY2VwdCcsIHJlcXVlc3QudHlwZXNbdHlwZV0gfHwgdHlwZSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgQXV0aG9yaXphdGlvbiBmaWVsZCB2YWx1ZSB3aXRoIGB1c2VyYCBhbmQgYHBhc3NgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1c2VyXG4gKiBAcGFyYW0ge1N0cmluZ30gcGFzc1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgd2l0aCAndHlwZScgcHJvcGVydHkgJ2F1dG8nIG9yICdiYXNpYycgKGRlZmF1bHQgJ2Jhc2ljJylcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5hdXRoID0gZnVuY3Rpb24odXNlciwgcGFzcywgb3B0aW9ucyl7XG4gIGlmICghb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7XG4gICAgICB0eXBlOiAnYmFzaWMnXG4gICAgfVxuICB9XG5cbiAgc3dpdGNoIChvcHRpb25zLnR5cGUpIHtcbiAgICBjYXNlICdiYXNpYyc6XG4gICAgICB2YXIgc3RyID0gYnRvYSh1c2VyICsgJzonICsgcGFzcyk7XG4gICAgICB0aGlzLnNldCgnQXV0aG9yaXphdGlvbicsICdCYXNpYyAnICsgc3RyKTtcbiAgICBicmVhaztcblxuICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXI7XG4gICAgICB0aGlzLnBhc3N3b3JkID0gcGFzcztcbiAgICBicmVhaztcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuKiBBZGQgcXVlcnktc3RyaW5nIGB2YWxgLlxuKlxuKiBFeGFtcGxlczpcbipcbiogICByZXF1ZXN0LmdldCgnL3Nob2VzJylcbiogICAgIC5xdWVyeSgnc2l6ZT0xMCcpXG4qICAgICAucXVlcnkoeyBjb2xvcjogJ2JsdWUnIH0pXG4qXG4qIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gdmFsXG4qIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuKiBAYXBpIHB1YmxpY1xuKi9cblxuUmVxdWVzdC5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbih2YWwpe1xuICBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIHZhbCkgdmFsID0gc2VyaWFsaXplKHZhbCk7XG4gIGlmICh2YWwpIHRoaXMuX3F1ZXJ5LnB1c2godmFsKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFF1ZXVlIHRoZSBnaXZlbiBgZmlsZWAgYXMgYW4gYXR0YWNobWVudCB0byB0aGUgc3BlY2lmaWVkIGBmaWVsZGAsXG4gKiB3aXRoIG9wdGlvbmFsIGBmaWxlbmFtZWAuXG4gKlxuICogYGBgIGpzXG4gKiByZXF1ZXN0LnBvc3QoJy91cGxvYWQnKVxuICogICAuYXR0YWNoKCdjb250ZW50JywgbmV3IEJsb2IoWyc8YSBpZD1cImFcIj48YiBpZD1cImJcIj5oZXkhPC9iPjwvYT4nXSwgeyB0eXBlOiBcInRleHQvaHRtbFwifSkpXG4gKiAgIC5lbmQoY2FsbGJhY2spO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKiBAcGFyYW0ge0Jsb2J8RmlsZX0gZmlsZVxuICogQHBhcmFtIHtTdHJpbmd9IGZpbGVuYW1lXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuYXR0YWNoID0gZnVuY3Rpb24oZmllbGQsIGZpbGUsIGZpbGVuYW1lKXtcbiAgdGhpcy5fZ2V0Rm9ybURhdGEoKS5hcHBlbmQoZmllbGQsIGZpbGUsIGZpbGVuYW1lIHx8IGZpbGUubmFtZSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuUmVxdWVzdC5wcm90b3R5cGUuX2dldEZvcm1EYXRhID0gZnVuY3Rpb24oKXtcbiAgaWYgKCF0aGlzLl9mb3JtRGF0YSkge1xuICAgIHRoaXMuX2Zvcm1EYXRhID0gbmV3IHJvb3QuRm9ybURhdGEoKTtcbiAgfVxuICByZXR1cm4gdGhpcy5fZm9ybURhdGE7XG59O1xuXG4vKipcbiAqIEludm9rZSB0aGUgY2FsbGJhY2sgd2l0aCBgZXJyYCBhbmQgYHJlc2BcbiAqIGFuZCBoYW5kbGUgYXJpdHkgY2hlY2suXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXJyXG4gKiBAcGFyYW0ge1Jlc3BvbnNlfSByZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmNhbGxiYWNrID0gZnVuY3Rpb24oZXJyLCByZXMpe1xuICB2YXIgZm4gPSB0aGlzLl9jYWxsYmFjaztcbiAgdGhpcy5jbGVhclRpbWVvdXQoKTtcbiAgZm4oZXJyLCByZXMpO1xufTtcblxuLyoqXG4gKiBJbnZva2UgY2FsbGJhY2sgd2l0aCB4LWRvbWFpbiBlcnJvci5cbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5jcm9zc0RvbWFpbkVycm9yID0gZnVuY3Rpb24oKXtcbiAgdmFyIGVyciA9IG5ldyBFcnJvcignUmVxdWVzdCBoYXMgYmVlbiB0ZXJtaW5hdGVkXFxuUG9zc2libGUgY2F1c2VzOiB0aGUgbmV0d29yayBpcyBvZmZsaW5lLCBPcmlnaW4gaXMgbm90IGFsbG93ZWQgYnkgQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luLCB0aGUgcGFnZSBpcyBiZWluZyB1bmxvYWRlZCwgZXRjLicpO1xuICBlcnIuY3Jvc3NEb21haW4gPSB0cnVlO1xuXG4gIGVyci5zdGF0dXMgPSB0aGlzLnN0YXR1cztcbiAgZXJyLm1ldGhvZCA9IHRoaXMubWV0aG9kO1xuICBlcnIudXJsID0gdGhpcy51cmw7XG5cbiAgdGhpcy5jYWxsYmFjayhlcnIpO1xufTtcblxuLyoqXG4gKiBJbnZva2UgY2FsbGJhY2sgd2l0aCB0aW1lb3V0IGVycm9yLlxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlcXVlc3QucHJvdG90eXBlLl90aW1lb3V0RXJyb3IgPSBmdW5jdGlvbigpe1xuICB2YXIgdGltZW91dCA9IHRoaXMuX3RpbWVvdXQ7XG4gIHZhciBlcnIgPSBuZXcgRXJyb3IoJ3RpbWVvdXQgb2YgJyArIHRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnKTtcbiAgZXJyLnRpbWVvdXQgPSB0aW1lb3V0O1xuICB0aGlzLmNhbGxiYWNrKGVycik7XG59O1xuXG4vKipcbiAqIENvbXBvc2UgcXVlcnlzdHJpbmcgdG8gYXBwZW5kIHRvIHJlcS51cmxcbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5fYXBwZW5kUXVlcnlTdHJpbmcgPSBmdW5jdGlvbigpe1xuICB2YXIgcXVlcnkgPSB0aGlzLl9xdWVyeS5qb2luKCcmJyk7XG4gIGlmIChxdWVyeSkge1xuICAgIHRoaXMudXJsICs9IH50aGlzLnVybC5pbmRleE9mKCc/JylcbiAgICAgID8gJyYnICsgcXVlcnlcbiAgICAgIDogJz8nICsgcXVlcnk7XG4gIH1cbn07XG5cbi8qKlxuICogSW5pdGlhdGUgcmVxdWVzdCwgaW52b2tpbmcgY2FsbGJhY2sgYGZuKHJlcylgXG4gKiB3aXRoIGFuIGluc3RhbmNlb2YgYFJlc3BvbnNlYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGZuKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgeGhyID0gdGhpcy54aHIgPSByZXF1ZXN0LmdldFhIUigpO1xuICB2YXIgdGltZW91dCA9IHRoaXMuX3RpbWVvdXQ7XG4gIHZhciBkYXRhID0gdGhpcy5fZm9ybURhdGEgfHwgdGhpcy5fZGF0YTtcblxuICAvLyBzdG9yZSBjYWxsYmFja1xuICB0aGlzLl9jYWxsYmFjayA9IGZuIHx8IG5vb3A7XG5cbiAgLy8gc3RhdGUgY2hhbmdlXG4gIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpe1xuICAgIGlmICg0ICE9IHhoci5yZWFkeVN0YXRlKSByZXR1cm47XG5cbiAgICAvLyBJbiBJRTksIHJlYWRzIHRvIGFueSBwcm9wZXJ0eSAoZS5nLiBzdGF0dXMpIG9mZiBvZiBhbiBhYm9ydGVkIFhIUiB3aWxsXG4gICAgLy8gcmVzdWx0IGluIHRoZSBlcnJvciBcIkNvdWxkIG5vdCBjb21wbGV0ZSB0aGUgb3BlcmF0aW9uIGR1ZSB0byBlcnJvciBjMDBjMDIzZlwiXG4gICAgdmFyIHN0YXR1cztcbiAgICB0cnkgeyBzdGF0dXMgPSB4aHIuc3RhdHVzIH0gY2F0Y2goZSkgeyBzdGF0dXMgPSAwOyB9XG5cbiAgICBpZiAoMCA9PSBzdGF0dXMpIHtcbiAgICAgIGlmIChzZWxmLnRpbWVkb3V0KSByZXR1cm4gc2VsZi5fdGltZW91dEVycm9yKCk7XG4gICAgICBpZiAoc2VsZi5fYWJvcnRlZCkgcmV0dXJuO1xuICAgICAgcmV0dXJuIHNlbGYuY3Jvc3NEb21haW5FcnJvcigpO1xuICAgIH1cbiAgICBzZWxmLmVtaXQoJ2VuZCcpO1xuICB9O1xuXG4gIC8vIHByb2dyZXNzXG4gIHZhciBoYW5kbGVQcm9ncmVzcyA9IGZ1bmN0aW9uKGUpe1xuICAgIGlmIChlLnRvdGFsID4gMCkge1xuICAgICAgZS5wZXJjZW50ID0gZS5sb2FkZWQgLyBlLnRvdGFsICogMTAwO1xuICAgIH1cbiAgICBlLmRpcmVjdGlvbiA9ICdkb3dubG9hZCc7XG4gICAgc2VsZi5lbWl0KCdwcm9ncmVzcycsIGUpO1xuICB9O1xuICBpZiAodGhpcy5oYXNMaXN0ZW5lcnMoJ3Byb2dyZXNzJykpIHtcbiAgICB4aHIub25wcm9ncmVzcyA9IGhhbmRsZVByb2dyZXNzO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKHhoci51cGxvYWQgJiYgdGhpcy5oYXNMaXN0ZW5lcnMoJ3Byb2dyZXNzJykpIHtcbiAgICAgIHhoci51cGxvYWQub25wcm9ncmVzcyA9IGhhbmRsZVByb2dyZXNzO1xuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgLy8gQWNjZXNzaW5nIHhoci51cGxvYWQgZmFpbHMgaW4gSUUgZnJvbSBhIHdlYiB3b3JrZXIsIHNvIGp1c3QgcHJldGVuZCBpdCBkb2Vzbid0IGV4aXN0LlxuICAgIC8vIFJlcG9ydGVkIGhlcmU6XG4gICAgLy8gaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy84MzcyNDUveG1saHR0cHJlcXVlc3QtdXBsb2FkLXRocm93cy1pbnZhbGlkLWFyZ3VtZW50LXdoZW4tdXNlZC1mcm9tLXdlYi13b3JrZXItY29udGV4dFxuICB9XG5cbiAgLy8gdGltZW91dFxuICBpZiAodGltZW91dCAmJiAhdGhpcy5fdGltZXIpIHtcbiAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHNlbGYudGltZWRvdXQgPSB0cnVlO1xuICAgICAgc2VsZi5hYm9ydCgpO1xuICAgIH0sIHRpbWVvdXQpO1xuICB9XG5cbiAgLy8gcXVlcnlzdHJpbmdcbiAgdGhpcy5fYXBwZW5kUXVlcnlTdHJpbmcoKTtcblxuICAvLyBpbml0aWF0ZSByZXF1ZXN0XG4gIGlmICh0aGlzLnVzZXJuYW1lICYmIHRoaXMucGFzc3dvcmQpIHtcbiAgICB4aHIub3Blbih0aGlzLm1ldGhvZCwgdGhpcy51cmwsIHRydWUsIHRoaXMudXNlcm5hbWUsIHRoaXMucGFzc3dvcmQpO1xuICB9IGVsc2Uge1xuICAgIHhoci5vcGVuKHRoaXMubWV0aG9kLCB0aGlzLnVybCwgdHJ1ZSk7XG4gIH1cblxuICAvLyBDT1JTXG4gIGlmICh0aGlzLl93aXRoQ3JlZGVudGlhbHMpIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuXG4gIC8vIGJvZHlcbiAgaWYgKCdHRVQnICE9IHRoaXMubWV0aG9kICYmICdIRUFEJyAhPSB0aGlzLm1ldGhvZCAmJiAnc3RyaW5nJyAhPSB0eXBlb2YgZGF0YSAmJiAhdGhpcy5faXNIb3N0KGRhdGEpKSB7XG4gICAgLy8gc2VyaWFsaXplIHN0dWZmXG4gICAgdmFyIGNvbnRlbnRUeXBlID0gdGhpcy5faGVhZGVyWydjb250ZW50LXR5cGUnXTtcbiAgICB2YXIgc2VyaWFsaXplID0gdGhpcy5fc2VyaWFsaXplciB8fCByZXF1ZXN0LnNlcmlhbGl6ZVtjb250ZW50VHlwZSA/IGNvbnRlbnRUeXBlLnNwbGl0KCc7JylbMF0gOiAnJ107XG4gICAgaWYgKCFzZXJpYWxpemUgJiYgaXNKU09OKGNvbnRlbnRUeXBlKSkgc2VyaWFsaXplID0gcmVxdWVzdC5zZXJpYWxpemVbJ2FwcGxpY2F0aW9uL2pzb24nXTtcbiAgICBpZiAoc2VyaWFsaXplKSBkYXRhID0gc2VyaWFsaXplKGRhdGEpO1xuICB9XG5cbiAgLy8gc2V0IGhlYWRlciBmaWVsZHNcbiAgZm9yICh2YXIgZmllbGQgaW4gdGhpcy5oZWFkZXIpIHtcbiAgICBpZiAobnVsbCA9PSB0aGlzLmhlYWRlcltmaWVsZF0pIGNvbnRpbnVlO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGZpZWxkLCB0aGlzLmhlYWRlcltmaWVsZF0pO1xuICB9XG5cbiAgaWYgKHRoaXMuX3Jlc3BvbnNlVHlwZSkge1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSB0aGlzLl9yZXNwb25zZVR5cGU7XG4gIH1cblxuICAvLyBzZW5kIHN0dWZmXG4gIHRoaXMuZW1pdCgncmVxdWVzdCcsIHRoaXMpO1xuXG4gIC8vIElFMTEgeGhyLnNlbmQodW5kZWZpbmVkKSBzZW5kcyAndW5kZWZpbmVkJyBzdHJpbmcgYXMgUE9TVCBwYXlsb2FkIChpbnN0ZWFkIG9mIG5vdGhpbmcpXG4gIC8vIFdlIG5lZWQgbnVsbCBoZXJlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXG4gIHhoci5zZW5kKHR5cGVvZiBkYXRhICE9PSAndW5kZWZpbmVkJyA/IGRhdGEgOiBudWxsKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5cbi8qKlxuICogRXhwb3NlIGBSZXF1ZXN0YC5cbiAqL1xuXG5yZXF1ZXN0LlJlcXVlc3QgPSBSZXF1ZXN0O1xuXG4vKipcbiAqIEdFVCBgdXJsYCB3aXRoIG9wdGlvbmFsIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfEZ1bmN0aW9ufSBbZGF0YV0gb3IgZm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QuZ2V0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdHRVQnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5xdWVyeShkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogSEVBRCBgdXJsYCB3aXRoIG9wdGlvbmFsIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfEZ1bmN0aW9ufSBbZGF0YV0gb3IgZm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QuaGVhZCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnSEVBRCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnNlbmQoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG4vKipcbiAqIE9QVElPTlMgcXVlcnkgdG8gYHVybGAgd2l0aCBvcHRpb25hbCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZHxGdW5jdGlvbn0gW2RhdGFdIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0Lm9wdGlvbnMgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ09QVElPTlMnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5zZW5kKGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxuLyoqXG4gKiBERUxFVEUgYHVybGAgd2l0aCBvcHRpb25hbCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGVsKHVybCwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnREVMRVRFJywgdXJsKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbnJlcXVlc3RbJ2RlbCddID0gZGVsO1xucmVxdWVzdFsnZGVsZXRlJ10gPSBkZWw7XG5cbi8qKlxuICogUEFUQ0ggYHVybGAgd2l0aCBvcHRpb25hbCBgZGF0YWAgYW5kIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfSBbZGF0YV1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QucGF0Y2ggPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ1BBVENIJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogUE9TVCBgdXJsYCB3aXRoIG9wdGlvbmFsIGBkYXRhYCBhbmQgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR9IFtkYXRhXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5wb3N0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdQT1NUJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogUFVUIGB1cmxgIHdpdGggb3B0aW9uYWwgYGRhdGFgIGFuZCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZHxGdW5jdGlvbn0gW2RhdGFdIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LnB1dCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnUFVUJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG4iLCIvKipcbiAqIENoZWNrIGlmIGBvYmpgIGlzIGFuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gIHJldHVybiBudWxsICE9PSBvYmogJiYgJ29iamVjdCcgPT09IHR5cGVvZiBvYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3Q7XG4iLCIvKipcbiAqIE1vZHVsZSBvZiBtaXhlZC1pbiBmdW5jdGlvbnMgc2hhcmVkIGJldHdlZW4gbm9kZSBhbmQgY2xpZW50IGNvZGVcbiAqL1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pcy1vYmplY3QnKTtcblxuLyoqXG4gKiBDbGVhciBwcmV2aW91cyB0aW1lb3V0LlxuICpcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLmNsZWFyVGltZW91dCA9IGZ1bmN0aW9uIF9jbGVhclRpbWVvdXQoKXtcbiAgdGhpcy5fdGltZW91dCA9IDA7XG4gIGNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBPdmVycmlkZSBkZWZhdWx0IHJlc3BvbnNlIGJvZHkgcGFyc2VyXG4gKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB0byBjb252ZXJ0IGluY29taW5nIGRhdGEgaW50byByZXF1ZXN0LmJvZHlcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gcGFyc2UoZm4pe1xuICB0aGlzLl9wYXJzZXIgPSBmbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIE92ZXJyaWRlIGRlZmF1bHQgcmVxdWVzdCBib2R5IHNlcmlhbGl6ZXJcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHRvIGNvbnZlcnQgZGF0YSBzZXQgdmlhIC5zZW5kIG9yIC5hdHRhY2ggaW50byBwYXlsb2FkIHRvIHNlbmRcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uIHNlcmlhbGl6ZShmbil7XG4gIHRoaXMuX3NlcmlhbGl6ZXIgPSBmbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCB0aW1lb3V0IHRvIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy50aW1lb3V0ID0gZnVuY3Rpb24gdGltZW91dChtcyl7XG4gIHRoaXMuX3RpbWVvdXQgPSBtcztcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFByb21pc2Ugc3VwcG9ydFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdFxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqL1xuXG5leHBvcnRzLnRoZW4gPSBmdW5jdGlvbiB0aGVuKHJlc29sdmUsIHJlamVjdCkge1xuICBpZiAoIXRoaXMuX2Z1bGxmaWxsZWRQcm9taXNlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuX2Z1bGxmaWxsZWRQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24oaW5uZXJSZXNvbHZlLCBpbm5lclJlamVjdCl7XG4gICAgICBzZWxmLmVuZChmdW5jdGlvbihlcnIsIHJlcyl7XG4gICAgICAgIGlmIChlcnIpIGlubmVyUmVqZWN0KGVycik7IGVsc2UgaW5uZXJSZXNvbHZlKHJlcyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdGhpcy5fZnVsbGZpbGxlZFByb21pc2UudGhlbihyZXNvbHZlLCByZWplY3QpO1xufVxuXG4vKipcbiAqIEFsbG93IGZvciBleHRlbnNpb25cbiAqL1xuXG5leHBvcnRzLnVzZSA9IGZ1bmN0aW9uIHVzZShmbikge1xuICBmbih0aGlzKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cblxuLyoqXG4gKiBHZXQgcmVxdWVzdCBoZWFkZXIgYGZpZWxkYC5cbiAqIENhc2UtaW5zZW5zaXRpdmUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuZ2V0ID0gZnVuY3Rpb24oZmllbGQpe1xuICByZXR1cm4gdGhpcy5faGVhZGVyW2ZpZWxkLnRvTG93ZXJDYXNlKCldO1xufTtcblxuLyoqXG4gKiBHZXQgY2FzZS1pbnNlbnNpdGl2ZSBoZWFkZXIgYGZpZWxkYCB2YWx1ZS5cbiAqIFRoaXMgaXMgYSBkZXByZWNhdGVkIGludGVybmFsIEFQSS4gVXNlIGAuZ2V0KGZpZWxkKWAgaW5zdGVhZC5cbiAqXG4gKiAoZ2V0SGVhZGVyIGlzIG5vIGxvbmdlciB1c2VkIGludGVybmFsbHkgYnkgdGhlIHN1cGVyYWdlbnQgY29kZSBiYXNlKVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKiBAZGVwcmVjYXRlZFxuICovXG5cbmV4cG9ydHMuZ2V0SGVhZGVyID0gZXhwb3J0cy5nZXQ7XG5cbi8qKlxuICogU2V0IGhlYWRlciBgZmllbGRgIHRvIGB2YWxgLCBvciBtdWx0aXBsZSBmaWVsZHMgd2l0aCBvbmUgb2JqZWN0LlxuICogQ2FzZS1pbnNlbnNpdGl2ZS5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgIHJlcS5nZXQoJy8nKVxuICogICAgICAgIC5zZXQoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJylcbiAqICAgICAgICAuc2V0KCdYLUFQSS1LZXknLCAnZm9vYmFyJylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiAgICAgIHJlcS5nZXQoJy8nKVxuICogICAgICAgIC5zZXQoeyBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJywgJ1gtQVBJLUtleSc6ICdmb29iYXInIH0pXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBmaWVsZFxuICogQHBhcmFtIHtTdHJpbmd9IHZhbFxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuc2V0ID0gZnVuY3Rpb24oZmllbGQsIHZhbCl7XG4gIGlmIChpc09iamVjdChmaWVsZCkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gZmllbGQpIHtcbiAgICAgIHRoaXMuc2V0KGtleSwgZmllbGRba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHRoaXMuX2hlYWRlcltmaWVsZC50b0xvd2VyQ2FzZSgpXSA9IHZhbDtcbiAgdGhpcy5oZWFkZXJbZmllbGRdID0gdmFsO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGhlYWRlciBgZmllbGRgLlxuICogQ2FzZS1pbnNlbnNpdGl2ZS5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICAgcmVxLmdldCgnLycpXG4gKiAgICAgICAgLnVuc2V0KCdVc2VyLUFnZW50JylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqL1xuZXhwb3J0cy51bnNldCA9IGZ1bmN0aW9uKGZpZWxkKXtcbiAgZGVsZXRlIHRoaXMuX2hlYWRlcltmaWVsZC50b0xvd2VyQ2FzZSgpXTtcbiAgZGVsZXRlIHRoaXMuaGVhZGVyW2ZpZWxkXTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFdyaXRlIHRoZSBmaWVsZCBgbmFtZWAgYW5kIGB2YWxgIGZvciBcIm11bHRpcGFydC9mb3JtLWRhdGFcIlxuICogcmVxdWVzdCBib2RpZXMuXG4gKlxuICogYGBgIGpzXG4gKiByZXF1ZXN0LnBvc3QoJy91cGxvYWQnKVxuICogICAuZmllbGQoJ2ZvbycsICdiYXInKVxuICogICAuZW5kKGNhbGxiYWNrKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ3xCbG9ifEZpbGV8QnVmZmVyfGZzLlJlYWRTdHJlYW19IHZhbFxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmZpZWxkID0gZnVuY3Rpb24obmFtZSwgdmFsKSB7XG4gIHRoaXMuX2dldEZvcm1EYXRhKCkuYXBwZW5kKG5hbWUsIHZhbCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBYm9ydCB0aGUgcmVxdWVzdCwgYW5kIGNsZWFyIHBvdGVudGlhbCB0aW1lb3V0LlxuICpcbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmFib3J0ID0gZnVuY3Rpb24oKXtcbiAgaWYgKHRoaXMuX2Fib3J0ZWQpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB0aGlzLl9hYm9ydGVkID0gdHJ1ZTtcbiAgdGhpcy54aHIgJiYgdGhpcy54aHIuYWJvcnQoKTsgLy8gYnJvd3NlclxuICB0aGlzLnJlcSAmJiB0aGlzLnJlcS5hYm9ydCgpOyAvLyBub2RlXG4gIHRoaXMuY2xlYXJUaW1lb3V0KCk7XG4gIHRoaXMuZW1pdCgnYWJvcnQnKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEVuYWJsZSB0cmFuc21pc3Npb24gb2YgY29va2llcyB3aXRoIHgtZG9tYWluIHJlcXVlc3RzLlxuICpcbiAqIE5vdGUgdGhhdCBmb3IgdGhpcyB0byB3b3JrIHRoZSBvcmlnaW4gbXVzdCBub3QgYmVcbiAqIHVzaW5nIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luXCIgd2l0aCBhIHdpbGRjYXJkLFxuICogYW5kIGFsc28gbXVzdCBzZXQgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFsc1wiXG4gKiB0byBcInRydWVcIi5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMud2l0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24oKXtcbiAgLy8gVGhpcyBpcyBicm93c2VyLW9ubHkgZnVuY3Rpb25hbGl0eS4gTm9kZSBzaWRlIGlzIG5vLW9wLlxuICB0aGlzLl93aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IHRoZSBtYXggcmVkaXJlY3RzIHRvIGBuYC4gRG9lcyBub3RpbmcgaW4gYnJvd3NlciBYSFIgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnJlZGlyZWN0cyA9IGZ1bmN0aW9uKG4pe1xuICB0aGlzLl9tYXhSZWRpcmVjdHMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQ29udmVydCB0byBhIHBsYWluIGphdmFzY3JpcHQgb2JqZWN0IChub3QgSlNPTiBzdHJpbmcpIG9mIHNjYWxhciBwcm9wZXJ0aWVzLlxuICogTm90ZSBhcyB0aGlzIG1ldGhvZCBpcyBkZXNpZ25lZCB0byByZXR1cm4gYSB1c2VmdWwgbm9uLXRoaXMgdmFsdWUsXG4gKiBpdCBjYW5ub3QgYmUgY2hhaW5lZC5cbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IGRlc2NyaWJpbmcgbWV0aG9kLCB1cmwsIGFuZCBkYXRhIG9mIHRoaXMgcmVxdWVzdFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnRvSlNPTiA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgbWV0aG9kOiB0aGlzLm1ldGhvZCxcbiAgICB1cmw6IHRoaXMudXJsLFxuICAgIGRhdGE6IHRoaXMuX2RhdGEsXG4gICAgaGVhZGVyczogdGhpcy5faGVhZGVyXG4gIH07XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGBvYmpgIGlzIGEgaG9zdCBvYmplY3QsXG4gKiB3ZSBkb24ndCB3YW50IHRvIHNlcmlhbGl6ZSB0aGVzZSA6KVxuICpcbiAqIFRPRE86IGZ1dHVyZSBwcm9vZiwgbW92ZSB0byBjb21wb2VudCBsYW5kXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmV4cG9ydHMuX2lzSG9zdCA9IGZ1bmN0aW9uIF9pc0hvc3Qob2JqKSB7XG4gIHZhciBzdHIgPSB7fS50b1N0cmluZy5jYWxsKG9iaik7XG5cbiAgc3dpdGNoIChzdHIpIHtcbiAgICBjYXNlICdbb2JqZWN0IEZpbGVdJzpcbiAgICBjYXNlICdbb2JqZWN0IEJsb2JdJzpcbiAgICBjYXNlICdbb2JqZWN0IEZvcm1EYXRhXSc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogU2VuZCBgZGF0YWAgYXMgdGhlIHJlcXVlc3QgYm9keSwgZGVmYXVsdGluZyB0aGUgYC50eXBlKClgIHRvIFwianNvblwiIHdoZW5cbiAqIGFuIG9iamVjdCBpcyBnaXZlbi5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgICAvLyBtYW51YWwganNvblxuICogICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgIC50eXBlKCdqc29uJylcbiAqICAgICAgICAgLnNlbmQoJ3tcIm5hbWVcIjpcInRqXCJ9JylcbiAqICAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiAgICAgICAvLyBhdXRvIGpzb25cbiAqICAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgICAuc2VuZCh7IG5hbWU6ICd0aicgfSlcbiAqICAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiAgICAgICAvLyBtYW51YWwgeC13d3ctZm9ybS11cmxlbmNvZGVkXG4gKiAgICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAqICAgICAgICAgLnR5cGUoJ2Zvcm0nKVxuICogICAgICAgICAuc2VuZCgnbmFtZT10aicpXG4gKiAgICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogICAgICAgLy8gYXV0byB4LXd3dy1mb3JtLXVybGVuY29kZWRcbiAqICAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgICAudHlwZSgnZm9ybScpXG4gKiAgICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqICAgICAgIC8vIGRlZmF1bHRzIHRvIHgtd3d3LWZvcm0tdXJsZW5jb2RlZFxuICogICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAqICAgICAgICAuc2VuZCgnbmFtZT10b2JpJylcbiAqICAgICAgICAuc2VuZCgnc3BlY2llcz1mZXJyZXQnKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBkYXRhXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5zZW5kID0gZnVuY3Rpb24oZGF0YSl7XG4gIHZhciBvYmogPSBpc09iamVjdChkYXRhKTtcbiAgdmFyIHR5cGUgPSB0aGlzLl9oZWFkZXJbJ2NvbnRlbnQtdHlwZSddO1xuXG4gIC8vIG1lcmdlXG4gIGlmIChvYmogJiYgaXNPYmplY3QodGhpcy5fZGF0YSkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgdGhpcy5fZGF0YVtrZXldID0gZGF0YVtrZXldO1xuICAgIH1cbiAgfSBlbHNlIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZGF0YSkge1xuICAgIC8vIGRlZmF1bHQgdG8geC13d3ctZm9ybS11cmxlbmNvZGVkXG4gICAgaWYgKCF0eXBlKSB0aGlzLnR5cGUoJ2Zvcm0nKTtcbiAgICB0eXBlID0gdGhpcy5faGVhZGVyWydjb250ZW50LXR5cGUnXTtcbiAgICBpZiAoJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgPT0gdHlwZSkge1xuICAgICAgdGhpcy5fZGF0YSA9IHRoaXMuX2RhdGFcbiAgICAgICAgPyB0aGlzLl9kYXRhICsgJyYnICsgZGF0YVxuICAgICAgICA6IGRhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2RhdGEgPSAodGhpcy5fZGF0YSB8fCAnJykgKyBkYXRhO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgfVxuXG4gIGlmICghb2JqIHx8IHRoaXMuX2lzSG9zdChkYXRhKSkgcmV0dXJuIHRoaXM7XG5cbiAgLy8gZGVmYXVsdCB0byBqc29uXG4gIGlmICghdHlwZSkgdGhpcy50eXBlKCdqc29uJyk7XG4gIHJldHVybiB0aGlzO1xufTtcbiIsIi8vIFRoZSBub2RlIGFuZCBicm93c2VyIG1vZHVsZXMgZXhwb3NlIHZlcnNpb25zIG9mIHRoaXMgd2l0aCB0aGVcbi8vIGFwcHJvcHJpYXRlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGJvdW5kIGFzIGZpcnN0IGFyZ3VtZW50XG4vKipcbiAqIElzc3VlIGEgcmVxdWVzdDpcbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICByZXF1ZXN0KCdHRVQnLCAnL3VzZXJzJykuZW5kKGNhbGxiYWNrKVxuICogICAgcmVxdWVzdCgnL3VzZXJzJykuZW5kKGNhbGxiYWNrKVxuICogICAgcmVxdWVzdCgnL3VzZXJzJywgY2FsbGJhY2spXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZFxuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHVybCBvciBjYWxsYmFja1xuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gcmVxdWVzdChSZXF1ZXN0Q29uc3RydWN0b3IsIG1ldGhvZCwgdXJsKSB7XG4gIC8vIGNhbGxiYWNrXG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiB1cmwpIHtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3RDb25zdHJ1Y3RvcignR0VUJywgbWV0aG9kKS5lbmQodXJsKTtcbiAgfVxuXG4gIC8vIHVybCBmaXJzdFxuICBpZiAoMiA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0Q29uc3RydWN0b3IoJ0dFVCcsIG1ldGhvZCk7XG4gIH1cblxuICByZXR1cm4gbmV3IFJlcXVlc3RDb25zdHJ1Y3RvcihtZXRob2QsIHVybCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWVzdDtcbiIsIm1vZHVsZS5leHBvcnRzPXtcbiAgXCJuYW1lXCI6IFwidmh4anNcIixcbiAgXCJ2ZXJzaW9uXCI6IFwiMS4wLjAtYmV0YS4yXCIsXG4gIFwiZGVzY3JpcHRpb25cIjogXCJWSFggSmF2YXNjcmlwdCBBUEkgQ2xpZW50XCIsXG4gIFwibWFpblwiOiBcInZoeC5qc1wiLFxuICBcImF1dGhvclwiOiBcIlZIWFwiLFxuICBcImhvbWVwYWdlXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL3ZoeC92aHgtbm9kZVwiLFxuICBcImNvbnRyaWJ1dG9yc1wiOiBbXCJEYXZpZCBHb256YWxleiA8ZGF2aWRAdmh4LnR2PiBcIiwgXCJTY290dCBSb2JlcnRzb24gPHNjb3R0QHZoeC50dj5cIl0sXG4gIFwibGljZW5zZVwiOiBcIk1JVFwiLFxuICBcInJlcG9zaXRvcnlcIjoge1xuICAgIFwidHlwZVwiOiBcImdpdFwiLFxuICAgIFwidXJsXCI6IFwiZ2l0Oi8vZ2l0aHViLmNvbS92aHgvdmh4LWpzLmdpdFwiXG4gIH0sXG4gIFwiYnVnczpcIjogXCJodHRwczovL2dpdGh1Yi5jb20vdmh4L3ZoeC1qcy9pc3N1ZXNcIixcbiAgXCJkZXZEZXBlbmRlbmNpZXNcIjoge1xuICAgIFwiYmFiZWwtY2xpXCI6IFwiXjYuMTEuNFwiLFxuICAgIFwiYmFiZWwtcHJlc2V0LWVzMjAxNVwiOiBcIl42LjkuMFwiLFxuICAgIFwiYmFiZWxpZnlcIjogXCJeNy4zLjBcIixcbiAgICBcImJyb3dzZXJpZnlcIjogXCJeMTMuMS4wXCIsXG4gICAgXCJndWxwXCI6IFwiXjMuOS4xXCIsXG4gICAgXCJndWxwLWJhYmVsXCI6IFwiXjYuMS4yXCIsXG4gICAgXCJndWxwLWJyb3dzZXJpZnlcIjogXCJeMC41LjFcIixcbiAgICBcImd1bHAtbGl2ZXJlbG9hZFwiOiBcIl4zLjguMVwiLFxuICAgIFwiZ3VscC1zb3VyY2VtYXBzXCI6IFwiXjEuNi4wXCIsXG4gICAgXCJndWxwLXVnbGlmeVwiOiBcIl4xLjUuNFwiLFxuICAgIFwic3VwZXJhZ2VudFwiOiBcIl4yLjEuMFwiLFxuICAgIFwidmlueWwtYnVmZmVyXCI6IFwiXjEuMC4wXCIsXG4gICAgXCJ2aW55bC1zb3VyY2Utc3RyZWFtXCI6IFwiXjEuMS4wXCJcbiAgfVxufVxuIl19\n"],"sourceRoot":"/source/"}