{"version":3,"sources":["vhx.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_VHX_DEFAULTS","HOST","PROTOCOL","API_VERSION","version","TIMEOUT","TOKEN_HOST","../package.json","2","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","Paginate","resource","args","this","_this","response","body","options","page","method","last","Math","ceil","total","count","map","callback","goToPage","num","merge","_embedded","object","concat","value","parseInt","3","_typeof","Symbol","iterator","obj","constructor","request","paginate","Resource","api","path","methods","isToken","_api","init","forEach","item","getMethod","params","http_method","client_method","match","parsed_params","isCallbackFunction","url","parseUrl","scope","makeRequest","collection","product","protocol","host","isObject","Date","token_expiration","type","timeout","qs","toString","keys","auth","headers","Authorization","getParams","read_only","undefined","token_host","token","ajaxRequest","withCredentials","set","query","end","err","errorHandler","status","statusCode","successHandler","get","error","JSON","parse","error_types","400","401","404","408","500","apply","./paginate","superagent","4","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","Browse","_Resource","getPrototypeOf","../resource","5","Collection","6","Customer","7","Product","8","Video","9","_interopRequireDefault","__esModule","default","_defaults","_defaults2","_collections","_collections2","_videos","_videos2","_customers","_customers2","_products","_products2","_browse","_browse2","_superagent","resources","collections","videos","products","customers","browse","vhx","opts","setToken","setApi","prepareResources","arguments","btoa","TOKEN_EXPIRES_IN","name","toLowerCase","substring","window","./defaults","./resources/browse","./resources/collections","./resources/customers","./resources/products","./resources/videos","10","Emitter","mixin","on","addEventListener","event","fn","_callbacks","push","once","off","removeListener","removeAllListeners","removeEventListener","callbacks","cb","splice","emit","slice","len","listeners","hasListeners","11","noop","serialize","pairs","pushEncodedKeyValuePair","join","val","Array","isArray","v","subkey","encodeURIComponent","parseString","str","pair","pos","split","indexOf","decodeURIComponent","parseHeader","index","line","field","lines","fields","pop","trim","isJSON","mime","test","shift","reduce","parts","Response","req","xhr","text","responseType","responseText","statusText","_setStatusProperties","header","getAllResponseHeaders","getResponseHeader","_setHeaderProperties","_parseBody","Request","_query","_header","res","original","rawResponse","new_err","del","root","console","warn","requestBase","bind","getXHR","XMLHttpRequest","location","ActiveXObject","replace","serializeObject","types","html","json","xml","urlencoded","form","form-data","application/x-www-form-urlencoded","application/json","stringify","ct","statusType","info","ok","clientError","serverError","toError","accepted","noContent","badRequest","unauthorized","notAcceptable","notFound","forbidden","msg","_responseType","accept","user","pass","username","password","attach","file","filename","_getFormData","append","_formData","FormData","_callback","clearTimeout","crossDomainError","crossDomain","_timeoutError","_timeout","_appendQueryString","data","_data","onreadystatechange","readyState","timedout","_aborted","handleProgress","direction","percent","loaded","onprogress","upload","_timer","setTimeout","abort","open","_withCredentials","_isHost","contentType","_serializer","setRequestHeader","send","head","patch","post","put","./is-object","./request","./request-base","emitter","12","13","_parser","ms","then","resolve","reject","_fullfilledPromise","Promise","innerResolve","innerReject","use","getHeader","unset","redirects","_maxRedirects","toJSON","14","RequestConstructor","15","description","main","author","homepage","contributors","license","repository","bugs:","devDependencies","babel-cli","babel-core","babel-preset-es2015","babelify","browserify","gulp","gulp-babel","gulp-browserify","gulp-livereload","gulp-sourcemaps","gulp-uglify","vinyl-buffer","vinyl-source-stream"],"mappings":"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","file":"../vhx.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _VHX_DEFAULTS = {\n  HOST: 'api.vhx.tv',\n  PROTOCOL: 'https://',\n  API_VERSION: require('../package.json').version,\n  TIMEOUT: '30000',\n  TOKEN_HOST: 'vhx.tv'\n};\n\nmodule.exports = _VHX_DEFAULTS;\n\n},{\"../package.json\":15}],2:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Paginate = function () {\n  function Paginate(resource, args) {\n    _classCallCheck(this, Paginate);\n\n    var _this = this;\n\n    _this.resource = resource;\n    _this.response = args.body;\n    _this.options = args.options;\n    _this.page = _this.options.page ? _this.options.page : 1;\n    _this.method = args.method;\n    _this.last = Math.ceil(args.body.total / (args.body.count * _this.page));\n\n    ['nextPage', 'previousPage', 'firstPage', 'lastPage'].map(function (key) {\n      _this.response[key] = function (callback) {\n        _this[key](_this, callback);\n      };\n    });\n\n    _this.response.goToPage = function (num, callback) {\n      _this.goToPage(_this, num, callback);\n    };\n\n    _this.response.merge = function (_this) {\n      _this._embedded[_this.object] = this._embedded[_this.object].concat(_this._embedded[_this.object]);\n      _this.count = this.count + _this.count;\n\n      return _this;\n    };\n  }\n\n  _createClass(Paginate, [{\n    key: 'get',\n    value: function get() {\n      var _this = this;\n\n      return _this.response;\n    }\n  }, {\n    key: 'nextPage',\n    value: function nextPage(_this, callback) {\n      _this.options.page = _this.page + 1;\n\n      if (_this.options.page > _this.last) {\n        throw 'No more pages to request';\n      }\n\n      _this.resource[_this.method](_this.options, callback);\n    }\n  }, {\n    key: 'previousPage',\n    value: function previousPage(_this, callback) {\n      if (_this.page === 1) {\n        throw 'No previous pages to request';\n      }\n\n      _this.options.page = _this.page - 1;\n      _this.resource[_this.method](_this.options, callback);\n    }\n  }, {\n    key: 'firstPage',\n    value: function firstPage(_this, callback) {\n      _this.options.page = 1;\n      _this.resource[_this.method](_this.options, callback);\n    }\n  }, {\n    key: 'lastPage',\n    value: function lastPage(_this, callback) {\n      _this.options.page = _this.last;\n      _this.resource[_this.method](_this.options, callback);\n    }\n  }, {\n    key: 'goToPage',\n    value: function goToPage(_this, num, callback) {\n      num = parseInt(num, 10);\n\n      if (num > 0 && num <= _this.last) {\n        _this.options.page = num;\n        return _this.resource[_this.method](_this.options, callback);\n      }\n\n      throw 'You must pass a valid page number';\n    }\n  }]);\n\n  return Paginate;\n}();\n\nmodule.exports = Paginate;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar request = require('superagent');\nvar paginate = require('./paginate');\n\nvar Resource = function () {\n  function Resource(api, path, methods, isToken) {\n    _classCallCheck(this, Resource);\n\n    var _this = this;\n    _this._api = api;\n    _this.methods = methods;\n    _this.path = path;\n\n    _this.init();\n  }\n\n  _createClass(Resource, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      _this.methods.forEach(function (item) {\n        var method = _this.getMethod(item);\n        var resource_type = _this.path || 'id';\n        var params = {\n          http_method: 'get', // superagent reads 'get' not 'GET'\n          client_method: method\n        };\n\n        if (method.match(/retrieve|items|files/i)) {\n          _this[method] = function (parsed_params, callback) {\n            if (_this.isCallbackFunction(callback)) {\n              params.callback = callback;\n            }\n\n            params.options = parsed_params;\n            params.url = this.parseUrl(parsed_params);\n            params.scope = item.scope ? item.scope : null;\n\n            _this.makeRequest(params);\n          };\n        } else {\n          _this[method] = function (options, callback) {\n            params.options = options;\n            params.url = this.parseUrl(options);\n            params.callback = callback;\n\n            _this.makeRequest(params);\n          };\n        }\n      });\n    }\n  }, {\n    key: 'parseUrl',\n    value: function parseUrl(params) {\n      if (params && params.collection) {\n        return params.collection;\n      }\n\n      if (params && params.product) {\n        if (!parseInt(params.product, 10)) {\n          return params.product;\n        }\n      }\n\n      if (params && this.path.match(/videos/)) {\n        return params;\n      }\n\n      if (params && this.path.match(/customers/)) {\n        return params;\n      }\n\n      return '' + this._api.protocol + this._api.host + '/' + this.path;\n    }\n  }, {\n    key: 'getMethod',\n    value: function getMethod(params) {\n      var _this = this;\n\n      if (_this.isObject(params) && params.method) {\n        return params.method;\n      } else {\n        return params;\n      }\n    }\n  }, {\n    key: 'needsToken',\n    value: function needsToken() {\n      return new Date() > this._api.token_expiration;\n    }\n  }, {\n    key: 'getParams',\n    value: function getParams(client_method, url, options, scope, type) {\n      var _this = this;\n      var params = {};\n\n      params.timeout = _this._api.timeout;\n      params.qs = options || null;\n      params.method = client_method;\n\n      if (Object.prototype.toString.call(url) === '[object Object]') {\n        params.url = url[Object.keys(url)];\n      } else {\n        params.url = url;\n      }\n\n      if (params.url.match(/videos|customers/) && !params.url.match(/watching|watchlist/)) {\n        params.qs = '';\n      }\n\n      if (client_method === 'all') {\n        params.qs = '';\n      }\n\n      if (client_method === 'all' && options && parseInt(options.product, 10)) {\n        params.qs = options;\n      }\n\n      if (_this._api.auth) {\n        params.headers = {\n          'Authorization': _this._api.auth\n        };\n      }\n\n      return params;\n    }\n  }, {\n    key: 'makeRequest',\n    value: function makeRequest(args) {\n      var params = this.getParams(args.client_method, args.url, args.options, args.scope, args.read_only);\n\n      if (this.isCallbackFunction(args.options)) {\n        args.callback = args.options;\n      }\n\n      if (_typeof(this._api.token_host) !== undefined) {\n        params.headers = {\n          'Authorization': 'Bearer ' + this._api.token\n        };\n\n        this.ajaxRequest(args, params);\n      } else {\n        this.ajaxRequest(args, params);\n      }\n    }\n  }, {\n    key: 'ajaxRequest',\n    value: function ajaxRequest(args, params) {\n      var _this = this;\n\n      request[args.http_method](params.url).withCredentials().set(params.headers || {}).set('Content-Type', 'application/json').query(params.qs).end(function (err, response) {\n        if (err && err.code === 'ETIMEDOUT') {\n          _this.errorHandler({\n            status: 408,\n            body: '{\"message\": \"The request timed out.\",\"documentation_url\": \"http://dev.vhx.tv/docs/api\"}',\n            callback: args.callback || ''\n          });\n        }\n\n        if (!err && response.statusCode >= 200 && response.statusCode < 300) {\n          _this.successHandler({\n            body: response.body || null,\n            callback: args.callback,\n            options: args.options,\n            object: _this.path,\n            method: args.client_method\n          });\n        } else {\n          _this.errorHandler({\n            status: 408,\n            body: '{\"message\": \"The request timed out.\",\"documentation_url\": \"http://dev.vhx.tv/docs/api\"}',\n            callback: args.callback || ''\n          });\n        }\n      });\n    }\n  }, {\n    key: 'successHandler',\n    value: function successHandler(args) {\n      var response = args.body;\n\n      if (args.body.count && args.body.count < args.body.total) {\n        response = new paginate(this, args).get();\n      }\n\n      response.object = args.object;\n\n      if (args.callback) {\n        args.callback(false, response);\n      }\n    }\n  }, {\n    key: 'errorHandler',\n    value: function errorHandler(args) {\n      var error = JSON.parse(args.body),\n          error_types = {\n        400: 'VHXInvalidRequestError',\n        401: 'VHXAuthenticationError',\n        404: 'VHXResourceNotFound',\n        408: 'VHXConnectionError',\n        500: 'VHXAPIError'\n      };\n\n      error.status = args.status;\n      error.type = error_types[error.status];\n\n      if (args.callback) {\n        args.callback(error, null);\n      }\n    }\n  }, {\n    key: 'isCallbackFunction',\n    value: function isCallbackFunction(obj) {\n      return !!(obj && obj.constructor && obj.call && obj.apply);\n    }\n  }, {\n    key: 'isObject',\n    value: function isObject(obj) {\n      var type = typeof obj === 'undefined' ? 'undefined' : _typeof(obj);\n      return type === 'function' || type === 'object' && !!obj;\n    }\n  }]);\n\n  return Resource;\n}();\n\n;\n\nmodule.exports = Resource;\n\n},{\"./paginate\":2,\"superagent\":11}],4:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Browse = function (_Resource) {\n  _inherits(Browse, _Resource);\n\n  function Browse(api) {\n    _classCallCheck(this, Browse);\n\n    return _possibleConstructorReturn(this, (Browse.__proto__ || Object.getPrototypeOf(Browse)).call(this, api, 'browse', ['all', 'list']));\n  }\n\n  return Browse;\n}(Resource);\n\n;\n\nmodule.exports = Browse;\n\n},{\"../resource\":3}],5:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Collection = function (_Resource) {\n  _inherits(Collection, _Resource);\n\n  function Collection(api) {\n    _classCallCheck(this, Collection);\n\n    return _possibleConstructorReturn(this, (Collection.__proto__ || Object.getPrototypeOf(Collection)).call(this, api, 'collections', ['all', 'list', 'items']));\n  }\n\n  return Collection;\n}(Resource);\n\n;\n\nmodule.exports = Collection;\n\n},{\"../resource\":3}],6:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Customer = function (_Resource) {\n  _inherits(Customer, _Resource);\n\n  function Customer(api) {\n    _classCallCheck(this, Customer);\n\n    return _possibleConstructorReturn(this, (Customer.__proto__ || Object.getPrototypeOf(Customer)).call(this, api, 'customers', ['retrieve', 'all']));\n  }\n\n  return Customer;\n}(Resource);\n\n;\n\nmodule.exports = Customer;\n\n},{\"../resource\":3}],7:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Product = function (_Resource) {\n  _inherits(Product, _Resource);\n\n  function Product(api) {\n    _classCallCheck(this, Product);\n\n    return _possibleConstructorReturn(this, (Product.__proto__ || Object.getPrototypeOf(Product)).call(this, api, 'products', ['retrieve', 'all']));\n  }\n\n  return Product;\n}(Resource);\n\n;\n\nmodule.exports = Product;\n\n},{\"../resource\":3}],8:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Video = function (_Resource) {\n  _inherits(Video, _Resource);\n\n  function Video(api) {\n    _classCallCheck(this, Video);\n\n    return _possibleConstructorReturn(this, (Video.__proto__ || Object.getPrototypeOf(Video)).call(this, api, 'videos', ['all', 'retrieve', 'files']));\n  }\n\n  return Video;\n}(Resource);\n\n;\n\nmodule.exports = Video;\n\n},{\"../resource\":3}],9:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nvar _collections = require('./resources/collections');\n\nvar _collections2 = _interopRequireDefault(_collections);\n\nvar _videos = require('./resources/videos');\n\nvar _videos2 = _interopRequireDefault(_videos);\n\nvar _customers = require('./resources/customers');\n\nvar _customers2 = _interopRequireDefault(_customers);\n\nvar _products = require('./resources/products');\n\nvar _products2 = _interopRequireDefault(_products);\n\nvar _browse = require('./resources/browse');\n\nvar _browse2 = _interopRequireDefault(_browse);\n\nvar _superagent = require('superagent');\n\nvar _superagent2 = _interopRequireDefault(_superagent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar resources = {\n  collections: _collections2.default,\n  videos: _videos2.default,\n  products: _products2.default,\n  customers: _customers2.default,\n  browse: _browse2.default\n};\n\nvar vhx = function () {\n  function vhx(key, opts) {\n    _classCallCheck(this, vhx);\n\n    var _this = this;\n\n    if (!(_this instanceof vhx)) {\n      return new vhx(key);\n    }\n\n    _this.api = opts.token_host ? _this.setToken(key, opts) : _this.setApi(key, opts);\n\n    _this.prepareResources();\n  }\n\n  _createClass(vhx, [{\n    key: 'setApi',\n    value: function setApi(key) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      return {\n        auth: 'Basic ' + btoa(key),\n        host: opts.host || _defaults2.default.HOST,\n        protocol: opts.protocol || _defaults2.default.PROTOCOL,\n        timeout: _defaults2.default.TIMEOUT,\n        token_expiration: null\n      };\n    }\n  }, {\n    key: 'setToken',\n    value: function setToken(key) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      return {\n        token: key,\n        host: opts.host || _defaults2.default.HOST,\n        protocol: opts.protocol || _defaults2.default.PROTOCOL,\n        timeout: _defaults2.default.TIMEOUT,\n        token_host: opts.token_host || _defaults2.default.TOKEN_HOST,\n        token_expiration: TOKEN_EXPIRES_IN\n      };\n    }\n  }, {\n    key: 'prepareResources',\n    value: function prepareResources() {\n      var _this = this;\n\n      for (var name in resources) {\n        _this[name[0].toLowerCase() + name.substring(1)] = new resources[name](_this.api);\n      }\n    }\n  }]);\n\n  return vhx;\n}();\n\nmodule.exports = vhx;\nwindow.vhx = vhx;\n\n},{\"./defaults\":1,\"./resources/browse\":4,\"./resources/collections\":5,\"./resources/customers\":6,\"./resources/products\":7,\"./resources/videos\":8,\"superagent\":11}],10:[function(require,module,exports){\n\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n\n},{}],11:[function(require,module,exports){\n/**\n * Root reference for iframes.\n */\n\nvar root;\nif (typeof window !== 'undefined') { // Browser window\n  root = window;\n} else if (typeof self !== 'undefined') { // Web Worker\n  root = self;\n} else { // Other environments\n  console.warn(\"Using browser-only version of superagent in non-browser environment\");\n  root = this;\n}\n\nvar Emitter = require('emitter');\nvar requestBase = require('./request-base');\nvar isObject = require('./is-object');\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Expose `request`.\n */\n\nvar request = module.exports = require('./request').bind(null, Request);\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  throw Error(\"Browser-only verison of superagent could not find XHR\");\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    pushEncodedKeyValuePair(pairs, key, obj[key]);\n  }\n  return pairs.join('&');\n}\n\n/**\n * Helps 'serialize' with serializing arrays.\n * Mutates the pairs array.\n *\n * @param {Array} pairs\n * @param {String} key\n * @param {Mixed} val\n */\n\nfunction pushEncodedKeyValuePair(pairs, key, val) {\n  if (val != null) {\n    if (Array.isArray(val)) {\n      val.forEach(function(v) {\n        pushEncodedKeyValuePair(pairs, key, v);\n      });\n    } else if (isObject(val)) {\n      for(var subkey in val) {\n        pushEncodedKeyValuePair(pairs, key + '[' + subkey + ']', val[subkey]);\n      }\n    } else {\n      pairs.push(encodeURIComponent(key)\n        + '=' + encodeURIComponent(val));\n    }\n  } else if (val === null) {\n    pairs.push(encodeURIComponent(key));\n  }\n}\n\n/**\n * Expose serialization method.\n */\n\n request.serializeObject = serialize;\n\n /**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var pair;\n  var pos;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    pos = pair.indexOf('=');\n    if (pos == -1) {\n      obj[decodeURIComponent(pair)] = '';\n    } else {\n      obj[decodeURIComponent(pair.slice(0, pos))] =\n        decodeURIComponent(pair.slice(pos + 1));\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'application/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\n request.serialize = {\n   'application/x-www-form-urlencoded': serialize,\n   'application/json': JSON.stringify\n };\n\n /**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  lines.pop(); // trailing CRLF\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Check if `mime` is json or has +json structured syntax suffix.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api private\n */\n\nfunction isJSON(mime) {\n  return /[\\/+]json\\b/.test(mime);\n}\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction type(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction params(str){\n  return str.split(/ *; */).reduce(function(obj, str){\n    var parts = str.split(/ *= */),\n        key = parts.shift(),\n        val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req, options) {\n  options = options || {};\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  this._setStatusProperties(this.xhr.status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this._setHeaderProperties(this.header);\n  this.body = this.req.method != 'HEAD'\n    ? this._parseBody(this.text ? this.text : this.xhr.response)\n    : null;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponse.prototype.get = function(field){\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponse.prototype._setHeaderProperties = function(header){\n  // content-type\n  var ct = this.header['content-type'] || '';\n  this.type = type(ct);\n\n  // params\n  var obj = params(ct);\n  for (var key in obj) this[key] = obj[key];\n};\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype._parseBody = function(str){\n  var parse = request.parse[this.type];\n  if (!parse && isJSON(this.type)) {\n    parse = request.parse['application/json'];\n  }\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponse.prototype._setStatusProperties = function(status){\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n\n  var type = status / 100 | 0;\n\n  // status / class\n  this.status = this.statusCode = status;\n  this.statusType = type;\n\n  // basics\n  this.info = 1 == type;\n  this.ok = 2 == type;\n  this.clientError = 4 == type;\n  this.serverError = 5 == type;\n  this.error = (4 == type || 5 == type)\n    ? this.toError()\n    : false;\n\n  // sugar\n  this.accepted = 202 == status;\n  this.noContent = 204 == status;\n  this.badRequest = 400 == status;\n  this.unauthorized = 401 == status;\n  this.notAcceptable = 406 == status;\n  this.notFound = 404 == status;\n  this.forbidden = 403 == status;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {}; // preserves header name case\n  this._header = {}; // coerces header names to lowercase\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      // issue #675: return the raw response if the response parsing fails\n      err.rawResponse = self.xhr && self.xhr.responseText ? self.xhr.responseText : null;\n      // issue #876: return the http status code if the response parsing fails\n      err.statusCode = self.xhr && self.xhr.status ? self.xhr.status : null;\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    var new_err;\n    try {\n      if (res.status < 200 || res.status >= 300) {\n        new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n        new_err.original = err;\n        new_err.response = res;\n        new_err.status = res.status;\n      }\n    } catch(e) {\n      new_err = e; // #985 touching res may cause INVALID_STATE_ERR on old Android\n    }\n\n    // #1000 don't catch errors from the callback to avoid double calling it\n    if (new_err) {\n      self.callback(new_err, res);\n    } else {\n      self.callback(null, res);\n    }\n  });\n}\n\n/**\n * Mixin `Emitter` and `requestBase`.\n */\n\nEmitter(Request.prototype);\nfor (var key in requestBase) {\n  Request.prototype[key] = requestBase[key];\n}\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set responseType to `val`. Presently valid responseTypes are 'blob' and\n * 'arraybuffer'.\n *\n * Examples:\n *\n *      req.get('/')\n *        .responseType('blob')\n *        .end(callback);\n *\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.responseType = function(val){\n  this._responseType = val;\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} pass\n * @param {Object} options with 'type' property 'auto' or 'basic' (default 'basic')\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass, options){\n  if (!options) {\n    options = {\n      type: 'basic'\n    }\n  }\n\n  switch (options.type) {\n    case 'basic':\n      var str = btoa(user + ':' + pass);\n      this.set('Authorization', 'Basic ' + str);\n    break;\n\n    case 'auto':\n      this.username = user;\n      this.password = pass;\n    break;\n  }\n  return this;\n};\n\n/**\n* Add query-string `val`.\n*\n* Examples:\n*\n*   request.get('/shoes')\n*     .query('size=10')\n*     .query({ color: 'blue' })\n*\n* @param {Object|String} val\n* @return {Request} for chaining\n* @api public\n*/\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `filename`.\n *\n * ``` js\n * request.post('/upload')\n *   .attach('content', new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String} filename\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, filename){\n  this._getFormData().append(field, file, filename || file.name);\n  return this;\n};\n\nRequest.prototype._getFormData = function(){\n  if (!this._formData) {\n    this._formData = new root.FormData();\n  }\n  return this._formData;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  var fn = this._callback;\n  this.clearTimeout();\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');\n  err.crossDomain = true;\n\n  err.status = this.status;\n  err.method = this.method;\n  err.url = this.url;\n\n  this.callback(err);\n};\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequest.prototype._timeoutError = function(){\n  var timeout = this._timeout;\n  var err = new Error('timeout of ' + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  this.callback(err);\n};\n\n/**\n * Compose querystring to append to req.url\n *\n * @api private\n */\n\nRequest.prototype._appendQueryString = function(){\n  var query = this._query.join('&');\n  if (query) {\n    this.url += ~this.url.indexOf('?')\n      ? '&' + query\n      : '?' + query;\n  }\n};\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  var self = this;\n  var xhr = this.xhr = request.getXHR();\n  var timeout = this._timeout;\n  var data = this._formData || this._data;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // state change\n  xhr.onreadystatechange = function(){\n    if (4 != xhr.readyState) return;\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (0 == status) {\n      if (self.timedout) return self._timeoutError();\n      if (self._aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(direction, e) {\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    e.direction = direction;\n    self.emit('progress', e);\n  }\n  if (this.hasListeners('progress')) {\n    try {\n      xhr.onprogress = handleProgress.bind(null, 'download');\n      if (xhr.upload) {\n        xhr.upload.onprogress = handleProgress.bind(null, 'upload');\n      }\n    } catch(e) {\n      // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n      // Reported here:\n      // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n    }\n  }\n\n  // timeout\n  if (timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self.timedout = true;\n      self.abort();\n    }, timeout);\n  }\n\n  // querystring\n  this._appendQueryString();\n\n  // initiate request\n  if (this.username && this.password) {\n    xhr.open(this.method, this.url, true, this.username, this.password);\n  } else {\n    xhr.open(this.method, this.url, true);\n  }\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if ('GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !this._isHost(data)) {\n    // serialize stuff\n    var contentType = this._header['content-type'];\n    var serialize = this._serializer || request.serialize[contentType ? contentType.split(';')[0] : ''];\n    if (!serialize && isJSON(contentType)) serialize = request.serialize['application/json'];\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n    xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  if (this._responseType) {\n    xhr.responseType = this._responseType;\n  }\n\n  // send stuff\n  this.emit('request', this);\n\n  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)\n  // We need null here if data is undefined\n  xhr.send(typeof data !== 'undefined' ? data : null);\n  return this;\n};\n\n\n/**\n * Expose `Request`.\n */\n\nrequest.Request = Request;\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn){\n  var req = request('GET', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn){\n  var req = request('HEAD', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * OPTIONS query to `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.options = function(url, data, fn){\n  var req = request('OPTIONS', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nfunction del(url, fn){\n  var req = request('DELETE', url);\n  if (fn) req.end(fn);\n  return req;\n};\n\nrequest['del'] = del;\nrequest['delete'] = del;\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn){\n  var req = request('PATCH', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn){\n  var req = request('POST', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn){\n  var req = request('PUT', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n},{\"./is-object\":12,\"./request\":14,\"./request-base\":13,\"emitter\":10}],12:[function(require,module,exports){\n/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return null !== obj && 'object' === typeof obj;\n}\n\nmodule.exports = isObject;\n\n},{}],13:[function(require,module,exports){\n/**\n * Module of mixed-in functions shared between node and client code\n */\nvar isObject = require('./is-object');\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nexports.clearTimeout = function _clearTimeout(){\n  this._timeout = 0;\n  clearTimeout(this._timer);\n  return this;\n};\n\n/**\n * Override default response body parser\n *\n * This function will be called to convert incoming data into request.body\n *\n * @param {Function}\n * @api public\n */\n\nexports.parse = function parse(fn){\n  this._parser = fn;\n  return this;\n};\n\n/**\n * Override default request body serializer\n *\n * This function will be called to convert data set via .send or .attach into payload to send\n *\n * @param {Function}\n * @api public\n */\n\nexports.serialize = function serialize(fn){\n  this._serializer = fn;\n  return this;\n};\n\n/**\n * Set timeout to `ms`.\n *\n * @param {Number} ms\n * @return {Request} for chaining\n * @api public\n */\n\nexports.timeout = function timeout(ms){\n  this._timeout = ms;\n  return this;\n};\n\n/**\n * Promise support\n *\n * @param {Function} resolve\n * @param {Function} reject\n * @return {Request}\n */\n\nexports.then = function then(resolve, reject) {\n  if (!this._fullfilledPromise) {\n    var self = this;\n    this._fullfilledPromise = new Promise(function(innerResolve, innerReject){\n      self.end(function(err, res){\n        if (err) innerReject(err); else innerResolve(res);\n      });\n    });\n  }\n  return this._fullfilledPromise.then(resolve, reject);\n}\n\nexports.catch = function(cb) {\n  return this.then(undefined, cb);\n};\n\n/**\n * Allow for extension\n */\n\nexports.use = function use(fn) {\n  fn(this);\n  return this;\n}\n\n\n/**\n * Get request header `field`.\n * Case-insensitive.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nexports.get = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Get case-insensitive header `field` value.\n * This is a deprecated internal API. Use `.get(field)` instead.\n *\n * (getHeader is no longer used internally by the superagent code base)\n *\n * @param {String} field\n * @return {String}\n * @api private\n * @deprecated\n */\n\nexports.getHeader = exports.get;\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n * Case-insensitive.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nexports.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n * Case-insensitive.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n */\nexports.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Write the field `name` and `val`, or multiple fields with one object\n * for \"multipart/form-data\" request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n *\n * request.post('/upload')\n *   .field({ foo: 'bar', baz: 'qux' })\n *   .end(callback);\n * ```\n *\n * @param {String|Object} name\n * @param {String|Blob|File|Buffer|fs.ReadStream} val\n * @return {Request} for chaining\n * @api public\n */\nexports.field = function(name, val) {\n\n  // name should be either a string or an object.\n  if (null === name ||  undefined === name) {\n    throw new Error('.field(name, val) name can not be empty');\n  }\n\n  if (isObject(name)) {\n    for (var key in name) {\n      this.field(key, name[key]);\n    }\n    return this;\n  }\n\n  // val should be defined now\n  if (null === val || undefined === val) {\n    throw new Error('.field(name, val) val can not be empty');\n  }\n  this._getFormData().append(name, val);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\nexports.abort = function(){\n  if (this._aborted) {\n    return this;\n  }\n  this._aborted = true;\n  this.xhr && this.xhr.abort(); // browser\n  this.req && this.req.abort(); // node\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nexports.withCredentials = function(){\n  // This is browser-only functionality. Node side is no-op.\n  this._withCredentials = true;\n  return this;\n};\n\n/**\n * Set the max redirects to `n`. Does noting in browser XHR implementation.\n *\n * @param {Number} n\n * @return {Request} for chaining\n * @api public\n */\n\nexports.redirects = function(n){\n  this._maxRedirects = n;\n  return this;\n};\n\n/**\n * Convert to a plain javascript object (not JSON string) of scalar properties.\n * Note as this method is designed to return a useful non-this value,\n * it cannot be chained.\n *\n * @return {Object} describing method, url, and data of this request\n * @api public\n */\n\nexports.toJSON = function(){\n  return {\n    method: this.method,\n    url: this.url,\n    data: this._data,\n    headers: this._header\n  };\n};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * TODO: future proof, move to compoent land\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nexports._isHost = function _isHost(obj) {\n  var str = {}.toString.call(obj);\n\n  switch (str) {\n    case '[object File]':\n    case '[object Blob]':\n    case '[object FormData]':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Send `data` as the request body, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"}')\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n *      request.post('/user')\n *        .send('name=tobi')\n *        .send('species=ferret')\n *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nexports.send = function(data){\n  var obj = isObject(data);\n  var type = this._header['content-type'];\n\n  // merge\n  if (obj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    // default to x-www-form-urlencoded\n    if (!type) this.type('form');\n    type = this._header['content-type'];\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!obj || this._isHost(data)) return this;\n\n  // default to json\n  if (!type) this.type('json');\n  return this;\n};\n\n},{\"./is-object\":12}],14:[function(require,module,exports){\n// The node and browser modules expose versions of this with the\n// appropriate constructor function bound as first argument\n/**\n * Issue a request:\n *\n * Examples:\n *\n *    request('GET', '/users').end(callback)\n *    request('/users').end(callback)\n *    request('/users', callback)\n *\n * @param {String} method\n * @param {String|Function} url or callback\n * @return {Request}\n * @api public\n */\n\nfunction request(RequestConstructor, method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new RequestConstructor('GET', method).end(url);\n  }\n\n  // url first\n  if (2 == arguments.length) {\n    return new RequestConstructor('GET', method);\n  }\n\n  return new RequestConstructor(method, url);\n}\n\nmodule.exports = request;\n\n},{}],15:[function(require,module,exports){\nmodule.exports={\n  \"name\": \"vhxjs\",\n  \"version\": \"1.0.0-beta.3\",\n  \"description\": \"VHX Javascript API Client\",\n  \"main\": \"vhx.js\",\n  \"author\": \"VHX\",\n  \"homepage\": \"https://github.com/vhx/vhx-node\",\n  \"contributors\": [\n    \"David Gonzalez <david@vhx.tv> \",\n    \"Scott Robertson <scott@vhx.tv>\"\n  ],\n  \"license\": \"MIT\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git://github.com/vhx/vhx-js.git\"\n  },\n  \"bugs:\": \"https://github.com/vhx/vhx-js/issues\",\n  \"devDependencies\": {\n    \"babel-cli\": \"^6.11.4\",\n    \"babel-core\": \"^6.18.2\",\n    \"babel-preset-es2015\": \"6.18.0\",\n    \"babelify\": \"^7.3.0\",\n    \"browserify\": \"^13.1.0\",\n    \"gulp\": \"^3.9.1\",\n    \"gulp-babel\": \"^6.1.2\",\n    \"gulp-browserify\": \"^0.5.1\",\n    \"gulp-livereload\": \"^3.8.1\",\n    \"gulp-sourcemaps\": \"^1.6.0\",\n    \"gulp-uglify\": \"^1.5.4\",\n    \"superagent\": \"^2.1.0\",\n    \"vinyl-buffer\": \"^1.0.0\",\n    \"vinyl-source-stream\": \"^1.1.0\"\n  }\n}\n\n},{}]},{},[9])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvZGVmYXVsdHMuanMiLCJsaWIvcGFnaW5hdGUuanMiLCJsaWIvcmVzb3VyY2UuanMiLCJsaWIvcmVzb3VyY2VzL2Jyb3dzZS5qcyIsImxpYi9yZXNvdXJjZXMvY29sbGVjdGlvbnMuanMiLCJsaWIvcmVzb3VyY2VzL2N1c3RvbWVycy5qcyIsImxpYi9yZXNvdXJjZXMvcHJvZHVjdHMuanMiLCJsaWIvcmVzb3VyY2VzL3ZpZGVvcy5qcyIsImxpYi92aHguanMiLCJub2RlX21vZHVsZXMvY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc3VwZXJhZ2VudC9saWIvY2xpZW50LmpzIiwibm9kZV9tb2R1bGVzL3N1cGVyYWdlbnQvbGliL2lzLW9iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9zdXBlcmFnZW50L2xpYi9yZXF1ZXN0LWJhc2UuanMiLCJub2RlX21vZHVsZXMvc3VwZXJhZ2VudC9saWIvcmVxdWVzdC5qcyIsInBhY2thZ2UuanNvbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBTSxnQkFBZ0I7QUFDcEIsUUFBTSxZQURjO0FBRXBCLFlBQVUsVUFGVTtBQUdwQixlQUFhLFFBQVEsaUJBQVIsRUFBMkIsT0FIcEI7QUFJcEIsV0FBUyxPQUpXO0FBS3BCLGNBQVk7QUFMUSxDQUF0Qjs7QUFTQSxPQUFPLE9BQVAsR0FBaUIsYUFBakI7OztBQ1RBOzs7Ozs7SUFFTSxRO0FBQ0osb0JBQVksUUFBWixFQUFzQixJQUF0QixFQUE0QjtBQUFBOztBQUMxQixRQUFJLFFBQVEsSUFBWjs7QUFFQSxVQUFNLFFBQU4sR0FBaUIsUUFBakI7QUFDQSxVQUFNLFFBQU4sR0FBaUIsS0FBSyxJQUF0QjtBQUNBLFVBQU0sT0FBTixHQUFpQixLQUFLLE9BQXRCO0FBQ0EsVUFBTSxJQUFOLEdBQWlCLE1BQU0sT0FBTixDQUFjLElBQWQsR0FBcUIsTUFB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25LQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2g5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImNvbnN0IF9WSFhfREVGQVVMVFMgPSB7XG4gIEhPU1Q6ICdhcGkudmh4LnR2JyxcbiAgUFJPVE9DT0w6ICdodHRwczovLycsXG4gIEFQSV9WRVJTSU9OOiByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uLFxuICBUSU1FT1VUOiAnMzAwMDAnLFxuICBUT0tFTl9IT1NUOiAndmh4LnR2J1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IF9WSFhfREVGQVVMVFM7XG4iLCIndXNlIHN0cmljdCc7XG5cbmNsYXNzIFBhZ2luYXRlIHtcbiAgY29uc3RydWN0b3IocmVzb3VyY2UsIGFyZ3MpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMucmVzb3VyY2UgPSByZXNvdXJjZTtcbiAgICBfdGhpcy5yZXNwb25zZSA9IGFyZ3MuYm9keTtcbiAgICBfdGhpcy5vcHRpb25zICA9IGFyZ3Mub3B0aW9ucztcbiAgICBfdGhpcy5wYWdlICAgICA9IF90aGlzLm9wdGlvbnMucGFnZSA/IF90aGlzLm9wdGlvbnMucGFnZSA6IDE7XG4gICAgX3RoaXMubWV0aG9kICAgPSBhcmdzLm1ldGhvZDtcbiAgICBfdGhpcy5sYXN0ICAgICA9IE1hdGguY2VpbChhcmdzLmJvZHkudG90YWwgLyAoYXJncy5ib2R5LmNvdW50ICogX3RoaXMucGFnZSkpO1xuXG4gICAgWyduZXh0UGFnZScsJ3ByZXZpb3VzUGFnZScsJ2ZpcnN0UGFnZScsJ2xhc3RQYWdlJ10ubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgX3RoaXMucmVzcG9uc2Vba2V5XSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIF90aGlzW2tleV0oX3RoaXMsIGNhbGxiYWNrKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBfdGhpcy5yZXNwb25zZS5nb1RvUGFnZSA9IGZ1bmN0aW9uKG51bSwgY2FsbGJhY2spIHtcbiAgICAgIF90aGlzLmdvVG9QYWdlKF90aGlzLCBudW0sIGNhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgX3RoaXMucmVzcG9uc2UubWVyZ2UgPSBmdW5jdGlvbihfdGhpcykge1xuICAgICAgX3RoaXMuX2VtYmVkZGVkW190aGlzLm9iamVjdF0gPSB0aGlzLl9lbWJlZGRlZFtfdGhpcy5vYmplY3RdLmNvbmNhdChfdGhpcy5fZW1iZWRkZWRbX3RoaXMub2JqZWN0XSk7XG4gICAgICBfdGhpcy5jb3VudCA9IHRoaXMuY291bnQgKyBfdGhpcy5jb3VudDtcblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH07XG4gIH1cblxuICBnZXQoKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiBfdGhpcy5yZXNwb25zZTtcbiAgfVxuXG4gIG5leHRQYWdlKF90aGlzLCBjYWxsYmFjaykge1xuICAgIF90aGlzLm9wdGlvbnMucGFnZSA9IF90aGlzLnBhZ2UgKyAxO1xuXG4gICAgaWYgKF90aGlzLm9wdGlvbnMucGFnZSA+IF90aGlzLmxhc3QpIHtcbiAgICAgIHRocm93ICdObyBtb3JlIHBhZ2VzIHRvIHJlcXVlc3QnO1xuICAgIH1cblxuICAgIF90aGlzLnJlc291cmNlW190aGlzLm1ldGhvZF0oX3RoaXMub3B0aW9ucywgY2FsbGJhY2spO1xuICB9XG5cbiAgcHJldmlvdXNQYWdlKF90aGlzLCBjYWxsYmFjaykge1xuICAgIGlmIChfdGhpcy5wYWdlID09PSAxKSB7XG4gICAgICB0aHJvdyAnTm8gcHJldmlvdXMgcGFnZXMgdG8gcmVxdWVzdCc7XG4gICAgfVxuXG4gICAgX3RoaXMub3B0aW9ucy5wYWdlID0gX3RoaXMucGFnZSAtIDE7XG4gICAgX3RoaXMucmVzb3VyY2VbX3RoaXMubWV0aG9kXShfdGhpcy5vcHRpb25zLCBjYWxsYmFjayk7XG4gIH1cblxuICBmaXJzdFBhZ2UoX3RoaXMsIGNhbGxiYWNrKSB7XG4gICAgX3RoaXMub3B0aW9ucy5wYWdlID0gMTtcbiAgICBfdGhpcy5yZXNvdXJjZVtfdGhpcy5tZXRob2RdKF90aGlzLm9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGxhc3RQYWdlKF90aGlzLCBjYWxsYmFjaykge1xuICAgIF90aGlzLm9wdGlvbnMucGFnZSA9IF90aGlzLmxhc3Q7XG4gICAgX3RoaXMucmVzb3VyY2VbX3RoaXMubWV0aG9kXShfdGhpcy5vcHRpb25zLCBjYWxsYmFjayk7XG4gIH1cblxuICBnb1RvUGFnZShfdGhpcywgbnVtLCBjYWxsYmFjaykge1xuICAgIG51bSA9IHBhcnNlSW50KG51bSwgMTApO1xuXG4gICAgaWYgKG51bSA+IDAgJiYgbnVtIDw9IF90aGlzLmxhc3QpIHtcbiAgICAgIF90aGlzLm9wdGlvbnMucGFnZSA9IG51bTtcbiAgICAgIHJldHVybiBfdGhpcy5yZXNvdXJjZVtfdGhpcy5tZXRob2RdKF90aGlzLm9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICB0aHJvdyAnWW91IG11c3QgcGFzcyBhIHZhbGlkIHBhZ2UgbnVtYmVyJztcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFBhZ2luYXRlOyIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJ3N1cGVyYWdlbnQnKTtcbmNvbnN0IHBhZ2luYXRlID0gcmVxdWlyZSgnLi9wYWdpbmF0ZScpO1xuXG5jbGFzcyBSZXNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKGFwaSwgcGF0aCwgbWV0aG9kcywgaXNUb2tlbikge1xuICAgIGxldCBfdGhpcyAgICAgICAgID0gdGhpcztcbiAgICBfdGhpcy5fYXBpICAgICAgICA9IGFwaTtcbiAgICBfdGhpcy5tZXRob2RzICAgICA9IG1ldGhvZHM7XG4gICAgX3RoaXMucGF0aCAgICAgICAgPSBwYXRoO1xuXG4gICAgX3RoaXMuaW5pdCgpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMubWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIGxldCBtZXRob2QgICAgICAgID0gX3RoaXMuZ2V0TWV0aG9kKGl0ZW0pO1xuICAgICAgbGV0IHJlc291cmNlX3R5cGUgPSBfdGhpcy5wYXRoIHx8ICdpZCc7XG4gICAgICBsZXQgcGFyYW1zID0ge1xuICAgICAgICBodHRwX21ldGhvZDogJ2dldCcsIC8vIHN1cGVyYWdlbnQgcmVhZHMgJ2dldCcgbm90ICdHRVQnXG4gICAgICAgIGNsaWVudF9tZXRob2Q6IG1ldGhvZFxuICAgICAgfTtcblxuICAgICAgaWYgKG1ldGhvZC5tYXRjaCgvcmV0cmlldmV8aXRlbXN8ZmlsZXMvaSkpIHtcbiAgICAgICAgX3RoaXNbbWV0aG9kXSA9IGZ1bmN0aW9uKHBhcnNlZF9wYXJhbXMsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgaWYgKF90aGlzLmlzQ2FsbGJhY2tGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgIHBhcmFtcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHBhcmFtcy5vcHRpb25zICAgPSBwYXJzZWRfcGFyYW1zO1xuICAgICAgICAgIHBhcmFtcy51cmwgICAgICAgPSB0aGlzLnBhcnNlVXJsKHBhcnNlZF9wYXJhbXMpO1xuICAgICAgICAgIHBhcmFtcy5zY29wZSAgICAgPSBpdGVtLnNjb3BlID8gaXRlbS5zY29wZSA6IG51bGw7XG5cbiAgICAgICAgICBfdGhpcy5tYWtlUmVxdWVzdChwYXJhbXMpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIF90aGlzW21ldGhvZF0gPSBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgICAgIHBhcmFtcy5vcHRpb25zICAgPSBvcHRpb25zO1xuICAgICAgICAgIHBhcmFtcy51cmwgICAgICAgPSB0aGlzLnBhcnNlVXJsKG9wdGlvbnMpO1xuICAgICAgICAgIHBhcmFtcy5jYWxsYmFjayAgPSBjYWxsYmFjaztcblxuICAgICAgICAgIF90aGlzLm1ha2VSZXF1ZXN0KHBhcmFtcyk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwYXJzZVVybChwYXJhbXMpIHtcbiAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5jb2xsZWN0aW9uKSB7XG4gICAgICByZXR1cm4gcGFyYW1zLmNvbGxlY3Rpb247XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMucHJvZHVjdCkge1xuICAgICAgaWYgKCFwYXJzZUludChwYXJhbXMucHJvZHVjdCwgMTApKSB7XG4gICAgICAgIHJldHVybiBwYXJhbXMucHJvZHVjdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocGFyYW1zICYmIHRoaXMucGF0aC5tYXRjaCgvdmlkZW9zLykpIHtcbiAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcyAmJiB0aGlzLnBhdGgubWF0Y2goL2N1c3RvbWVycy8pKSB7XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cblxuICAgIHJldHVybiBgJHt0aGlzLl9hcGkucHJvdG9jb2x9JHt0aGlzLl9hcGkuaG9zdH0vJHt0aGlzLnBhdGh9YDtcbiAgfVxuXG4gIGdldE1ldGhvZChwYXJhbXMpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKF90aGlzLmlzT2JqZWN0KHBhcmFtcykgJiYgcGFyYW1zLm1ldGhvZCkge1xuICAgICAgcmV0dXJuIHBhcmFtcy5tZXRob2Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfVxuICB9XG5cbiAgbmVlZHNUb2tlbigpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKSA+IHRoaXMuX2FwaS50b2tlbl9leHBpcmF0aW9uO1xuICB9XG5cbiAgZ2V0UGFyYW1zKGNsaWVudF9tZXRob2QsIHVybCwgb3B0aW9ucywgc2NvcGUsIHR5cGUpIHtcbiAgICBsZXQgX3RoaXMgID0gdGhpcztcbiAgICBsZXQgcGFyYW1zID0ge307XG5cbiAgICBwYXJhbXMudGltZW91dCA9IF90aGlzLl9hcGkudGltZW91dDtcbiAgICBwYXJhbXMucXMgICAgICA9IG9wdGlvbnMgfHwgbnVsbDtcbiAgICBwYXJhbXMubWV0aG9kICA9IGNsaWVudF9tZXRob2Q7XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHVybCkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICBwYXJhbXMudXJsID0gdXJsW09iamVjdC5rZXlzKHVybCldO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJhbXMudXJsID0gdXJsO1xuICAgIH1cblxuICAgIGlmIChwYXJhbXMudXJsLm1hdGNoKC92aWRlb3N8Y3VzdG9tZXJzLykgJiYgIXBhcmFtcy51cmwubWF0Y2goL3dhdGNoaW5nfHdhdGNobGlzdC8pKSB7XG4gICAgICBwYXJhbXMucXMgPSAnJztcbiAgICB9XG5cbiAgICBpZiAoY2xpZW50X21ldGhvZCA9PT0gJ2FsbCcpIHtcbiAgICAgIHBhcmFtcy5xcyA9ICcnO1xuICAgIH1cblxuICAgIGlmIChjbGllbnRfbWV0aG9kID09PSAnYWxsJyAmJiBvcHRpb25zICYmIHBhcnNlSW50KG9wdGlvbnMucHJvZHVjdCwgMTApKSB7XG4gICAgICBwYXJhbXMucXMgPSBvcHRpb25zO1xuICAgIH1cblxuICAgIGlmIChfdGhpcy5fYXBpLmF1dGgpIHtcbiAgICAgIHBhcmFtcy5oZWFkZXJzID0ge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IF90aGlzLl9hcGkuYXV0aFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgbWFrZVJlcXVlc3QoYXJncykge1xuICAgIGxldCBwYXJhbXMgPSB0aGlzLmdldFBhcmFtcyhhcmdzLmNsaWVudF9tZXRob2QsIGFyZ3MudXJsLCBhcmdzLm9wdGlvbnMsIGFyZ3Muc2NvcGUsIGFyZ3MucmVhZF9vbmx5KTtcblxuICAgIGlmICh0aGlzLmlzQ2FsbGJhY2tGdW5jdGlvbihhcmdzLm9wdGlvbnMpKSB7XG4gICAgICBhcmdzLmNhbGxiYWNrID0gYXJncy5vcHRpb25zO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGhpcy5fYXBpLnRva2VuX2hvc3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcGFyYW1zLmhlYWRlcnMgPSB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdGhpcy5fYXBpLnRva2VuXG4gICAgICB9XG5cbiAgICAgIHRoaXMuYWpheFJlcXVlc3QoYXJncywgcGFyYW1zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hamF4UmVxdWVzdChhcmdzLCBwYXJhbXMpO1xuICAgIH1cbiAgfVxuXG4gIGFqYXhSZXF1ZXN0KGFyZ3MsIHBhcmFtcykge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICByZXF1ZXN0W2FyZ3MuaHR0cF9tZXRob2RdKHBhcmFtcy51cmwpXG4gICAgICAud2l0aENyZWRlbnRpYWxzKClcbiAgICAgIC5zZXQocGFyYW1zLmhlYWRlcnMgfHwge30pXG4gICAgICAuc2V0KCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpXG4gICAgICAucXVlcnkocGFyYW1zLnFzKVxuICAgICAgLmVuZChmdW5jdGlvbihlcnIsIHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChlcnIgJiYgZXJyLmNvZGUgPT09ICdFVElNRURPVVQnKSB7XG4gICAgICAgICAgX3RoaXMuZXJyb3JIYW5kbGVyKHtcbiAgICAgICAgICAgIHN0YXR1czogNDA4LFxuICAgICAgICAgICAgYm9keTogJ3tcIm1lc3NhZ2VcIjogXCJUaGUgcmVxdWVzdCB0aW1lZCBvdXQuXCIsXCJkb2N1bWVudGF0aW9uX3VybFwiOiBcImh0dHA6Ly9kZXYudmh4LnR2L2RvY3MvYXBpXCJ9JyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoYXJncy5jYWxsYmFjayB8fCAnJylcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZXJyICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPCAzMDApIHtcbiAgICAgICAgICBfdGhpcy5zdWNjZXNzSGFuZGxlcih7XG4gICAgICAgICAgICBib2R5OiByZXNwb25zZS5ib2R5IHx8IG51bGwsXG4gICAgICAgICAgICBjYWxsYmFjazogYXJncy5jYWxsYmFjayxcbiAgICAgICAgICAgIG9wdGlvbnM6IGFyZ3Mub3B0aW9ucyxcbiAgICAgICAgICAgIG9iamVjdDogX3RoaXMucGF0aCxcbiAgICAgICAgICAgIG1ldGhvZDogYXJncy5jbGllbnRfbWV0aG9kXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3RoaXMuZXJyb3JIYW5kbGVyKHtcbiAgICAgICAgICAgIHN0YXR1czogNDA4LFxuICAgICAgICAgICAgYm9keTogJ3tcIm1lc3NhZ2VcIjogXCJUaGUgcmVxdWVzdCB0aW1lZCBvdXQuXCIsXCJkb2N1bWVudGF0aW9uX3VybFwiOiBcImh0dHA6Ly9kZXYudmh4LnR2L2RvY3MvYXBpXCJ9JyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoYXJncy5jYWxsYmFjayB8fCAnJylcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBzdWNjZXNzSGFuZGxlcihhcmdzKSB7XG4gICAgbGV0IHJlc3BvbnNlID0gYXJncy5ib2R5O1xuXG4gICAgaWYgKGFyZ3MuYm9keS5jb3VudCAmJiBhcmdzLmJvZHkuY291bnQgPCBhcmdzLmJvZHkudG90YWwpIHtcbiAgICAgIHJlc3BvbnNlID0gbmV3IHBhZ2luYXRlKHRoaXMsIGFyZ3MpLmdldCgpO1xuICAgIH1cblxuICAgIHJlc3BvbnNlLm9iamVjdCA9IGFyZ3Mub2JqZWN0O1xuXG4gICAgaWYgKGFyZ3MuY2FsbGJhY2spIHtcbiAgICAgIGFyZ3MuY2FsbGJhY2soZmFsc2UsIHJlc3BvbnNlKTtcbiAgICB9XG4gIH1cblxuICBlcnJvckhhbmRsZXIoYXJncykge1xuICAgIGxldCBlcnJvciA9IEpTT04ucGFyc2UoYXJncy5ib2R5KSxcbiAgICAgICAgZXJyb3JfdHlwZXMgPSB7XG4gICAgICAgICAgNDAwOiAnVkhYSW52YWxpZFJlcXVlc3RFcnJvcicsXG4gICAgICAgICAgNDAxOiAnVkhYQXV0aGVudGljYXRpb25FcnJvcicsXG4gICAgICAgICAgNDA0OiAnVkhYUmVzb3VyY2VOb3RGb3VuZCcsXG4gICAgICAgICAgNDA4OiAnVkhYQ29ubmVjdGlvbkVycm9yJyxcbiAgICAgICAgICA1MDA6ICdWSFhBUElFcnJvcidcbiAgICAgICAgfTtcblxuICAgIGVycm9yLnN0YXR1cyA9IGFyZ3Muc3RhdHVzO1xuICAgIGVycm9yLnR5cGUgPSBlcnJvcl90eXBlc1tlcnJvci5zdGF0dXNdO1xuXG4gICAgaWYgKGFyZ3MuY2FsbGJhY2spIHtcbiAgICAgIGFyZ3MuY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIGlzQ2FsbGJhY2tGdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5jb25zdHJ1Y3RvciAmJiBvYmouY2FsbCAmJiBvYmouYXBwbHkpO1xuICB9XG5cbiAgaXNPYmplY3Qob2JqKSB7XG4gICAgbGV0IHR5cGUgPSB0eXBlb2Ygb2JqO1xuICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhb2JqO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlc291cmNlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVzb3VyY2UgPSByZXF1aXJlKCcuLi9yZXNvdXJjZScpO1xuXG5jbGFzcyBCcm93c2UgZXh0ZW5kcyBSZXNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKGFwaSkge1xuICAgIHN1cGVyKGFwaSwgJ2Jyb3dzZScsIFsnYWxsJywgJ2xpc3QnXSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQnJvd3NlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVzb3VyY2UgPSByZXF1aXJlKCcuLi9yZXNvdXJjZScpO1xuXG5jbGFzcyBDb2xsZWN0aW9uIGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICdjb2xsZWN0aW9ucycsIFsnYWxsJywgJ2xpc3QnLCAnaXRlbXMnXSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ29sbGVjdGlvbjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFJlc291cmNlID0gcmVxdWlyZSgnLi4vcmVzb3VyY2UnKTtcblxuY2xhc3MgQ3VzdG9tZXIgZXh0ZW5kcyBSZXNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKGFwaSkge1xuICAgIHN1cGVyKGFwaSwgJ2N1c3RvbWVycycsIFsncmV0cmlldmUnLCAnYWxsJ10pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEN1c3RvbWVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVzb3VyY2UgPSByZXF1aXJlKCcuLi9yZXNvdXJjZScpO1xuXG5jbGFzcyBQcm9kdWN0IGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICdwcm9kdWN0cycsIFsncmV0cmlldmUnLCAnYWxsJ10pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByb2R1Y3Q7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBSZXNvdXJjZSA9IHJlcXVpcmUoJy4uL3Jlc291cmNlJyk7XG5cbmNsYXNzIFZpZGVvIGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICd2aWRlb3MnLCBbJ2FsbCcsICdyZXRyaWV2ZScsICdmaWxlcyddKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBWaWRlbztcbiIsImltcG9ydCBkZWZhdWx0cyBmcm9tICcuL2RlZmF1bHRzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vcmVzb3VyY2VzL2NvbGxlY3Rpb25zJztcbmltcG9ydCBWaWRlbyBmcm9tICcuL3Jlc291cmNlcy92aWRlb3MnO1xuaW1wb3J0IEN1c3RvbWVyIGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbWVycyc7XG5pbXBvcnQgUHJvZHVjdCBmcm9tICcuL3Jlc291cmNlcy9wcm9kdWN0cyc7XG5pbXBvcnQgQnJvd3NlIGZyb20gJy4vcmVzb3VyY2VzL2Jyb3dzZSc7XG5pbXBvcnQgcmVxdWVzdCBmcm9tICdzdXBlcmFnZW50JztcblxubGV0IHJlc291cmNlcyA9IHtcbiAgY29sbGVjdGlvbnMgOiBDb2xsZWN0aW9uLFxuICB2aWRlb3MgICAgICA6IFZpZGVvLFxuICBwcm9kdWN0cyAgICA6IFByb2R1Y3QsXG4gIGN1c3RvbWVycyAgIDogQ3VzdG9tZXIsXG4gIGJyb3dzZSAgICAgIDogQnJvd3NlXG59O1xuXG5jbGFzcyB2aHgge1xuICBjb25zdHJ1Y3RvcihrZXksIG9wdHMpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKCEoX3RoaXMgaW5zdGFuY2VvZiB2aHgpKSB7XG4gICAgICByZXR1cm4gbmV3IHZoeChrZXkpO1xuICAgIH1cblxuICAgIF90aGlzLmFwaSA9IG9wdHMudG9rZW5faG9zdCA/IF90aGlzLnNldFRva2VuKGtleSwgb3B0cykgOiBfdGhpcy5zZXRBcGkoa2V5LCBvcHRzKTtcblxuICAgIF90aGlzLnByZXBhcmVSZXNvdXJjZXMoKTtcbiAgfVxuXG4gIHNldEFwaShrZXksIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB7XG4gICAgICBhdXRoOiAnQmFzaWMgJyArIGJ0b2Eoa2V5KSxcbiAgICAgIGhvc3Q6IG9wdHMuaG9zdCB8fCBkZWZhdWx0cy5IT1NULFxuICAgICAgcHJvdG9jb2w6IG9wdHMucHJvdG9jb2wgfHwgZGVmYXVsdHMuUFJPVE9DT0wsXG4gICAgICB0aW1lb3V0OiBkZWZhdWx0cy5USU1FT1VULFxuICAgICAgdG9rZW5fZXhwaXJhdGlvbjogbnVsbFxuICAgIH07XG4gIH1cblxuICBzZXRUb2tlbihrZXksIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB7XG4gICAgICB0b2tlbjoga2V5LFxuICAgICAgaG9zdDogb3B0cy5ob3N0IHx8IGRlZmF1bHRzLkhPU1QsXG4gICAgICBwcm90b2NvbDogb3B0cy5wcm90b2NvbCB8fCBkZWZhdWx0cy5QUk9UT0NPTCxcbiAgICAgIHRpbWVvdXQ6IGRlZmF1bHRzLlRJTUVPVVQsXG4gICAgICB0b2tlbl9ob3N0OiBvcHRzLnRva2VuX2hvc3QgfHwgZGVmYXVsdHMuVE9LRU5fSE9TVCxcbiAgICAgIHRva2VuX2V4cGlyYXRpb246IFRPS0VOX0VYUElSRVNfSU5cbiAgICB9O1xuICB9XG5cbiAgcHJlcGFyZVJlc291cmNlcygpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgZm9yIChsZXQgbmFtZSBpbiByZXNvdXJjZXMpIHtcbiAgICAgIF90aGlzW25hbWVbMF0udG9Mb3dlckNhc2UoKSArIG5hbWUuc3Vic3RyaW5nKDEpXSA9IG5ldyByZXNvdXJjZXNbbmFtZV0oX3RoaXMuYXBpKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2aHg7XG53aW5kb3cudmh4ID0gdmh4O1xuIiwiXHJcbi8qKlxyXG4gKiBFeHBvc2UgYEVtaXR0ZXJgLlxyXG4gKi9cclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xyXG4gIG1vZHVsZS5leHBvcnRzID0gRW1pdHRlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgYSBuZXcgYEVtaXR0ZXJgLlxyXG4gKlxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIEVtaXR0ZXIob2JqKSB7XHJcbiAgaWYgKG9iaikgcmV0dXJuIG1peGluKG9iaik7XHJcbn07XHJcblxyXG4vKipcclxuICogTWl4aW4gdGhlIGVtaXR0ZXIgcHJvcGVydGllcy5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IG9ialxyXG4gKiBAcmV0dXJuIHtPYmplY3R9XHJcbiAqIEBhcGkgcHJpdmF0ZVxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIG1peGluKG9iaikge1xyXG4gIGZvciAodmFyIGtleSBpbiBFbWl0dGVyLnByb3RvdHlwZSkge1xyXG4gICAgb2JqW2tleV0gPSBFbWl0dGVyLnByb3RvdHlwZVtrZXldO1xyXG4gIH1cclxuICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG4vKipcclxuICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXHJcbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUub24gPVxyXG5FbWl0dGVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQsIGZuKXtcclxuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XHJcbiAgKHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gPSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdIHx8IFtdKVxyXG4gICAgLnB1c2goZm4pO1xyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxyXG4gKiB0aW1lIHRoZW4gYXV0b21hdGljYWxseSByZW1vdmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICogQHJldHVybiB7RW1pdHRlcn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24oZXZlbnQsIGZuKXtcclxuICBmdW5jdGlvbiBvbigpIHtcclxuICAgIHRoaXMub2ZmKGV2ZW50LCBvbik7XHJcbiAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gIH1cclxuXHJcbiAgb24uZm4gPSBmbjtcclxuICB0aGlzLm9uKGV2ZW50LCBvbik7XHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcclxuICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLm9mZiA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cclxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cclxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG5cclxuICAvLyBhbGxcclxuICBpZiAoMCA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLy8gc3BlY2lmaWMgZXZlbnRcclxuICB2YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcclxuICBpZiAoIWNhbGxiYWNrcykgcmV0dXJuIHRoaXM7XHJcblxyXG4gIC8vIHJlbW92ZSBhbGwgaGFuZGxlcnNcclxuICBpZiAoMSA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLy8gcmVtb3ZlIHNwZWNpZmljIGhhbmRsZXJcclxuICB2YXIgY2I7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcclxuICAgIGNiID0gY2FsbGJhY2tzW2ldO1xyXG4gICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcclxuICAgICAgY2FsbGJhY2tzLnNwbGljZShpLCAxKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEVtaXQgYGV2ZW50YCB3aXRoIHRoZSBnaXZlbiBhcmdzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtNaXhlZH0gLi4uXHJcbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XHJcbiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSlcclxuICAgICwgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcclxuXHJcbiAgaWYgKGNhbGxiYWNrcykge1xyXG4gICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICBjYWxsYmFja3NbaV0uYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gYXJyYXkgb2YgY2FsbGJhY2tzIGZvciBgZXZlbnRgLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHJldHVybiB7QXJyYXl9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24oZXZlbnQpe1xyXG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcclxuICByZXR1cm4gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB0aGlzIGVtaXR0ZXIgaGFzIGBldmVudGAgaGFuZGxlcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmhhc0xpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICByZXR1cm4gISEgdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aDtcclxufTtcclxuIiwiLyoqXG4gKiBSb290IHJlZmVyZW5jZSBmb3IgaWZyYW1lcy5cbiAqL1xuXG52YXIgcm9vdDtcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgeyAvLyBCcm93c2VyIHdpbmRvd1xuICByb290ID0gd2luZG93O1xufSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHsgLy8gV2ViIFdvcmtlclxuICByb290ID0gc2VsZjtcbn0gZWxzZSB7IC8vIE90aGVyIGVudmlyb25tZW50c1xuICBjb25zb2xlLndhcm4oXCJVc2luZyBicm93c2VyLW9ubHkgdmVyc2lvbiBvZiBzdXBlcmFnZW50IGluIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuICByb290ID0gdGhpcztcbn1cblxudmFyIEVtaXR0ZXIgPSByZXF1aXJlKCdlbWl0dGVyJyk7XG52YXIgcmVxdWVzdEJhc2UgPSByZXF1aXJlKCcuL3JlcXVlc3QtYmFzZScpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pcy1vYmplY3QnKTtcblxuLyoqXG4gKiBOb29wLlxuICovXG5cbmZ1bmN0aW9uIG5vb3AoKXt9O1xuXG4vKipcbiAqIEV4cG9zZSBgcmVxdWVzdGAuXG4gKi9cblxudmFyIHJlcXVlc3QgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpLmJpbmQobnVsbCwgUmVxdWVzdCk7XG5cbi8qKlxuICogRGV0ZXJtaW5lIFhIUi5cbiAqL1xuXG5yZXF1ZXN0LmdldFhIUiA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHJvb3QuWE1MSHR0cFJlcXVlc3RcbiAgICAgICYmICghcm9vdC5sb2NhdGlvbiB8fCAnZmlsZTonICE9IHJvb3QubG9jYXRpb24ucHJvdG9jb2xcbiAgICAgICAgICB8fCAhcm9vdC5BY3RpdmVYT2JqZWN0KSkge1xuICAgIHJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3Q7XG4gIH0gZWxzZSB7XG4gICAgdHJ5IHsgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MSFRUUCcpOyB9IGNhdGNoKGUpIHt9XG4gICAgdHJ5IHsgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNc3htbDIuWE1MSFRUUC42LjAnKTsgfSBjYXRjaChlKSB7fVxuICAgIHRyeSB7IHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTXN4bWwyLlhNTEhUVFAuMy4wJyk7IH0gY2F0Y2goZSkge31cbiAgICB0cnkgeyByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoJ01zeG1sMi5YTUxIVFRQJyk7IH0gY2F0Y2goZSkge31cbiAgfVxuICB0aHJvdyBFcnJvcihcIkJyb3dzZXItb25seSB2ZXJpc29uIG9mIHN1cGVyYWdlbnQgY291bGQgbm90IGZpbmQgWEhSXCIpO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UsIGFkZGVkIHRvIHN1cHBvcnQgSUUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbnZhciB0cmltID0gJycudHJpbVxuICA/IGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMudHJpbSgpOyB9XG4gIDogZnVuY3Rpb24ocykgeyByZXR1cm4gcy5yZXBsYWNlKC8oXlxccyp8XFxzKiQpL2csICcnKTsgfTtcblxuLyoqXG4gKiBTZXJpYWxpemUgdGhlIGdpdmVuIGBvYmpgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZShvYmopIHtcbiAgaWYgKCFpc09iamVjdChvYmopKSByZXR1cm4gb2JqO1xuICB2YXIgcGFpcnMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIHB1c2hFbmNvZGVkS2V5VmFsdWVQYWlyKHBhaXJzLCBrZXksIG9ialtrZXldKTtcbiAgfVxuICByZXR1cm4gcGFpcnMuam9pbignJicpO1xufVxuXG4vKipcbiAqIEhlbHBzICdzZXJpYWxpemUnIHdpdGggc2VyaWFsaXppbmcgYXJyYXlzLlxuICogTXV0YXRlcyB0aGUgcGFpcnMgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcGFpcnNcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7TWl4ZWR9IHZhbFxuICovXG5cbmZ1bmN0aW9uIHB1c2hFbmNvZGVkS2V5VmFsdWVQYWlyKHBhaXJzLCBrZXksIHZhbCkge1xuICBpZiAodmFsICE9IG51bGwpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICB2YWwuZm9yRWFjaChmdW5jdGlvbih2KSB7XG4gICAgICAgIHB1c2hFbmNvZGVkS2V5VmFsdWVQYWlyKHBhaXJzLCBrZXksIHYpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdCh2YWwpKSB7XG4gICAgICBmb3IodmFyIHN1YmtleSBpbiB2YWwpIHtcbiAgICAgICAgcHVzaEVuY29kZWRLZXlWYWx1ZVBhaXIocGFpcnMsIGtleSArICdbJyArIHN1YmtleSArICddJywgdmFsW3N1YmtleV0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwYWlycy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpXG4gICAgICAgICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICBwYWlycy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpKTtcbiAgfVxufVxuXG4vKipcbiAqIEV4cG9zZSBzZXJpYWxpemF0aW9uIG1ldGhvZC5cbiAqL1xuXG4gcmVxdWVzdC5zZXJpYWxpemVPYmplY3QgPSBzZXJpYWxpemU7XG5cbiAvKipcbiAgKiBQYXJzZSB0aGUgZ2l2ZW4geC13d3ctZm9ybS11cmxlbmNvZGVkIGBzdHJgLlxuICAqXG4gICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICAqIEByZXR1cm4ge09iamVjdH1cbiAgKiBAYXBpIHByaXZhdGVcbiAgKi9cblxuZnVuY3Rpb24gcGFyc2VTdHJpbmcoc3RyKSB7XG4gIHZhciBvYmogPSB7fTtcbiAgdmFyIHBhaXJzID0gc3RyLnNwbGl0KCcmJyk7XG4gIHZhciBwYWlyO1xuICB2YXIgcG9zO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwYWlycy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIHBhaXIgPSBwYWlyc1tpXTtcbiAgICBwb3MgPSBwYWlyLmluZGV4T2YoJz0nKTtcbiAgICBpZiAocG9zID09IC0xKSB7XG4gICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KHBhaXIpXSA9ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KHBhaXIuc2xpY2UoMCwgcG9zKSldID1cbiAgICAgICAgZGVjb2RlVVJJQ29tcG9uZW50KHBhaXIuc2xpY2UocG9zICsgMSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogRXhwb3NlIHBhcnNlci5cbiAqL1xuXG5yZXF1ZXN0LnBhcnNlU3RyaW5nID0gcGFyc2VTdHJpbmc7XG5cbi8qKlxuICogRGVmYXVsdCBNSU1FIHR5cGUgbWFwLlxuICpcbiAqICAgICBzdXBlcmFnZW50LnR5cGVzLnhtbCA9ICdhcHBsaWNhdGlvbi94bWwnO1xuICpcbiAqL1xuXG5yZXF1ZXN0LnR5cGVzID0ge1xuICBodG1sOiAndGV4dC9odG1sJyxcbiAganNvbjogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICB4bWw6ICdhcHBsaWNhdGlvbi94bWwnLFxuICB1cmxlbmNvZGVkOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgJ2Zvcm0nOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgJ2Zvcm0tZGF0YSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG59O1xuXG4vKipcbiAqIERlZmF1bHQgc2VyaWFsaXphdGlvbiBtYXAuXG4gKlxuICogICAgIHN1cGVyYWdlbnQuc2VyaWFsaXplWydhcHBsaWNhdGlvbi94bWwnXSA9IGZ1bmN0aW9uKG9iail7XG4gKiAgICAgICByZXR1cm4gJ2dlbmVyYXRlZCB4bWwgaGVyZSc7XG4gKiAgICAgfTtcbiAqXG4gKi9cblxuIHJlcXVlc3Quc2VyaWFsaXplID0ge1xuICAgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc6IHNlcmlhbGl6ZSxcbiAgICdhcHBsaWNhdGlvbi9qc29uJzogSlNPTi5zdHJpbmdpZnlcbiB9O1xuXG4gLyoqXG4gICogRGVmYXVsdCBwYXJzZXJzLlxuICAqXG4gICogICAgIHN1cGVyYWdlbnQucGFyc2VbJ2FwcGxpY2F0aW9uL3htbCddID0gZnVuY3Rpb24oc3RyKXtcbiAgKiAgICAgICByZXR1cm4geyBvYmplY3QgcGFyc2VkIGZyb20gc3RyIH07XG4gICogICAgIH07XG4gICpcbiAgKi9cblxucmVxdWVzdC5wYXJzZSA9IHtcbiAgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc6IHBhcnNlU3RyaW5nLFxuICAnYXBwbGljYXRpb24vanNvbic6IEpTT04ucGFyc2Vcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGhlYWRlciBgc3RyYCBpbnRvXG4gKiBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgbWFwcGVkIGZpZWxkcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZUhlYWRlcihzdHIpIHtcbiAgdmFyIGxpbmVzID0gc3RyLnNwbGl0KC9cXHI/XFxuLyk7XG4gIHZhciBmaWVsZHMgPSB7fTtcbiAgdmFyIGluZGV4O1xuICB2YXIgbGluZTtcbiAgdmFyIGZpZWxkO1xuICB2YXIgdmFsO1xuXG4gIGxpbmVzLnBvcCgpOyAvLyB0cmFpbGluZyBDUkxGXG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxpbmVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgbGluZSA9IGxpbmVzW2ldO1xuICAgIGluZGV4ID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAgZmllbGQgPSBsaW5lLnNsaWNlKDAsIGluZGV4KS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IHRyaW0obGluZS5zbGljZShpbmRleCArIDEpKTtcbiAgICBmaWVsZHNbZmllbGRdID0gdmFsO1xuICB9XG5cbiAgcmV0dXJuIGZpZWxkcztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBgbWltZWAgaXMganNvbiBvciBoYXMgK2pzb24gc3RydWN0dXJlZCBzeW50YXggc3VmZml4LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtaW1lXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gaXNKU09OKG1pbWUpIHtcbiAgcmV0dXJuIC9bXFwvK11qc29uXFxiLy50ZXN0KG1pbWUpO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgbWltZSB0eXBlIGZvciB0aGUgZ2l2ZW4gYHN0cmAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gdHlwZShzdHIpe1xuICByZXR1cm4gc3RyLnNwbGl0KC8gKjsgKi8pLnNoaWZ0KCk7XG59O1xuXG4vKipcbiAqIFJldHVybiBoZWFkZXIgZmllbGQgcGFyYW1ldGVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJhbXMoc3RyKXtcbiAgcmV0dXJuIHN0ci5zcGxpdCgvICo7ICovKS5yZWR1Y2UoZnVuY3Rpb24ob2JqLCBzdHIpe1xuICAgIHZhciBwYXJ0cyA9IHN0ci5zcGxpdCgvICo9ICovKSxcbiAgICAgICAga2V5ID0gcGFydHMuc2hpZnQoKSxcbiAgICAgICAgdmFsID0gcGFydHMuc2hpZnQoKTtcblxuICAgIGlmIChrZXkgJiYgdmFsKSBvYmpba2V5XSA9IHZhbDtcbiAgICByZXR1cm4gb2JqO1xuICB9LCB7fSk7XG59O1xuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgYFJlc3BvbnNlYCB3aXRoIHRoZSBnaXZlbiBgeGhyYC5cbiAqXG4gKiAgLSBzZXQgZmxhZ3MgKC5vaywgLmVycm9yLCBldGMpXG4gKiAgLSBwYXJzZSBoZWFkZXJcbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgQWxpYXNpbmcgYHN1cGVyYWdlbnRgIGFzIGByZXF1ZXN0YCBpcyBuaWNlOlxuICpcbiAqICAgICAgcmVxdWVzdCA9IHN1cGVyYWdlbnQ7XG4gKlxuICogIFdlIGNhbiB1c2UgdGhlIHByb21pc2UtbGlrZSBBUEksIG9yIHBhc3MgY2FsbGJhY2tzOlxuICpcbiAqICAgICAgcmVxdWVzdC5nZXQoJy8nKS5lbmQoZnVuY3Rpb24ocmVzKXt9KTtcbiAqICAgICAgcmVxdWVzdC5nZXQoJy8nLCBmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqICBTZW5kaW5nIGRhdGEgY2FuIGJlIGNoYWluZWQ6XG4gKlxuICogICAgICByZXF1ZXN0XG4gKiAgICAgICAgLnBvc3QoJy91c2VyJylcbiAqICAgICAgICAuc2VuZCh7IG5hbWU6ICd0aicgfSlcbiAqICAgICAgICAuZW5kKGZ1bmN0aW9uKHJlcyl7fSk7XG4gKlxuICogIE9yIHBhc3NlZCB0byBgLnNlbmQoKWA6XG4gKlxuICogICAgICByZXF1ZXN0XG4gKiAgICAgICAgLnBvc3QoJy91c2VyJylcbiAqICAgICAgICAuc2VuZCh7IG5hbWU6ICd0aicgfSwgZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiAgT3IgcGFzc2VkIHRvIGAucG9zdCgpYDpcbiAqXG4gKiAgICAgIHJlcXVlc3RcbiAqICAgICAgICAucG9zdCgnL3VzZXInLCB7IG5hbWU6ICd0aicgfSlcbiAqICAgICAgICAuZW5kKGZ1bmN0aW9uKHJlcyl7fSk7XG4gKlxuICogT3IgZnVydGhlciByZWR1Y2VkIHRvIGEgc2luZ2xlIGNhbGwgZm9yIHNpbXBsZSBjYXNlczpcbiAqXG4gKiAgICAgIHJlcXVlc3RcbiAqICAgICAgICAucG9zdCgnL3VzZXInLCB7IG5hbWU6ICd0aicgfSwgZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiBAcGFyYW0ge1hNTEhUVFBSZXF1ZXN0fSB4aHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBSZXNwb25zZShyZXEsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHRoaXMucmVxID0gcmVxO1xuICB0aGlzLnhociA9IHRoaXMucmVxLnhocjtcbiAgLy8gcmVzcG9uc2VUZXh0IGlzIGFjY2Vzc2libGUgb25seSBpZiByZXNwb25zZVR5cGUgaXMgJycgb3IgJ3RleHQnIGFuZCBvbiBvbGRlciBicm93c2Vyc1xuICB0aGlzLnRleHQgPSAoKHRoaXMucmVxLm1ldGhvZCAhPSdIRUFEJyAmJiAodGhpcy54aHIucmVzcG9uc2VUeXBlID09PSAnJyB8fCB0aGlzLnhoci5yZXNwb25zZVR5cGUgPT09ICd0ZXh0JykpIHx8IHR5cGVvZiB0aGlzLnhoci5yZXNwb25zZVR5cGUgPT09ICd1bmRlZmluZWQnKVxuICAgICA/IHRoaXMueGhyLnJlc3BvbnNlVGV4dFxuICAgICA6IG51bGw7XG4gIHRoaXMuc3RhdHVzVGV4dCA9IHRoaXMucmVxLnhoci5zdGF0dXNUZXh0O1xuICB0aGlzLl9zZXRTdGF0dXNQcm9wZXJ0aWVzKHRoaXMueGhyLnN0YXR1cyk7XG4gIHRoaXMuaGVhZGVyID0gdGhpcy5oZWFkZXJzID0gcGFyc2VIZWFkZXIodGhpcy54aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuICAvLyBnZXRBbGxSZXNwb25zZUhlYWRlcnMgc29tZXRpbWVzIGZhbHNlbHkgcmV0dXJucyBcIlwiIGZvciBDT1JTIHJlcXVlc3RzLCBidXRcbiAgLy8gZ2V0UmVzcG9uc2VIZWFkZXIgc3RpbGwgd29ya3MuIHNvIHdlIGdldCBjb250ZW50LXR5cGUgZXZlbiBpZiBnZXR0aW5nXG4gIC8vIG90aGVyIGhlYWRlcnMgZmFpbHMuXG4gIHRoaXMuaGVhZGVyWydjb250ZW50LXR5cGUnXSA9IHRoaXMueGhyLmdldFJlc3BvbnNlSGVhZGVyKCdjb250ZW50LXR5cGUnKTtcbiAgdGhpcy5fc2V0SGVhZGVyUHJvcGVydGllcyh0aGlzLmhlYWRlcik7XG4gIHRoaXMuYm9keSA9IHRoaXMucmVxLm1ldGhvZCAhPSAnSEVBRCdcbiAgICA/IHRoaXMuX3BhcnNlQm9keSh0aGlzLnRleHQgPyB0aGlzLnRleHQgOiB0aGlzLnhoci5yZXNwb25zZSlcbiAgICA6IG51bGw7XG59XG5cbi8qKlxuICogR2V0IGNhc2UtaW5zZW5zaXRpdmUgYGZpZWxkYCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGZpZWxkKXtcbiAgcmV0dXJuIHRoaXMuaGVhZGVyW2ZpZWxkLnRvTG93ZXJDYXNlKCldO1xufTtcblxuLyoqXG4gKiBTZXQgaGVhZGVyIHJlbGF0ZWQgcHJvcGVydGllczpcbiAqXG4gKiAgIC0gYC50eXBlYCB0aGUgY29udGVudCB0eXBlIHdpdGhvdXQgcGFyYW1zXG4gKlxuICogQSByZXNwb25zZSBvZiBcIkNvbnRlbnQtVHlwZTogdGV4dC9wbGFpbjsgY2hhcnNldD11dGYtOFwiXG4gKiB3aWxsIHByb3ZpZGUgeW91IHdpdGggYSBgLnR5cGVgIG9mIFwidGV4dC9wbGFpblwiLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS5fc2V0SGVhZGVyUHJvcGVydGllcyA9IGZ1bmN0aW9uKGhlYWRlcil7XG4gIC8vIGNvbnRlbnQtdHlwZVxuICB2YXIgY3QgPSB0aGlzLmhlYWRlclsnY29udGVudC10eXBlJ10gfHwgJyc7XG4gIHRoaXMudHlwZSA9IHR5cGUoY3QpO1xuXG4gIC8vIHBhcmFtc1xuICB2YXIgb2JqID0gcGFyYW1zKGN0KTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikgdGhpc1trZXldID0gb2JqW2tleV07XG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBib2R5IGBzdHJgLlxuICpcbiAqIFVzZWQgZm9yIGF1dG8tcGFyc2luZyBvZiBib2RpZXMuIFBhcnNlcnNcbiAqIGFyZSBkZWZpbmVkIG9uIHRoZSBgc3VwZXJhZ2VudC5wYXJzZWAgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge01peGVkfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLl9wYXJzZUJvZHkgPSBmdW5jdGlvbihzdHIpe1xuICB2YXIgcGFyc2UgPSByZXF1ZXN0LnBhcnNlW3RoaXMudHlwZV07XG4gIGlmICghcGFyc2UgJiYgaXNKU09OKHRoaXMudHlwZSkpIHtcbiAgICBwYXJzZSA9IHJlcXVlc3QucGFyc2VbJ2FwcGxpY2F0aW9uL2pzb24nXTtcbiAgfVxuICByZXR1cm4gcGFyc2UgJiYgc3RyICYmIChzdHIubGVuZ3RoIHx8IHN0ciBpbnN0YW5jZW9mIE9iamVjdClcbiAgICA/IHBhcnNlKHN0cilcbiAgICA6IG51bGw7XG59O1xuXG4vKipcbiAqIFNldCBmbGFncyBzdWNoIGFzIGAub2tgIGJhc2VkIG9uIGBzdGF0dXNgLlxuICpcbiAqIEZvciBleGFtcGxlIGEgMnh4IHJlc3BvbnNlIHdpbGwgZ2l2ZSB5b3UgYSBgLm9rYCBvZiBfX3RydWVfX1xuICogd2hlcmVhcyA1eHggd2lsbCBiZSBfX2ZhbHNlX18gYW5kIGAuZXJyb3JgIHdpbGwgYmUgX190cnVlX18uIFRoZVxuICogYC5jbGllbnRFcnJvcmAgYW5kIGAuc2VydmVyRXJyb3JgIGFyZSBhbHNvIGF2YWlsYWJsZSB0byBiZSBtb3JlXG4gKiBzcGVjaWZpYywgYW5kIGAuc3RhdHVzVHlwZWAgaXMgdGhlIGNsYXNzIG9mIGVycm9yIHJhbmdpbmcgZnJvbSAxLi41XG4gKiBzb21ldGltZXMgdXNlZnVsIGZvciBtYXBwaW5nIHJlc3BvbmQgY29sb3JzIGV0Yy5cbiAqXG4gKiBcInN1Z2FyXCIgcHJvcGVydGllcyBhcmUgYWxzbyBkZWZpbmVkIGZvciBjb21tb24gY2FzZXMuIEN1cnJlbnRseSBwcm92aWRpbmc6XG4gKlxuICogICAtIC5ub0NvbnRlbnRcbiAqICAgLSAuYmFkUmVxdWVzdFxuICogICAtIC51bmF1dGhvcml6ZWRcbiAqICAgLSAubm90QWNjZXB0YWJsZVxuICogICAtIC5ub3RGb3VuZFxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS5fc2V0U3RhdHVzUHJvcGVydGllcyA9IGZ1bmN0aW9uKHN0YXR1cyl7XG4gIC8vIGhhbmRsZSBJRTkgYnVnOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwMDQ2OTcyL21zaWUtcmV0dXJucy1zdGF0dXMtY29kZS1vZi0xMjIzLWZvci1hamF4LXJlcXVlc3RcbiAgaWYgKHN0YXR1cyA9PT0gMTIyMykge1xuICAgIHN0YXR1cyA9IDIwNDtcbiAgfVxuXG4gIHZhciB0eXBlID0gc3RhdHVzIC8gMTAwIHwgMDtcblxuICAvLyBzdGF0dXMgLyBjbGFzc1xuICB0aGlzLnN0YXR1cyA9IHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1cztcbiAgdGhpcy5zdGF0dXNUeXBlID0gdHlwZTtcblxuICAvLyBiYXNpY3NcbiAgdGhpcy5pbmZvID0gMSA9PSB0eXBlO1xuICB0aGlzLm9rID0gMiA9PSB0eXBlO1xuICB0aGlzLmNsaWVudEVycm9yID0gNCA9PSB0eXBlO1xuICB0aGlzLnNlcnZlckVycm9yID0gNSA9PSB0eXBlO1xuICB0aGlzLmVycm9yID0gKDQgPT0gdHlwZSB8fCA1ID09IHR5cGUpXG4gICAgPyB0aGlzLnRvRXJyb3IoKVxuICAgIDogZmFsc2U7XG5cbiAgLy8gc3VnYXJcbiAgdGhpcy5hY2NlcHRlZCA9IDIwMiA9PSBzdGF0dXM7XG4gIHRoaXMubm9Db250ZW50ID0gMjA0ID09IHN0YXR1cztcbiAgdGhpcy5iYWRSZXF1ZXN0ID0gNDAwID09IHN0YXR1cztcbiAgdGhpcy51bmF1dGhvcml6ZWQgPSA0MDEgPT0gc3RhdHVzO1xuICB0aGlzLm5vdEFjY2VwdGFibGUgPSA0MDYgPT0gc3RhdHVzO1xuICB0aGlzLm5vdEZvdW5kID0gNDA0ID09IHN0YXR1cztcbiAgdGhpcy5mb3JiaWRkZW4gPSA0MDMgPT0gc3RhdHVzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gYW4gYEVycm9yYCByZXByZXNlbnRhdGl2ZSBvZiB0aGlzIHJlc3BvbnNlLlxuICpcbiAqIEByZXR1cm4ge0Vycm9yfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXNwb25zZS5wcm90b3R5cGUudG9FcnJvciA9IGZ1bmN0aW9uKCl7XG4gIHZhciByZXEgPSB0aGlzLnJlcTtcbiAgdmFyIG1ldGhvZCA9IHJlcS5tZXRob2Q7XG4gIHZhciB1cmwgPSByZXEudXJsO1xuXG4gIHZhciBtc2cgPSAnY2Fubm90ICcgKyBtZXRob2QgKyAnICcgKyB1cmwgKyAnICgnICsgdGhpcy5zdGF0dXMgKyAnKSc7XG4gIHZhciBlcnIgPSBuZXcgRXJyb3IobXNnKTtcbiAgZXJyLnN0YXR1cyA9IHRoaXMuc3RhdHVzO1xuICBlcnIubWV0aG9kID0gbWV0aG9kO1xuICBlcnIudXJsID0gdXJsO1xuXG4gIHJldHVybiBlcnI7XG59O1xuXG4vKipcbiAqIEV4cG9zZSBgUmVzcG9uc2VgLlxuICovXG5cbnJlcXVlc3QuUmVzcG9uc2UgPSBSZXNwb25zZTtcblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBSZXF1ZXN0YCB3aXRoIHRoZSBnaXZlbiBgbWV0aG9kYCBhbmQgYHVybGAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZFxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBSZXF1ZXN0KG1ldGhvZCwgdXJsKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5fcXVlcnkgPSB0aGlzLl9xdWVyeSB8fCBbXTtcbiAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XG4gIHRoaXMudXJsID0gdXJsO1xuICB0aGlzLmhlYWRlciA9IHt9OyAvLyBwcmVzZXJ2ZXMgaGVhZGVyIG5hbWUgY2FzZVxuICB0aGlzLl9oZWFkZXIgPSB7fTsgLy8gY29lcmNlcyBoZWFkZXIgbmFtZXMgdG8gbG93ZXJjYXNlXG4gIHRoaXMub24oJ2VuZCcsIGZ1bmN0aW9uKCl7XG4gICAgdmFyIGVyciA9IG51bGw7XG4gICAgdmFyIHJlcyA9IG51bGw7XG5cbiAgICB0cnkge1xuICAgICAgcmVzID0gbmV3IFJlc3BvbnNlKHNlbGYpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgZXJyID0gbmV3IEVycm9yKCdQYXJzZXIgaXMgdW5hYmxlIHRvIHBhcnNlIHRoZSByZXNwb25zZScpO1xuICAgICAgZXJyLnBhcnNlID0gdHJ1ZTtcbiAgICAgIGVyci5vcmlnaW5hbCA9IGU7XG4gICAgICAvLyBpc3N1ZSAjNjc1OiByZXR1cm4gdGhlIHJhdyByZXNwb25zZSBpZiB0aGUgcmVzcG9uc2UgcGFyc2luZyBmYWlsc1xuICAgICAgZXJyLnJhd1Jlc3BvbnNlID0gc2VsZi54aHIgJiYgc2VsZi54aHIucmVzcG9uc2VUZXh0ID8gc2VsZi54aHIucmVzcG9uc2VUZXh0IDogbnVsbDtcbiAgICAgIC8vIGlzc3VlICM4NzY6IHJldHVybiB0aGUgaHR0cCBzdGF0dXMgY29kZSBpZiB0aGUgcmVzcG9uc2UgcGFyc2luZyBmYWlsc1xuICAgICAgZXJyLnN0YXR1c0NvZGUgPSBzZWxmLnhociAmJiBzZWxmLnhoci5zdGF0dXMgPyBzZWxmLnhoci5zdGF0dXMgOiBudWxsO1xuICAgICAgcmV0dXJuIHNlbGYuY2FsbGJhY2soZXJyKTtcbiAgICB9XG5cbiAgICBzZWxmLmVtaXQoJ3Jlc3BvbnNlJywgcmVzKTtcblxuICAgIHZhciBuZXdfZXJyO1xuICAgIHRyeSB7XG4gICAgICBpZiAocmVzLnN0YXR1cyA8IDIwMCB8fCByZXMuc3RhdHVzID49IDMwMCkge1xuICAgICAgICBuZXdfZXJyID0gbmV3IEVycm9yKHJlcy5zdGF0dXNUZXh0IHx8ICdVbnN1Y2Nlc3NmdWwgSFRUUCByZXNwb25zZScpO1xuICAgICAgICBuZXdfZXJyLm9yaWdpbmFsID0gZXJyO1xuICAgICAgICBuZXdfZXJyLnJlc3BvbnNlID0gcmVzO1xuICAgICAgICBuZXdfZXJyLnN0YXR1cyA9IHJlcy5zdGF0dXM7XG4gICAgICB9XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBuZXdfZXJyID0gZTsgLy8gIzk4NSB0b3VjaGluZyByZXMgbWF5IGNhdXNlIElOVkFMSURfU1RBVEVfRVJSIG9uIG9sZCBBbmRyb2lkXG4gICAgfVxuXG4gICAgLy8gIzEwMDAgZG9uJ3QgY2F0Y2ggZXJyb3JzIGZyb20gdGhlIGNhbGxiYWNrIHRvIGF2b2lkIGRvdWJsZSBjYWxsaW5nIGl0XG4gICAgaWYgKG5ld19lcnIpIHtcbiAgICAgIHNlbGYuY2FsbGJhY2sobmV3X2VyciwgcmVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5jYWxsYmFjayhudWxsLCByZXMpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogTWl4aW4gYEVtaXR0ZXJgIGFuZCBgcmVxdWVzdEJhc2VgLlxuICovXG5cbkVtaXR0ZXIoUmVxdWVzdC5wcm90b3R5cGUpO1xuZm9yICh2YXIga2V5IGluIHJlcXVlc3RCYXNlKSB7XG4gIFJlcXVlc3QucHJvdG90eXBlW2tleV0gPSByZXF1ZXN0QmFzZVtrZXldO1xufVxuXG4vKipcbiAqIFNldCBDb250ZW50LVR5cGUgdG8gYHR5cGVgLCBtYXBwaW5nIHZhbHVlcyBmcm9tIGByZXF1ZXN0LnR5cGVzYC5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgIHN1cGVyYWdlbnQudHlwZXMueG1sID0gJ2FwcGxpY2F0aW9uL3htbCc7XG4gKlxuICogICAgICByZXF1ZXN0LnBvc3QoJy8nKVxuICogICAgICAgIC50eXBlKCd4bWwnKVxuICogICAgICAgIC5zZW5kKHhtbHN0cmluZylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiAgICAgIHJlcXVlc3QucG9zdCgnLycpXG4gKiAgICAgICAgLnR5cGUoJ2FwcGxpY2F0aW9uL3htbCcpXG4gKiAgICAgICAgLnNlbmQoeG1sc3RyaW5nKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUudHlwZSA9IGZ1bmN0aW9uKHR5cGUpe1xuICB0aGlzLnNldCgnQ29udGVudC1UeXBlJywgcmVxdWVzdC50eXBlc1t0eXBlXSB8fCB0eXBlKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCByZXNwb25zZVR5cGUgdG8gYHZhbGAuIFByZXNlbnRseSB2YWxpZCByZXNwb25zZVR5cGVzIGFyZSAnYmxvYicgYW5kXG4gKiAnYXJyYXlidWZmZXInLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgcmVxLmdldCgnLycpXG4gKiAgICAgICAgLnJlc3BvbnNlVHlwZSgnYmxvYicpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHZhbFxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLnJlc3BvbnNlVHlwZSA9IGZ1bmN0aW9uKHZhbCl7XG4gIHRoaXMuX3Jlc3BvbnNlVHlwZSA9IHZhbDtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCBBY2NlcHQgdG8gYHR5cGVgLCBtYXBwaW5nIHZhbHVlcyBmcm9tIGByZXF1ZXN0LnR5cGVzYC5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgIHN1cGVyYWdlbnQudHlwZXMuanNvbiA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAqXG4gKiAgICAgIHJlcXVlc3QuZ2V0KCcvYWdlbnQnKVxuICogICAgICAgIC5hY2NlcHQoJ2pzb24nKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqICAgICAgcmVxdWVzdC5nZXQoJy9hZ2VudCcpXG4gKiAgICAgICAgLmFjY2VwdCgnYXBwbGljYXRpb24vanNvbicpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFjY2VwdFxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmFjY2VwdCA9IGZ1bmN0aW9uKHR5cGUpe1xuICB0aGlzLnNldCgnQWNjZXB0JywgcmVxdWVzdC50eXBlc1t0eXBlXSB8fCB0eXBlKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCBBdXRob3JpemF0aW9uIGZpZWxkIHZhbHVlIHdpdGggYHVzZXJgIGFuZCBgcGFzc2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVzZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXNzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB3aXRoICd0eXBlJyBwcm9wZXJ0eSAnYXV0bycgb3IgJ2Jhc2ljJyAoZGVmYXVsdCAnYmFzaWMnKVxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmF1dGggPSBmdW5jdGlvbih1c2VyLCBwYXNzLCBvcHRpb25zKXtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHtcbiAgICAgIHR5cGU6ICdiYXNpYydcbiAgICB9XG4gIH1cblxuICBzd2l0Y2ggKG9wdGlvbnMudHlwZSkge1xuICAgIGNhc2UgJ2Jhc2ljJzpcbiAgICAgIHZhciBzdHIgPSBidG9hKHVzZXIgKyAnOicgKyBwYXNzKTtcbiAgICAgIHRoaXMuc2V0KCdBdXRob3JpemF0aW9uJywgJ0Jhc2ljICcgKyBzdHIpO1xuICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnYXV0byc6XG4gICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcjtcbiAgICAgIHRoaXMucGFzc3dvcmQgPSBwYXNzO1xuICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4qIEFkZCBxdWVyeS1zdHJpbmcgYHZhbGAuXG4qXG4qIEV4YW1wbGVzOlxuKlxuKiAgIHJlcXVlc3QuZ2V0KCcvc2hvZXMnKVxuKiAgICAgLnF1ZXJ5KCdzaXplPTEwJylcbiogICAgIC5xdWVyeSh7IGNvbG9yOiAnYmx1ZScgfSlcbipcbiogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSB2YWxcbiogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4qIEBhcGkgcHVibGljXG4qL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uKHZhbCl7XG4gIGlmICgnc3RyaW5nJyAhPSB0eXBlb2YgdmFsKSB2YWwgPSBzZXJpYWxpemUodmFsKTtcbiAgaWYgKHZhbCkgdGhpcy5fcXVlcnkucHVzaCh2YWwpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUXVldWUgdGhlIGdpdmVuIGBmaWxlYCBhcyBhbiBhdHRhY2htZW50IHRvIHRoZSBzcGVjaWZpZWQgYGZpZWxkYCxcbiAqIHdpdGggb3B0aW9uYWwgYGZpbGVuYW1lYC5cbiAqXG4gKiBgYGAganNcbiAqIHJlcXVlc3QucG9zdCgnL3VwbG9hZCcpXG4gKiAgIC5hdHRhY2goJ2NvbnRlbnQnLCBuZXcgQmxvYihbJzxhIGlkPVwiYVwiPjxiIGlkPVwiYlwiPmhleSE8L2I+PC9hPiddLCB7IHR5cGU6IFwidGV4dC9odG1sXCJ9KSlcbiAqICAgLmVuZChjYWxsYmFjayk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqIEBwYXJhbSB7QmxvYnxGaWxlfSBmaWxlXG4gKiBAcGFyYW0ge1N0cmluZ30gZmlsZW5hbWVcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5hdHRhY2ggPSBmdW5jdGlvbihmaWVsZCwgZmlsZSwgZmlsZW5hbWUpe1xuICB0aGlzLl9nZXRGb3JtRGF0YSgpLmFwcGVuZChmaWVsZCwgZmlsZSwgZmlsZW5hbWUgfHwgZmlsZS5uYW1lKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5fZ2V0Rm9ybURhdGEgPSBmdW5jdGlvbigpe1xuICBpZiAoIXRoaXMuX2Zvcm1EYXRhKSB7XG4gICAgdGhpcy5fZm9ybURhdGEgPSBuZXcgcm9vdC5Gb3JtRGF0YSgpO1xuICB9XG4gIHJldHVybiB0aGlzLl9mb3JtRGF0YTtcbn07XG5cbi8qKlxuICogSW52b2tlIHRoZSBjYWxsYmFjayB3aXRoIGBlcnJgIGFuZCBgcmVzYFxuICogYW5kIGhhbmRsZSBhcml0eSBjaGVjay5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJcbiAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuY2FsbGJhY2sgPSBmdW5jdGlvbihlcnIsIHJlcyl7XG4gIHZhciBmbiA9IHRoaXMuX2NhbGxiYWNrO1xuICB0aGlzLmNsZWFyVGltZW91dCgpO1xuICBmbihlcnIsIHJlcyk7XG59O1xuXG4vKipcbiAqIEludm9rZSBjYWxsYmFjayB3aXRoIHgtZG9tYWluIGVycm9yLlxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmNyb3NzRG9tYWluRXJyb3IgPSBmdW5jdGlvbigpe1xuICB2YXIgZXJyID0gbmV3IEVycm9yKCdSZXF1ZXN0IGhhcyBiZWVuIHRlcm1pbmF0ZWRcXG5Qb3NzaWJsZSBjYXVzZXM6IHRoZSBuZXR3b3JrIGlzIG9mZmxpbmUsIE9yaWdpbiBpcyBub3QgYWxsb3dlZCBieSBBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4sIHRoZSBwYWdlIGlzIGJlaW5nIHVubG9hZGVkLCBldGMuJyk7XG4gIGVyci5jcm9zc0RvbWFpbiA9IHRydWU7XG5cbiAgZXJyLnN0YXR1cyA9IHRoaXMuc3RhdHVzO1xuICBlcnIubWV0aG9kID0gdGhpcy5tZXRob2Q7XG4gIGVyci51cmwgPSB0aGlzLnVybDtcblxuICB0aGlzLmNhbGxiYWNrKGVycik7XG59O1xuXG4vKipcbiAqIEludm9rZSBjYWxsYmFjayB3aXRoIHRpbWVvdXQgZXJyb3IuXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuX3RpbWVvdXRFcnJvciA9IGZ1bmN0aW9uKCl7XG4gIHZhciB0aW1lb3V0ID0gdGhpcy5fdGltZW91dDtcbiAgdmFyIGVyciA9IG5ldyBFcnJvcigndGltZW91dCBvZiAnICsgdGltZW91dCArICdtcyBleGNlZWRlZCcpO1xuICBlcnIudGltZW91dCA9IHRpbWVvdXQ7XG4gIHRoaXMuY2FsbGJhY2soZXJyKTtcbn07XG5cbi8qKlxuICogQ29tcG9zZSBxdWVyeXN0cmluZyB0byBhcHBlbmQgdG8gcmVxLnVybFxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlcXVlc3QucHJvdG90eXBlLl9hcHBlbmRRdWVyeVN0cmluZyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBxdWVyeSA9IHRoaXMuX3F1ZXJ5LmpvaW4oJyYnKTtcbiAgaWYgKHF1ZXJ5KSB7XG4gICAgdGhpcy51cmwgKz0gfnRoaXMudXJsLmluZGV4T2YoJz8nKVxuICAgICAgPyAnJicgKyBxdWVyeVxuICAgICAgOiAnPycgKyBxdWVyeTtcbiAgfVxufTtcblxuLyoqXG4gKiBJbml0aWF0ZSByZXF1ZXN0LCBpbnZva2luZyBjYWxsYmFjayBgZm4ocmVzKWBcbiAqIHdpdGggYW4gaW5zdGFuY2VvZiBgUmVzcG9uc2VgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oZm4pe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciB4aHIgPSB0aGlzLnhociA9IHJlcXVlc3QuZ2V0WEhSKCk7XG4gIHZhciB0aW1lb3V0ID0gdGhpcy5fdGltZW91dDtcbiAgdmFyIGRhdGEgPSB0aGlzLl9mb3JtRGF0YSB8fCB0aGlzLl9kYXRhO1xuXG4gIC8vIHN0b3JlIGNhbGxiYWNrXG4gIHRoaXMuX2NhbGxiYWNrID0gZm4gfHwgbm9vcDtcblxuICAvLyBzdGF0ZSBjaGFuZ2VcbiAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7XG4gICAgaWYgKDQgIT0geGhyLnJlYWR5U3RhdGUpIHJldHVybjtcblxuICAgIC8vIEluIElFOSwgcmVhZHMgdG8gYW55IHByb3BlcnR5IChlLmcuIHN0YXR1cykgb2ZmIG9mIGFuIGFib3J0ZWQgWEhSIHdpbGxcbiAgICAvLyByZXN1bHQgaW4gdGhlIGVycm9yIFwiQ291bGQgbm90IGNvbXBsZXRlIHRoZSBvcGVyYXRpb24gZHVlIHRvIGVycm9yIGMwMGMwMjNmXCJcbiAgICB2YXIgc3RhdHVzO1xuICAgIHRyeSB7IHN0YXR1cyA9IHhoci5zdGF0dXMgfSBjYXRjaChlKSB7IHN0YXR1cyA9IDA7IH1cblxuICAgIGlmICgwID09IHN0YXR1cykge1xuICAgICAgaWYgKHNlbGYudGltZWRvdXQpIHJldHVybiBzZWxmLl90aW1lb3V0RXJyb3IoKTtcbiAgICAgIGlmIChzZWxmLl9hYm9ydGVkKSByZXR1cm47XG4gICAgICByZXR1cm4gc2VsZi5jcm9zc0RvbWFpbkVycm9yKCk7XG4gICAgfVxuICAgIHNlbGYuZW1pdCgnZW5kJyk7XG4gIH07XG5cbiAgLy8gcHJvZ3Jlc3NcbiAgdmFyIGhhbmRsZVByb2dyZXNzID0gZnVuY3Rpb24oZGlyZWN0aW9uLCBlKSB7XG4gICAgaWYgKGUudG90YWwgPiAwKSB7XG4gICAgICBlLnBlcmNlbnQgPSBlLmxvYWRlZCAvIGUudG90YWwgKiAxMDA7XG4gICAgfVxuICAgIGUuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgIHNlbGYuZW1pdCgncHJvZ3Jlc3MnLCBlKTtcbiAgfVxuICBpZiAodGhpcy5oYXNMaXN0ZW5lcnMoJ3Byb2dyZXNzJykpIHtcbiAgICB0cnkge1xuICAgICAgeGhyLm9ucHJvZ3Jlc3MgPSBoYW5kbGVQcm9ncmVzcy5iaW5kKG51bGwsICdkb3dubG9hZCcpO1xuICAgICAgaWYgKHhoci51cGxvYWQpIHtcbiAgICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gaGFuZGxlUHJvZ3Jlc3MuYmluZChudWxsLCAndXBsb2FkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICAvLyBBY2Nlc3NpbmcgeGhyLnVwbG9hZCBmYWlscyBpbiBJRSBmcm9tIGEgd2ViIHdvcmtlciwgc28ganVzdCBwcmV0ZW5kIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgICAvLyBSZXBvcnRlZCBoZXJlOlxuICAgICAgLy8gaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy84MzcyNDUveG1saHR0cHJlcXVlc3QtdXBsb2FkLXRocm93cy1pbnZhbGlkLWFyZ3VtZW50LXdoZW4tdXNlZC1mcm9tLXdlYi13b3JrZXItY29udGV4dFxuICAgIH1cbiAgfVxuXG4gIC8vIHRpbWVvdXRcbiAgaWYgKHRpbWVvdXQgJiYgIXRoaXMuX3RpbWVyKSB7XG4gICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICBzZWxmLnRpbWVkb3V0ID0gdHJ1ZTtcbiAgICAgIHNlbGYuYWJvcnQoKTtcbiAgICB9LCB0aW1lb3V0KTtcbiAgfVxuXG4gIC8vIHF1ZXJ5c3RyaW5nXG4gIHRoaXMuX2FwcGVuZFF1ZXJ5U3RyaW5nKCk7XG5cbiAgLy8gaW5pdGlhdGUgcmVxdWVzdFxuICBpZiAodGhpcy51c2VybmFtZSAmJiB0aGlzLnBhc3N3b3JkKSB7XG4gICAgeGhyLm9wZW4odGhpcy5tZXRob2QsIHRoaXMudXJsLCB0cnVlLCB0aGlzLnVzZXJuYW1lLCB0aGlzLnBhc3N3b3JkKTtcbiAgfSBlbHNlIHtcbiAgICB4aHIub3Blbih0aGlzLm1ldGhvZCwgdGhpcy51cmwsIHRydWUpO1xuICB9XG5cbiAgLy8gQ09SU1xuICBpZiAodGhpcy5fd2l0aENyZWRlbnRpYWxzKSB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcblxuICAvLyBib2R5XG4gIGlmICgnR0VUJyAhPSB0aGlzLm1ldGhvZCAmJiAnSEVBRCcgIT0gdGhpcy5tZXRob2QgJiYgJ3N0cmluZycgIT0gdHlwZW9mIGRhdGEgJiYgIXRoaXMuX2lzSG9zdChkYXRhKSkge1xuICAgIC8vIHNlcmlhbGl6ZSBzdHVmZlxuICAgIHZhciBjb250ZW50VHlwZSA9IHRoaXMuX2hlYWRlclsnY29udGVudC10eXBlJ107XG4gICAgdmFyIHNlcmlhbGl6ZSA9IHRoaXMuX3NlcmlhbGl6ZXIgfHwgcmVxdWVzdC5zZXJpYWxpemVbY29udGVudFR5cGUgPyBjb250ZW50VHlwZS5zcGxpdCgnOycpWzBdIDogJyddO1xuICAgIGlmICghc2VyaWFsaXplICYmIGlzSlNPTihjb250ZW50VHlwZSkpIHNlcmlhbGl6ZSA9IHJlcXVlc3Quc2VyaWFsaXplWydhcHBsaWNhdGlvbi9qc29uJ107XG4gICAgaWYgKHNlcmlhbGl6ZSkgZGF0YSA9IHNlcmlhbGl6ZShkYXRhKTtcbiAgfVxuXG4gIC8vIHNldCBoZWFkZXIgZmllbGRzXG4gIGZvciAodmFyIGZpZWxkIGluIHRoaXMuaGVhZGVyKSB7XG4gICAgaWYgKG51bGwgPT0gdGhpcy5oZWFkZXJbZmllbGRdKSBjb250aW51ZTtcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihmaWVsZCwgdGhpcy5oZWFkZXJbZmllbGRdKTtcbiAgfVxuXG4gIGlmICh0aGlzLl9yZXNwb25zZVR5cGUpIHtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gdGhpcy5fcmVzcG9uc2VUeXBlO1xuICB9XG5cbiAgLy8gc2VuZCBzdHVmZlxuICB0aGlzLmVtaXQoJ3JlcXVlc3QnLCB0aGlzKTtcblxuICAvLyBJRTExIHhoci5zZW5kKHVuZGVmaW5lZCkgc2VuZHMgJ3VuZGVmaW5lZCcgc3RyaW5nIGFzIFBPU1QgcGF5bG9hZCAoaW5zdGVhZCBvZiBub3RoaW5nKVxuICAvLyBXZSBuZWVkIG51bGwgaGVyZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICB4aHIuc2VuZCh0eXBlb2YgZGF0YSAhPT0gJ3VuZGVmaW5lZCcgPyBkYXRhIDogbnVsbCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuXG4vKipcbiAqIEV4cG9zZSBgUmVxdWVzdGAuXG4gKi9cblxucmVxdWVzdC5SZXF1ZXN0ID0gUmVxdWVzdDtcblxuLyoqXG4gKiBHRVQgYHVybGAgd2l0aCBvcHRpb25hbCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZHxGdW5jdGlvbn0gW2RhdGFdIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LmdldCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnR0VUJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEucXVlcnkoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG4vKipcbiAqIEhFQUQgYHVybGAgd2l0aCBvcHRpb25hbCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZHxGdW5jdGlvbn0gW2RhdGFdIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LmhlYWQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ0hFQUQnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5zZW5kKGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxuLyoqXG4gKiBPUFRJT05TIHF1ZXJ5IHRvIGB1cmxgIHdpdGggb3B0aW9uYWwgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR8RnVuY3Rpb259IFtkYXRhXSBvciBmblxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5vcHRpb25zID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdPUFRJT05TJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogREVMRVRFIGB1cmxgIHdpdGggb3B0aW9uYWwgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGRlbCh1cmwsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ0RFTEVURScsIHVybCk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG5yZXF1ZXN0WydkZWwnXSA9IGRlbDtcbnJlcXVlc3RbJ2RlbGV0ZSddID0gZGVsO1xuXG4vKipcbiAqIFBBVENIIGB1cmxgIHdpdGggb3B0aW9uYWwgYGRhdGFgIGFuZCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZH0gW2RhdGFdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LnBhdGNoID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdQQVRDSCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnNlbmQoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG4vKipcbiAqIFBPU1QgYHVybGAgd2l0aCBvcHRpb25hbCBgZGF0YWAgYW5kIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfSBbZGF0YV1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QucG9zdCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnUE9TVCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnNlbmQoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG4vKipcbiAqIFBVVCBgdXJsYCB3aXRoIG9wdGlvbmFsIGBkYXRhYCBhbmQgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR8RnVuY3Rpb259IFtkYXRhXSBvciBmblxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5wdXQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ1BVVCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnNlbmQoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuIiwiLyoqXG4gKiBDaGVjayBpZiBgb2JqYCBpcyBhbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICByZXR1cm4gbnVsbCAhPT0gb2JqICYmICdvYmplY3QnID09PSB0eXBlb2Ygb2JqO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzT2JqZWN0O1xuIiwiLyoqXG4gKiBNb2R1bGUgb2YgbWl4ZWQtaW4gZnVuY3Rpb25zIHNoYXJlZCBiZXR3ZWVuIG5vZGUgYW5kIGNsaWVudCBjb2RlXG4gKi9cbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXMtb2JqZWN0Jyk7XG5cbi8qKlxuICogQ2xlYXIgcHJldmlvdXMgdGltZW91dC5cbiAqXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5jbGVhclRpbWVvdXQgPSBmdW5jdGlvbiBfY2xlYXJUaW1lb3V0KCl7XG4gIHRoaXMuX3RpbWVvdXQgPSAwO1xuICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogT3ZlcnJpZGUgZGVmYXVsdCByZXNwb25zZSBib2R5IHBhcnNlclxuICpcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgdG8gY29udmVydCBpbmNvbWluZyBkYXRhIGludG8gcmVxdWVzdC5ib2R5XG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uIHBhcnNlKGZuKXtcbiAgdGhpcy5fcGFyc2VyID0gZm47XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBPdmVycmlkZSBkZWZhdWx0IHJlcXVlc3QgYm9keSBzZXJpYWxpemVyXG4gKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB0byBjb252ZXJ0IGRhdGEgc2V0IHZpYSAuc2VuZCBvciAuYXR0YWNoIGludG8gcGF5bG9hZCB0byBzZW5kXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5zZXJpYWxpemUgPSBmdW5jdGlvbiBzZXJpYWxpemUoZm4pe1xuICB0aGlzLl9zZXJpYWxpemVyID0gZm47XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgdGltZW91dCB0byBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMudGltZW91dCA9IGZ1bmN0aW9uIHRpbWVvdXQobXMpe1xuICB0aGlzLl90aW1lb3V0ID0gbXM7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBQcm9taXNlIHN1cHBvcnRcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RcbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKi9cblxuZXhwb3J0cy50aGVuID0gZnVuY3Rpb24gdGhlbihyZXNvbHZlLCByZWplY3QpIHtcbiAgaWYgKCF0aGlzLl9mdWxsZmlsbGVkUHJvbWlzZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLl9mdWxsZmlsbGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKGlubmVyUmVzb2x2ZSwgaW5uZXJSZWplY3Qpe1xuICAgICAgc2VsZi5lbmQoZnVuY3Rpb24oZXJyLCByZXMpe1xuICAgICAgICBpZiAoZXJyKSBpbm5lclJlamVjdChlcnIpOyBlbHNlIGlubmVyUmVzb2x2ZShyZXMpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHRoaXMuX2Z1bGxmaWxsZWRQcm9taXNlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbn1cblxuZXhwb3J0cy5jYXRjaCA9IGZ1bmN0aW9uKGNiKSB7XG4gIHJldHVybiB0aGlzLnRoZW4odW5kZWZpbmVkLCBjYik7XG59O1xuXG4vKipcbiAqIEFsbG93IGZvciBleHRlbnNpb25cbiAqL1xuXG5leHBvcnRzLnVzZSA9IGZ1bmN0aW9uIHVzZShmbikge1xuICBmbih0aGlzKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cblxuLyoqXG4gKiBHZXQgcmVxdWVzdCBoZWFkZXIgYGZpZWxkYC5cbiAqIENhc2UtaW5zZW5zaXRpdmUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuZ2V0ID0gZnVuY3Rpb24oZmllbGQpe1xuICByZXR1cm4gdGhpcy5faGVhZGVyW2ZpZWxkLnRvTG93ZXJDYXNlKCldO1xufTtcblxuLyoqXG4gKiBHZXQgY2FzZS1pbnNlbnNpdGl2ZSBoZWFkZXIgYGZpZWxkYCB2YWx1ZS5cbiAqIFRoaXMgaXMgYSBkZXByZWNhdGVkIGludGVybmFsIEFQSS4gVXNlIGAuZ2V0KGZpZWxkKWAgaW5zdGVhZC5cbiAqXG4gKiAoZ2V0SGVhZGVyIGlzIG5vIGxvbmdlciB1c2VkIGludGVybmFsbHkgYnkgdGhlIHN1cGVyYWdlbnQgY29kZSBiYXNlKVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKiBAZGVwcmVjYXRlZFxuICovXG5cbmV4cG9ydHMuZ2V0SGVhZGVyID0gZXhwb3J0cy5nZXQ7XG5cbi8qKlxuICogU2V0IGhlYWRlciBgZmllbGRgIHRvIGB2YWxgLCBvciBtdWx0aXBsZSBmaWVsZHMgd2l0aCBvbmUgb2JqZWN0LlxuICogQ2FzZS1pbnNlbnNpdGl2ZS5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgIHJlcS5nZXQoJy8nKVxuICogICAgICAgIC5zZXQoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJylcbiAqICAgICAgICAuc2V0KCdYLUFQSS1LZXknLCAnZm9vYmFyJylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiAgICAgIHJlcS5nZXQoJy8nKVxuICogICAgICAgIC5zZXQoeyBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJywgJ1gtQVBJLUtleSc6ICdmb29iYXInIH0pXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBmaWVsZFxuICogQHBhcmFtIHtTdHJpbmd9IHZhbFxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuc2V0ID0gZnVuY3Rpb24oZmllbGQsIHZhbCl7XG4gIGlmIChpc09iamVjdChmaWVsZCkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gZmllbGQpIHtcbiAgICAgIHRoaXMuc2V0KGtleSwgZmllbGRba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHRoaXMuX2hlYWRlcltmaWVsZC50b0xvd2VyQ2FzZSgpXSA9IHZhbDtcbiAgdGhpcy5oZWFkZXJbZmllbGRdID0gdmFsO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGhlYWRlciBgZmllbGRgLlxuICogQ2FzZS1pbnNlbnNpdGl2ZS5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICAgcmVxLmdldCgnLycpXG4gKiAgICAgICAgLnVuc2V0KCdVc2VyLUFnZW50JylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqL1xuZXhwb3J0cy51bnNldCA9IGZ1bmN0aW9uKGZpZWxkKXtcbiAgZGVsZXRlIHRoaXMuX2hlYWRlcltmaWVsZC50b0xvd2VyQ2FzZSgpXTtcbiAgZGVsZXRlIHRoaXMuaGVhZGVyW2ZpZWxkXTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFdyaXRlIHRoZSBmaWVsZCBgbmFtZWAgYW5kIGB2YWxgLCBvciBtdWx0aXBsZSBmaWVsZHMgd2l0aCBvbmUgb2JqZWN0XG4gKiBmb3IgXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIgcmVxdWVzdCBib2RpZXMuXG4gKlxuICogYGBgIGpzXG4gKiByZXF1ZXN0LnBvc3QoJy91cGxvYWQnKVxuICogICAuZmllbGQoJ2ZvbycsICdiYXInKVxuICogICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiByZXF1ZXN0LnBvc3QoJy91cGxvYWQnKVxuICogICAuZmllbGQoeyBmb286ICdiYXInLCBiYXo6ICdxdXgnIH0pXG4gKiAgIC5lbmQoY2FsbGJhY2spO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ3xCbG9ifEZpbGV8QnVmZmVyfGZzLlJlYWRTdHJlYW19IHZhbFxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmZpZWxkID0gZnVuY3Rpb24obmFtZSwgdmFsKSB7XG5cbiAgLy8gbmFtZSBzaG91bGQgYmUgZWl0aGVyIGEgc3RyaW5nIG9yIGFuIG9iamVjdC5cbiAgaWYgKG51bGwgPT09IG5hbWUgfHwgIHVuZGVmaW5lZCA9PT0gbmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignLmZpZWxkKG5hbWUsIHZhbCkgbmFtZSBjYW4gbm90IGJlIGVtcHR5Jyk7XG4gIH1cblxuICBpZiAoaXNPYmplY3QobmFtZSkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkge1xuICAgICAgdGhpcy5maWVsZChrZXksIG5hbWVba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gdmFsIHNob3VsZCBiZSBkZWZpbmVkIG5vd1xuICBpZiAobnVsbCA9PT0gdmFsIHx8IHVuZGVmaW5lZCA9PT0gdmFsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCcuZmllbGQobmFtZSwgdmFsKSB2YWwgY2FuIG5vdCBiZSBlbXB0eScpO1xuICB9XG4gIHRoaXMuX2dldEZvcm1EYXRhKCkuYXBwZW5kKG5hbWUsIHZhbCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBYm9ydCB0aGUgcmVxdWVzdCwgYW5kIGNsZWFyIHBvdGVudGlhbCB0aW1lb3V0LlxuICpcbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmFib3J0ID0gZnVuY3Rpb24oKXtcbiAgaWYgKHRoaXMuX2Fib3J0ZWQpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB0aGlzLl9hYm9ydGVkID0gdHJ1ZTtcbiAgdGhpcy54aHIgJiYgdGhpcy54aHIuYWJvcnQoKTsgLy8gYnJvd3NlclxuICB0aGlzLnJlcSAmJiB0aGlzLnJlcS5hYm9ydCgpOyAvLyBub2RlXG4gIHRoaXMuY2xlYXJUaW1lb3V0KCk7XG4gIHRoaXMuZW1pdCgnYWJvcnQnKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEVuYWJsZSB0cmFuc21pc3Npb24gb2YgY29va2llcyB3aXRoIHgtZG9tYWluIHJlcXVlc3RzLlxuICpcbiAqIE5vdGUgdGhhdCBmb3IgdGhpcyB0byB3b3JrIHRoZSBvcmlnaW4gbXVzdCBub3QgYmVcbiAqIHVzaW5nIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luXCIgd2l0aCBhIHdpbGRjYXJkLFxuICogYW5kIGFsc28gbXVzdCBzZXQgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFsc1wiXG4gKiB0byBcInRydWVcIi5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMud2l0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24oKXtcbiAgLy8gVGhpcyBpcyBicm93c2VyLW9ubHkgZnVuY3Rpb25hbGl0eS4gTm9kZSBzaWRlIGlzIG5vLW9wLlxuICB0aGlzLl93aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IHRoZSBtYXggcmVkaXJlY3RzIHRvIGBuYC4gRG9lcyBub3RpbmcgaW4gYnJvd3NlciBYSFIgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnJlZGlyZWN0cyA9IGZ1bmN0aW9uKG4pe1xuICB0aGlzLl9tYXhSZWRpcmVjdHMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQ29udmVydCB0byBhIHBsYWluIGphdmFzY3JpcHQgb2JqZWN0IChub3QgSlNPTiBzdHJpbmcpIG9mIHNjYWxhciBwcm9wZXJ0aWVzLlxuICogTm90ZSBhcyB0aGlzIG1ldGhvZCBpcyBkZXNpZ25lZCB0byByZXR1cm4gYSB1c2VmdWwgbm9uLXRoaXMgdmFsdWUsXG4gKiBpdCBjYW5ub3QgYmUgY2hhaW5lZC5cbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IGRlc2NyaWJpbmcgbWV0aG9kLCB1cmwsIGFuZCBkYXRhIG9mIHRoaXMgcmVxdWVzdFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnRvSlNPTiA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgbWV0aG9kOiB0aGlzLm1ldGhvZCxcbiAgICB1cmw6IHRoaXMudXJsLFxuICAgIGRhdGE6IHRoaXMuX2RhdGEsXG4gICAgaGVhZGVyczogdGhpcy5faGVhZGVyXG4gIH07XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGBvYmpgIGlzIGEgaG9zdCBvYmplY3QsXG4gKiB3ZSBkb24ndCB3YW50IHRvIHNlcmlhbGl6ZSB0aGVzZSA6KVxuICpcbiAqIFRPRE86IGZ1dHVyZSBwcm9vZiwgbW92ZSB0byBjb21wb2VudCBsYW5kXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmV4cG9ydHMuX2lzSG9zdCA9IGZ1bmN0aW9uIF9pc0hvc3Qob2JqKSB7XG4gIHZhciBzdHIgPSB7fS50b1N0cmluZy5jYWxsKG9iaik7XG5cbiAgc3dpdGNoIChzdHIpIHtcbiAgICBjYXNlICdbb2JqZWN0IEZpbGVdJzpcbiAgICBjYXNlICdbb2JqZWN0IEJsb2JdJzpcbiAgICBjYXNlICdbb2JqZWN0IEZvcm1EYXRhXSc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogU2VuZCBgZGF0YWAgYXMgdGhlIHJlcXVlc3QgYm9keSwgZGVmYXVsdGluZyB0aGUgYC50eXBlKClgIHRvIFwianNvblwiIHdoZW5cbiAqIGFuIG9iamVjdCBpcyBnaXZlbi5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgICAvLyBtYW51YWwganNvblxuICogICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgIC50eXBlKCdqc29uJylcbiAqICAgICAgICAgLnNlbmQoJ3tcIm5hbWVcIjpcInRqXCJ9JylcbiAqICAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiAgICAgICAvLyBhdXRvIGpzb25cbiAqICAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgICAuc2VuZCh7IG5hbWU6ICd0aicgfSlcbiAqICAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiAgICAgICAvLyBtYW51YWwgeC13d3ctZm9ybS11cmxlbmNvZGVkXG4gKiAgICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAqICAgICAgICAgLnR5cGUoJ2Zvcm0nKVxuICogICAgICAgICAuc2VuZCgnbmFtZT10aicpXG4gKiAgICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogICAgICAgLy8gYXV0byB4LXd3dy1mb3JtLXVybGVuY29kZWRcbiAqICAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgICAudHlwZSgnZm9ybScpXG4gKiAgICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqICAgICAgIC8vIGRlZmF1bHRzIHRvIHgtd3d3LWZvcm0tdXJsZW5jb2RlZFxuICogICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAqICAgICAgICAuc2VuZCgnbmFtZT10b2JpJylcbiAqICAgICAgICAuc2VuZCgnc3BlY2llcz1mZXJyZXQnKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBkYXRhXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5zZW5kID0gZnVuY3Rpb24oZGF0YSl7XG4gIHZhciBvYmogPSBpc09iamVjdChkYXRhKTtcbiAgdmFyIHR5cGUgPSB0aGlzLl9oZWFkZXJbJ2NvbnRlbnQtdHlwZSddO1xuXG4gIC8vIG1lcmdlXG4gIGlmIChvYmogJiYgaXNPYmplY3QodGhpcy5fZGF0YSkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgdGhpcy5fZGF0YVtrZXldID0gZGF0YVtrZXldO1xuICAgIH1cbiAgfSBlbHNlIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZGF0YSkge1xuICAgIC8vIGRlZmF1bHQgdG8geC13d3ctZm9ybS11cmxlbmNvZGVkXG4gICAgaWYgKCF0eXBlKSB0aGlzLnR5cGUoJ2Zvcm0nKTtcbiAgICB0eXBlID0gdGhpcy5faGVhZGVyWydjb250ZW50LXR5cGUnXTtcbiAgICBpZiAoJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgPT0gdHlwZSkge1xuICAgICAgdGhpcy5fZGF0YSA9IHRoaXMuX2RhdGFcbiAgICAgICAgPyB0aGlzLl9kYXRhICsgJyYnICsgZGF0YVxuICAgICAgICA6IGRhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2RhdGEgPSAodGhpcy5fZGF0YSB8fCAnJykgKyBkYXRhO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgfVxuXG4gIGlmICghb2JqIHx8IHRoaXMuX2lzSG9zdChkYXRhKSkgcmV0dXJuIHRoaXM7XG5cbiAgLy8gZGVmYXVsdCB0byBqc29uXG4gIGlmICghdHlwZSkgdGhpcy50eXBlKCdqc29uJyk7XG4gIHJldHVybiB0aGlzO1xufTtcbiIsIi8vIFRoZSBub2RlIGFuZCBicm93c2VyIG1vZHVsZXMgZXhwb3NlIHZlcnNpb25zIG9mIHRoaXMgd2l0aCB0aGVcbi8vIGFwcHJvcHJpYXRlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGJvdW5kIGFzIGZpcnN0IGFyZ3VtZW50XG4vKipcbiAqIElzc3VlIGEgcmVxdWVzdDpcbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICByZXF1ZXN0KCdHRVQnLCAnL3VzZXJzJykuZW5kKGNhbGxiYWNrKVxuICogICAgcmVxdWVzdCgnL3VzZXJzJykuZW5kKGNhbGxiYWNrKVxuICogICAgcmVxdWVzdCgnL3VzZXJzJywgY2FsbGJhY2spXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZFxuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHVybCBvciBjYWxsYmFja1xuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gcmVxdWVzdChSZXF1ZXN0Q29uc3RydWN0b3IsIG1ldGhvZCwgdXJsKSB7XG4gIC8vIGNhbGxiYWNrXG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiB1cmwpIHtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3RDb25zdHJ1Y3RvcignR0VUJywgbWV0aG9kKS5lbmQodXJsKTtcbiAgfVxuXG4gIC8vIHVybCBmaXJzdFxuICBpZiAoMiA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0Q29uc3RydWN0b3IoJ0dFVCcsIG1ldGhvZCk7XG4gIH1cblxuICByZXR1cm4gbmV3IFJlcXVlc3RDb25zdHJ1Y3RvcihtZXRob2QsIHVybCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWVzdDtcbiIsIm1vZHVsZS5leHBvcnRzPXtcbiAgXCJuYW1lXCI6IFwidmh4anNcIixcbiAgXCJ2ZXJzaW9uXCI6IFwiMS4wLjAtYmV0YS4zXCIsXG4gIFwiZGVzY3JpcHRpb25cIjogXCJWSFggSmF2YXNjcmlwdCBBUEkgQ2xpZW50XCIsXG4gIFwibWFpblwiOiBcInZoeC5qc1wiLFxuICBcImF1dGhvclwiOiBcIlZIWFwiLFxuICBcImhvbWVwYWdlXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL3ZoeC92aHgtbm9kZVwiLFxuICBcImNvbnRyaWJ1dG9yc1wiOiBbXG4gICAgXCJEYXZpZCBHb256YWxleiA8ZGF2aWRAdmh4LnR2PiBcIixcbiAgICBcIlNjb3R0IFJvYmVydHNvbiA8c2NvdHRAdmh4LnR2PlwiXG4gIF0sXG4gIFwibGljZW5zZVwiOiBcIk1JVFwiLFxuICBcInJlcG9zaXRvcnlcIjoge1xuICAgIFwidHlwZVwiOiBcImdpdFwiLFxuICAgIFwidXJsXCI6IFwiZ2l0Oi8vZ2l0aHViLmNvbS92aHgvdmh4LWpzLmdpdFwiXG4gIH0sXG4gIFwiYnVnczpcIjogXCJodHRwczovL2dpdGh1Yi5jb20vdmh4L3ZoeC1qcy9pc3N1ZXNcIixcbiAgXCJkZXZEZXBlbmRlbmNpZXNcIjoge1xuICAgIFwiYmFiZWwtY2xpXCI6IFwiXjYuMTEuNFwiLFxuICAgIFwiYmFiZWwtY29yZVwiOiBcIl42LjE4LjJcIixcbiAgICBcImJhYmVsLXByZXNldC1lczIwMTVcIjogXCI2LjE4LjBcIixcbiAgICBcImJhYmVsaWZ5XCI6IFwiXjcuMy4wXCIsXG4gICAgXCJicm93c2VyaWZ5XCI6IFwiXjEzLjEuMFwiLFxuICAgIFwiZ3VscFwiOiBcIl4zLjkuMVwiLFxuICAgIFwiZ3VscC1iYWJlbFwiOiBcIl42LjEuMlwiLFxuICAgIFwiZ3VscC1icm93c2VyaWZ5XCI6IFwiXjAuNS4xXCIsXG4gICAgXCJndWxwLWxpdmVyZWxvYWRcIjogXCJeMy44LjFcIixcbiAgICBcImd1bHAtc291cmNlbWFwc1wiOiBcIl4xLjYuMFwiLFxuICAgIFwiZ3VscC11Z2xpZnlcIjogXCJeMS41LjRcIixcbiAgICBcInN1cGVyYWdlbnRcIjogXCJeMi4xLjBcIixcbiAgICBcInZpbnlsLWJ1ZmZlclwiOiBcIl4xLjAuMFwiLFxuICAgIFwidmlueWwtc291cmNlLXN0cmVhbVwiOiBcIl4xLjEuMFwiXG4gIH1cbn1cbiJdfQ==\n"]}