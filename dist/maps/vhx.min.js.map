{"version":3,"sources":["vhx.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_VHX_DEFAULTS","HOST","PROTOCOL","API_VERSION","version","TIMEOUT","../package.json","2","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","obj","constructor","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","request","Resource","api","path","methods","isToken","this","_this","_api","init","value","forEach","item","method","getMethod","type","getType","params","http_method","client_method","match","b","c","isCallbackFunction","callback","id","parseHref","options","scope","token","getToken","makeRequest","resource","isObject","href","val","parseInt","indexOf","host","substr","split","current_time","Date","getTime","url","protocol","timeStamp","then","data","console","log","timeout","headers","Authorization","auth","qs","args","getParams","withCredentials","set","send","end","err","response","errorHandler","status","body","statusCode","successHandler","error","JSON","parse","error_types","400","401","404","408","500","apply","./defaults","superagent","3","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","Collection","_Resource","getPrototypeOf","../resource","4","Customer","5","Product","6","Video","7","_interopRequireDefault","__esModule","default","_defaults","_defaults2","_resource","_collections","_collections2","_videos","_videos2","_customers","_customers2","_products","_products2","resources","collections","videos","products","customer","vhx","setApi","setToken","prepareResources","btoa","name","toLowerCase","substring","window","./resource","./resources/collections","./resources/customers","./resources/products","./resources/videos","8","Emitter","mixin","on","addEventListener","event","fn","_callbacks","push","once","off","arguments","removeListener","removeAllListeners","removeEventListener","callbacks","cb","splice","emit","slice","len","listeners","hasListeners","9","noop","serialize","pairs","pushEncodedKeyValuePair","join","Array","isArray","v","subkey","encodeURIComponent","parseString","str","pair","pos","decodeURIComponent","parseHeader","index","line","field","lines","fields","pop","trim","isJSON","mime","test","shift","reduce","parts","Response","req","xhr","text","responseType","responseText","statusText","_setStatusProperties","header","getAllResponseHeaders","getResponseHeader","_setHeaderProperties","_parseBody","Request","_query","_header","res","original","rawResponse","new_err","del","root","warn","requestBase","bind","getXHR","XMLHttpRequest","location","ActiveXObject","replace","serializeObject","types","html","json","xml","urlencoded","form","form-data","application/x-www-form-urlencoded","application/json","stringify","get","ct","statusType","info","ok","clientError","serverError","toError","accepted","noContent","badRequest","unauthorized","notAcceptable","notFound","forbidden","msg","_responseType","accept","user","pass","username","password","query","attach","file","filename","_getFormData","append","_formData","FormData","_callback","clearTimeout","crossDomainError","crossDomain","_timeoutError","_timeout","_appendQueryString","_data","onreadystatechange","readyState","timedout","_aborted","handleProgress","total","percent","loaded","direction","onprogress","upload","_timer","setTimeout","abort","open","_withCredentials","_isHost","contentType","_serializer","setRequestHeader","head","patch","post","put","./is-object","./request","./request-base","emitter","10","11","_parser","ms","resolve","reject","_fullfilledPromise","Promise","innerResolve","innerReject","use","getHeader","unset","redirects","_maxRedirects","toJSON","toString","12","RequestConstructor","13","description","main","scripts","author","license","devDependencies","babel-cli","babel-preset-es2015","babelify","browserify","gulp","gulp-babel","gulp-browserify","gulp-livereload","gulp-sourcemaps","gulp-uglify","vinyl-buffer","vinyl-source-stream"],"mappings":"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","file":"vhx.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _VHX_DEFAULTS = {\n  HOST: 'api.crystal.dev',\n  PROTOCOL: 'http://',\n  API_VERSION: require('../package.json').version,\n  TIMEOUT: '30000'\n};\n\nmodule.exports = _VHX_DEFAULTS;\n\n},{\"../package.json\":13}],2:[function(require,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar request = require('superagent');\nvar defaults = require('./defaults');\n\nvar Resource = function () {\n  function Resource(api, path, methods, isToken) {\n    _classCallCheck(this, Resource);\n\n    var _this = this;\n    _this._api = api;\n    _this.methods = methods;\n    _this.path = path;\n\n    _this.init();\n  }\n\n  _createClass(Resource, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      _this.methods.forEach(function (item) {\n        var method = _this.getMethod(item),\n            type = _this.getType(_this.path),\n            params = {\n          http_method: 'get', // superagent reads 'get' not 'GET'\n          client_method: method\n        };\n\n        if (method.match(/retrieve|items|files/i)) {\n          _this[method] = function (a, b, c) {\n            if (a[type]) {\n              if (_this.isCallbackFunction(b)) {\n                params.callback = b;\n              }\n              params.id = _this.parseHref(a[type]);\n              delete a[type];\n              params.options = a;\n            } else {\n              params.id = _this.parseHref(a);\n              if (_this.isCallbackFunction(b)) {\n                params.callback = b;\n              } else {\n                params.options = b;\n                params.callback = c;\n              }\n            }\n\n            params.scope = item.scope ? item.scope : null;\n\n            if (_this.api.token === null) {\n              _this.getToken();\n            } else {\n              _this.makeRequest(params);\n            }\n          };\n        } else {\n          _this[method] = function (options, callback) {\n            params.options = options;\n            params.callback = callback;\n\n            if (_this.isToken) {} else {\n              if (_this.api.token === null) {\n                _this.getToken();\n              } else {\n                _this.makeRequest(params);\n              }\n            }\n          };\n        }\n      });\n    }\n  }, {\n    key: 'getType',\n    value: function getType(resource) {\n      if (resource === 'collections') {\n        return 'collection';\n      }\n      if (resource === 'customers') {\n        return 'customer';\n      }\n      if (resource === 'videos') {\n        return 'video';\n      }\n\n      return 'id';\n    }\n  }, {\n    key: 'getMethod',\n    value: function getMethod(params) {\n      var _this = this;\n\n      if (_this.isObject(params) && params.method) {\n        return params.method;\n      } else {\n        return params;\n      }\n    }\n  }, {\n    key: 'parseHref',\n    value: function parseHref(href) {\n      var _this = this,\n          val = void 0;\n\n      if (parseInt(href, 10)) {\n        return href;\n      } else if (href.indexOf(_this._api.host) >= 0) {\n        if (href.substr(-1) === '/') {\n          href.substr(0, href.length - 1);\n        }\n        val = href.split('/');\n        return val[val.length - 1];\n      }\n    }\n  }, {\n    key: 'getToken',\n    value: function getToken() {\n      var _this = this;\n      var current_time = new Date().getTime();\n      var url = _this.api.protocol + _this._api.host + '/admin/collections/token';\n\n      if (_this.timeStamp + 1800000 <= current_time) {\n        request['get'](url).then(function (data) {\n          console.log('Success=======');\n          console.log(data);\n          _this._api.token = data.token;\n        }, function (data) {\n          console.log('Fail=======');\n          console.log(data);\n        });\n      }\n    }\n  }, {\n    key: 'timeStamp',\n    value: function timeStamp() {\n      return new Date().getTime();\n    }\n  }, {\n    key: 'getParams',\n    value: function getParams(client_method, id, options, scope) {\n      var _this = this,\n          params = {};\n\n      params.url = _this._api.protocol + _this._api.host + '/' + _this.path;\n      params.timeout = _this._api.timeout;\n      params.headers = {\n        'Authorization': _this._api.auth\n      };\n\n      params.qs = options || null;\n\n      if (!client_method.match(/^list$|^all$/)) {\n        params.url += '/' + id;\n      }\n\n      if (client_method.match(/items/i)) {\n        params.url += '/items';\n      }\n\n      if (client_method.match(/files/i)) {\n        params.url += '/files';\n      }\n\n      if (scope) {\n        params.url += '/' + scope;\n      }\n\n      return params;\n    }\n  }, {\n    key: 'makeRequest',\n    value: function makeRequest(args) {\n      var _this = this,\n          params = _this.getParams(args.client_method, args.id || null, args.options, args.scope);\n\n      if (_this.isCallbackFunction(args.options)) {\n        args.callback = args.options;\n      }\n\n      request[args.http_method](params.url).withCredentials().set(params.headers).send(params.qs).end(function (err, response) {\n        if (err && err.code === 'ETIMEDOUT') {\n          _this.errorHandler({\n            status: 408,\n            body: '{\"message\": \"The request timed out.\",\"documentation_url\": \"http://dev.vhx.tv/docs/api\"}',\n            callback: args.callback\n          });\n        }\n\n        if (!err && response.statusCode >= 200 && response.statusCode < 300) {\n          _this.successHandler({\n            body: response.body || null,\n            callback: args.callback\n          });\n        } else {\n          _this.errorHandler({\n            status: 408,\n            body: '{\"message\": \"The request timed out.\",\"documentation_url\": \"http://dev.vhx.tv/docs/api\"}',\n            callback: args.callback\n          });\n        }\n      });\n    }\n  }, {\n    key: 'successHandler',\n    value: function successHandler(args) {\n      args.callback(false, args.body);\n    }\n  }, {\n    key: 'errorHandler',\n    value: function errorHandler(args) {\n      var error = JSON.parse(args.body),\n          error_types = {\n        400: 'VHXInvalidRequestError',\n        401: 'VHXAuthenticationError',\n        404: 'VHXResourceNotFound',\n        408: 'VHXConnectionError',\n        500: 'VHXAPIError'\n      };\n\n      error.status = args.status;\n      error.type = error_types[error.status];\n      args.callback(error, null);\n    }\n  }, {\n    key: 'isCallbackFunction',\n    value: function isCallbackFunction(obj) {\n      return !!(obj && obj.constructor && obj.call && obj.apply);\n    }\n  }, {\n    key: 'isObject',\n    value: function isObject(obj) {\n      var type = typeof obj === 'undefined' ? 'undefined' : _typeof(obj);\n      return type === 'function' || type === 'object' && !!obj;\n    }\n  }]);\n\n  return Resource;\n}();\n\n;\n\nmodule.exports = Resource;\n\n},{\"./defaults\":1,\"superagent\":9}],3:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Collection = function (_Resource) {\n  _inherits(Collection, _Resource);\n\n  function Collection(api) {\n    _classCallCheck(this, Collection);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Collection).call(this, api, 'collections', ['all', 'list', 'items']));\n  }\n\n  return Collection;\n}(Resource);\n\n;\n\nmodule.exports = Collection;\n\n},{\"../resource\":2}],4:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Customer = function (_Resource) {\n  _inherits(Customer, _Resource);\n\n  function Customer(api) {\n    _classCallCheck(this, Customer);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Customer).call(this, api, 'customers', ['retrieve', 'all']));\n  }\n\n  return Customer;\n}(Resource);\n\n;\n\nmodule.exports = Customer;\n\n},{\"../resource\":2}],5:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Product = function (_Resource) {\n  _inherits(Product, _Resource);\n\n  function Product(api) {\n    _classCallCheck(this, Product);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Product).call(this, api, 'products', ['retrieve', 'all']));\n  }\n\n  return Product;\n}(Resource);\n\n;\n\nmodule.exports = Product;\n\n},{\"../resource\":2}],6:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Resource = require('../resource');\n\nvar Video = function (_Resource) {\n  _inherits(Video, _Resource);\n\n  function Video(api) {\n    _classCallCheck(this, Video);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Video).call(this, api, 'videos', ['all', 'retrieve', 'files']));\n  }\n\n  return Video;\n}(Resource);\n\n;\n\nmodule.exports = Video;\n\n},{\"../resource\":2}],7:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nvar _resource = require('./resource');\n\nvar _resource2 = _interopRequireDefault(_resource);\n\nvar _collections = require('./resources/collections');\n\nvar _collections2 = _interopRequireDefault(_collections);\n\nvar _videos = require('./resources/videos');\n\nvar _videos2 = _interopRequireDefault(_videos);\n\nvar _customers = require('./resources/customers');\n\nvar _customers2 = _interopRequireDefault(_customers);\n\nvar _products = require('./resources/products');\n\nvar _products2 = _interopRequireDefault(_products);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar resources = {\n  collections: _collections2.default,\n  videos: _videos2.default,\n  products: _products2.default,\n  customer: _customers2.default\n};\n\nvar vhx = function () {\n  function vhx(key) {\n    _classCallCheck(this, vhx);\n\n    var _this = this;\n\n    if (!(_this instanceof vhx)) {\n      return new vhx(key);\n    }\n\n    _this.api = key ? _this.setApi(key) : _this.setToken();\n    _this.prepareResources();\n  }\n\n  _createClass(vhx, [{\n    key: 'setApi',\n    value: function setApi(key) {\n      return {\n        auth: 'Basic ' + btoa(key),\n        host: _defaults2.default.HOST,\n        protocol: _defaults2.default.PROTOCOL,\n        timeout: _defaults2.default.TIMEOUT\n      };\n    }\n  }, {\n    key: 'setToken',\n    value: function setToken() {\n      return {\n        token: null\n      };\n    }\n  }, {\n    key: 'prepareResources',\n    value: function prepareResources() {\n      var _this = this;\n\n      for (var name in resources) {\n        _this[name[0].toLowerCase() + name.substring(1)] = new resources[name](_this.api);\n      }\n    }\n  }]);\n\n  return vhx;\n}();\n\nwindow.vhx = vhx;\n\n},{\"./defaults\":1,\"./resource\":2,\"./resources/collections\":3,\"./resources/customers\":4,\"./resources/products\":5,\"./resources/videos\":6}],8:[function(require,module,exports){\n\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n\n},{}],9:[function(require,module,exports){\n/**\n * Root reference for iframes.\n */\n\nvar root;\nif (typeof window !== 'undefined') { // Browser window\n  root = window;\n} else if (typeof self !== 'undefined') { // Web Worker\n  root = self;\n} else { // Other environments\n  console.warn(\"Using browser-only version of superagent in non-browser environment\");\n  root = this;\n}\n\nvar Emitter = require('emitter');\nvar requestBase = require('./request-base');\nvar isObject = require('./is-object');\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Expose `request`.\n */\n\nvar request = module.exports = require('./request').bind(null, Request);\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  throw Error(\"Browser-only verison of superagent could not find XHR\");\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    if (null != obj[key]) {\n      pushEncodedKeyValuePair(pairs, key, obj[key]);\n    }\n  }\n  return pairs.join('&');\n}\n\n/**\n * Helps 'serialize' with serializing arrays.\n * Mutates the pairs array.\n *\n * @param {Array} pairs\n * @param {String} key\n * @param {Mixed} val\n */\n\nfunction pushEncodedKeyValuePair(pairs, key, val) {\n  if (Array.isArray(val)) {\n    return val.forEach(function(v) {\n      pushEncodedKeyValuePair(pairs, key, v);\n    });\n  } else if (isObject(val)) {\n    for(var subkey in val) {\n      pushEncodedKeyValuePair(pairs, key + '[' + subkey + ']', val[subkey]);\n    }\n    return;\n  }\n  pairs.push(encodeURIComponent(key)\n    + '=' + encodeURIComponent(val));\n}\n\n/**\n * Expose serialization method.\n */\n\n request.serializeObject = serialize;\n\n /**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var pair;\n  var pos;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    pos = pair.indexOf('=');\n    if (pos == -1) {\n      obj[decodeURIComponent(pair)] = '';\n    } else {\n      obj[decodeURIComponent(pair.slice(0, pos))] =\n        decodeURIComponent(pair.slice(pos + 1));\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'application/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\n request.serialize = {\n   'application/x-www-form-urlencoded': serialize,\n   'application/json': JSON.stringify\n };\n\n /**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  lines.pop(); // trailing CRLF\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Check if `mime` is json or has +json structured syntax suffix.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api private\n */\n\nfunction isJSON(mime) {\n  return /[\\/+]json\\b/.test(mime);\n}\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction type(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction params(str){\n  return str.split(/ *; */).reduce(function(obj, str){\n    var parts = str.split(/ *= */),\n        key = parts.shift(),\n        val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req, options) {\n  options = options || {};\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  this._setStatusProperties(this.xhr.status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this._setHeaderProperties(this.header);\n  this.body = this.req.method != 'HEAD'\n    ? this._parseBody(this.text ? this.text : this.xhr.response)\n    : null;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponse.prototype.get = function(field){\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponse.prototype._setHeaderProperties = function(header){\n  // content-type\n  var ct = this.header['content-type'] || '';\n  this.type = type(ct);\n\n  // params\n  var obj = params(ct);\n  for (var key in obj) this[key] = obj[key];\n};\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype._parseBody = function(str){\n  var parse = request.parse[this.type];\n  if (!parse && isJSON(this.type)) {\n    parse = request.parse['application/json'];\n  }\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponse.prototype._setStatusProperties = function(status){\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n\n  var type = status / 100 | 0;\n\n  // status / class\n  this.status = this.statusCode = status;\n  this.statusType = type;\n\n  // basics\n  this.info = 1 == type;\n  this.ok = 2 == type;\n  this.clientError = 4 == type;\n  this.serverError = 5 == type;\n  this.error = (4 == type || 5 == type)\n    ? this.toError()\n    : false;\n\n  // sugar\n  this.accepted = 202 == status;\n  this.noContent = 204 == status;\n  this.badRequest = 400 == status;\n  this.unauthorized = 401 == status;\n  this.notAcceptable = 406 == status;\n  this.notFound = 404 == status;\n  this.forbidden = 403 == status;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {}; // preserves header name case\n  this._header = {}; // coerces header names to lowercase\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      // issue #675: return the raw response if the response parsing fails\n      err.rawResponse = self.xhr && self.xhr.responseText ? self.xhr.responseText : null;\n      // issue #876: return the http status code if the response parsing fails\n      err.statusCode = self.xhr && self.xhr.status ? self.xhr.status : null;\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    var new_err;\n    try {\n      if (res.status < 200 || res.status >= 300) {\n        new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n        new_err.original = err;\n        new_err.response = res;\n        new_err.status = res.status;\n      }\n    } catch(e) {\n      new_err = e; // #985 touching res may cause INVALID_STATE_ERR on old Android\n    }\n\n    // #1000 don't catch errors from the callback to avoid double calling it\n    if (new_err) {\n      self.callback(new_err, res);\n    } else {\n      self.callback(null, res);\n    }\n  });\n}\n\n/**\n * Mixin `Emitter` and `requestBase`.\n */\n\nEmitter(Request.prototype);\nfor (var key in requestBase) {\n  Request.prototype[key] = requestBase[key];\n}\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set responseType to `val`. Presently valid responseTypes are 'blob' and\n * 'arraybuffer'.\n *\n * Examples:\n *\n *      req.get('/')\n *        .responseType('blob')\n *        .end(callback);\n *\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.responseType = function(val){\n  this._responseType = val;\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} pass\n * @param {Object} options with 'type' property 'auto' or 'basic' (default 'basic')\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass, options){\n  if (!options) {\n    options = {\n      type: 'basic'\n    }\n  }\n\n  switch (options.type) {\n    case 'basic':\n      var str = btoa(user + ':' + pass);\n      this.set('Authorization', 'Basic ' + str);\n    break;\n\n    case 'auto':\n      this.username = user;\n      this.password = pass;\n    break;\n  }\n  return this;\n};\n\n/**\n* Add query-string `val`.\n*\n* Examples:\n*\n*   request.get('/shoes')\n*     .query('size=10')\n*     .query({ color: 'blue' })\n*\n* @param {Object|String} val\n* @return {Request} for chaining\n* @api public\n*/\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `filename`.\n *\n * ``` js\n * request.post('/upload')\n *   .attach('content', new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String} filename\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, filename){\n  this._getFormData().append(field, file, filename || file.name);\n  return this;\n};\n\nRequest.prototype._getFormData = function(){\n  if (!this._formData) {\n    this._formData = new root.FormData();\n  }\n  return this._formData;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  var fn = this._callback;\n  this.clearTimeout();\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');\n  err.crossDomain = true;\n\n  err.status = this.status;\n  err.method = this.method;\n  err.url = this.url;\n\n  this.callback(err);\n};\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequest.prototype._timeoutError = function(){\n  var timeout = this._timeout;\n  var err = new Error('timeout of ' + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  this.callback(err);\n};\n\n/**\n * Compose querystring to append to req.url\n *\n * @api private\n */\n\nRequest.prototype._appendQueryString = function(){\n  var query = this._query.join('&');\n  if (query) {\n    this.url += ~this.url.indexOf('?')\n      ? '&' + query\n      : '?' + query;\n  }\n};\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  var self = this;\n  var xhr = this.xhr = request.getXHR();\n  var timeout = this._timeout;\n  var data = this._formData || this._data;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // state change\n  xhr.onreadystatechange = function(){\n    if (4 != xhr.readyState) return;\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (0 == status) {\n      if (self.timedout) return self._timeoutError();\n      if (self._aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(e){\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    e.direction = 'download';\n    self.emit('progress', e);\n  };\n  if (this.hasListeners('progress')) {\n    xhr.onprogress = handleProgress;\n  }\n  try {\n    if (xhr.upload && this.hasListeners('progress')) {\n      xhr.upload.onprogress = handleProgress;\n    }\n  } catch(e) {\n    // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n    // Reported here:\n    // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n  }\n\n  // timeout\n  if (timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self.timedout = true;\n      self.abort();\n    }, timeout);\n  }\n\n  // querystring\n  this._appendQueryString();\n\n  // initiate request\n  if (this.username && this.password) {\n    xhr.open(this.method, this.url, true, this.username, this.password);\n  } else {\n    xhr.open(this.method, this.url, true);\n  }\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if ('GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !this._isHost(data)) {\n    // serialize stuff\n    var contentType = this._header['content-type'];\n    var serialize = this._serializer || request.serialize[contentType ? contentType.split(';')[0] : ''];\n    if (!serialize && isJSON(contentType)) serialize = request.serialize['application/json'];\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n    xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  if (this._responseType) {\n    xhr.responseType = this._responseType;\n  }\n\n  // send stuff\n  this.emit('request', this);\n\n  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)\n  // We need null here if data is undefined\n  xhr.send(typeof data !== 'undefined' ? data : null);\n  return this;\n};\n\n\n/**\n * Expose `Request`.\n */\n\nrequest.Request = Request;\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn){\n  var req = request('GET', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn){\n  var req = request('HEAD', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * OPTIONS query to `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.options = function(url, data, fn){\n  var req = request('OPTIONS', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nfunction del(url, fn){\n  var req = request('DELETE', url);\n  if (fn) req.end(fn);\n  return req;\n};\n\nrequest['del'] = del;\nrequest['delete'] = del;\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn){\n  var req = request('PATCH', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn){\n  var req = request('POST', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn){\n  var req = request('PUT', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n},{\"./is-object\":10,\"./request\":12,\"./request-base\":11,\"emitter\":8}],10:[function(require,module,exports){\n/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return null !== obj && 'object' === typeof obj;\n}\n\nmodule.exports = isObject;\n\n},{}],11:[function(require,module,exports){\n/**\n * Module of mixed-in functions shared between node and client code\n */\nvar isObject = require('./is-object');\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nexports.clearTimeout = function _clearTimeout(){\n  this._timeout = 0;\n  clearTimeout(this._timer);\n  return this;\n};\n\n/**\n * Override default response body parser\n *\n * This function will be called to convert incoming data into request.body\n *\n * @param {Function}\n * @api public\n */\n\nexports.parse = function parse(fn){\n  this._parser = fn;\n  return this;\n};\n\n/**\n * Override default request body serializer\n *\n * This function will be called to convert data set via .send or .attach into payload to send\n *\n * @param {Function}\n * @api public\n */\n\nexports.serialize = function serialize(fn){\n  this._serializer = fn;\n  return this;\n};\n\n/**\n * Set timeout to `ms`.\n *\n * @param {Number} ms\n * @return {Request} for chaining\n * @api public\n */\n\nexports.timeout = function timeout(ms){\n  this._timeout = ms;\n  return this;\n};\n\n/**\n * Promise support\n *\n * @param {Function} resolve\n * @param {Function} reject\n * @return {Request}\n */\n\nexports.then = function then(resolve, reject) {\n  if (!this._fullfilledPromise) {\n    var self = this;\n    this._fullfilledPromise = new Promise(function(innerResolve, innerReject){\n      self.end(function(err, res){\n        if (err) innerReject(err); else innerResolve(res);\n      });\n    });\n  }\n  return this._fullfilledPromise.then(resolve, reject);\n}\n\n/**\n * Allow for extension\n */\n\nexports.use = function use(fn) {\n  fn(this);\n  return this;\n}\n\n\n/**\n * Get request header `field`.\n * Case-insensitive.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nexports.get = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Get case-insensitive header `field` value.\n * This is a deprecated internal API. Use `.get(field)` instead.\n *\n * (getHeader is no longer used internally by the superagent code base)\n *\n * @param {String} field\n * @return {String}\n * @api private\n * @deprecated\n */\n\nexports.getHeader = exports.get;\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n * Case-insensitive.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nexports.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n * Case-insensitive.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n */\nexports.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Write the field `name` and `val` for \"multipart/form-data\"\n * request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n * ```\n *\n * @param {String} name\n * @param {String|Blob|File|Buffer|fs.ReadStream} val\n * @return {Request} for chaining\n * @api public\n */\nexports.field = function(name, val) {\n  this._getFormData().append(name, val);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\nexports.abort = function(){\n  if (this._aborted) {\n    return this;\n  }\n  this._aborted = true;\n  this.xhr && this.xhr.abort(); // browser\n  this.req && this.req.abort(); // node\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nexports.withCredentials = function(){\n  // This is browser-only functionality. Node side is no-op.\n  this._withCredentials = true;\n  return this;\n};\n\n/**\n * Set the max redirects to `n`. Does noting in browser XHR implementation.\n *\n * @param {Number} n\n * @return {Request} for chaining\n * @api public\n */\n\nexports.redirects = function(n){\n  this._maxRedirects = n;\n  return this;\n};\n\n/**\n * Convert to a plain javascript object (not JSON string) of scalar properties.\n * Note as this method is designed to return a useful non-this value,\n * it cannot be chained.\n *\n * @return {Object} describing method, url, and data of this request\n * @api public\n */\n\nexports.toJSON = function(){\n  return {\n    method: this.method,\n    url: this.url,\n    data: this._data,\n    headers: this._header\n  };\n};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * TODO: future proof, move to compoent land\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nexports._isHost = function _isHost(obj) {\n  var str = {}.toString.call(obj);\n\n  switch (str) {\n    case '[object File]':\n    case '[object Blob]':\n    case '[object FormData]':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Send `data` as the request body, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"}')\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n *      request.post('/user')\n *        .send('name=tobi')\n *        .send('species=ferret')\n *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nexports.send = function(data){\n  var obj = isObject(data);\n  var type = this._header['content-type'];\n\n  // merge\n  if (obj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    // default to x-www-form-urlencoded\n    if (!type) this.type('form');\n    type = this._header['content-type'];\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!obj || this._isHost(data)) return this;\n\n  // default to json\n  if (!type) this.type('json');\n  return this;\n};\n\n},{\"./is-object\":10}],12:[function(require,module,exports){\n// The node and browser modules expose versions of this with the\n// appropriate constructor function bound as first argument\n/**\n * Issue a request:\n *\n * Examples:\n *\n *    request('GET', '/users').end(callback)\n *    request('/users').end(callback)\n *    request('/users', callback)\n *\n * @param {String} method\n * @param {String|Function} url or callback\n * @return {Request}\n * @api public\n */\n\nfunction request(RequestConstructor, method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new RequestConstructor('GET', method).end(url);\n  }\n\n  // url first\n  if (2 == arguments.length) {\n    return new RequestConstructor('GET', method);\n  }\n\n  return new RequestConstructor(method, url);\n}\n\nmodule.exports = request;\n\n},{}],13:[function(require,module,exports){\nmodule.exports={\n  \"name\": \"vhx-js\",\n  \"version\": \"0.0.1\",\n  \"description\": \"VHX Javascript SDK\",\n  \"main\": \"vhx.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"David Gonzalez\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"babel-cli\": \"^6.11.4\",\n    \"babel-preset-es2015\": \"^6.9.0\",\n    \"babelify\": \"^7.3.0\",\n    \"browserify\": \"^13.1.0\",\n    \"gulp\": \"^3.9.1\",\n    \"gulp-babel\": \"^6.1.2\",\n    \"gulp-browserify\": \"^0.5.1\",\n    \"gulp-livereload\": \"^3.8.1\",\n    \"gulp-sourcemaps\": \"^1.6.0\",\n    \"gulp-uglify\": \"^1.5.4\",\n    \"superagent\": \"^2.1.0\",\n    \"vinyl-buffer\": \"^1.0.0\",\n    \"vinyl-source-stream\": \"^1.1.0\"\n  }\n}\n\n},{}]},{},[7])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvZGVmYXVsdHMuanMiLCJsaWIvcmVzb3VyY2UuanMiLCJsaWIvcmVzb3VyY2VzL2NvbGxlY3Rpb25zLmpzIiwibGliL3Jlc291cmNlcy9jdXN0b21lcnMuanMiLCJsaWIvcmVzb3VyY2VzL3Byb2R1Y3RzLmpzIiwibGliL3Jlc291cmNlcy92aWRlb3MuanMiLCJsaWIvdmh4LmpzIiwibm9kZV9tb2R1bGVzL2NvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3N1cGVyYWdlbnQvbGliL2NsaWVudC5qcyIsIm5vZGVfbW9kdWxlcy9zdXBlcmFnZW50L2xpYi9pcy1vYmplY3QuanMiLCJub2RlX21vZHVsZXMvc3VwZXJhZ2VudC9saWIvcmVxdWVzdC1iYXNlLmpzIiwibm9kZV9tb2R1bGVzL3N1cGVyYWdlbnQvbGliL3JlcXVlc3QuanMiLCJwYWNrYWdlLmpzb24iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQU0sZ0JBQWdCO0FBQ3BCLFFBQU0saUJBRGM7QUFFcEIsWUFBVSxTQUZVO0FBR3BCLGVBQWEsUUFBUSxpQkFBUixFQUEyQixPQUhwQjtBQUlwQixXQUFTO0FBSlcsQ0FBdEI7O0FBT0EsT0FBTyxPQUFQLEdBQWlCLGFBQWpCOzs7QUNQQTs7Ozs7Ozs7QUFFQSxJQUFNLFVBQVUsUUFBUSxZQUFSLENBQWhCO0FBQ0EsSUFBTSxXQUFXLFFBQVEsWUFBUixDQUFqQjs7SUFFTSxRO0FBQ0osb0JBQVksR0FBWixFQUFpQixJQUFqQixFQUF1QixPQUF2QixFQUFnQyxPQUFoQyxFQUF5QztBQUFBOztBQUN2QyxRQUFJLFFBQVksSUFBaEI7QUFDQSxVQUFNLElBQU4sR0FBZ0IsR0FBaEI7QUFDQSxVQUFNLE9BQU4sR0FBZ0IsT0FBaEI7QUFDQSxVQUFNLElBQU4sR0FBZ0IsSUFBaEI7O0FBRUEsVUFBTSxJQUFOO0FBQ0Q7Ozs7MkJBRU07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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzk4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImNvbnN0IF9WSFhfREVGQVVMVFMgPSB7XG4gIEhPU1Q6ICdhcGkuY3J5c3RhbC5kZXYnLFxuICBQUk9UT0NPTDogJ2h0dHA6Ly8nLFxuICBBUElfVkVSU0lPTjogcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJykudmVyc2lvbixcbiAgVElNRU9VVDogJzMwMDAwJ1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9WSFhfREVGQVVMVFM7XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcmFnZW50Jyk7XG5jb25zdCBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vZGVmYXVsdHMnKTtcblxuY2xhc3MgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGksIHBhdGgsIG1ldGhvZHMsIGlzVG9rZW4pIHtcbiAgICBsZXQgX3RoaXMgICAgID0gdGhpcztcbiAgICBfdGhpcy5fYXBpICAgID0gYXBpO1xuICAgIF90aGlzLm1ldGhvZHMgPSBtZXRob2RzO1xuICAgIF90aGlzLnBhdGggICAgPSBwYXRoO1xuXG4gICAgX3RoaXMuaW5pdCgpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMubWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIGxldCBtZXRob2QgPSBfdGhpcy5nZXRNZXRob2QoaXRlbSksXG4gICAgICAgICAgdHlwZSA9IF90aGlzLmdldFR5cGUoX3RoaXMucGF0aCksXG4gICAgICAgICAgcGFyYW1zID0ge1xuICAgICAgICAgICAgaHR0cF9tZXRob2Q6ICdnZXQnLCAvLyBzdXBlcmFnZW50IHJlYWRzICdnZXQnIG5vdCAnR0VUJ1xuICAgICAgICAgICAgY2xpZW50X21ldGhvZDogbWV0aG9kXG4gICAgICAgICAgfTtcblxuICAgICAgaWYgKG1ldGhvZC5tYXRjaCgvcmV0cmlldmV8aXRlbXN8ZmlsZXMvaSkpIHtcbiAgICAgICAgX3RoaXNbbWV0aG9kXSA9IGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgICAgICBpZiAoYVt0eXBlXSkge1xuICAgICAgICAgICBpZiAoX3RoaXMuaXNDYWxsYmFja0Z1bmN0aW9uKGIpKSB7XG4gICAgICAgICAgICAgcGFyYW1zLmNhbGxiYWNrID0gYjtcbiAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyYW1zLmlkID0gX3RoaXMucGFyc2VIcmVmKGFbdHlwZV0pO1xuICAgICAgICAgICAgZGVsZXRlIGFbdHlwZV07XG4gICAgICAgICAgICBwYXJhbXMub3B0aW9ucyA9IGE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyYW1zLmlkID0gX3RoaXMucGFyc2VIcmVmKGEpO1xuICAgICAgICAgICAgaWYgKF90aGlzLmlzQ2FsbGJhY2tGdW5jdGlvbihiKSkge1xuICAgICAgICAgICAgICBwYXJhbXMuY2FsbGJhY2sgPSBiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcGFyYW1zLm9wdGlvbnMgPSBiO1xuICAgICAgICAgICAgICBwYXJhbXMuY2FsbGJhY2sgPSBjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHBhcmFtcy5zY29wZSA9IGl0ZW0uc2NvcGUgPyBpdGVtLnNjb3BlIDogbnVsbDtcblxuICAgICAgICAgIGlmIChfdGhpcy5hcGkudG9rZW4gPT09IG51bGwpIHtcbiAgICAgICAgICAgIF90aGlzLmdldFRva2VuKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLm1ha2VSZXF1ZXN0KHBhcmFtcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIF90aGlzW21ldGhvZF0gPSBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgICAgIHBhcmFtcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgICBwYXJhbXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcblxuICAgICAgICAgIGlmIChfdGhpcy5pc1Rva2VuKSB7XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKF90aGlzLmFwaS50b2tlbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICBfdGhpcy5nZXRUb2tlbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgX3RoaXMubWFrZVJlcXVlc3QocGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRUeXBlKHJlc291cmNlKSB7XG4gICAgaWYgKHJlc291cmNlID09PSAnY29sbGVjdGlvbnMnKSB7XG4gICAgICByZXR1cm4gJ2NvbGxlY3Rpb24nO1xuICAgIH1cbiAgICBpZiAocmVzb3VyY2UgPT09ICdjdXN0b21lcnMnKSB7XG4gICAgICByZXR1cm4gJ2N1c3RvbWVyJztcbiAgICB9XG4gICAgaWYgKHJlc291cmNlID09PSAndmlkZW9zJykge1xuICAgICAgcmV0dXJuICd2aWRlbyc7XG4gICAgfVxuXG4gICAgcmV0dXJuICdpZCc7XG4gIH1cblxuICBnZXRNZXRob2QocGFyYW1zKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIGlmIChfdGhpcy5pc09iamVjdChwYXJhbXMpICYmIHBhcmFtcy5tZXRob2QpIHtcbiAgICAgIHJldHVybiBwYXJhbXMubWV0aG9kO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbiAgfVxuXG4gIHBhcnNlSHJlZihocmVmKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcyxcbiAgICAgICAgdmFsO1xuXG4gICAgaWYgKHBhcnNlSW50KGhyZWYsIDEwKSkge1xuICAgICAgcmV0dXJuIGhyZWY7XG4gICAgfVxuICAgIGVsc2UgaWYgKGhyZWYuaW5kZXhPZihfdGhpcy5fYXBpLmhvc3QpID49IDApIHtcbiAgICAgIGlmIChocmVmLnN1YnN0cigtMSkgPT09ICcvJykge1xuICAgICAgICBocmVmLnN1YnN0cigwLCBocmVmLmxlbmd0aC0xKTtcbiAgICAgIH1cbiAgICAgIHZhbCA9IGhyZWYuc3BsaXQoJy8nKTtcbiAgICAgIHJldHVybiB2YWxbdmFsLmxlbmd0aC0xXTtcbiAgICB9XG4gIH1cblxuICBnZXRUb2tlbigpIHtcbiAgICBsZXQgX3RoaXMgICAgICAgID0gdGhpcztcbiAgICBsZXQgY3VycmVudF90aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgbGV0IHVybCA9IF90aGlzLmFwaS5wcm90b2NvbCArIF90aGlzLl9hcGkuaG9zdCArICcvYWRtaW4vY29sbGVjdGlvbnMvdG9rZW4nO1xuXG4gICAgaWYgKF90aGlzLnRpbWVTdGFtcCArIDE4MDAwMDAgPD0gY3VycmVudF90aW1lKSB7XG4gICAgICByZXF1ZXN0WydnZXQnXSh1cmwpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnU3VjY2Vzcz09PT09PT0nKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICBfdGhpcy5fYXBpLnRva2VuID0gZGF0YS50b2tlbjtcbiAgICAgICAgfSwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsPT09PT09PScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICB0aW1lU3RhbXAoKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB9XG5cbiAgZ2V0UGFyYW1zKGNsaWVudF9tZXRob2QsIGlkLCBvcHRpb25zLCBzY29wZSkge1xuICAgIGxldCBfdGhpcyA9IHRoaXMsXG4gICAgICAgIHBhcmFtcyA9IHt9O1xuXG4gICAgcGFyYW1zLnVybCA9IF90aGlzLl9hcGkucHJvdG9jb2wgKyBfdGhpcy5fYXBpLmhvc3QgKyAnLycgKyBfdGhpcy5wYXRoO1xuICAgIHBhcmFtcy50aW1lb3V0ID0gX3RoaXMuX2FwaS50aW1lb3V0O1xuICAgIHBhcmFtcy5oZWFkZXJzID0ge1xuICAgICAgJ0F1dGhvcml6YXRpb24nOiBfdGhpcy5fYXBpLmF1dGhcbiAgICB9O1xuXG4gICAgcGFyYW1zLnFzID0gb3B0aW9ucyB8fCBudWxsO1xuXG4gICAgaWYgKCFjbGllbnRfbWV0aG9kLm1hdGNoKC9ebGlzdCR8XmFsbCQvKSkge1xuICAgICAgcGFyYW1zLnVybCArPSAnLycgKyBpZDtcbiAgICB9XG5cbiAgICBpZiAoY2xpZW50X21ldGhvZC5tYXRjaCgvaXRlbXMvaSkpIHtcbiAgICAgIHBhcmFtcy51cmwgKz0gJy9pdGVtcyc7XG4gICAgfVxuXG4gICAgaWYgKGNsaWVudF9tZXRob2QubWF0Y2goL2ZpbGVzL2kpKSB7XG4gICAgICBwYXJhbXMudXJsICs9ICcvZmlsZXMnO1xuICAgIH1cblxuICAgIGlmIChzY29wZSkge1xuICAgICAgcGFyYW1zLnVybCArPSAnLycgKyBzY29wZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgbWFrZVJlcXVlc3QoYXJncykge1xuICAgIGxldCBfdGhpcyA9IHRoaXMsXG4gICAgICAgIHBhcmFtcyA9IF90aGlzLmdldFBhcmFtcyhhcmdzLmNsaWVudF9tZXRob2QsIGFyZ3MuaWQgfHwgbnVsbCwgYXJncy5vcHRpb25zLCBhcmdzLnNjb3BlKTtcblxuICAgIGlmIChfdGhpcy5pc0NhbGxiYWNrRnVuY3Rpb24oYXJncy5vcHRpb25zKSkge1xuICAgICAgYXJncy5jYWxsYmFjayA9IGFyZ3Mub3B0aW9ucztcbiAgICB9XG5cbiAgICByZXF1ZXN0W2FyZ3MuaHR0cF9tZXRob2RdKHBhcmFtcy51cmwpXG4gICAgICAud2l0aENyZWRlbnRpYWxzKClcbiAgICAgIC5zZXQocGFyYW1zLmhlYWRlcnMpXG4gICAgICAuc2VuZChwYXJhbXMucXMpXG4gICAgICAuZW5kKGZ1bmN0aW9uKGVyciwgcmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKGVyciAmJiBlcnIuY29kZSA9PT0gJ0VUSU1FRE9VVCcpIHtcbiAgICAgICAgICBfdGhpcy5lcnJvckhhbmRsZXIoe1xuICAgICAgICAgICAgc3RhdHVzOiA0MDgsXG4gICAgICAgICAgICBib2R5OiAne1wibWVzc2FnZVwiOiBcIlRoZSByZXF1ZXN0IHRpbWVkIG91dC5cIixcImRvY3VtZW50YXRpb25fdXJsXCI6IFwiaHR0cDovL2Rldi52aHgudHYvZG9jcy9hcGlcIn0nLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFyZ3MuY2FsbGJhY2tcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZXJyICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPCAzMDApIHtcbiAgICAgICAgICBfdGhpcy5zdWNjZXNzSGFuZGxlcih7XG4gICAgICAgICAgICBib2R5OiByZXNwb25zZS5ib2R5IHx8IG51bGwsXG4gICAgICAgICAgICBjYWxsYmFjazogYXJncy5jYWxsYmFja1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzLmVycm9ySGFuZGxlcih7XG4gICAgICAgICAgICBzdGF0dXM6IDQwOCxcbiAgICAgICAgICAgIGJvZHk6ICd7XCJtZXNzYWdlXCI6IFwiVGhlIHJlcXVlc3QgdGltZWQgb3V0LlwiLFwiZG9jdW1lbnRhdGlvbl91cmxcIjogXCJodHRwOi8vZGV2LnZoeC50di9kb2NzL2FwaVwifScsXG4gICAgICAgICAgICBjYWxsYmFjazogYXJncy5jYWxsYmFja1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIHN1Y2Nlc3NIYW5kbGVyKGFyZ3MpIHtcbiAgICBhcmdzLmNhbGxiYWNrKGZhbHNlLCBhcmdzLmJvZHkpO1xuICB9XG5cbiAgZXJyb3JIYW5kbGVyKGFyZ3MpIHtcbiAgICBsZXQgZXJyb3IgPSBKU09OLnBhcnNlKGFyZ3MuYm9keSksXG4gICAgICAgIGVycm9yX3R5cGVzID0ge1xuICAgICAgICAgIDQwMDogJ1ZIWEludmFsaWRSZXF1ZXN0RXJyb3InLFxuICAgICAgICAgIDQwMTogJ1ZIWEF1dGhlbnRpY2F0aW9uRXJyb3InLFxuICAgICAgICAgIDQwNDogJ1ZIWFJlc291cmNlTm90Rm91bmQnLFxuICAgICAgICAgIDQwODogJ1ZIWENvbm5lY3Rpb25FcnJvcicsXG4gICAgICAgICAgNTAwOiAnVkhYQVBJRXJyb3InXG4gICAgICAgIH07XG5cbiAgICBlcnJvci5zdGF0dXMgPSBhcmdzLnN0YXR1cztcbiAgICBlcnJvci50eXBlID0gZXJyb3JfdHlwZXNbZXJyb3Iuc3RhdHVzXTtcbiAgICBhcmdzLmNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgfVxuXG4gIGlzQ2FsbGJhY2tGdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5jb25zdHJ1Y3RvciAmJiBvYmouY2FsbCAmJiBvYmouYXBwbHkpO1xuICB9XG5cbiAgaXNPYmplY3Qob2JqKSB7XG4gICAgbGV0IHR5cGUgPSB0eXBlb2Ygb2JqO1xuICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhb2JqO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlc291cmNlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVzb3VyY2UgPSByZXF1aXJlKCcuLi9yZXNvdXJjZScpO1xuXG5jbGFzcyBDb2xsZWN0aW9uIGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICdjb2xsZWN0aW9ucycsIFsnYWxsJywgJ2xpc3QnLCAnaXRlbXMnXSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ29sbGVjdGlvbjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFJlc291cmNlID0gcmVxdWlyZSgnLi4vcmVzb3VyY2UnKTtcblxuY2xhc3MgQ3VzdG9tZXIgZXh0ZW5kcyBSZXNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKGFwaSkge1xuICAgIHN1cGVyKGFwaSwgJ2N1c3RvbWVycycsIFsncmV0cmlldmUnLCAnYWxsJ10pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEN1c3RvbWVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVzb3VyY2UgPSByZXF1aXJlKCcuLi9yZXNvdXJjZScpO1xuXG5jbGFzcyBQcm9kdWN0IGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICdwcm9kdWN0cycsIFsncmV0cmlldmUnLCAnYWxsJ10pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByb2R1Y3Q7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBSZXNvdXJjZSA9IHJlcXVpcmUoJy4uL3Jlc291cmNlJyk7XG5cbmNsYXNzIFZpZGVvIGV4dGVuZHMgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihhcGkpIHtcbiAgICBzdXBlcihhcGksICd2aWRlb3MnLCBbJ2FsbCcsICdyZXRyaWV2ZScsICdmaWxlcyddKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBWaWRlbztcbiIsImltcG9ydCBkZWZhdWx0cyBmcm9tICcuL2RlZmF1bHRzJztcbmltcG9ydCBSZXNvdXJjZSBmcm9tICcuL3Jlc291cmNlJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vcmVzb3VyY2VzL2NvbGxlY3Rpb25zJztcbmltcG9ydCBWaWRlbyBmcm9tICcuL3Jlc291cmNlcy92aWRlb3MnO1xuaW1wb3J0IEN1c3RvbWVyIGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbWVycydcbmltcG9ydCBQcm9kdWN0IGZyb20gJy4vcmVzb3VyY2VzL3Byb2R1Y3RzJ1xuXG5sZXQgcmVzb3VyY2VzID0ge1xuICBjb2xsZWN0aW9ucyA6IENvbGxlY3Rpb24sXG4gIHZpZGVvcyAgICAgIDogVmlkZW8sXG4gIHByb2R1Y3RzICAgIDogUHJvZHVjdCxcbiAgY3VzdG9tZXIgICAgOiBDdXN0b21lclxufTtcblxuY2xhc3Mgdmh4IHtcbiAgY29uc3RydWN0b3Ioa2V5KSB7XG4gICAgbGV0IF90aGlzICAgID0gdGhpcztcblxuICAgIGlmICghKF90aGlzIGluc3RhbmNlb2Ygdmh4KSkge1xuICAgICAgcmV0dXJuIG5ldyB2aHgoa2V5KTtcbiAgICB9XG5cbiAgICBfdGhpcy5hcGkgPSBrZXkgPyBfdGhpcy5zZXRBcGkoa2V5KSA6IF90aGlzLnNldFRva2VuKCk7XG4gICAgX3RoaXMucHJlcGFyZVJlc291cmNlcygpO1xuICB9XG5cbiAgc2V0QXBpKGtleSkge1xuICAgIHJldHVybiB7XG4gICAgICBhdXRoOiAnQmFzaWMgJyArIGJ0b2Eoa2V5KSxcbiAgICAgIGhvc3Q6IGRlZmF1bHRzLkhPU1QsXG4gICAgICBwcm90b2NvbDogZGVmYXVsdHMuUFJPVE9DT0wsXG4gICAgICB0aW1lb3V0OiBkZWZhdWx0cy5USU1FT1VUXG4gICAgfVxuICB9XG5cbiAgc2V0VG9rZW4oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRva2VuOiBudWxsXG4gICAgfVxuICB9XG5cbiAgcHJlcGFyZVJlc291cmNlcygpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgZm9yIChsZXQgbmFtZSBpbiByZXNvdXJjZXMpIHtcbiAgICAgIF90aGlzW25hbWVbMF0udG9Mb3dlckNhc2UoKSArIG5hbWUuc3Vic3RyaW5nKDEpXSA9IG5ldyByZXNvdXJjZXNbbmFtZV0oX3RoaXMuYXBpKTtcbiAgICB9XG4gIH1cbn1cblxud2luZG93LnZoeCA9IHZoeDtcbiIsIlxyXG4vKipcclxuICogRXhwb3NlIGBFbWl0dGVyYC5cclxuICovXHJcblxyXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICBtb2R1bGUuZXhwb3J0cyA9IEVtaXR0ZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIGEgbmV3IGBFbWl0dGVyYC5cclxuICpcclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5mdW5jdGlvbiBFbWl0dGVyKG9iaikge1xyXG4gIGlmIChvYmopIHJldHVybiBtaXhpbihvYmopO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1peGluIHRoZSBlbWl0dGVyIHByb3BlcnRpZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcclxuICogQHJldHVybiB7T2JqZWN0fVxyXG4gKiBAYXBpIHByaXZhdGVcclxuICovXHJcblxyXG5mdW5jdGlvbiBtaXhpbihvYmopIHtcclxuICBmb3IgKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHtcclxuICAgIG9ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTtcclxuICB9XHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuLyoqXHJcbiAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLm9uID1cclxuRW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gICh0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXSlcclxuICAgIC5wdXNoKGZuKTtcclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcclxuICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXHJcbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgZnVuY3Rpb24gb24oKSB7XHJcbiAgICB0aGlzLm9mZihldmVudCwgb24pO1xyXG4gICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICB9XHJcblxyXG4gIG9uLmZuID0gZm47XHJcbiAgdGhpcy5vbihldmVudCwgb24pO1xyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXHJcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICogQHJldHVybiB7RW1pdHRlcn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5vZmYgPVxyXG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCwgZm4pe1xyXG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcclxuXHJcbiAgLy8gYWxsXHJcbiAgaWYgKDAgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgdGhpcy5fY2FsbGJhY2tzID0ge307XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8vIHNwZWNpZmljIGV2ZW50XHJcbiAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcbiAgaWYgKCFjYWxsYmFja3MpIHJldHVybiB0aGlzO1xyXG5cclxuICAvLyByZW1vdmUgYWxsIGhhbmRsZXJzXHJcbiAgaWYgKDEgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8vIHJlbW92ZSBzcGVjaWZpYyBoYW5kbGVyXHJcbiAgdmFyIGNiO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjYiA9IGNhbGxiYWNrc1tpXTtcclxuICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XHJcbiAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBFbWl0IGBldmVudGAgd2l0aCB0aGUgZ2l2ZW4gYXJncy5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7TWl4ZWR9IC4uLlxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpXHJcbiAgICAsIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcblxyXG4gIGlmIChjYWxsYmFja3MpIHtcclxuICAgIGNhbGxiYWNrcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgY2FsbGJhY2tzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogUmV0dXJuIGFycmF5IG9mIGNhbGxiYWNrcyBmb3IgYGV2ZW50YC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XHJcbiAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gfHwgW107XHJcbn07XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdGhpcyBlbWl0dGVyIGhhcyBgZXZlbnRgIGhhbmRsZXJzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHJldHVybiB7Qm9vbGVhbn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgcmV0dXJuICEhIHRoaXMubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGg7XHJcbn07XHJcbiIsIi8qKlxuICogUm9vdCByZWZlcmVuY2UgZm9yIGlmcmFtZXMuXG4gKi9cblxudmFyIHJvb3Q7XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsgLy8gQnJvd3NlciB3aW5kb3dcbiAgcm9vdCA9IHdpbmRvdztcbn0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7IC8vIFdlYiBXb3JrZXJcbiAgcm9vdCA9IHNlbGY7XG59IGVsc2UgeyAvLyBPdGhlciBlbnZpcm9ubWVudHNcbiAgY29uc29sZS53YXJuKFwiVXNpbmcgYnJvd3Nlci1vbmx5IHZlcnNpb24gb2Ygc3VwZXJhZ2VudCBpbiBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcbiAgcm9vdCA9IHRoaXM7XG59XG5cbnZhciBFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpO1xudmFyIHJlcXVlc3RCYXNlID0gcmVxdWlyZSgnLi9yZXF1ZXN0LWJhc2UnKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXMtb2JqZWN0Jyk7XG5cbi8qKlxuICogTm9vcC5cbiAqL1xuXG5mdW5jdGlvbiBub29wKCl7fTtcblxuLyoqXG4gKiBFeHBvc2UgYHJlcXVlc3RgLlxuICovXG5cbnZhciByZXF1ZXN0ID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL3JlcXVlc3QnKS5iaW5kKG51bGwsIFJlcXVlc3QpO1xuXG4vKipcbiAqIERldGVybWluZSBYSFIuXG4gKi9cblxucmVxdWVzdC5nZXRYSFIgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChyb290LlhNTEh0dHBSZXF1ZXN0XG4gICAgICAmJiAoIXJvb3QubG9jYXRpb24gfHwgJ2ZpbGU6JyAhPSByb290LmxvY2F0aW9uLnByb3RvY29sXG4gICAgICAgICAgfHwgIXJvb3QuQWN0aXZlWE9iamVjdCkpIHtcbiAgICByZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0O1xuICB9IGVsc2Uge1xuICAgIHRyeSB7IHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTWljcm9zb2Z0LlhNTEhUVFAnKTsgfSBjYXRjaChlKSB7fVxuICAgIHRyeSB7IHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTXN4bWwyLlhNTEhUVFAuNi4wJyk7IH0gY2F0Y2goZSkge31cbiAgICB0cnkgeyByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoJ01zeG1sMi5YTUxIVFRQLjMuMCcpOyB9IGNhdGNoKGUpIHt9XG4gICAgdHJ5IHsgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNc3htbDIuWE1MSFRUUCcpOyB9IGNhdGNoKGUpIHt9XG4gIH1cbiAgdGhyb3cgRXJyb3IoXCJCcm93c2VyLW9ubHkgdmVyaXNvbiBvZiBzdXBlcmFnZW50IGNvdWxkIG5vdCBmaW5kIFhIUlwiKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLCBhZGRlZCB0byBzdXBwb3J0IElFLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG52YXIgdHJpbSA9ICcnLnRyaW1cbiAgPyBmdW5jdGlvbihzKSB7IHJldHVybiBzLnRyaW0oKTsgfVxuICA6IGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMucmVwbGFjZSgvKF5cXHMqfFxccyokKS9nLCAnJyk7IH07XG5cbi8qKlxuICogU2VyaWFsaXplIHRoZSBnaXZlbiBgb2JqYC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBzZXJpYWxpemUob2JqKSB7XG4gIGlmICghaXNPYmplY3Qob2JqKSkgcmV0dXJuIG9iajtcbiAgdmFyIHBhaXJzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAobnVsbCAhPSBvYmpba2V5XSkge1xuICAgICAgcHVzaEVuY29kZWRLZXlWYWx1ZVBhaXIocGFpcnMsIGtleSwgb2JqW2tleV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcGFpcnMuam9pbignJicpO1xufVxuXG4vKipcbiAqIEhlbHBzICdzZXJpYWxpemUnIHdpdGggc2VyaWFsaXppbmcgYXJyYXlzLlxuICogTXV0YXRlcyB0aGUgcGFpcnMgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcGFpcnNcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7TWl4ZWR9IHZhbFxuICovXG5cbmZ1bmN0aW9uIHB1c2hFbmNvZGVkS2V5VmFsdWVQYWlyKHBhaXJzLCBrZXksIHZhbCkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgcmV0dXJuIHZhbC5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcbiAgICAgIHB1c2hFbmNvZGVkS2V5VmFsdWVQYWlyKHBhaXJzLCBrZXksIHYpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbCkpIHtcbiAgICBmb3IodmFyIHN1YmtleSBpbiB2YWwpIHtcbiAgICAgIHB1c2hFbmNvZGVkS2V5VmFsdWVQYWlyKHBhaXJzLCBrZXkgKyAnWycgKyBzdWJrZXkgKyAnXScsIHZhbFtzdWJrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIHBhaXJzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSlcbiAgICArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpKTtcbn1cblxuLyoqXG4gKiBFeHBvc2Ugc2VyaWFsaXphdGlvbiBtZXRob2QuXG4gKi9cblxuIHJlcXVlc3Quc2VyaWFsaXplT2JqZWN0ID0gc2VyaWFsaXplO1xuXG4gLyoqXG4gICogUGFyc2UgdGhlIGdpdmVuIHgtd3d3LWZvcm0tdXJsZW5jb2RlZCBgc3RyYC5cbiAgKlxuICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICogQGFwaSBwcml2YXRlXG4gICovXG5cbmZ1bmN0aW9uIHBhcnNlU3RyaW5nKHN0cikge1xuICB2YXIgb2JqID0ge307XG4gIHZhciBwYWlycyA9IHN0ci5zcGxpdCgnJicpO1xuICB2YXIgcGFpcjtcbiAgdmFyIHBvcztcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gcGFpcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBwYWlyID0gcGFpcnNbaV07XG4gICAgcG9zID0gcGFpci5pbmRleE9mKCc9Jyk7XG4gICAgaWYgKHBvcyA9PSAtMSkge1xuICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChwYWlyKV0gPSAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChwYWlyLnNsaWNlKDAsIHBvcykpXSA9XG4gICAgICAgIGRlY29kZVVSSUNvbXBvbmVudChwYWlyLnNsaWNlKHBvcyArIDEpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIEV4cG9zZSBwYXJzZXIuXG4gKi9cblxucmVxdWVzdC5wYXJzZVN0cmluZyA9IHBhcnNlU3RyaW5nO1xuXG4vKipcbiAqIERlZmF1bHQgTUlNRSB0eXBlIG1hcC5cbiAqXG4gKiAgICAgc3VwZXJhZ2VudC50eXBlcy54bWwgPSAnYXBwbGljYXRpb24veG1sJztcbiAqXG4gKi9cblxucmVxdWVzdC50eXBlcyA9IHtcbiAgaHRtbDogJ3RleHQvaHRtbCcsXG4gIGpzb246ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgeG1sOiAnYXBwbGljYXRpb24veG1sJyxcbiAgdXJsZW5jb2RlZDogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICdmb3JtJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICdmb3JtLWRhdGEnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xufTtcblxuLyoqXG4gKiBEZWZhdWx0IHNlcmlhbGl6YXRpb24gbWFwLlxuICpcbiAqICAgICBzdXBlcmFnZW50LnNlcmlhbGl6ZVsnYXBwbGljYXRpb24veG1sJ10gPSBmdW5jdGlvbihvYmope1xuICogICAgICAgcmV0dXJuICdnZW5lcmF0ZWQgeG1sIGhlcmUnO1xuICogICAgIH07XG4gKlxuICovXG5cbiByZXF1ZXN0LnNlcmlhbGl6ZSA9IHtcbiAgICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnOiBzZXJpYWxpemUsXG4gICAnYXBwbGljYXRpb24vanNvbic6IEpTT04uc3RyaW5naWZ5XG4gfTtcblxuIC8qKlxuICAqIERlZmF1bHQgcGFyc2Vycy5cbiAgKlxuICAqICAgICBzdXBlcmFnZW50LnBhcnNlWydhcHBsaWNhdGlvbi94bWwnXSA9IGZ1bmN0aW9uKHN0cil7XG4gICogICAgICAgcmV0dXJuIHsgb2JqZWN0IHBhcnNlZCBmcm9tIHN0ciB9O1xuICAqICAgICB9O1xuICAqXG4gICovXG5cbnJlcXVlc3QucGFyc2UgPSB7XG4gICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnOiBwYXJzZVN0cmluZyxcbiAgJ2FwcGxpY2F0aW9uL2pzb24nOiBKU09OLnBhcnNlXG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBoZWFkZXIgYHN0cmAgaW50b1xuICogYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG1hcHBlZCBmaWVsZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2VIZWFkZXIoc3RyKSB7XG4gIHZhciBsaW5lcyA9IHN0ci5zcGxpdCgvXFxyP1xcbi8pO1xuICB2YXIgZmllbGRzID0ge307XG4gIHZhciBpbmRleDtcbiAgdmFyIGxpbmU7XG4gIHZhciBmaWVsZDtcbiAgdmFyIHZhbDtcblxuICBsaW5lcy5wb3AoKTsgLy8gdHJhaWxpbmcgQ1JMRlxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsaW5lcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIGxpbmUgPSBsaW5lc1tpXTtcbiAgICBpbmRleCA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGZpZWxkID0gbGluZS5zbGljZSgwLCBpbmRleCkudG9Mb3dlckNhc2UoKTtcbiAgICB2YWwgPSB0cmltKGxpbmUuc2xpY2UoaW5kZXggKyAxKSk7XG4gICAgZmllbGRzW2ZpZWxkXSA9IHZhbDtcbiAgfVxuXG4gIHJldHVybiBmaWVsZHM7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYG1pbWVgIGlzIGpzb24gb3IgaGFzICtqc29uIHN0cnVjdHVyZWQgc3ludGF4IHN1ZmZpeC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWltZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGlzSlNPTihtaW1lKSB7XG4gIHJldHVybiAvW1xcLytdanNvblxcYi8udGVzdChtaW1lKTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIG1pbWUgdHlwZSBmb3IgdGhlIGdpdmVuIGBzdHJgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHR5cGUoc3RyKXtcbiAgcmV0dXJuIHN0ci5zcGxpdCgvICo7ICovKS5zaGlmdCgpO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gaGVhZGVyIGZpZWxkIHBhcmFtZXRlcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyYW1zKHN0cil7XG4gIHJldHVybiBzdHIuc3BsaXQoLyAqOyAqLykucmVkdWNlKGZ1bmN0aW9uKG9iaiwgc3RyKXtcbiAgICB2YXIgcGFydHMgPSBzdHIuc3BsaXQoLyAqPSAqLyksXG4gICAgICAgIGtleSA9IHBhcnRzLnNoaWZ0KCksXG4gICAgICAgIHZhbCA9IHBhcnRzLnNoaWZ0KCk7XG5cbiAgICBpZiAoa2V5ICYmIHZhbCkgb2JqW2tleV0gPSB2YWw7XG4gICAgcmV0dXJuIG9iajtcbiAgfSwge30pO1xufTtcblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBSZXNwb25zZWAgd2l0aCB0aGUgZ2l2ZW4gYHhocmAuXG4gKlxuICogIC0gc2V0IGZsYWdzICgub2ssIC5lcnJvciwgZXRjKVxuICogIC0gcGFyc2UgaGVhZGVyXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogIEFsaWFzaW5nIGBzdXBlcmFnZW50YCBhcyBgcmVxdWVzdGAgaXMgbmljZTpcbiAqXG4gKiAgICAgIHJlcXVlc3QgPSBzdXBlcmFnZW50O1xuICpcbiAqICBXZSBjYW4gdXNlIHRoZSBwcm9taXNlLWxpa2UgQVBJLCBvciBwYXNzIGNhbGxiYWNrczpcbiAqXG4gKiAgICAgIHJlcXVlc3QuZ2V0KCcvJykuZW5kKGZ1bmN0aW9uKHJlcyl7fSk7XG4gKiAgICAgIHJlcXVlc3QuZ2V0KCcvJywgZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiAgU2VuZGluZyBkYXRhIGNhbiBiZSBjaGFpbmVkOlxuICpcbiAqICAgICAgcmVxdWVzdFxuICogICAgICAgIC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgLnNlbmQoeyBuYW1lOiAndGonIH0pXG4gKiAgICAgICAgLmVuZChmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqICBPciBwYXNzZWQgdG8gYC5zZW5kKClgOlxuICpcbiAqICAgICAgcmVxdWVzdFxuICogICAgICAgIC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgLnNlbmQoeyBuYW1lOiAndGonIH0sIGZ1bmN0aW9uKHJlcyl7fSk7XG4gKlxuICogIE9yIHBhc3NlZCB0byBgLnBvc3QoKWA6XG4gKlxuICogICAgICByZXF1ZXN0XG4gKiAgICAgICAgLnBvc3QoJy91c2VyJywgeyBuYW1lOiAndGonIH0pXG4gKiAgICAgICAgLmVuZChmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqIE9yIGZ1cnRoZXIgcmVkdWNlZCB0byBhIHNpbmdsZSBjYWxsIGZvciBzaW1wbGUgY2FzZXM6XG4gKlxuICogICAgICByZXF1ZXN0XG4gKiAgICAgICAgLnBvc3QoJy91c2VyJywgeyBuYW1lOiAndGonIH0sIGZ1bmN0aW9uKHJlcyl7fSk7XG4gKlxuICogQHBhcmFtIHtYTUxIVFRQUmVxdWVzdH0geGhyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gUmVzcG9uc2UocmVxLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB0aGlzLnJlcSA9IHJlcTtcbiAgdGhpcy54aHIgPSB0aGlzLnJlcS54aHI7XG4gIC8vIHJlc3BvbnNlVGV4dCBpcyBhY2Nlc3NpYmxlIG9ubHkgaWYgcmVzcG9uc2VUeXBlIGlzICcnIG9yICd0ZXh0JyBhbmQgb24gb2xkZXIgYnJvd3NlcnNcbiAgdGhpcy50ZXh0ID0gKCh0aGlzLnJlcS5tZXRob2QgIT0nSEVBRCcgJiYgKHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9PT0gJycgfHwgdGhpcy54aHIucmVzcG9uc2VUeXBlID09PSAndGV4dCcpKSB8fCB0eXBlb2YgdGhpcy54aHIucmVzcG9uc2VUeXBlID09PSAndW5kZWZpbmVkJylcbiAgICAgPyB0aGlzLnhoci5yZXNwb25zZVRleHRcbiAgICAgOiBudWxsO1xuICB0aGlzLnN0YXR1c1RleHQgPSB0aGlzLnJlcS54aHIuc3RhdHVzVGV4dDtcbiAgdGhpcy5fc2V0U3RhdHVzUHJvcGVydGllcyh0aGlzLnhoci5zdGF0dXMpO1xuICB0aGlzLmhlYWRlciA9IHRoaXMuaGVhZGVycyA9IHBhcnNlSGVhZGVyKHRoaXMueGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTtcbiAgLy8gZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIHNvbWV0aW1lcyBmYWxzZWx5IHJldHVybnMgXCJcIiBmb3IgQ09SUyByZXF1ZXN0cywgYnV0XG4gIC8vIGdldFJlc3BvbnNlSGVhZGVyIHN0aWxsIHdvcmtzLiBzbyB3ZSBnZXQgY29udGVudC10eXBlIGV2ZW4gaWYgZ2V0dGluZ1xuICAvLyBvdGhlciBoZWFkZXJzIGZhaWxzLlxuICB0aGlzLmhlYWRlclsnY29udGVudC10eXBlJ10gPSB0aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcignY29udGVudC10eXBlJyk7XG4gIHRoaXMuX3NldEhlYWRlclByb3BlcnRpZXModGhpcy5oZWFkZXIpO1xuICB0aGlzLmJvZHkgPSB0aGlzLnJlcS5tZXRob2QgIT0gJ0hFQUQnXG4gICAgPyB0aGlzLl9wYXJzZUJvZHkodGhpcy50ZXh0ID8gdGhpcy50ZXh0IDogdGhpcy54aHIucmVzcG9uc2UpXG4gICAgOiBudWxsO1xufVxuXG4vKipcbiAqIEdldCBjYXNlLWluc2Vuc2l0aXZlIGBmaWVsZGAgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihmaWVsZCl7XG4gIHJldHVybiB0aGlzLmhlYWRlcltmaWVsZC50b0xvd2VyQ2FzZSgpXTtcbn07XG5cbi8qKlxuICogU2V0IGhlYWRlciByZWxhdGVkIHByb3BlcnRpZXM6XG4gKlxuICogICAtIGAudHlwZWAgdGhlIGNvbnRlbnQgdHlwZSB3aXRob3V0IHBhcmFtc1xuICpcbiAqIEEgcmVzcG9uc2Ugb2YgXCJDb250ZW50LVR5cGU6IHRleHQvcGxhaW47IGNoYXJzZXQ9dXRmLThcIlxuICogd2lsbCBwcm92aWRlIHlvdSB3aXRoIGEgYC50eXBlYCBvZiBcInRleHQvcGxhaW5cIi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXNwb25zZS5wcm90b3R5cGUuX3NldEhlYWRlclByb3BlcnRpZXMgPSBmdW5jdGlvbihoZWFkZXIpe1xuICAvLyBjb250ZW50LXR5cGVcbiAgdmFyIGN0ID0gdGhpcy5oZWFkZXJbJ2NvbnRlbnQtdHlwZSddIHx8ICcnO1xuICB0aGlzLnR5cGUgPSB0eXBlKGN0KTtcblxuICAvLyBwYXJhbXNcbiAgdmFyIG9iaiA9IHBhcmFtcyhjdCk7XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHRoaXNba2V5XSA9IG9ialtrZXldO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYm9keSBgc3RyYC5cbiAqXG4gKiBVc2VkIGZvciBhdXRvLXBhcnNpbmcgb2YgYm9kaWVzLiBQYXJzZXJzXG4gKiBhcmUgZGVmaW5lZCBvbiB0aGUgYHN1cGVyYWdlbnQucGFyc2VgIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtNaXhlZH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS5fcGFyc2VCb2R5ID0gZnVuY3Rpb24oc3RyKXtcbiAgdmFyIHBhcnNlID0gcmVxdWVzdC5wYXJzZVt0aGlzLnR5cGVdO1xuICBpZiAoIXBhcnNlICYmIGlzSlNPTih0aGlzLnR5cGUpKSB7XG4gICAgcGFyc2UgPSByZXF1ZXN0LnBhcnNlWydhcHBsaWNhdGlvbi9qc29uJ107XG4gIH1cbiAgcmV0dXJuIHBhcnNlICYmIHN0ciAmJiAoc3RyLmxlbmd0aCB8fCBzdHIgaW5zdGFuY2VvZiBPYmplY3QpXG4gICAgPyBwYXJzZShzdHIpXG4gICAgOiBudWxsO1xufTtcblxuLyoqXG4gKiBTZXQgZmxhZ3Mgc3VjaCBhcyBgLm9rYCBiYXNlZCBvbiBgc3RhdHVzYC5cbiAqXG4gKiBGb3IgZXhhbXBsZSBhIDJ4eCByZXNwb25zZSB3aWxsIGdpdmUgeW91IGEgYC5va2Agb2YgX190cnVlX19cbiAqIHdoZXJlYXMgNXh4IHdpbGwgYmUgX19mYWxzZV9fIGFuZCBgLmVycm9yYCB3aWxsIGJlIF9fdHJ1ZV9fLiBUaGVcbiAqIGAuY2xpZW50RXJyb3JgIGFuZCBgLnNlcnZlckVycm9yYCBhcmUgYWxzbyBhdmFpbGFibGUgdG8gYmUgbW9yZVxuICogc3BlY2lmaWMsIGFuZCBgLnN0YXR1c1R5cGVgIGlzIHRoZSBjbGFzcyBvZiBlcnJvciByYW5naW5nIGZyb20gMS4uNVxuICogc29tZXRpbWVzIHVzZWZ1bCBmb3IgbWFwcGluZyByZXNwb25kIGNvbG9ycyBldGMuXG4gKlxuICogXCJzdWdhclwiIHByb3BlcnRpZXMgYXJlIGFsc28gZGVmaW5lZCBmb3IgY29tbW9uIGNhc2VzLiBDdXJyZW50bHkgcHJvdmlkaW5nOlxuICpcbiAqICAgLSAubm9Db250ZW50XG4gKiAgIC0gLmJhZFJlcXVlc3RcbiAqICAgLSAudW5hdXRob3JpemVkXG4gKiAgIC0gLm5vdEFjY2VwdGFibGVcbiAqICAgLSAubm90Rm91bmRcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXNwb25zZS5wcm90b3R5cGUuX3NldFN0YXR1c1Byb3BlcnRpZXMgPSBmdW5jdGlvbihzdGF0dXMpe1xuICAvLyBoYW5kbGUgSUU5IGJ1ZzogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDA0Njk3Mi9tc2llLXJldHVybnMtc3RhdHVzLWNvZGUtb2YtMTIyMy1mb3ItYWpheC1yZXF1ZXN0XG4gIGlmIChzdGF0dXMgPT09IDEyMjMpIHtcbiAgICBzdGF0dXMgPSAyMDQ7XG4gIH1cblxuICB2YXIgdHlwZSA9IHN0YXR1cyAvIDEwMCB8IDA7XG5cbiAgLy8gc3RhdHVzIC8gY2xhc3NcbiAgdGhpcy5zdGF0dXMgPSB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXM7XG4gIHRoaXMuc3RhdHVzVHlwZSA9IHR5cGU7XG5cbiAgLy8gYmFzaWNzXG4gIHRoaXMuaW5mbyA9IDEgPT0gdHlwZTtcbiAgdGhpcy5vayA9IDIgPT0gdHlwZTtcbiAgdGhpcy5jbGllbnRFcnJvciA9IDQgPT0gdHlwZTtcbiAgdGhpcy5zZXJ2ZXJFcnJvciA9IDUgPT0gdHlwZTtcbiAgdGhpcy5lcnJvciA9ICg0ID09IHR5cGUgfHwgNSA9PSB0eXBlKVxuICAgID8gdGhpcy50b0Vycm9yKClcbiAgICA6IGZhbHNlO1xuXG4gIC8vIHN1Z2FyXG4gIHRoaXMuYWNjZXB0ZWQgPSAyMDIgPT0gc3RhdHVzO1xuICB0aGlzLm5vQ29udGVudCA9IDIwNCA9PSBzdGF0dXM7XG4gIHRoaXMuYmFkUmVxdWVzdCA9IDQwMCA9PSBzdGF0dXM7XG4gIHRoaXMudW5hdXRob3JpemVkID0gNDAxID09IHN0YXR1cztcbiAgdGhpcy5ub3RBY2NlcHRhYmxlID0gNDA2ID09IHN0YXR1cztcbiAgdGhpcy5ub3RGb3VuZCA9IDQwNCA9PSBzdGF0dXM7XG4gIHRoaXMuZm9yYmlkZGVuID0gNDAzID09IHN0YXR1cztcbn07XG5cbi8qKlxuICogUmV0dXJuIGFuIGBFcnJvcmAgcmVwcmVzZW50YXRpdmUgb2YgdGhpcyByZXNwb25zZS5cbiAqXG4gKiBAcmV0dXJuIHtFcnJvcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLnRvRXJyb3IgPSBmdW5jdGlvbigpe1xuICB2YXIgcmVxID0gdGhpcy5yZXE7XG4gIHZhciBtZXRob2QgPSByZXEubWV0aG9kO1xuICB2YXIgdXJsID0gcmVxLnVybDtcblxuICB2YXIgbXNnID0gJ2Nhbm5vdCAnICsgbWV0aG9kICsgJyAnICsgdXJsICsgJyAoJyArIHRoaXMuc3RhdHVzICsgJyknO1xuICB2YXIgZXJyID0gbmV3IEVycm9yKG1zZyk7XG4gIGVyci5zdGF0dXMgPSB0aGlzLnN0YXR1cztcbiAgZXJyLm1ldGhvZCA9IG1ldGhvZDtcbiAgZXJyLnVybCA9IHVybDtcblxuICByZXR1cm4gZXJyO1xufTtcblxuLyoqXG4gKiBFeHBvc2UgYFJlc3BvbnNlYC5cbiAqL1xuXG5yZXF1ZXN0LlJlc3BvbnNlID0gUmVzcG9uc2U7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhIG5ldyBgUmVxdWVzdGAgd2l0aCB0aGUgZ2l2ZW4gYG1ldGhvZGAgYW5kIGB1cmxgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gUmVxdWVzdChtZXRob2QsIHVybCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuX3F1ZXJ5ID0gdGhpcy5fcXVlcnkgfHwgW107XG4gIHRoaXMubWV0aG9kID0gbWV0aG9kO1xuICB0aGlzLnVybCA9IHVybDtcbiAgdGhpcy5oZWFkZXIgPSB7fTsgLy8gcHJlc2VydmVzIGhlYWRlciBuYW1lIGNhc2VcbiAgdGhpcy5faGVhZGVyID0ge307IC8vIGNvZXJjZXMgaGVhZGVyIG5hbWVzIHRvIGxvd2VyY2FzZVxuICB0aGlzLm9uKCdlbmQnLCBmdW5jdGlvbigpe1xuICAgIHZhciBlcnIgPSBudWxsO1xuICAgIHZhciByZXMgPSBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIHJlcyA9IG5ldyBSZXNwb25zZShzZWxmKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIGVyciA9IG5ldyBFcnJvcignUGFyc2VyIGlzIHVuYWJsZSB0byBwYXJzZSB0aGUgcmVzcG9uc2UnKTtcbiAgICAgIGVyci5wYXJzZSA9IHRydWU7XG4gICAgICBlcnIub3JpZ2luYWwgPSBlO1xuICAgICAgLy8gaXNzdWUgIzY3NTogcmV0dXJuIHRoZSByYXcgcmVzcG9uc2UgaWYgdGhlIHJlc3BvbnNlIHBhcnNpbmcgZmFpbHNcbiAgICAgIGVyci5yYXdSZXNwb25zZSA9IHNlbGYueGhyICYmIHNlbGYueGhyLnJlc3BvbnNlVGV4dCA/IHNlbGYueGhyLnJlc3BvbnNlVGV4dCA6IG51bGw7XG4gICAgICAvLyBpc3N1ZSAjODc2OiByZXR1cm4gdGhlIGh0dHAgc3RhdHVzIGNvZGUgaWYgdGhlIHJlc3BvbnNlIHBhcnNpbmcgZmFpbHNcbiAgICAgIGVyci5zdGF0dXNDb2RlID0gc2VsZi54aHIgJiYgc2VsZi54aHIuc3RhdHVzID8gc2VsZi54aHIuc3RhdHVzIDogbnVsbDtcbiAgICAgIHJldHVybiBzZWxmLmNhbGxiYWNrKGVycik7XG4gICAgfVxuXG4gICAgc2VsZi5lbWl0KCdyZXNwb25zZScsIHJlcyk7XG5cbiAgICB2YXIgbmV3X2VycjtcbiAgICB0cnkge1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPCAyMDAgfHwgcmVzLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgbmV3X2VyciA9IG5ldyBFcnJvcihyZXMuc3RhdHVzVGV4dCB8fCAnVW5zdWNjZXNzZnVsIEhUVFAgcmVzcG9uc2UnKTtcbiAgICAgICAgbmV3X2Vyci5vcmlnaW5hbCA9IGVycjtcbiAgICAgICAgbmV3X2Vyci5yZXNwb25zZSA9IHJlcztcbiAgICAgICAgbmV3X2Vyci5zdGF0dXMgPSByZXMuc3RhdHVzO1xuICAgICAgfVxuICAgIH0gY2F0Y2goZSkge1xuICAgICAgbmV3X2VyciA9IGU7IC8vICM5ODUgdG91Y2hpbmcgcmVzIG1heSBjYXVzZSBJTlZBTElEX1NUQVRFX0VSUiBvbiBvbGQgQW5kcm9pZFxuICAgIH1cblxuICAgIC8vICMxMDAwIGRvbid0IGNhdGNoIGVycm9ycyBmcm9tIHRoZSBjYWxsYmFjayB0byBhdm9pZCBkb3VibGUgY2FsbGluZyBpdFxuICAgIGlmIChuZXdfZXJyKSB7XG4gICAgICBzZWxmLmNhbGxiYWNrKG5ld19lcnIsIHJlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYuY2FsbGJhY2sobnVsbCwgcmVzKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIE1peGluIGBFbWl0dGVyYCBhbmQgYHJlcXVlc3RCYXNlYC5cbiAqL1xuXG5FbWl0dGVyKFJlcXVlc3QucHJvdG90eXBlKTtcbmZvciAodmFyIGtleSBpbiByZXF1ZXN0QmFzZSkge1xuICBSZXF1ZXN0LnByb3RvdHlwZVtrZXldID0gcmVxdWVzdEJhc2Vba2V5XTtcbn1cblxuLyoqXG4gKiBTZXQgQ29udGVudC1UeXBlIHRvIGB0eXBlYCwgbWFwcGluZyB2YWx1ZXMgZnJvbSBgcmVxdWVzdC50eXBlc2AuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICBzdXBlcmFnZW50LnR5cGVzLnhtbCA9ICdhcHBsaWNhdGlvbi94bWwnO1xuICpcbiAqICAgICAgcmVxdWVzdC5wb3N0KCcvJylcbiAqICAgICAgICAudHlwZSgneG1sJylcbiAqICAgICAgICAuc2VuZCh4bWxzdHJpbmcpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogICAgICByZXF1ZXN0LnBvc3QoJy8nKVxuICogICAgICAgIC50eXBlKCdhcHBsaWNhdGlvbi94bWwnKVxuICogICAgICAgIC5zZW5kKHhtbHN0cmluZylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLnR5cGUgPSBmdW5jdGlvbih0eXBlKXtcbiAgdGhpcy5zZXQoJ0NvbnRlbnQtVHlwZScsIHJlcXVlc3QudHlwZXNbdHlwZV0gfHwgdHlwZSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgcmVzcG9uc2VUeXBlIHRvIGB2YWxgLiBQcmVzZW50bHkgdmFsaWQgcmVzcG9uc2VUeXBlcyBhcmUgJ2Jsb2InIGFuZFxuICogJ2FycmF5YnVmZmVyJy5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgIHJlcS5nZXQoJy8nKVxuICogICAgICAgIC5yZXNwb25zZVR5cGUoJ2Jsb2InKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5yZXNwb25zZVR5cGUgPSBmdW5jdGlvbih2YWwpe1xuICB0aGlzLl9yZXNwb25zZVR5cGUgPSB2YWw7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgQWNjZXB0IHRvIGB0eXBlYCwgbWFwcGluZyB2YWx1ZXMgZnJvbSBgcmVxdWVzdC50eXBlc2AuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICBzdXBlcmFnZW50LnR5cGVzLmpzb24gPSAnYXBwbGljYXRpb24vanNvbic7XG4gKlxuICogICAgICByZXF1ZXN0LmdldCgnL2FnZW50JylcbiAqICAgICAgICAuYWNjZXB0KCdqc29uJylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiAgICAgIHJlcXVlc3QuZ2V0KCcvYWdlbnQnKVxuICogICAgICAgIC5hY2NlcHQoJ2FwcGxpY2F0aW9uL2pzb24nKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhY2NlcHRcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5hY2NlcHQgPSBmdW5jdGlvbih0eXBlKXtcbiAgdGhpcy5zZXQoJ0FjY2VwdCcsIHJlcXVlc3QudHlwZXNbdHlwZV0gfHwgdHlwZSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgQXV0aG9yaXphdGlvbiBmaWVsZCB2YWx1ZSB3aXRoIGB1c2VyYCBhbmQgYHBhc3NgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1c2VyXG4gKiBAcGFyYW0ge1N0cmluZ30gcGFzc1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgd2l0aCAndHlwZScgcHJvcGVydHkgJ2F1dG8nIG9yICdiYXNpYycgKGRlZmF1bHQgJ2Jhc2ljJylcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5hdXRoID0gZnVuY3Rpb24odXNlciwgcGFzcywgb3B0aW9ucyl7XG4gIGlmICghb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7XG4gICAgICB0eXBlOiAnYmFzaWMnXG4gICAgfVxuICB9XG5cbiAgc3dpdGNoIChvcHRpb25zLnR5cGUpIHtcbiAgICBjYXNlICdiYXNpYyc6XG4gICAgICB2YXIgc3RyID0gYnRvYSh1c2VyICsgJzonICsgcGFzcyk7XG4gICAgICB0aGlzLnNldCgnQXV0aG9yaXphdGlvbicsICdCYXNpYyAnICsgc3RyKTtcbiAgICBicmVhaztcblxuICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXI7XG4gICAgICB0aGlzLnBhc3N3b3JkID0gcGFzcztcbiAgICBicmVhaztcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuKiBBZGQgcXVlcnktc3RyaW5nIGB2YWxgLlxuKlxuKiBFeGFtcGxlczpcbipcbiogICByZXF1ZXN0LmdldCgnL3Nob2VzJylcbiogICAgIC5xdWVyeSgnc2l6ZT0xMCcpXG4qICAgICAucXVlcnkoeyBjb2xvcjogJ2JsdWUnIH0pXG4qXG4qIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gdmFsXG4qIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuKiBAYXBpIHB1YmxpY1xuKi9cblxuUmVxdWVzdC5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbih2YWwpe1xuICBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIHZhbCkgdmFsID0gc2VyaWFsaXplKHZhbCk7XG4gIGlmICh2YWwpIHRoaXMuX3F1ZXJ5LnB1c2godmFsKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFF1ZXVlIHRoZSBnaXZlbiBgZmlsZWAgYXMgYW4gYXR0YWNobWVudCB0byB0aGUgc3BlY2lmaWVkIGBmaWVsZGAsXG4gKiB3aXRoIG9wdGlvbmFsIGBmaWxlbmFtZWAuXG4gKlxuICogYGBgIGpzXG4gKiByZXF1ZXN0LnBvc3QoJy91cGxvYWQnKVxuICogICAuYXR0YWNoKCdjb250ZW50JywgbmV3IEJsb2IoWyc8YSBpZD1cImFcIj48YiBpZD1cImJcIj5oZXkhPC9iPjwvYT4nXSwgeyB0eXBlOiBcInRleHQvaHRtbFwifSkpXG4gKiAgIC5lbmQoY2FsbGJhY2spO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKiBAcGFyYW0ge0Jsb2J8RmlsZX0gZmlsZVxuICogQHBhcmFtIHtTdHJpbmd9IGZpbGVuYW1lXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuYXR0YWNoID0gZnVuY3Rpb24oZmllbGQsIGZpbGUsIGZpbGVuYW1lKXtcbiAgdGhpcy5fZ2V0Rm9ybURhdGEoKS5hcHBlbmQoZmllbGQsIGZpbGUsIGZpbGVuYW1lIHx8IGZpbGUubmFtZSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuUmVxdWVzdC5wcm90b3R5cGUuX2dldEZvcm1EYXRhID0gZnVuY3Rpb24oKXtcbiAgaWYgKCF0aGlzLl9mb3JtRGF0YSkge1xuICAgIHRoaXMuX2Zvcm1EYXRhID0gbmV3IHJvb3QuRm9ybURhdGEoKTtcbiAgfVxuICByZXR1cm4gdGhpcy5fZm9ybURhdGE7XG59O1xuXG4vKipcbiAqIEludm9rZSB0aGUgY2FsbGJhY2sgd2l0aCBgZXJyYCBhbmQgYHJlc2BcbiAqIGFuZCBoYW5kbGUgYXJpdHkgY2hlY2suXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXJyXG4gKiBAcGFyYW0ge1Jlc3BvbnNlfSByZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmNhbGxiYWNrID0gZnVuY3Rpb24oZXJyLCByZXMpe1xuICB2YXIgZm4gPSB0aGlzLl9jYWxsYmFjaztcbiAgdGhpcy5jbGVhclRpbWVvdXQoKTtcbiAgZm4oZXJyLCByZXMpO1xufTtcblxuLyoqXG4gKiBJbnZva2UgY2FsbGJhY2sgd2l0aCB4LWRvbWFpbiBlcnJvci5cbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5jcm9zc0RvbWFpbkVycm9yID0gZnVuY3Rpb24oKXtcbiAgdmFyIGVyciA9IG5ldyBFcnJvcignUmVxdWVzdCBoYXMgYmVlbiB0ZXJtaW5hdGVkXFxuUG9zc2libGUgY2F1c2VzOiB0aGUgbmV0d29yayBpcyBvZmZsaW5lLCBPcmlnaW4gaXMgbm90IGFsbG93ZWQgYnkgQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luLCB0aGUgcGFnZSBpcyBiZWluZyB1bmxvYWRlZCwgZXRjLicpO1xuICBlcnIuY3Jvc3NEb21haW4gPSB0cnVlO1xuXG4gIGVyci5zdGF0dXMgPSB0aGlzLnN0YXR1cztcbiAgZXJyLm1ldGhvZCA9IHRoaXMubWV0aG9kO1xuICBlcnIudXJsID0gdGhpcy51cmw7XG5cbiAgdGhpcy5jYWxsYmFjayhlcnIpO1xufTtcblxuLyoqXG4gKiBJbnZva2UgY2FsbGJhY2sgd2l0aCB0aW1lb3V0IGVycm9yLlxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlcXVlc3QucHJvdG90eXBlLl90aW1lb3V0RXJyb3IgPSBmdW5jdGlvbigpe1xuICB2YXIgdGltZW91dCA9IHRoaXMuX3RpbWVvdXQ7XG4gIHZhciBlcnIgPSBuZXcgRXJyb3IoJ3RpbWVvdXQgb2YgJyArIHRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnKTtcbiAgZXJyLnRpbWVvdXQgPSB0aW1lb3V0O1xuICB0aGlzLmNhbGxiYWNrKGVycik7XG59O1xuXG4vKipcbiAqIENvbXBvc2UgcXVlcnlzdHJpbmcgdG8gYXBwZW5kIHRvIHJlcS51cmxcbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5fYXBwZW5kUXVlcnlTdHJpbmcgPSBmdW5jdGlvbigpe1xuICB2YXIgcXVlcnkgPSB0aGlzLl9xdWVyeS5qb2luKCcmJyk7XG4gIGlmIChxdWVyeSkge1xuICAgIHRoaXMudXJsICs9IH50aGlzLnVybC5pbmRleE9mKCc/JylcbiAgICAgID8gJyYnICsgcXVlcnlcbiAgICAgIDogJz8nICsgcXVlcnk7XG4gIH1cbn07XG5cbi8qKlxuICogSW5pdGlhdGUgcmVxdWVzdCwgaW52b2tpbmcgY2FsbGJhY2sgYGZuKHJlcylgXG4gKiB3aXRoIGFuIGluc3RhbmNlb2YgYFJlc3BvbnNlYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGZuKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgeGhyID0gdGhpcy54aHIgPSByZXF1ZXN0LmdldFhIUigpO1xuICB2YXIgdGltZW91dCA9IHRoaXMuX3RpbWVvdXQ7XG4gIHZhciBkYXRhID0gdGhpcy5fZm9ybURhdGEgfHwgdGhpcy5fZGF0YTtcblxuICAvLyBzdG9yZSBjYWxsYmFja1xuICB0aGlzLl9jYWxsYmFjayA9IGZuIHx8IG5vb3A7XG5cbiAgLy8gc3RhdGUgY2hhbmdlXG4gIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpe1xuICAgIGlmICg0ICE9IHhoci5yZWFkeVN0YXRlKSByZXR1cm47XG5cbiAgICAvLyBJbiBJRTksIHJlYWRzIHRvIGFueSBwcm9wZXJ0eSAoZS5nLiBzdGF0dXMpIG9mZiBvZiBhbiBhYm9ydGVkIFhIUiB3aWxsXG4gICAgLy8gcmVzdWx0IGluIHRoZSBlcnJvciBcIkNvdWxkIG5vdCBjb21wbGV0ZSB0aGUgb3BlcmF0aW9uIGR1ZSB0byBlcnJvciBjMDBjMDIzZlwiXG4gICAgdmFyIHN0YXR1cztcbiAgICB0cnkgeyBzdGF0dXMgPSB4aHIuc3RhdHVzIH0gY2F0Y2goZSkgeyBzdGF0dXMgPSAwOyB9XG5cbiAgICBpZiAoMCA9PSBzdGF0dXMpIHtcbiAgICAgIGlmIChzZWxmLnRpbWVkb3V0KSByZXR1cm4gc2VsZi5fdGltZW91dEVycm9yKCk7XG4gICAgICBpZiAoc2VsZi5fYWJvcnRlZCkgcmV0dXJuO1xuICAgICAgcmV0dXJuIHNlbGYuY3Jvc3NEb21haW5FcnJvcigpO1xuICAgIH1cbiAgICBzZWxmLmVtaXQoJ2VuZCcpO1xuICB9O1xuXG4gIC8vIHByb2dyZXNzXG4gIHZhciBoYW5kbGVQcm9ncmVzcyA9IGZ1bmN0aW9uKGUpe1xuICAgIGlmIChlLnRvdGFsID4gMCkge1xuICAgICAgZS5wZXJjZW50ID0gZS5sb2FkZWQgLyBlLnRvdGFsICogMTAwO1xuICAgIH1cbiAgICBlLmRpcmVjdGlvbiA9ICdkb3dubG9hZCc7XG4gICAgc2VsZi5lbWl0KCdwcm9ncmVzcycsIGUpO1xuICB9O1xuICBpZiAodGhpcy5oYXNMaXN0ZW5lcnMoJ3Byb2dyZXNzJykpIHtcbiAgICB4aHIub25wcm9ncmVzcyA9IGhhbmRsZVByb2dyZXNzO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKHhoci51cGxvYWQgJiYgdGhpcy5oYXNMaXN0ZW5lcnMoJ3Byb2dyZXNzJykpIHtcbiAgICAgIHhoci51cGxvYWQub25wcm9ncmVzcyA9IGhhbmRsZVByb2dyZXNzO1xuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgLy8gQWNjZXNzaW5nIHhoci51cGxvYWQgZmFpbHMgaW4gSUUgZnJvbSBhIHdlYiB3b3JrZXIsIHNvIGp1c3QgcHJldGVuZCBpdCBkb2Vzbid0IGV4aXN0LlxuICAgIC8vIFJlcG9ydGVkIGhlcmU6XG4gICAgLy8gaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy84MzcyNDUveG1saHR0cHJlcXVlc3QtdXBsb2FkLXRocm93cy1pbnZhbGlkLWFyZ3VtZW50LXdoZW4tdXNlZC1mcm9tLXdlYi13b3JrZXItY29udGV4dFxuICB9XG5cbiAgLy8gdGltZW91dFxuICBpZiAodGltZW91dCAmJiAhdGhpcy5fdGltZXIpIHtcbiAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHNlbGYudGltZWRvdXQgPSB0cnVlO1xuICAgICAgc2VsZi5hYm9ydCgpO1xuICAgIH0sIHRpbWVvdXQpO1xuICB9XG5cbiAgLy8gcXVlcnlzdHJpbmdcbiAgdGhpcy5fYXBwZW5kUXVlcnlTdHJpbmcoKTtcblxuICAvLyBpbml0aWF0ZSByZXF1ZXN0XG4gIGlmICh0aGlzLnVzZXJuYW1lICYmIHRoaXMucGFzc3dvcmQpIHtcbiAgICB4aHIub3Blbih0aGlzLm1ldGhvZCwgdGhpcy51cmwsIHRydWUsIHRoaXMudXNlcm5hbWUsIHRoaXMucGFzc3dvcmQpO1xuICB9IGVsc2Uge1xuICAgIHhoci5vcGVuKHRoaXMubWV0aG9kLCB0aGlzLnVybCwgdHJ1ZSk7XG4gIH1cblxuICAvLyBDT1JTXG4gIGlmICh0aGlzLl93aXRoQ3JlZGVudGlhbHMpIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuXG4gIC8vIGJvZHlcbiAgaWYgKCdHRVQnICE9IHRoaXMubWV0aG9kICYmICdIRUFEJyAhPSB0aGlzLm1ldGhvZCAmJiAnc3RyaW5nJyAhPSB0eXBlb2YgZGF0YSAmJiAhdGhpcy5faXNIb3N0KGRhdGEpKSB7XG4gICAgLy8gc2VyaWFsaXplIHN0dWZmXG4gICAgdmFyIGNvbnRlbnRUeXBlID0gdGhpcy5faGVhZGVyWydjb250ZW50LXR5cGUnXTtcbiAgICB2YXIgc2VyaWFsaXplID0gdGhpcy5fc2VyaWFsaXplciB8fCByZXF1ZXN0LnNlcmlhbGl6ZVtjb250ZW50VHlwZSA/IGNvbnRlbnRUeXBlLnNwbGl0KCc7JylbMF0gOiAnJ107XG4gICAgaWYgKCFzZXJpYWxpemUgJiYgaXNKU09OKGNvbnRlbnRUeXBlKSkgc2VyaWFsaXplID0gcmVxdWVzdC5zZXJpYWxpemVbJ2FwcGxpY2F0aW9uL2pzb24nXTtcbiAgICBpZiAoc2VyaWFsaXplKSBkYXRhID0gc2VyaWFsaXplKGRhdGEpO1xuICB9XG5cbiAgLy8gc2V0IGhlYWRlciBmaWVsZHNcbiAgZm9yICh2YXIgZmllbGQgaW4gdGhpcy5oZWFkZXIpIHtcbiAgICBpZiAobnVsbCA9PSB0aGlzLmhlYWRlcltmaWVsZF0pIGNvbnRpbnVlO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGZpZWxkLCB0aGlzLmhlYWRlcltmaWVsZF0pO1xuICB9XG5cbiAgaWYgKHRoaXMuX3Jlc3BvbnNlVHlwZSkge1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSB0aGlzLl9yZXNwb25zZVR5cGU7XG4gIH1cblxuICAvLyBzZW5kIHN0dWZmXG4gIHRoaXMuZW1pdCgncmVxdWVzdCcsIHRoaXMpO1xuXG4gIC8vIElFMTEgeGhyLnNlbmQodW5kZWZpbmVkKSBzZW5kcyAndW5kZWZpbmVkJyBzdHJpbmcgYXMgUE9TVCBwYXlsb2FkIChpbnN0ZWFkIG9mIG5vdGhpbmcpXG4gIC8vIFdlIG5lZWQgbnVsbCBoZXJlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXG4gIHhoci5zZW5kKHR5cGVvZiBkYXRhICE9PSAndW5kZWZpbmVkJyA/IGRhdGEgOiBudWxsKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5cbi8qKlxuICogRXhwb3NlIGBSZXF1ZXN0YC5cbiAqL1xuXG5yZXF1ZXN0LlJlcXVlc3QgPSBSZXF1ZXN0O1xuXG4vKipcbiAqIEdFVCBgdXJsYCB3aXRoIG9wdGlvbmFsIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfEZ1bmN0aW9ufSBbZGF0YV0gb3IgZm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QuZ2V0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdHRVQnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5xdWVyeShkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogSEVBRCBgdXJsYCB3aXRoIG9wdGlvbmFsIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfEZ1bmN0aW9ufSBbZGF0YV0gb3IgZm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QuaGVhZCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnSEVBRCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnNlbmQoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG4vKipcbiAqIE9QVElPTlMgcXVlcnkgdG8gYHVybGAgd2l0aCBvcHRpb25hbCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZHxGdW5jdGlvbn0gW2RhdGFdIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0Lm9wdGlvbnMgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ09QVElPTlMnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5zZW5kKGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxuLyoqXG4gKiBERUxFVEUgYHVybGAgd2l0aCBvcHRpb25hbCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGVsKHVybCwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnREVMRVRFJywgdXJsKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbnJlcXVlc3RbJ2RlbCddID0gZGVsO1xucmVxdWVzdFsnZGVsZXRlJ10gPSBkZWw7XG5cbi8qKlxuICogUEFUQ0ggYHVybGAgd2l0aCBvcHRpb25hbCBgZGF0YWAgYW5kIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfSBbZGF0YV1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QucGF0Y2ggPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ1BBVENIJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogUE9TVCBgdXJsYCB3aXRoIG9wdGlvbmFsIGBkYXRhYCBhbmQgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR9IFtkYXRhXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5wb3N0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdQT1NUJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogUFVUIGB1cmxgIHdpdGggb3B0aW9uYWwgYGRhdGFgIGFuZCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZHxGdW5jdGlvbn0gW2RhdGFdIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LnB1dCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnUFVUJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG4iLCIvKipcbiAqIENoZWNrIGlmIGBvYmpgIGlzIGFuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gIHJldHVybiBudWxsICE9PSBvYmogJiYgJ29iamVjdCcgPT09IHR5cGVvZiBvYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3Q7XG4iLCIvKipcbiAqIE1vZHVsZSBvZiBtaXhlZC1pbiBmdW5jdGlvbnMgc2hhcmVkIGJldHdlZW4gbm9kZSBhbmQgY2xpZW50IGNvZGVcbiAqL1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pcy1vYmplY3QnKTtcblxuLyoqXG4gKiBDbGVhciBwcmV2aW91cyB0aW1lb3V0LlxuICpcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLmNsZWFyVGltZW91dCA9IGZ1bmN0aW9uIF9jbGVhclRpbWVvdXQoKXtcbiAgdGhpcy5fdGltZW91dCA9IDA7XG4gIGNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBPdmVycmlkZSBkZWZhdWx0IHJlc3BvbnNlIGJvZHkgcGFyc2VyXG4gKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB0byBjb252ZXJ0IGluY29taW5nIGRhdGEgaW50byByZXF1ZXN0LmJvZHlcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gcGFyc2UoZm4pe1xuICB0aGlzLl9wYXJzZXIgPSBmbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIE92ZXJyaWRlIGRlZmF1bHQgcmVxdWVzdCBib2R5IHNlcmlhbGl6ZXJcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHRvIGNvbnZlcnQgZGF0YSBzZXQgdmlhIC5zZW5kIG9yIC5hdHRhY2ggaW50byBwYXlsb2FkIHRvIHNlbmRcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uIHNlcmlhbGl6ZShmbil7XG4gIHRoaXMuX3NlcmlhbGl6ZXIgPSBmbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCB0aW1lb3V0IHRvIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy50aW1lb3V0ID0gZnVuY3Rpb24gdGltZW91dChtcyl7XG4gIHRoaXMuX3RpbWVvdXQgPSBtcztcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFByb21pc2Ugc3VwcG9ydFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdFxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqL1xuXG5leHBvcnRzLnRoZW4gPSBmdW5jdGlvbiB0aGVuKHJlc29sdmUsIHJlamVjdCkge1xuICBpZiAoIXRoaXMuX2Z1bGxmaWxsZWRQcm9taXNlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuX2Z1bGxmaWxsZWRQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24oaW5uZXJSZXNvbHZlLCBpbm5lclJlamVjdCl7XG4gICAgICBzZWxmLmVuZChmdW5jdGlvbihlcnIsIHJlcyl7XG4gICAgICAgIGlmIChlcnIpIGlubmVyUmVqZWN0KGVycik7IGVsc2UgaW5uZXJSZXNvbHZlKHJlcyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdGhpcy5fZnVsbGZpbGxlZFByb21pc2UudGhlbihyZXNvbHZlLCByZWplY3QpO1xufVxuXG4vKipcbiAqIEFsbG93IGZvciBleHRlbnNpb25cbiAqL1xuXG5leHBvcnRzLnVzZSA9IGZ1bmN0aW9uIHVzZShmbikge1xuICBmbih0aGlzKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cblxuLyoqXG4gKiBHZXQgcmVxdWVzdCBoZWFkZXIgYGZpZWxkYC5cbiAqIENhc2UtaW5zZW5zaXRpdmUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuZ2V0ID0gZnVuY3Rpb24oZmllbGQpe1xuICByZXR1cm4gdGhpcy5faGVhZGVyW2ZpZWxkLnRvTG93ZXJDYXNlKCldO1xufTtcblxuLyoqXG4gKiBHZXQgY2FzZS1pbnNlbnNpdGl2ZSBoZWFkZXIgYGZpZWxkYCB2YWx1ZS5cbiAqIFRoaXMgaXMgYSBkZXByZWNhdGVkIGludGVybmFsIEFQSS4gVXNlIGAuZ2V0KGZpZWxkKWAgaW5zdGVhZC5cbiAqXG4gKiAoZ2V0SGVhZGVyIGlzIG5vIGxvbmdlciB1c2VkIGludGVybmFsbHkgYnkgdGhlIHN1cGVyYWdlbnQgY29kZSBiYXNlKVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKiBAZGVwcmVjYXRlZFxuICovXG5cbmV4cG9ydHMuZ2V0SGVhZGVyID0gZXhwb3J0cy5nZXQ7XG5cbi8qKlxuICogU2V0IGhlYWRlciBgZmllbGRgIHRvIGB2YWxgLCBvciBtdWx0aXBsZSBmaWVsZHMgd2l0aCBvbmUgb2JqZWN0LlxuICogQ2FzZS1pbnNlbnNpdGl2ZS5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgIHJlcS5nZXQoJy8nKVxuICogICAgICAgIC5zZXQoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJylcbiAqICAgICAgICAuc2V0KCdYLUFQSS1LZXknLCAnZm9vYmFyJylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiAgICAgIHJlcS5nZXQoJy8nKVxuICogICAgICAgIC5zZXQoeyBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJywgJ1gtQVBJLUtleSc6ICdmb29iYXInIH0pXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBmaWVsZFxuICogQHBhcmFtIHtTdHJpbmd9IHZhbFxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuc2V0ID0gZnVuY3Rpb24oZmllbGQsIHZhbCl7XG4gIGlmIChpc09iamVjdChmaWVsZCkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gZmllbGQpIHtcbiAgICAgIHRoaXMuc2V0KGtleSwgZmllbGRba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHRoaXMuX2hlYWRlcltmaWVsZC50b0xvd2VyQ2FzZSgpXSA9IHZhbDtcbiAgdGhpcy5oZWFkZXJbZmllbGRdID0gdmFsO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGhlYWRlciBgZmllbGRgLlxuICogQ2FzZS1pbnNlbnNpdGl2ZS5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICAgcmVxLmdldCgnLycpXG4gKiAgICAgICAgLnVuc2V0KCdVc2VyLUFnZW50JylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqL1xuZXhwb3J0cy51bnNldCA9IGZ1bmN0aW9uKGZpZWxkKXtcbiAgZGVsZXRlIHRoaXMuX2hlYWRlcltmaWVsZC50b0xvd2VyQ2FzZSgpXTtcbiAgZGVsZXRlIHRoaXMuaGVhZGVyW2ZpZWxkXTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFdyaXRlIHRoZSBmaWVsZCBgbmFtZWAgYW5kIGB2YWxgIGZvciBcIm11bHRpcGFydC9mb3JtLWRhdGFcIlxuICogcmVxdWVzdCBib2RpZXMuXG4gKlxuICogYGBgIGpzXG4gKiByZXF1ZXN0LnBvc3QoJy91cGxvYWQnKVxuICogICAuZmllbGQoJ2ZvbycsICdiYXInKVxuICogICAuZW5kKGNhbGxiYWNrKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ3xCbG9ifEZpbGV8QnVmZmVyfGZzLlJlYWRTdHJlYW19IHZhbFxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmZpZWxkID0gZnVuY3Rpb24obmFtZSwgdmFsKSB7XG4gIHRoaXMuX2dldEZvcm1EYXRhKCkuYXBwZW5kKG5hbWUsIHZhbCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBYm9ydCB0aGUgcmVxdWVzdCwgYW5kIGNsZWFyIHBvdGVudGlhbCB0aW1lb3V0LlxuICpcbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmFib3J0ID0gZnVuY3Rpb24oKXtcbiAgaWYgKHRoaXMuX2Fib3J0ZWQpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB0aGlzLl9hYm9ydGVkID0gdHJ1ZTtcbiAgdGhpcy54aHIgJiYgdGhpcy54aHIuYWJvcnQoKTsgLy8gYnJvd3NlclxuICB0aGlzLnJlcSAmJiB0aGlzLnJlcS5hYm9ydCgpOyAvLyBub2RlXG4gIHRoaXMuY2xlYXJUaW1lb3V0KCk7XG4gIHRoaXMuZW1pdCgnYWJvcnQnKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEVuYWJsZSB0cmFuc21pc3Npb24gb2YgY29va2llcyB3aXRoIHgtZG9tYWluIHJlcXVlc3RzLlxuICpcbiAqIE5vdGUgdGhhdCBmb3IgdGhpcyB0byB3b3JrIHRoZSBvcmlnaW4gbXVzdCBub3QgYmVcbiAqIHVzaW5nIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luXCIgd2l0aCBhIHdpbGRjYXJkLFxuICogYW5kIGFsc28gbXVzdCBzZXQgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFsc1wiXG4gKiB0byBcInRydWVcIi5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMud2l0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24oKXtcbiAgLy8gVGhpcyBpcyBicm93c2VyLW9ubHkgZnVuY3Rpb25hbGl0eS4gTm9kZSBzaWRlIGlzIG5vLW9wLlxuICB0aGlzLl93aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IHRoZSBtYXggcmVkaXJlY3RzIHRvIGBuYC4gRG9lcyBub3RpbmcgaW4gYnJvd3NlciBYSFIgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnJlZGlyZWN0cyA9IGZ1bmN0aW9uKG4pe1xuICB0aGlzLl9tYXhSZWRpcmVjdHMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQ29udmVydCB0byBhIHBsYWluIGphdmFzY3JpcHQgb2JqZWN0IChub3QgSlNPTiBzdHJpbmcpIG9mIHNjYWxhciBwcm9wZXJ0aWVzLlxuICogTm90ZSBhcyB0aGlzIG1ldGhvZCBpcyBkZXNpZ25lZCB0byByZXR1cm4gYSB1c2VmdWwgbm9uLXRoaXMgdmFsdWUsXG4gKiBpdCBjYW5ub3QgYmUgY2hhaW5lZC5cbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IGRlc2NyaWJpbmcgbWV0aG9kLCB1cmwsIGFuZCBkYXRhIG9mIHRoaXMgcmVxdWVzdFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnRvSlNPTiA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgbWV0aG9kOiB0aGlzLm1ldGhvZCxcbiAgICB1cmw6IHRoaXMudXJsLFxuICAgIGRhdGE6IHRoaXMuX2RhdGEsXG4gICAgaGVhZGVyczogdGhpcy5faGVhZGVyXG4gIH07XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGBvYmpgIGlzIGEgaG9zdCBvYmplY3QsXG4gKiB3ZSBkb24ndCB3YW50IHRvIHNlcmlhbGl6ZSB0aGVzZSA6KVxuICpcbiAqIFRPRE86IGZ1dHVyZSBwcm9vZiwgbW92ZSB0byBjb21wb2VudCBsYW5kXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmV4cG9ydHMuX2lzSG9zdCA9IGZ1bmN0aW9uIF9pc0hvc3Qob2JqKSB7XG4gIHZhciBzdHIgPSB7fS50b1N0cmluZy5jYWxsKG9iaik7XG5cbiAgc3dpdGNoIChzdHIpIHtcbiAgICBjYXNlICdbb2JqZWN0IEZpbGVdJzpcbiAgICBjYXNlICdbb2JqZWN0IEJsb2JdJzpcbiAgICBjYXNlICdbb2JqZWN0IEZvcm1EYXRhXSc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogU2VuZCBgZGF0YWAgYXMgdGhlIHJlcXVlc3QgYm9keSwgZGVmYXVsdGluZyB0aGUgYC50eXBlKClgIHRvIFwianNvblwiIHdoZW5cbiAqIGFuIG9iamVjdCBpcyBnaXZlbi5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgICAvLyBtYW51YWwganNvblxuICogICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgIC50eXBlKCdqc29uJylcbiAqICAgICAgICAgLnNlbmQoJ3tcIm5hbWVcIjpcInRqXCJ9JylcbiAqICAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiAgICAgICAvLyBhdXRvIGpzb25cbiAqICAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgICAuc2VuZCh7IG5hbWU6ICd0aicgfSlcbiAqICAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiAgICAgICAvLyBtYW51YWwgeC13d3ctZm9ybS11cmxlbmNvZGVkXG4gKiAgICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAqICAgICAgICAgLnR5cGUoJ2Zvcm0nKVxuICogICAgICAgICAuc2VuZCgnbmFtZT10aicpXG4gKiAgICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogICAgICAgLy8gYXV0byB4LXd3dy1mb3JtLXVybGVuY29kZWRcbiAqICAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgICAudHlwZSgnZm9ybScpXG4gKiAgICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqICAgICAgIC8vIGRlZmF1bHRzIHRvIHgtd3d3LWZvcm0tdXJsZW5jb2RlZFxuICogICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAqICAgICAgICAuc2VuZCgnbmFtZT10b2JpJylcbiAqICAgICAgICAuc2VuZCgnc3BlY2llcz1mZXJyZXQnKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBkYXRhXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5zZW5kID0gZnVuY3Rpb24oZGF0YSl7XG4gIHZhciBvYmogPSBpc09iamVjdChkYXRhKTtcbiAgdmFyIHR5cGUgPSB0aGlzLl9oZWFkZXJbJ2NvbnRlbnQtdHlwZSddO1xuXG4gIC8vIG1lcmdlXG4gIGlmIChvYmogJiYgaXNPYmplY3QodGhpcy5fZGF0YSkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgdGhpcy5fZGF0YVtrZXldID0gZGF0YVtrZXldO1xuICAgIH1cbiAgfSBlbHNlIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZGF0YSkge1xuICAgIC8vIGRlZmF1bHQgdG8geC13d3ctZm9ybS11cmxlbmNvZGVkXG4gICAgaWYgKCF0eXBlKSB0aGlzLnR5cGUoJ2Zvcm0nKTtcbiAgICB0eXBlID0gdGhpcy5faGVhZGVyWydjb250ZW50LXR5cGUnXTtcbiAgICBpZiAoJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgPT0gdHlwZSkge1xuICAgICAgdGhpcy5fZGF0YSA9IHRoaXMuX2RhdGFcbiAgICAgICAgPyB0aGlzLl9kYXRhICsgJyYnICsgZGF0YVxuICAgICAgICA6IGRhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2RhdGEgPSAodGhpcy5fZGF0YSB8fCAnJykgKyBkYXRhO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgfVxuXG4gIGlmICghb2JqIHx8IHRoaXMuX2lzSG9zdChkYXRhKSkgcmV0dXJuIHRoaXM7XG5cbiAgLy8gZGVmYXVsdCB0byBqc29uXG4gIGlmICghdHlwZSkgdGhpcy50eXBlKCdqc29uJyk7XG4gIHJldHVybiB0aGlzO1xufTtcbiIsIi8vIFRoZSBub2RlIGFuZCBicm93c2VyIG1vZHVsZXMgZXhwb3NlIHZlcnNpb25zIG9mIHRoaXMgd2l0aCB0aGVcbi8vIGFwcHJvcHJpYXRlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGJvdW5kIGFzIGZpcnN0IGFyZ3VtZW50XG4vKipcbiAqIElzc3VlIGEgcmVxdWVzdDpcbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICByZXF1ZXN0KCdHRVQnLCAnL3VzZXJzJykuZW5kKGNhbGxiYWNrKVxuICogICAgcmVxdWVzdCgnL3VzZXJzJykuZW5kKGNhbGxiYWNrKVxuICogICAgcmVxdWVzdCgnL3VzZXJzJywgY2FsbGJhY2spXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZFxuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHVybCBvciBjYWxsYmFja1xuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gcmVxdWVzdChSZXF1ZXN0Q29uc3RydWN0b3IsIG1ldGhvZCwgdXJsKSB7XG4gIC8vIGNhbGxiYWNrXG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiB1cmwpIHtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3RDb25zdHJ1Y3RvcignR0VUJywgbWV0aG9kKS5lbmQodXJsKTtcbiAgfVxuXG4gIC8vIHVybCBmaXJzdFxuICBpZiAoMiA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0Q29uc3RydWN0b3IoJ0dFVCcsIG1ldGhvZCk7XG4gIH1cblxuICByZXR1cm4gbmV3IFJlcXVlc3RDb25zdHJ1Y3RvcihtZXRob2QsIHVybCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWVzdDtcbiIsIm1vZHVsZS5leHBvcnRzPXtcbiAgXCJuYW1lXCI6IFwidmh4LWpzXCIsXG4gIFwidmVyc2lvblwiOiBcIjAuMC4xXCIsXG4gIFwiZGVzY3JpcHRpb25cIjogXCJWSFggSmF2YXNjcmlwdCBTREtcIixcbiAgXCJtYWluXCI6IFwidmh4LmpzXCIsXG4gIFwic2NyaXB0c1wiOiB7XG4gICAgXCJ0ZXN0XCI6IFwiZWNobyBcXFwiRXJyb3I6IG5vIHRlc3Qgc3BlY2lmaWVkXFxcIiAmJiBleGl0IDFcIlxuICB9LFxuICBcImF1dGhvclwiOiBcIkRhdmlkIEdvbnphbGV6XCIsXG4gIFwibGljZW5zZVwiOiBcIklTQ1wiLFxuICBcImRldkRlcGVuZGVuY2llc1wiOiB7XG4gICAgXCJiYWJlbC1jbGlcIjogXCJeNi4xMS40XCIsXG4gICAgXCJiYWJlbC1wcmVzZXQtZXMyMDE1XCI6IFwiXjYuOS4wXCIsXG4gICAgXCJiYWJlbGlmeVwiOiBcIl43LjMuMFwiLFxuICAgIFwiYnJvd3NlcmlmeVwiOiBcIl4xMy4xLjBcIixcbiAgICBcImd1bHBcIjogXCJeMy45LjFcIixcbiAgICBcImd1bHAtYmFiZWxcIjogXCJeNi4xLjJcIixcbiAgICBcImd1bHAtYnJvd3NlcmlmeVwiOiBcIl4wLjUuMVwiLFxuICAgIFwiZ3VscC1saXZlcmVsb2FkXCI6IFwiXjMuOC4xXCIsXG4gICAgXCJndWxwLXNvdXJjZW1hcHNcIjogXCJeMS42LjBcIixcbiAgICBcImd1bHAtdWdsaWZ5XCI6IFwiXjEuNS40XCIsXG4gICAgXCJzdXBlcmFnZW50XCI6IFwiXjIuMS4wXCIsXG4gICAgXCJ2aW55bC1idWZmZXJcIjogXCJeMS4wLjBcIixcbiAgICBcInZpbnlsLXNvdXJjZS1zdHJlYW1cIjogXCJeMS4xLjBcIlxuICB9XG59XG4iXX0=\n"],"sourceRoot":"/source/"}